(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"+1k7":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniSlidedownComponent=void 0,n("fXoL");var o=n("fXoL"),r=n("ofXK");function i(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",3),o.\u0275\u0275projection(1,1),o.\u0275\u0275elementEnd())}var a=[[["header"]],[["content"]]],c=["header","content"];t.TniSlidedownComponent=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-slide-down"]],inputs:{header:"header",isOpen:"isOpen",ariaLabel:"ariaLabel"},ngContentSelectors:c,decls:4,vars:4,consts:[[1,"accordion"],[1,"accordion-header"],["class","accordion-panel",4,"ngIf"],[1,"accordion-panel"]],template:function(e,t){1&e&&(o.\u0275\u0275projectionDef(a),o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275projection(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,i,2,0,"div",2),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275attribute("aria-label",t.ariaLabel)("aria-expanded",t.isOpen)("aria-selected",t.isOpen),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",t.isOpen))},directives:[r.NgIf],styles:[".accordion[_ngcontent-%COMP%]{display:flex;flex-direction:column}.accordion-header[_ngcontent-%COMP%]{position:relative;margin:0;font-size:14px}.accordion-header[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{text-decoration:none}.accordion-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;padding:7px 12px;color:#555;font-size:14px;height:39px;text-align:left;border-radius:0;margin:0}.accordion-header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:absolute;top:9px;right:5px;width:25px;height:25px;z-index:1;cursor:pointer}"]}),e}()},"+AZU":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniFormComponentsModule=void 0,n("fXoL");var o=n("3Pt+"),r=(n("4ti1"),n("RJWm"),n("hBxx"),n("ofXK")),i=n("+gHY"),a=n("7aLH"),c=n("E8FH"),s=n("lTWT"),l=n("khGg"),d=n("h88C"),p=(n("amr8"),n("Pxei")),u=n("NKuO"),m=(n("54GQ"),n("sDue")),f=n("pc1u"),g=n("AQDy"),h=n("fXoL");t.TniFormComponentsModule=function(){function e(){}return e.\u0275mod=h.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=h.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[r.CommonModule,i.FormInputModule,o.FormsModule,a.FormSelectInputModule,l.TniOptionModule,d.OpalServicesModule,c.TniCardNumberModule,s.TniCardCodeModule,p.TniFormMessageModule,u.TniIconModule,m.FormCheckboxModule,f.TniModalModule,g.FeatureToggleDirectiveModule]]}),e}()},"+MuE":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerErrorInterceptor=void 0;var o=n("kU1M"),r=n("qCKp"),i=(n("fXoL"),n("tk/3")),a=(n("5Jp9"),n("84CM"),n("fXoL")),c=n("5Jp9"),s=n("84CM");t.ServerErrorInterceptor=function(){function e(e,t){this.serverErrorService=e,this.logoutService=t}return e.prototype.intercept=function(e,t){var n=this;return t.handle(e).pipe(o.map(function(e){if(e instanceof i.HttpResponse&&e.headers.has("scope")&&"oob"===e.headers.get("scope").toLowerCase())throw n.serverErrorService.attachServerErrorToBody(),r.throwError("error scope:oob");return e}),o.catchError(function(t){return n.isOpalApi(e.url)&&(!n.isOpalLoginOrLogoutApi(e.url)&&n.isUnauthorisedError(t.status)?n.logoutService.logout(!0):!n.isServerError(t.status)&&!n.isUnknownError(t.status)||n.isToggleApi(e.url)||n.serverErrorService.attachServerErrorToBody()),r.throwError(t)}))},e.prototype.isOpalApi=function(e){return-1!==e.indexOf("/api/opal")},e.prototype.isOpalLoginOrLogoutApi=function(e){return"/api/opal/login"===e||"/api/opal/opal-login"===e||"/api/opal/logout"===e},e.prototype.isToggleApi=function(e){return e.indexOf("/toggles")>0},e.prototype.isServerError=function(e){return e>=500&&e<=599},e.prototype.isUnauthorisedError=function(e){return 401===e},e.prototype.isUnknownError=function(e){return 0===e},e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275inject(c.ServerErrorService),a.\u0275\u0275inject(s.LogoutService))},e.\u0275prov=a.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},"+gHY":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputModule=void 0,n("fXoL");var o=n("ofXK"),r=(n("jbib"),n("3Pt+")),i=n("fXoL");t.FormInputModule=function(){function e(){}return e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule,r.ReactiveFormsModule]]}),e}()},"+xla":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniPanelGroupComponent=void 0,n("fXoL");var o=n("SPMH"),r=n("u1nx"),i=(n("0ywJ"),n("fXoL")),a=n("0ywJ"),c=["*"];t.TniPanelGroupComponent=function(){function e(e,t){this.panelRefreshService=e,this.cdRef=t,this.closed=!0,this.height=this.height?this.height:330}return e.prototype.ngAfterContentInit=function(){var e=this;this.panelRefreshService&&this.panelRefreshService.panelRefresh&&this.panelRefreshService.panelRefresh.subscribe(function(){e.panels.forEach(function(t){t.active&&e.setHeight(t)})}),this.navItems.toArray().forEach(function(t){t.linkClicked.subscribe(function(t){t===e.activePanelId?e.closeActivePanel():(e.closed=!1,e.changeActivePanel(t))})}),this.panels.toArray().forEach(function(t){t.closePanel.subscribe(function(){return e.closeActivePanel()})}),this.panelRefreshService.activePanel&&(this.activePanelSubscription=this.panelRefreshService.activePanel.subscribe(function(t){t?e.changeActivePanel(t):e.closeActivePanel()}))},e.prototype.ngOnDestroy=function(){this.cdRef.detach(),this.activePanelSubscription&&this.activePanelSubscription.unsubscribe()},e.prototype.changeActivePanel=function(e){var t=this;setTimeout(function(){t.isChanged||(t.navItems.forEach(function(t){t.active=t.targetsPanel===e}),t.panels.forEach(function(n){n.active=e===n.panelId,n.active&&(t.setHeight(n),t.closed=!1,t.cdRef.detectChanges())}),t.activePanelId=e)},10)},e.prototype.closeActivePanel=function(){this.isChanged||(this.closed=!0,this.navItems.forEach(function(e){return e.active=!1}),this.panels.forEach(function(e){return e.active=!1}),this.setHeight(),this.activePanelId="")},e.prototype.setHeight=function(e){var t=this;setTimeout(function(){t.height=e&&e.panelEl?e.panelEl.nativeElement.clientHeight:800})},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(a.TniPanelRefreshService),i.\u0275\u0275directiveInject(i.ChangeDetectorRef))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tni-panel-group"]],contentQueries:function(e,t,n){if(1&e&&(i.\u0275\u0275contentQuery(n,o.TniPanelComponent,!0),i.\u0275\u0275contentQuery(n,r.TniPanelNavComponent,!0)),2&e){var a=void 0;i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(t.panels=a),i.\u0275\u0275queryRefresh(a=i.\u0275\u0275loadQuery())&&(t.navItems=a)}},inputs:{height:"height",isChanged:"isChanged"},ngContentSelectors:c,decls:3,vars:6,consts:[[1,"panel-group"],[1,"col-sm-4","panel-group__column"]],template:function(e,t){1&e&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275projection(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275styleProp("min-height",t.height,"px"),i.\u0275\u0275classProp("panel-group--closed",t.closed),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("panel-group__column--closed",t.closed))},styles:[".panel-group[_ngcontent-%COMP%]{position:relative;margin:24px 0;min-height:500px;padding:0 0 3px;overflow:hidden;box-sizing:content-box}.panel-group__column[_ngcontent-%COMP%]{min-height:1px;position:static;transition:width .2s ease-in}@media (min-width:768px){.panel-group__column[_ngcontent-%COMP%]{transition:width .2s ease-in}.panel-group[_ngcontent-%COMP%]{transition:padding .2s ease-in,min-height 1s ease-in-out}.panel-group--closed[_ngcontent-%COMP%]{padding:0 10%}.panel-group__column--closed[_ngcontent-%COMP%]{width:100%}}@media (min-width:768px) and (max-width:992px){.panel-group--closed[_ngcontent-%COMP%]{padding:0}}@media (min-width:992px){.panel-group--closed[_ngcontent-%COMP%]{padding:0 7.264%}}@media (min-width:1200px){.panel-group--closed[_ngcontent-%COMP%]{padding:0 185px}}"]}),e}()},0:function(e,t,n){e.exports=n("zUnb")},"09AV":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardNumberComponent=void 0;var o=n("fXoL"),r=n("3Pt+"),i=n("j+Iq"),a=n("RRJJ"),c=n("U+qi"),s=n("fXoL"),l=n("ofXK"),d=n("3Pt+"),p=["smartcardIdPrefix"],u=["smartcardIdInput"];function m(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"label",8),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),2&e){var n=s.\u0275\u0275nextContext(2);s.\u0275\u0275property("for",n.inputId),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate(n.labelText)}}function f(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"p"),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,o=s.\u0275\u0275nextContext(3);s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate(o.getErrorMessage(n))}}function g(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"div",9),s.\u0275\u0275template(1,f,2,1,"p",10),s.\u0275\u0275elementEnd()),2&e){var n=s.\u0275\u0275nextContext(2);s.\u0275\u0275advance(1),s.\u0275\u0275property("ngForOf",n.getErrors())}}function h(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div",3),s.\u0275\u0275elementStart(1,"input",4,5),s.\u0275\u0275listener("keyup",function(e){s.\u0275\u0275restoreView(n);var t=s.\u0275\u0275nextContext();return t.onKeyUp(e,t.formattedCardNo)})("keydown",function(e){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().onKeyDown(e)})("focus",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().cardNumberOnFocus()})("blur",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().onInputBlur()})("ngModelChange",function(e){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().formattedCardNo=e}),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(3,m,2,2,"label",6),s.\u0275\u0275template(4,g,2,1,"div",7),s.\u0275\u0275elementEnd()}if(2&e){var o=s.\u0275\u0275nextContext();s.\u0275\u0275advance(1),s.\u0275\u0275classProp("hasValue",!!o.formattedCardNo)("error",o.errorMessage),s.\u0275\u0275propertyInterpolate1("title","",o.ariaPrefix," Enter your sixteen digit card number"),s.\u0275\u0275property("formControl",o.control)("maxlength",19)("id",o.inputId)("ngModel",o.formattedCardNo),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",o.labelText),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",o.control.errors&&o.control.dirty&&o.customDirty)}}function v(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"label",8),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),2&e){var n=s.\u0275\u0275nextContext(2);s.\u0275\u0275property("for",n.inputId),s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate(n.labelText)}}function C(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"input",11,5),s.\u0275\u0275listener("ngModelChange",function(e){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().formattedCardNo=e})("keyup",function(e){s.\u0275\u0275restoreView(n);var t=s.\u0275\u0275nextContext();return t.onKeyUp(e,t.formattedCardNo)})("keydown",function(e){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().onKeyDown(e)})("focus",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().cardNumberOnFocus()})("blur",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().onInputBlur()}),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(2,v,2,2,"label",6)}if(2&e){var o=s.\u0275\u0275nextContext();s.\u0275\u0275classProp("hasValue",!!o.formattedCardNo)("error",o.errorMessage),s.\u0275\u0275propertyInterpolate1("title","",o.ariaPrefix," Enter your sixteen digit card number"),s.\u0275\u0275property("ngModel",o.formattedCardNo)("maxlength",19)("id",o.inputId),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",o.labelText)}}function _(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"div",12),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),2&e){var n=s.\u0275\u0275nextContext();s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate(n.errorText)}}t.CardNumberComponent=function(){function e(){var e=this;this.keyDownCardNumber=new o.EventEmitter,this.onFocus=new o.EventEmitter,this.onBlur=new o.EventEmitter,this.cardNumberPipe=new c.OpalCardNumberPipe,this.ctrlDown=!1,this.EventKeyCodeEnum=i.EventKeyCodeEnum,this.customDirty=!1,this.propagateChange=function(e){},this.writeValue=function(t){e.ngModel=t},this.registerOnChange=function(t){e.propagateChange=t},this.registerOnTouched=function(){}}return e.prototype.ngOnChanges=function(e){this.setFormattedNumber(this.ngModel)},e.prototype.cardNumberOnFocus=function(){this.onFocus.emit(a.LoginFieldEnum.CardNumber)},e.prototype.onKeyDown=function(e){var t=String.fromCharCode(e.charCode?e.charCode:e.which),n=((this.formattedCardNo||"").split(" ").join("")+t).trim();e.keyCode!==i.EventKeyCodeEnum.ctrlKey&&e.keyCode!==i.EventKeyCodeEnum.cmdKey||(this.ctrlDown=!0),e.keyCode===i.EventKeyCodeEnum.leftKey||e.keyCode===i.EventKeyCodeEnum.rightKey||e.keyCode===i.EventKeyCodeEnum.backSpaceKey||!isNaN(Number(n))||this.ctrlDown&&(e.keyCode===i.EventKeyCodeEnum.aKey||e.keyCode===i.EventKeyCodeEnum.vKey||e.keyCode===i.EventKeyCodeEnum.cKey||e.keyCode===i.EventKeyCodeEnum.xKey)||e.keyCode>=96&&e.keyCode<=105||e.preventDefault()},e.prototype.onKeyUp=function(e,t){if(void 0!==t){var n=(t=t.replace(/\D/g,"")).split(" ").join("");e.keyCode!==i.EventKeyCodeEnum.ctrlKey&&e.keyCode!==i.EventKeyCodeEnum.cmdKey||(this.ctrlDown=!1),this.setFormattedNumber(n),this.keyDownCardNumber.emit(this.formattedCardNo.split(" ").join(""))}},e.prototype.onInputBlur=function(){this.customDirty=!!this.formattedCardNo,this.propagateChange(this.ngModel),this.onBlur.emit()},e.prototype.setFormattedNumber=function(e){this.formattedCardNo=this.cardNumberPipe.transform(e)},e.prototype.focus=function(){this.smartcardIdInput.nativeElement.focus()},e.prototype.validate=function(e){return this.ngModel&&16!==this.ngModel.length?{valid:!1}:null},e.prototype.getErrorMessage=function(e){return this.errorMap?this.errorMap[e]:""},e.prototype.getErrors=function(){return this.control.errors?Object.keys(this.control.errors).map(function(e){return e}):[]},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.\u0275\u0275defineComponent({type:e,selectors:[["card-number"]],viewQuery:function(e,t){if(1&e&&(s.\u0275\u0275viewQuery(p,!0),s.\u0275\u0275viewQuery(u,!0)),2&e){var n=void 0;s.\u0275\u0275queryRefresh(n=s.\u0275\u0275loadQuery())&&(t.smartcardIdPrefix=n.first),s.\u0275\u0275queryRefresh(n=s.\u0275\u0275loadQuery())&&(t.smartcardIdInput=n.first)}},inputs:{ngModel:"ngModel",errorMessage:"errorMessage",ariaPrefix:"ariaPrefix",inputId:"inputId",labelText:"labelText",errorText:"errorText",control:"control",errorMap:"errorMap"},outputs:{keyDownCardNumber:"keyDownCardNumber",onFocus:"onFocus",onBlur:"onBlur"},features:[s.\u0275\u0275ProvidersFeature([{provide:r.NG_VALUE_ACCESSOR,useExisting:o.forwardRef(function(){return e}),multi:!0},{provide:r.NG_VALIDATORS,useExisting:o.forwardRef(function(){return e}),multi:!0}]),s.\u0275\u0275NgOnChangesFeature],decls:4,vars:3,consts:[["class","card-number-control",4,"ngIf","ngIfElse"],["templateDriven",""],["class","md-input__error-message",4,"ngIf"],[1,"card-number-control"],["type","text","name","smartcardId","autocomplete","off",1,"form-input__input","form-input--text",3,"formControl","maxlength","title","id","ngModel","keyup","keydown","focus","blur","ngModelChange"],["smartcardIdInput",""],["class","md-input__label",3,"for",4,"ngIf"],["class","form-input__error-message",4,"ngIf"],[1,"md-input__label",3,"for"],[1,"form-input__error-message"],[4,"ngFor","ngForOf"],["type","text","name","smartcardId","autocomplete","off",1,"md-input",3,"ngModel","maxlength","title","id","ngModelChange","keyup","keydown","focus","blur"],[1,"md-input__error-message"]],template:function(e,t){if(1&e&&(s.\u0275\u0275template(0,h,5,11,"div",0),s.\u0275\u0275template(1,C,3,9,"ng-template",null,1,s.\u0275\u0275templateRefExtractor),s.\u0275\u0275template(3,_,2,1,"div",2)),2&e){var n=s.\u0275\u0275reference(2);s.\u0275\u0275property("ngIf",t.control)("ngIfElse",n),s.\u0275\u0275advance(3),s.\u0275\u0275property("ngIf",t.errorText)}},directives:[l.NgIf,d.DefaultValueAccessor,d.NgControlStatus,d.FormControlDirective,d.MaxLengthValidator,l.NgForOf,d.NgModel],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{display:block;margin-top:0;background:none;padding:2px 2px 5px;height:35px;border-radius:0;border:solid #555;border-width:0 0 1px;width:100%;float:left;color:#555;font-weight:400;font-size:16px}@media (max-width:767px){[_nghost-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px}}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:none}[_nghost-%COMP%]   input.error[_ngcontent-%COMP%]{border-color:#c41f3d}.enhanced[_nghost-%COMP%]{margin-bottom:10px;display:flex;position:relative;padding:25px 0;vertical-align:middle}.enhanced__label[_nghost-%COMP%]{font-weight:300;position:absolute;bottom:100%;right:auto;color:#999e9f;top:28px;left:5px;font-size:16px;transition:.3s}input:focus + .enhanced__label[_nghost-%COMP%]{top:0;left:0;font-size:14px}select:focus + .enhanced__label[_nghost-%COMP%]{top:0;left:0;font-size:14px;transition:.3s}.hasValue + .enhanced__label[_nghost-%COMP%]{top:0;left:0;font-size:14px;transition:0s}.error + .enhanced__label[_nghost-%COMP%], .enhanced.error[_nghost-%COMP%]   -shadowcsscontext.enhanced__label[_ngcontent-%COMP%], .enhanced__label__mandatory[_nghost-%COMP%]{color:#c41f3d}.enhanced.hasValue__label[_nghost-%COMP%]{top:0;left:0;font-size:14px;transition:0s}.enhanced__input[_nghost-%COMP%]{display:block;margin-top:0;background:none;padding:2px 2px 5px;height:35px;border-radius:0;border:solid #555;border-width:0 0 1px;width:100%;float:left;color:#555;font-weight:400;font-size:16px}@media (max-width:767px){.enhanced__input[_nghost-%COMP%]{font-size:16px}}.enhanced__input[_nghost-%COMP%]:focus{box-shadow:none}.enhanced__input[type=number][_nghost-%COMP%]:out-of-range{color:red}.enhanced__input[type=number][_nghost-%COMP%]::-webkit-inner-spin-button, .enhanced__input[type=number][_nghost-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.enhanced__error-message[_nghost-%COMP%]{display:none}.error + label + .enhanced__error-message[_nghost-%COMP%]{display:block;position:absolute;top:78px;left:2px;font-size:12px;color:#c41f3d}.enhanced__help[_nghost-%COMP%]{display:block;position:absolute;top:78px;left:2px;font-size:12px;color:#c41f3d;display:none;color:#999}.form-input__label + .enhanced__help[_nghost-%COMP%]{display:block}.enhanced__input[_nghost-%COMP%]{float:none;padding-bottom:0}.enhanced__label[_nghost-%COMP%]{top:41px;left:15px}.error + label + .enhanced__error-message[_nghost-%COMP%], .enhanced__help[_nghost-%COMP%]{position:static}.enhanced__input[_nghost-%COMP%]{border:solid #1c1c1b;border-width:0 0 2px;background-color:#f9f9f9;border-radius:4px;padding:13px 16px;height:56px;box-sizing:border-box}.enhanced__input[_nghost-%COMP%]:focus{border-width:1px 1px 2px}.enhanced[_nghost-%COMP%]   input[_ngcontent-%COMP%]{display:block;margin-top:0;background:none;height:35px;border-radius:0;width:100%;float:left;color:#555;font-weight:400;font-size:16px;border:solid #1c1c1b;border-width:0 0 2px;background-color:#f9f9f9;border-radius:4px;padding:13px 16px;height:56px;box-sizing:border-box}@media (max-width:767px){.enhanced[_nghost-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px}}.enhanced[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:none;border-width:1px 1px 2px}.enhanced[_nghost-%COMP%]   .md-input__label[_ngcontent-%COMP%]{font-weight:300;position:absolute;bottom:100%;right:auto;color:#999e9f;top:28px;left:5px;font-size:16px;transition:.3s;top:41px;left:15px}input:focus + .enhanced[_nghost-%COMP%]   .md-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px}select:focus + .enhanced[_nghost-%COMP%]   .md-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:.3s}.hasValue + .enhanced[_nghost-%COMP%]   .md-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:0s}.error + .enhanced[_nghost-%COMP%]   .md-input__label[_ngcontent-%COMP%], .enhanced[_nghost-%COMP%]   .md-input__label__mandatory[_ngcontent-%COMP%]{color:#c41f3d}.enhanced[_nghost-%COMP%]   .md-input__error-message[_ngcontent-%COMP%]{display:none}.error + label + .enhanced[_nghost-%COMP%]   .md-input__error-message[_ngcontent-%COMP%]{display:block;position:absolute;top:78px;left:2px;font-size:12px;color:#c41f3d;position:static}@media (min-width:992px){.enhanced.card-number[_nghost-%COMP%]{padding-right:24px}}@media (max-width:767px){.enhanced.card-number[_nghost-%COMP%]{padding-right:0}}.md-input__label[_ngcontent-%COMP%]{font-weight:300;position:absolute;bottom:100%;right:auto;color:#999e9f;top:28px;left:5px;font-size:16px;transition:.3s}input[_ngcontent-%COMP%]:focus + .md-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px}select[_ngcontent-%COMP%]:focus + .md-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:.3s}.hasValue[_ngcontent-%COMP%] + .md-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:0s}.error[_ngcontent-%COMP%] + .md-input__label[_ngcontent-%COMP%], .md-input__label__mandatory[_ngcontent-%COMP%]{color:#c41f3d}.md-input__error-message[_ngcontent-%COMP%]{display:none}.error[_ngcontent-%COMP%] + label[_ngcontent-%COMP%] + .md-input__error-message[_ngcontent-%COMP%]{display:block;position:absolute;top:78px;left:2px;font-size:12px;color:#c41f3d}.form-input__error-message[_ngcontent-%COMP%]{position:absolute;left:5px;top:75px}.form-input__error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:static;line-height:1.5;margin:1em 0;color:#c41f3d;font-size:12px}input.ng-invalid.ng-dirty[_ngcontent-%COMP%]{border-color:#c41f3d}.card-number-control[_ngcontent-%COMP%], .input-wrap[_ngcontent-%COMP%]{width:100%}"]}),e}()},"0bNP":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniRadioPanelModule=void 0,n("fXoL");var o=n("ofXK"),r=(n("LUra"),n("3Pt+")),i=n("fXoL");t.TniRadioPanelModule=function(){function e(){}return e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule,r.ReactiveFormsModule]]}),e}()},"0ruu":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ScrollService=void 0,n("fXoL"),n("xN0M");var o=n("fXoL"),r=n("xN0M");t.ScrollService=function(){function e(e){this.getViewportService=e}return e.prototype.scrollToElement=function(e,t){window.scroll(0,this.findPos(document.getElementById(e.id),t))},e.prototype.scrollToElementById=function(e,t){window.scroll(0,this.findPos(document.getElementById(e),t))},e.prototype.smoothScrollFocusToElementById=function(e,t,n){var o=document.getElementById(e),r=this.findPos(o,t);this.getViewportService.isMobile()?o.scrollIntoView({top:r,left:0,behavior:"smooth"}):window.scroll({top:r,left:0,behavior:"smooth"}),setTimeout(function(){document.getElementById(e).focus()},n)},e.prototype.focusElem=function(e){setTimeout(function(){document.getElementById(e).focus()})},e.prototype.findPos=function(e,t){var n=0;if(e.offsetParent){do{n+=e.offsetTop}while(e=e.offsetParent);return n-t}},e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(r.GetViewportService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},"0uEL":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContactlessComponent=void 0,n("fXoL"),n("tyNb"),n("fiHy");var o=n("fXoL"),r=n("tyNb"),i=n("fiHy"),a=n("E2dh"),c=n("ofXK");function s(e,t){1&e&&(o.\u0275\u0275elementStart(0,"h1"),o.\u0275\u0275text(1,"sorry something went wrong"),o.\u0275\u0275elementEnd())}t.ContactlessComponent=function(){function e(e,t){this.router=e,this.ctpAuthService=t,this.loading=!0,this.loadingError=!1,this.isAuthenticated=!1}return e.prototype.ngOnInit=function(){var e=this;this.router.routerState.snapshot.root.queryParams.nonce?this.ctpAuthService.authenticateCTP(this.router.routerState.snapshot.root.queryParams.nonce).subscribe(function(){e.resolveAuthentication()}):this.ctpAuthService.isCTPAuthenticated()?this.resolveAuthentication():(this.loading=!1,this.loadingError=!0)},e.prototype.resolveAuthentication=function(){this.loading=!1,this.isAuthenticated=this.ctpAuthService.isCTPAuthenticated()},e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(r.Router),o.\u0275\u0275directiveInject(i.CTPAuthService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["contactless"]],decls:3,vars:1,consts:[[4,"ngIf"]],template:function(e,t){1&e&&(o.\u0275\u0275elementStart(0,"tni-layout"),o.\u0275\u0275template(1,s,2,0,"h1",0),o.\u0275\u0275element(2,"router-outlet"),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.loadingError))},directives:[a.LayoutComponent,c.NgIf,r.RouterOutlet],styles:[""]}),e}()},"0ywJ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniPanelRefreshService=void 0,n("fXoL");var o=n("qCKp"),r=n("fXoL");t.TniPanelRefreshService=function(){function e(){this.panelRefresh=new o.Subject,this.activePanel=new o.Subject}return e.prototype.pushPanelRefreshEvent=function(){this.panelRefresh.next()},e.prototype.setActivePanel=function(e){this.activePanel.next(e)},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}()},"1+U/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlockCardComponent=void 0,n("fXoL"),n("tyNb"),n("QK+Z"),n("0ruu"),n("vRXg"),n("w4vn");var o=n("kU1M"),r=(n("NRRr"),n("3Pt+")),i=(n("YORH"),n("fXoL")),a=n("tyNb"),c=n("QK+Z"),s=n("0ruu"),l=n("vRXg"),d=n("w4vn"),p=n("NRRr"),u=n("YORH"),m=n("ofXK"),f=n("pxjO"),g=n("+1k7"),h=n("nOpk"),v=n("3Pt+"),C=n("gUXI"),_=n("Mp0x"),b=["confirmationHeader"],x=["transferHeader"],y=["blockHeader"],M=["blockAndTransferError"],P=["blockErrorHeaders"],O=["blockSuccessPanel"];function S(e,t){1&e&&(i.\u0275\u0275elementStart(0,"span",12),i.\u0275\u0275text(1,"1"),i.\u0275\u0275elementEnd())}function w(e,t){1&e&&(i.\u0275\u0275elementStart(0,"span"),i.\u0275\u0275text(1," and you will need to call to transfer the balance at a later date"),i.\u0275\u0275elementEnd())}function k(e,t){1&e&&(i.\u0275\u0275elementStart(0,"p"),i.\u0275\u0275text(1," You need another card to transfer the balance online. If you get an Opal card and link it to your account, you can block and transfer the balance at the same time, however if your card has been lost or stolen you should block it now, to protect the balance. "),i.\u0275\u0275elementEnd())}function E(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"p"),i.\u0275\u0275text(2," Your card will be "),i.\u0275\u0275elementStart(3,"strong"),i.\u0275\u0275text(4,"permanently blocked"),i.\u0275\u0275elementEnd(),i.\u0275\u0275text(5," so no one else can use it. You cannot unblock it at a later stage"),i.\u0275\u0275template(6,w,2,0,"span",1),i.\u0275\u0275text(7,". "),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(8,k,2,0,"p",1),i.\u0275\u0275elementContainerEnd()),2&e){var n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(6),i.\u0275\u0275property("ngIf",0!==n.totalBalance),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",0!==n.totalBalance)}}var T=function(){return["/account/cards"]},I=function(e){return{component:"auto-topup",action:"none",smartCard:e}};function A(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"p"),i.\u0275\u0275text(2," Your card will be "),i.\u0275\u0275elementStart(3,"strong"),i.\u0275\u0275text(4,"permanently blocked"),i.\u0275\u0275elementEnd(),i.\u0275\u0275text(5," so no one else can use it. You cannot unblock it at a later stage. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"p"),i.\u0275\u0275text(7," You can choose to transfer the total balance of your blocked card to another Opal card in your account. Auto top up settings will also be transferred at the same time. If you don\u2019t want to transfer these settings you can "),i.\u0275\u0275elementStart(8,"a",13),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(2).handleAutoTopupLinkClick()}),i.\u0275\u0275text(9,"Turn off auto top up"),i.\u0275\u0275elementEnd(),i.\u0275\u0275text(10," before you block this card. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){var o=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(8),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction0(2,T))("queryParams",i.\u0275\u0275pureFunction1(3,I,o.selectedCard.smartcardId))}}function N(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",17),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(3).progressTo("transfer")}),i.\u0275\u0275text(1,"Next"),i.\u0275\u0275elementEnd()}}function L(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",17),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(3).blockOnly()}),i.\u0275\u0275text(1,"Block card"),i.\u0275\u0275elementEnd()}}function R(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",14),i.\u0275\u0275template(1,N,2,0,"button",15),i.\u0275\u0275template(2,L,2,0,"button",15),i.\u0275\u0275elementStart(3,"button",16),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(2).cancelBlock("initial")}),i.\u0275\u0275text(4,"Cancel"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!o.cantTransfer),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",o.cantTransfer)}}function j(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"li",25),i.\u0275\u0275elementContainerEnd()),2&e){var n=t.$implicit,o=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(1),i.\u0275\u0275property("card",n)("control",o.transferCardControls)}}function F(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"ul",23),i.\u0275\u0275template(1,j,2,2,"ng-container",24),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",n.transferableCards)}}function V(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",14),i.\u0275\u0275elementStart(1,"button",17),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(3).progressTo("confirmation")}),i.\u0275\u0275text(2," Next "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"button",16),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(3).cancelBlock("choose card")}),i.\u0275\u0275text(4,"Cancel"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275attribute("disabled",o.transferCardControls.value?null:"disabled")}}function D(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tni-page-frame",2),i.\u0275\u0275elementStart(1,"tni-slide-down",3),i.\u0275\u0275elementStart(2,"header"),i.\u0275\u0275elementStart(3,"div",18,19),i.\u0275\u0275elementStart(5,"span",12),i.\u0275\u0275text(6,"2"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"h2",7),i.\u0275\u0275text(8,"Transfer balance"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"content"),i.\u0275\u0275elementStart(10,"div",8),i.\u0275\u0275elementStart(11,"p"),i.\u0275\u0275text(12," You can transfer the remaining balance of this card to another Opal card. Make sure you don\u2019t exceed the "),i.\u0275\u0275elementStart(13,"a",20),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(2).handleMaxBalanceLinkClick()}),i.\u0275\u0275text(14,"maximum balance"),i.\u0275\u0275elementEnd(),i.\u0275\u0275text(15," of the card you choose. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(16,"p"),i.\u0275\u0275text(17,"Balances shown include the card balance plus any pending balance."),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(18,"form",21),i.\u0275\u0275template(19,F,2,1,"ul",22),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(20,V,5,1,"div",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("fullBleed",!0),i.\u0275\u0275advance(1),i.\u0275\u0275property("isOpen","block"!==o.progress),i.\u0275\u0275advance(17),i.\u0275\u0275property("formGroup",o.transferCardFormGroup),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",o.cards),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","transfer"===o.progress)}}function B(e,t){1&e&&(i.\u0275\u0275elementStart(0,"span",34),i.\u0275\u0275text(1,"Block"),i.\u0275\u0275elementEnd())}function U(e,t){1&e&&(i.\u0275\u0275elementStart(0,"span",34),i.\u0275\u0275text(1,"Transfer from"),i.\u0275\u0275elementEnd())}function X(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",35),i.\u0275\u0275elementStart(1,"span",34),i.\u0275\u0275text(2,"Transfer to:"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(3,"tni-icon",36),i.\u0275\u0275element(4,"div",9),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275nextContext(4);i.\u0275\u0275advance(3),i.\u0275\u0275property("iconAriaHidden",!0),i.\u0275\u0275advance(1),i.\u0275\u0275property("card",n.getSelectedTransferCard())}}function z(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",37),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(4).blockAndTransfer()}),i.\u0275\u0275text(1," Block and transfer "),i.\u0275\u0275elementEnd()}}function q(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",8),i.\u0275\u0275template(1,B,2,0,"span",29),i.\u0275\u0275template(2,U,2,0,"span",29),i.\u0275\u0275element(3,"div",30),i.\u0275\u0275template(4,X,5,2,"div",31),i.\u0275\u0275elementStart(5,"div",14),i.\u0275\u0275template(6,z,2,0,"button",32),i.\u0275\u0275elementStart(7,"button",33),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(3).cancelBlock("confirmation")}),i.\u0275\u0275text(8,"Cancel"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!o.shouldTransfer),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",o.shouldTransfer),i.\u0275\u0275advance(1),i.\u0275\u0275property("card",o.selectedCard),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",o.shouldTransfer),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",o.shouldTransfer)}}function H(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"tni-page-frame",2),i.\u0275\u0275elementStart(1,"tni-slide-down",3),i.\u0275\u0275elementStart(2,"header"),i.\u0275\u0275elementStart(3,"div",26,27),i.\u0275\u0275elementStart(5,"span",12),i.\u0275\u0275text(6,"3"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"h2",7),i.\u0275\u0275text(8,"Confirm"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"content"),i.\u0275\u0275template(10,q,9,5,"div",28),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("fullBleed",!0),i.\u0275\u0275advance(1),i.\u0275\u0275property("isOpen","confirmation"===n.progress),i.\u0275\u0275advance(9),i.\u0275\u0275property("ngIf","confirmation"===n.progress)}}function K(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tni-page-frame",2),i.\u0275\u0275elementStart(2,"tni-slide-down",3),i.\u0275\u0275elementStart(3,"header"),i.\u0275\u0275elementStart(4,"div",4,5),i.\u0275\u0275template(6,S,2,0,"span",6),i.\u0275\u0275elementStart(7,"h2",7),i.\u0275\u0275text(8,"Block a lost or stolen card"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"content"),i.\u0275\u0275elementStart(10,"div",8),i.\u0275\u0275element(11,"div",9),i.\u0275\u0275template(12,E,9,2,"ng-container",1),i.\u0275\u0275template(13,A,11,5,"ng-container",1),i.\u0275\u0275template(14,R,5,2,"div",10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(15,D,21,5,"tni-page-frame",11),i.\u0275\u0275template(16,H,11,3,"tni-page-frame",11),i.\u0275\u0275elementContainerEnd()),2&e){var n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("fullBleed",!0),i.\u0275\u0275advance(1),i.\u0275\u0275property("isOpen",!0),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("block-card__header--block-only",n.cantTransfer),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",!n.cantTransfer),i.\u0275\u0275advance(5),i.\u0275\u0275property("card",n.selectedCard),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.cantTransfer),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!n.cantTransfer),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf","block"===n.progress),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!n.cantTransfer),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!n.cantTransfer)}}function Y(e,t){1&e&&(i.\u0275\u0275elementStart(0,"p"),i.\u0275\u0275text(1," To transfer the balance of a blocked card call "),i.\u0275\u0275elementStart(2,"strong",42),i.\u0275\u0275text(3,"13 67 25 (13 OPAL)"),i.\u0275\u0275elementEnd(),i.\u0275\u0275text(4,". "),i.\u0275\u0275elementEnd())}function Q(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275elementStart(1,"h2",7),i.\u0275\u0275text(2,"Block card successful"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,Y,5,0,"p",1),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",0!==n.totalBalance)}}function G(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275elementStart(1,"h2",7),i.\u0275\u0275text(2,"Block and transfer successful"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"div",43),i.\u0275\u0275text(4),i.\u0275\u0275pipe(5,"centsToDollar"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",44),i.\u0275\u0275text(7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"p"),i.\u0275\u0275text(9," Your Opal Card is now blocked and the balance will be transferred after 24 hours. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"p"),i.\u0275\u0275text(11," After 24 hours, you will need to tap on at an Opal reader within 60 days to complete the transfer. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(5,2,n.totalBalance)," "),i.\u0275\u0275advance(3),i.\u0275\u0275textInterpolate1("Reference number: ",n.referenceNumber,"")}}function W(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tni-page-frame"),i.\u0275\u0275elementStart(1,"div",38,39),i.\u0275\u0275element(3,"tni-icon",40),i.\u0275\u0275template(4,Q,4,1,"div",1),i.\u0275\u0275template(5,G,12,4,"div",1),i.\u0275\u0275elementStart(6,"div",14),i.\u0275\u0275elementStart(7,"button",41),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().backToCards()}),i.\u0275\u0275text(8,"Done"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext();i.\u0275\u0275advance(4),i.\u0275\u0275property("ngIf",o.blockSuccess),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",o.blockAndTransferSuccess)}}function J(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tni-page-frame"),i.\u0275\u0275elementStart(1,"div",45),i.\u0275\u0275element(2,"tni-icon",46),i.\u0275\u0275elementStart(3,"h2",47,48),i.\u0275\u0275text(5,"Block card unsuccessful"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"p"),i.\u0275\u0275text(7," We were unable to block this card. Please try again later or call "),i.\u0275\u0275elementStart(8,"strong",42),i.\u0275\u0275text(9,"13 67 25 (13 OPAL)"),i.\u0275\u0275elementEnd(),i.\u0275\u0275text(10,". "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"div",14),i.\u0275\u0275elementStart(12,"button",41),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().cancelBlock("block error")}),i.\u0275\u0275text(13,"Done"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}}function Z(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",51),i.\u0275\u0275element(1,"tni-icon",46),i.\u0275\u0275elementStart(2,"h2",47,52),i.\u0275\u0275text(4,"Block and transfer unsuccessful"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"p"),i.\u0275\u0275text(6,"Unable to transfer balance."),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"div",14),i.\u0275\u0275elementStart(8,"button",53),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(2).blockOnly()}),i.\u0275\u0275text(9," Just block this card "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"button",33),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(2).cancelBlock("block transfer error")}),i.\u0275\u0275text(11,"Cancel"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}}function $(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",54),i.\u0275\u0275element(1,"tni-icon",46),i.\u0275\u0275elementStart(2,"h2",47,52),i.\u0275\u0275text(4,"Block and transfer unsuccessful"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"p"),i.\u0275\u0275text(6,"Choose another card to transfer to or just block this card."),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"div",14),i.\u0275\u0275elementStart(8,"button",55),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(2).chooseAnotherCard()}),i.\u0275\u0275text(9,"Choose another card"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"button",56),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(2).blockOnly()}),i.\u0275\u0275text(11," Just block this card "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"button",33),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(2).cancelBlock("block transfer error")}),i.\u0275\u0275text(13,"Cancel"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}}function ee(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"tni-page-frame"),i.\u0275\u0275template(1,Z,12,0,"div",49),i.\u0275\u0275template(2,$,14,0,"div",50),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.transferableCards.length<=1),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.transferableCards.length>1)}}function te(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tni-page-frame"),i.\u0275\u0275elementStart(1,"div",45),i.\u0275\u0275elementStart(2,"p"),i.\u0275\u0275text(3,"Problem blocking card"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",14),i.\u0275\u0275elementStart(5,"button",41),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().cancelBlock("error")}),i.\u0275\u0275text(6,"Back"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}}t.BlockCardComponent=function(){function e(e,t,n,o,r,i,a,c){this.activatedRoute=e,this.opalAccountStore=t,this.scrollService=n,this.router=o,this.balanceTransferService=r,this.hotlistService=i,this.loaderService=a,this.trackOpalEventService=c,this.progress="block",this.blockSuccess=!1,this.blockAndTransferSuccess=!1,this.blockError=!1,this.blockTransferError=!1,this.componentError=!1}return e.prototype.ngOnInit=function(){var e=this;this.cards=this.opalAccountStore.get().smartcards,this.transferCardControls=new r.FormControl,this.transferCardFormGroup=new r.FormGroup({transferCardControls:this.transferCardControls}),this.transferCardControls.valueChanges.subscribe(function(t){e.shouldTransfer="notransfer"!==t}),this.selectedCard=this.cards.find(function(t){return t.smartcardId.toString()===e.activatedRoute.snapshot.paramMap.get("cardNumber")}),this.selectedCard?(this.transferableCards=this.balanceTransferService.transferableCards(this.cards,this.selectedCard),this.totalBalance=(this.selectedCard.svBalance?this.selectedCard.svBalance:0)+(this.selectedCard.svPending?this.selectedCard.svPending:0),this.cantTransfer=0===this.transferableCards.length||0===this.totalBalance):this.componentError=!0},e.prototype.ngAfterViewInit=function(){this.focusOnElement("blockHeader")},e.prototype.focusOnElement=function(e){var t=this;setTimeout(function(){t[e]&&t[e].nativeElement.focus()})},e.prototype.progressTo=function(e){var t=this;this.progress=e,setTimeout(function(){t.scrollService.smoothScrollFocusToElementById("block-card-block--"+t.progress,70,0)},100),this.focusOnElement(e+"Header")},e.prototype.cancelBlock=function(e){this.trackOpalEventService.trackCancelButtons(e),this.backToCards()},e.prototype.backToCards=function(){this.router.navigateByUrl("/account/cards")},e.prototype.blockAndTransfer=function(){var e=this;this.trackOpalEventService.trackBlockTransferButton(),this.loaderService.display(!0),this.balanceTransferService.postBalanceTransfer({from:this.selectedCard.smartcardId,to:this.transferCardControls.value}).pipe(o.take(1)).subscribe(function(t){e.blockAndTransferSuccess=!0,e.loaderService.display(!1),e.referenceNumber=t.OrderId,e.focusOnElement("blockSuccessPanel")},function(t){e.loaderService.display(!1),e.blockTransferError=!0,e.focusOnElement("blockAndTransferError")})},e.prototype.blockOnly=function(){var e=this;this.trackOpalEventService.trackBlockCardButton(),this.loaderService.display(!0),this.hotlistService.postBlock(this.selectedCard.smartcardId).pipe(o.take(1),o.finalize(function(){e.blockTransferError=!1})).subscribe(function(){e.blockSuccess=!0,e.loaderService.display(!1),e.focusOnElement("blockSuccessPanel")},function(t){e.loaderService.display(!1),e.blockError=!0,e.focusOnElement("blockErrorHeader")})},e.prototype.handleAutoTopupLinkClick=function(){return this.trackOpalEventService.trackTurnOffAutoTopUpLinkOnStepOne(),!0},e.prototype.handleMaxBalanceLinkClick=function(){return this.trackOpalEventService.trackMaximumBalanceLinkOnStepTwo(),!0},e.prototype.chooseAnotherCard=function(){this.blockTransferError=!1,this.progressTo("transfer")},e.prototype.getSelectedTransferCard=function(){var e=this;return"notransfer"!==this.transferCardControls.value?this.cards.find(function(t){return t.smartcardId===e.transferCardControls.value}):null},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(a.ActivatedRoute),i.\u0275\u0275directiveInject(c.OpalAccountStore),i.\u0275\u0275directiveInject(s.ScrollService),i.\u0275\u0275directiveInject(a.Router),i.\u0275\u0275directiveInject(l.BalanceTransferService),i.\u0275\u0275directiveInject(d.HotlistService),i.\u0275\u0275directiveInject(p.LoaderService),i.\u0275\u0275directiveInject(u.TrackOpalEventService))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["block-card"]],viewQuery:function(e,t){if(1&e&&(i.\u0275\u0275viewQuery(b,!0),i.\u0275\u0275viewQuery(x,!0),i.\u0275\u0275viewQuery(y,!0),i.\u0275\u0275viewQuery(M,!0),i.\u0275\u0275viewQuery(P,!0),i.\u0275\u0275viewQuery(O,!0)),2&e){var n=void 0;i.\u0275\u0275queryRefresh(n=i.\u0275\u0275loadQuery())&&(t.confirmationHeader=n.first),i.\u0275\u0275queryRefresh(n=i.\u0275\u0275loadQuery())&&(t.transferHeader=n.first),i.\u0275\u0275queryRefresh(n=i.\u0275\u0275loadQuery())&&(t.blockHeader=n.first),i.\u0275\u0275queryRefresh(n=i.\u0275\u0275loadQuery())&&(t.blockAndTransferError=n.first),i.\u0275\u0275queryRefresh(n=i.\u0275\u0275loadQuery())&&(t.blockErrorHeader=n.first),i.\u0275\u0275queryRefresh(n=i.\u0275\u0275loadQuery())&&(t.blockSuccessPanel=n.first)}},decls:6,vars:5,consts:[[1,"block-card"],[4,"ngIf"],[3,"fullBleed"],[3,"isOpen"],["id","block-card-block--block","tabindex","-1",1,"block-card__header"],["blockHeader",""],["aria-hidden","true","class","block-card__header__number",4,"ngIf"],[1,"block-card__header__heading"],[1,"block-card__content"],["tni-card-item","",3,"card"],["class","block-card__actions",4,"ngIf"],[3,"fullBleed",4,"ngIf"],["aria-hidden","true",1,"block-card__header__number"],[3,"routerLink","queryParams","click"],[1,"block-card__actions"],["class","block-card__next",3,"click",4,"ngIf"],[1,"block-card__back-to-cards",3,"click"],[1,"block-card__next",3,"click"],["id","block-card-block--transfer","tabindex","-1",1,"block-card__header"],["transferHeader",""],["href","https://transportnsw.info/tickets-opal/opal/manage-your-opal-card/balance-transfers-blocked-cards","target","_blank",3,"click"],[3,"formGroup"],["class","block-card__card-list",4,"ngIf"],[1,"block-card__card-list"],[4,"ngFor","ngForOf"],["tni-card-item","",3,"card","control"],["id","block-card-block--confirmation","tabindex","-1",1,"block-card__header"],["confirmationHeader",""],["class","block-card__content",4,"ngIf"],["class","sr-only",4,"ngIf"],["tni-card-item","","classNames","block",3,"card"],["class","block-card__transfer-card",4,"ngIf"],["class","block-card__transfer",3,"click",4,"ngIf"],[1,"block-card__cancel",3,"click"],[1,"sr-only"],[1,"block-card__transfer-card"],["iconName","arrow_down2","iconClasses","xs",1,"block-card__transfer-card__icon",3,"iconAriaHidden"],[1,"block-card__transfer",3,"click"],["tabindex","-1",1,"block-card__success"],["blockSuccessPanel",""],["iconName","success","iconClasses","xl",1,"block-card__success-icon"],[1,"block-card__done",3,"click"],[1,"block-card__phone"],[1,"block-card__transfer-success__amount"],[1,"block-card__transfer-success__reference"],[1,"block-card__error"],["iconName","alert","iconClasses","xl",1,"block-card__alert-icon"],["tabindex","-1",1,"block-card__header__heading"],["blockErrorHeader",""],["class","block-card__error block-card__error--without-more-transferable-cards",4,"ngIf"],["class","block-card__error block-card__error--with-transferable-cards",4,"ngIf"],[1,"block-card__error","block-card__error--without-more-transferable-cards"],["blockAndTransferError",""],[1,"block-card__just-block","block-card__just-block--primary",3,"click"],[1,"block-card__error","block-card__error--with-transferable-cards"],[1,"block-card__choose",3,"click"],[1,"block-card__just-block","block-card__just-block--secondary",3,"click"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,K,17,11,"ng-container",1),i.\u0275\u0275template(2,W,9,2,"tni-page-frame",1),i.\u0275\u0275template(3,J,14,0,"tni-page-frame",1),i.\u0275\u0275template(4,ee,3,2,"tni-page-frame",1),i.\u0275\u0275template(5,te,7,0,"tni-page-frame",1),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!(t.blockSuccess||t.blockAndTransferSuccess||t.blockError||t.blockTransferError||t.componentError)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",(t.blockSuccess||t.blockAndTransferSuccess)&&!t.blockError&&!t.blockTransferError&&!t.componentError),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.blockError),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.blockTransferError),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.componentError))},directives:[m.NgIf,f.PageFrameComponent,g.TniSlidedownComponent,h.CardItemComponent,a.RouterLinkWithHref,v.\u0275angular_packages_forms_forms_y,v.NgControlStatusGroup,v.FormGroupDirective,m.NgForOf,C.IconComponent],pipes:[_.CentsToDollarPipe],styles:['.block-card__content[_ngcontent-%COMP%]{margin:0 auto;padding:0 16px 48px}@media (min-width:768px){.block-card__content[_ngcontent-%COMP%]{width:500px;padding:0 0 48px}}p[_ngcontent-%COMP%]:first-child{margin-top:0}.block-card__header[_ngcontent-%COMP%]{width:100%;margin:0 auto;padding:40px 16px 40px 66px;position:relative}@media (min-width:768px){.block-card__header[_ngcontent-%COMP%]{padding:40px 100px;width:700px}}.block-card__header--block-only[_ngcontent-%COMP%]{padding-left:16px}.block-card__header__heading[_ngcontent-%COMP%]{margin:0;line-height:1.2}.block-card__header__number[_ngcontent-%COMP%]{position:absolute;color:#1d69b4;top:37px;left:16px;border:1px solid #1d69b4;width:33px;height:33px;border-radius:33px;font-size:16px;font-weight:500;line-height:33px;text-align:center}@media (min-width:768px){.block-card__header__number[_ngcontent-%COMP%]{left:35px}}.block-card__header[_ngcontent-%COMP%]:focus{outline:none}.block-card__phone[_ngcontent-%COMP%]{white-space:nowrap}.block-card__actions[_ngcontent-%COMP%]{margin:48px 0 0}.block-card__back-to-cards[_ngcontent-%COMP%], .block-card__block-only[_ngcontent-%COMP%], .block-card__cancel[_ngcontent-%COMP%]{border-radius:4px;border:0 solid transparent;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background:transparent}.block-card__back-to-cards[disabled][_ngcontent-%COMP%], .block-card__block-only[disabled][_ngcontent-%COMP%], .block-card__cancel[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.block-card__back-to-cards[_ngcontent-%COMP%]:hover:after, .block-card__block-only[_ngcontent-%COMP%]:hover:after, .block-card__cancel[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .block-card__back-to-cards[_ngcontent-%COMP%], button[_ngcontent-%COMP%] + .block-card__block-only[_ngcontent-%COMP%], button[_ngcontent-%COMP%] + .block-card__cancel[_ngcontent-%COMP%]{margin-top:10px}.block-card__just-block--secondary[_ngcontent-%COMP%]{font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;max-width:270px;background:#fff;color:#1d69b4;border:1px solid #dbdbdb;border-radius:4px;padding:8px 32px;width:auto;min-width:130px;width:100%}.block-card__just-block--secondary[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.block-card__just-block--secondary[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .block-card__just-block--secondary[_ngcontent-%COMP%]{margin-top:10px}.block-card__just-block--secondary[_ngcontent-%COMP%]:hover{border:1px solid #1d69b4;background:#fff}.block-card__just-block--secondary[_ngcontent-%COMP%]:hover:after{display:none}.block-card__block[_ngcontent-%COMP%], .block-card__choose[_ngcontent-%COMP%], .block-card__done[_ngcontent-%COMP%], .block-card__just-block--primary[_ngcontent-%COMP%], .block-card__next[_ngcontent-%COMP%], .block-card__transfer[_ngcontent-%COMP%]{border-radius:4px;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background-color:#1d69b4;border:0 solid #195c9e;color:#fff}.block-card__block[disabled][_ngcontent-%COMP%], .block-card__choose[disabled][_ngcontent-%COMP%], .block-card__done[disabled][_ngcontent-%COMP%], .block-card__just-block--primary[disabled][_ngcontent-%COMP%], .block-card__next[disabled][_ngcontent-%COMP%], .block-card__transfer[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.block-card__block[_ngcontent-%COMP%]:hover:after, .block-card__choose[_ngcontent-%COMP%]:hover:after, .block-card__done[_ngcontent-%COMP%]:hover:after, .block-card__just-block--primary[_ngcontent-%COMP%]:hover:after, .block-card__next[_ngcontent-%COMP%]:hover:after, .block-card__transfer[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .block-card__block[_ngcontent-%COMP%], button[_ngcontent-%COMP%] + .block-card__choose[_ngcontent-%COMP%], button[_ngcontent-%COMP%] + .block-card__done[_ngcontent-%COMP%], button[_ngcontent-%COMP%] + .block-card__just-block--primary[_ngcontent-%COMP%], button[_ngcontent-%COMP%] + .block-card__next[_ngcontent-%COMP%], button[_ngcontent-%COMP%] + .block-card__transfer[_ngcontent-%COMP%]{margin-top:10px}.block-card__error[_ngcontent-%COMP%], .block-card__success[_ngcontent-%COMP%]{text-align:center}.block-card__error[_ngcontent-%COMP%]:focus, .block-card__success[_ngcontent-%COMP%]:focus{outline:none}.block-card__alert-icon[_ngcontent-%COMP%]{color:#d0021b}.block-card__alert-icon[_ngcontent-%COMP%], .block-card__success-icon[_ngcontent-%COMP%]{display:inline-block;margin:0 0 32px}.block-card__transfer-success__reference[_ngcontent-%COMP%]{border:1px solid #dbdbdb;border-radius:4px;padding:6px 8px;display:inline-block;font-weight:400}.block-card__transfer-success__amount[_ngcontent-%COMP%]{font-size:22px;color:#00881f;font-weight:600;margin:1em 0}.block-card__transfer-card[_ngcontent-%COMP%]{position:relative;padding:16px 0 0}.block-card__transfer-card__icon[_ngcontent-%COMP%]{position:absolute;top:-7px;right:40px}@media (min-width:992px){.block-card__transfer-card__icon[_ngcontent-%COMP%]{top:-8px}}.block-card__card-list[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.block-card__header__heading[_ngcontent-%COMP%]:focus{outline:none}']}),e}()},"1UBY":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerErrorComponent=void 0;var o=n("fXoL"),r=n("fXoL"),i=n("vwDF");t.ServerErrorComponent=function(){function e(){this.closeEvent=new o.EventEmitter}return e.prototype.onClose=function(){this.closeEvent.emit(!0)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tni-server-error"]],outputs:{closeEvent:"closeEvent"},decls:2,vars:0,consts:[["aria-label","Something went wrong",3,"closeEvent"]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"tni-modal",0),r.\u0275\u0275listener("closeEvent",function(){return t.onClose()}),r.\u0275\u0275text(1," Something went wrong and we can't process your request. Please try again. "),r.\u0275\u0275elementEnd())},directives:[i.ModalWindowComponent],encapsulation:2}),e}()},"1Zke":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fadeInAnimation=t.slideFromTopAnimation=void 0;var o=n("R0Ic");t.slideFromTopAnimation=o.trigger("slideFromTopAnimation",[o.transition("void => *",[o.style({top:"-400%"}),o.animate("0.5s ease-in-out",o.style({top:0}))])]),t.fadeInAnimation=o.trigger("fadeInAnimation",[o.transition(":enter",[o.style({opacity:0}),o.animate(500,o.style({opacity:1}))])])},"2QCD":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SecretQaService=void 0;var o=n("kU1M"),r=(n("fXoL"),n("tk/3"),n("Mzpo")),i=n("jaAq"),a=n("fXoL"),c=n("tk/3");t.SecretQaService=function(){function e(e){this.http=e}return e.prototype.getSecretQuestion=function(e,t,n){return this.http.post("/api/opal/api/ac/customer/forgottenpassword/secretquestion/",{SmartcardId:parseInt(e,10),SmartcardSc:t,Username:n}).pipe(o.map(function(e){return r.SecretQuestionAuthModel.fromResponse(e)}))},e.prototype.changePassword=function(e,t,n,r,i){return this.http.post("/api/opal/api/ac/customer/forgottenpassword/newpassword/",{ForgottenPasswordToken:e,SecretQuestionCode:n,SecretAnswer:r,Username:t,NewPassword:i}).pipe(o.map(function(e){return e.toString()}))},e.prototype.list=function(){return this.http.get("/api/opal/api/ac/customer/secretquestions/").pipe(o.map(function(e){return e.SecretQuestion.map(function(e){return i.SecretQuestionModel.fromResponse(e)})}))},e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275inject(c.HttpClient))},e.\u0275prov=a.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},"2cv0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntitlementCardType=t.OpalCardType=void 0,t.OpalCardType=function(e){return e[e.Adult=1]="Adult",e[e.Concession=2]="Concession",e[e.Senior=3]="Senior",e[e.Child=4]="Child",e}(t.OpalCardType||{}),t.EntitlementCardType=function(e){return e[e.Concession=1]="Concession",e[e.Senior=2]="Senior",e}(t.EntitlementCardType||{})},"2qlC":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageFrameModule=void 0,n("fXoL");var o=n("ofXK"),r=(n("pxjO"),n("fXoL"));t.PageFrameModule=function(){function e(){}return e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule]]}),e}()},"37k+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddCardToVaultComponent=void 0;var o=n("fXoL"),r=(n("tyNb"),n("NRRr"),n("ELlc"),n("qCKp")),i=(n("3Pt+"),n("YORH"),n("SC3b"),n("fXoL")),a=n("NRRr"),c=n("ELlc"),s=n("YORH"),l=n("tyNb");t.AddCardToVaultComponent=function(){function e(e,t,n,i){this.loaderService=e,this.paymentService=t,this.trackOpalEventService=n,this.activeRoute=i,this.addCardToVaultError=new o.EventEmitter,this.addCardToVaultSuccess=new o.EventEmitter,this.subscriptions=new r.Subscription}return e.prototype.ngAfterViewInit=function(){var e=this;this.subscriptions.add(this.activeRoute.queryParams.subscribe(function(t){t.component===e.component&&e.handleBpointCallback(t)}))},e.prototype.onTopupClick=function(){var e=this;this.loaderService.display(!0),this.subscriptions.add(this.paymentService.getAutoTopUpPaymentRequestToken().subscribe(function(t){e.addToValault(t)},function(t){e.addCardToVaultError.emit(t),e.loaderService.display(!1)}))},e.prototype.addToValault=function(e){this.shouldTrackClickEvent&&this.hasPaymentAccount?this.trackOpalEventService.trackSaveButton():this.shouldTrackClickEvent&&this.trackOpalEventService.trackAddCardButton(),this.paymentService.addToBpointDataVault(e,this.paymentForm.controls.expiry.value,this.paymentForm.controls.cvv.value,this.paymentForm.controls.number.value,this.paymentForm.controls.name.value,this.component,this.getSmartCardId(),this.selectedAutoTopupAmount,this.changeCard)},e.prototype.getSmartCardId=function(){return this.smartCard?this.smartCard.smartcardId:null},e.prototype.handleBpointCallback=function(e){var t=this;e.out_token?this.subscriptions.add(this.paymentService.dvPayments({Token:e.out_token}).subscribe(function(e){t.addCardToVaultSuccess.emit(e)},function(e){return t.addCardToVaultError.emit(e)})):this.addCardToVaultError.emit(e)},e.prototype.ngOnDestroy=function(){this.subscriptions&&this.subscriptions.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(a.LoaderService),i.\u0275\u0275directiveInject(c.PaymentService),i.\u0275\u0275directiveInject(s.TrackOpalEventService),i.\u0275\u0275directiveInject(l.ActivatedRoute))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["add-card-to-vault"]],inputs:{paymentForm:"paymentForm",selectedAutoTopupAmount:"selectedAutoTopupAmount",component:"component",smartCard:"smartCard",enableCTA:"enableCTA",changeCard:"changeCard",CTAtext:"CTAtext",shouldTrackClickEvent:"shouldTrackClickEvent",hasPaymentAccount:"hasPaymentAccount"},outputs:{addCardToVaultError:"addCardToVaultError",addCardToVaultSuccess:"addCardToVaultSuccess"},decls:2,vars:2,consts:[["type","button",1,"auto-topup__enable-btn",3,"click"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"button",0),i.\u0275\u0275listener("click",function(){return t.onTopupClick()}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275attribute("disabled",t.enableCTA?null:"disabled"),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.CTAtext,"\n"))},styles:['.button-block[_ngcontent-%COMP%]{align-items:left;padding-bottom:10px;margin:48px 0}.auto-topup__enable-btn[_ngcontent-%COMP%]{border-radius:4px;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background-color:#1d69b4;border:0 solid #195c9e;color:#fff}.auto-topup__enable-btn[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.auto-topup__enable-btn[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .auto-topup__enable-btn[_ngcontent-%COMP%]{margin-top:10px}']}),e}()},"3OCy":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalNotificationPreferenceService=void 0;var o=n("kU1M"),r=(n("fXoL"),n("tk/3"),n("s/Qc")),i=n("fXoL"),a=n("tk/3");t.OpalNotificationPreferenceService=function(){function e(e){this.http=e}return e.prototype.list=function(){var e=this;return this.http.get("/api/opal/api/customer/notificationpreference/").pipe(o.map(function(t){var n=r.OpalNotificationPreference.fromResponse(t);return e._contactMethod=n.reduce(function(e,t){return 0!==t.deliveryChannel.id&&0===e.id?t.deliveryChannel:e},{id:0,method:"OFF"}),n}))},e.prototype.postNotifications=function(e,t){var n={NotificationPreference:r.OpalNotificationPreference.toResponse(e,t)};return this.http.post("/api/opal/api/customer/notificationpreference/",n)},Object.defineProperty(e.prototype,"contactMethod",{get:function(){return this._contactMethod},enumerable:!1,configurable:!0}),e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(a.HttpClient))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},"41hm":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthResponse=void 0,t.AuthResponse=function(){return function(e,t){this.verified=e,this.status=t}}()},"4U9u":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalCardsComponent=void 0;var o=n("mrSG"),r=n("kU1M"),i=(n("fXoL"),n("jhN1"),n("PShm"),n("QK+Z"),n("SC3b")),a=n("2cv0"),c=(n("YORH"),n("WcMK"),n("vDmu"),n("tyNb"),n("NRRr"),n("6i2Y"),n("Uf+G"),n("vRXg"),n("fXoL"),n("fXoL")),s=n("PShm"),l=n("vDmu"),d=n("QK+Z"),p=n("YORH"),u=n("jhN1"),m=n("WcMK"),f=n("tyNb"),g=n("NRRr"),h=n("Uf+G"),v=n("6i2Y"),C=n("vRXg"),_=n("ofXK"),b=n("7q50"),x=n("uSyR"),y=n("suy7"),M=n("pxjO"),P=n("mb9H"),O=n("DkoF"),S=n("xpgH"),w=n("ui0D"),k=n("NJII"),E=n("4ptd"),T=n("nydR");function I(e,t){1&e&&(c.\u0275\u0275elementStart(0,"tni-page-frame"),c.\u0275\u0275element(1,"tni-unregistered-card"),c.\u0275\u0275elementEnd())}function A(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"div",7),c.\u0275\u0275elementStart(1,"tni-tab-group",8),c.\u0275\u0275elementStart(2,"tni-tab",9),c.\u0275\u0275elementStart(3,"div",10),c.\u0275\u0275elementStart(4,"div",11),c.\u0275\u0275template(5,I,2,0,"tni-page-frame",12),c.\u0275\u0275elementStart(6,"tni-page-frame"),c.\u0275\u0275element(7,"tni-card-weekly-status",13),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(8,"tni-page-frame",14),c.\u0275\u0275element(9,"tni-card-activities",13),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(10,"tni-tab",15),c.\u0275\u0275elementStart(11,"div",16),c.\u0275\u0275elementStart(12,"div",11),c.\u0275\u0275element(13,"tni-opal-topup",17),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(14,"tni-tab",18),c.\u0275\u0275elementStart(15,"div",16),c.\u0275\u0275elementStart(16,"div",11),c.\u0275\u0275elementStart(17,"tni-page-frame"),c.\u0275\u0275element(18,"tni-card-manage",13),c.\u0275\u0275element(19,"tni-card-manage-actions",19),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(1),c.\u0275\u0275property("activeTabId",n.activeTabId),c.\u0275\u0275advance(4),c.\u0275\u0275property("ngIf",!n.selectedSmartcard.registered),c.\u0275\u0275advance(2),c.\u0275\u0275property("smartCard",n.selectedSmartcard),c.\u0275\u0275advance(1),c.\u0275\u0275property("fullBleed",!0),c.\u0275\u0275advance(1),c.\u0275\u0275property("smartCard",n.selectedSmartcard),c.\u0275\u0275advance(4),c.\u0275\u0275property("queryData",n.queryData)("smartCard",n.selectedSmartcard),c.\u0275\u0275advance(1),c.\u0275\u0275property("title",n.manageTitle),c.\u0275\u0275advance(4),c.\u0275\u0275property("smartCard",n.selectedSmartcard),c.\u0275\u0275advance(1),c.\u0275\u0275property("selectedSmartcard",n.selectedSmartcard)("isUnRegistered",n.isUnRegistered)("showBlock",n.showBlock)("canTransferToAnotherCard",n.canTransferToAnotherCard)}}function N(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"div",20),c.\u0275\u0275elementStart(1,"tni-tab-group"),c.\u0275\u0275elementStart(2,"tni-tab",21),c.\u0275\u0275elementStart(3,"div",16),c.\u0275\u0275elementStart(4,"div",22),c.\u0275\u0275elementStart(5,"div",23),c.\u0275\u0275element(6,"img",24),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(7,"div",25),c.\u0275\u0275elementStart(8,"span"),c.\u0275\u0275text(9,"No activity to display"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275element(10,"tni-tab",26),c.\u0275\u0275element(11,"tni-tab",27),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(2),c.\u0275\u0275property("disabled",!0),c.\u0275\u0275advance(8),c.\u0275\u0275property("disabled",!0),c.\u0275\u0275advance(1),c.\u0275\u0275property("title",n.manageTitle)("disabled",!0)}}function L(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",3),c.\u0275\u0275elementStart(1,"tni-card-carousel",4),c.\u0275\u0275listener("cardNumberSelected",function(e){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext().cardNumberSelected(e)}),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(2,A,20,13,"div",5),c.\u0275\u0275template(3,N,12,4,"div",6),c.\u0275\u0275elementEnd()}if(2&e){var o=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275property("activeCard",o.cardFromQueryString)("isUnRegistered",o.isUnRegistered)("smartCards",o.opalAccount.smartcards),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",o.selectedSmartcard),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",!o.selectedSmartcard)}}function R(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"div",11),c.\u0275\u0275elementStart(1,"div",28),c.\u0275\u0275element(2,"tni-image",29),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(3,"div",30),c.\u0275\u0275elementStart(4,"div",7),c.\u0275\u0275elementStart(5,"tni-tab-group"),c.\u0275\u0275elementStart(6,"tni-tab",31),c.\u0275\u0275elementStart(7,"div",10),c.\u0275\u0275elementStart(8,"div",11),c.\u0275\u0275elementStart(9,"div",32),c.\u0275\u0275element(10,"div",33),c.\u0275\u0275element(11,"div",34),c.\u0275\u0275element(12,"div",35),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(13,"div",36),c.\u0275\u0275element(14,"div",37),c.\u0275\u0275element(15,"div",38),c.\u0275\u0275element(16,"div",39),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(17,"div",36),c.\u0275\u0275element(18,"div",40),c.\u0275\u0275element(19,"div",41),c.\u0275\u0275element(20,"div",42),c.\u0275\u0275element(21,"div",43),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(22,"div",36),c.\u0275\u0275element(23,"div",40),c.\u0275\u0275element(24,"div",41),c.\u0275\u0275element(25,"div",42),c.\u0275\u0275element(26,"div",43),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275element(27,"tni-tab",44),c.\u0275\u0275element(28,"tni-tab",45),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(6),c.\u0275\u0275property("disabled",!0),c.\u0275\u0275advance(21),c.\u0275\u0275property("disabled",!0),c.\u0275\u0275advance(1),c.\u0275\u0275property("title",n.manageTitle)("disabled",!0)}}t.OpalCardsComponent=function(){function e(e,t,n,o,i,a,c,s,l,d,p,u,m){var f=this;this.smartcardService=e,this.entitlementService=t,this.opalAccountStore=n,this.trackOpalEventService=o,this.titleServie=i,this.dataSharingService=a,this.activeRoute=c,this.loaderService=s,this.route=l,this.uiStateService=d,this.featureToggleService=p,this.balanceTransferService=u,this.cdRef=m,this.showBlock=!1,this.manageTitle="Manage",this.totalSelectedCardBalance=0,this.featureToggleService.getToggles().subscribe(function(e){f.showBlock=!!e.toggles["opal-block-transfer"]}),this.activeRouteSubscription=this.activeRoute.queryParams.subscribe(function(e){!e.component||"one-off-topup"!==e.component&&"auto-topup"!==e.component?"payment"===e.component&&(f.route.navigate(["/account/profile"],{queryParams:{component:"payment",out_token:e.out_token}}),f.loaderService.display(!0)):(f.loaderService.loadSpinnerWithDisplayText("one-off-topup"===e.component?"We are processing your payment":""),f.uiStateService.setOpalCardsPageTab("tni-opal-topup-tab"),f.activeTabId="tni-opal-topup-tab",f.queryData=e),e.smartCard&&(f.cardFromQueryString=parseInt(e.smartCard,10))}),this.uiStateService.getUiState().pipe(r.map(function(e){return e.cardPageState})).subscribe(function(e){e&&e.currentTabId&&e.currentTabId!==f.activeTabId&&(f.activeTabId=e.currentTabId)})}return e.prototype.ngOnDestroy=function(){this.smartCardServiceSubscription&&this.smartCardServiceSubscription.unsubscribe(),this.activeRouteSubscription&&this.activeRouteSubscription.unsubscribe()},e.prototype.ngOnInit=function(){var e=this;this.titleServie.setTitle("Opal cards | transportnsw.info"),this.opalAccount=this.opalAccountStore.get(),this.isUnRegistered=!!this.opalAccount.unregisteredCardNo,this.manageTitle=this.isUnRegistered?"Card details":"Manage",this.isLoadingData=!0,this.trackOpalEventService.viewOpalCardsSelected(),this.trackOpalEventService.trackViewport("Opal cards",this.isUnRegistered),this.isUnRegistered?(this.dataSharingService.set("cardDetails",{cardNo:this.opalAccount.unregisteredCardNo,cardSc:this.opalAccount.unregisteredCardSc}),this.opalAccountStore.setUnregisteredCardNo(this.opalAccount.unregisteredCardNo,null),this.smartcardService.getDetailAndPublish(this.opalAccount.unregisteredCardNo).pipe(r.finalize(function(){return e.isLoadingData=!1})).subscribe(function(t){e.opalAccountStore.setSmartCards([t]),e.opalAccount.smartcards=[t],e.selectedSmartcard=t})):(this.smartCardServiceSubscription=this.smartcardService.smartCardList$.subscribe(function(t){e.setCardList(t)}),this.smartcardService.getListAndPublish().pipe(r.finalize(function(){return e.isLoadingData=!1})).subscribe())},e.prototype.setCardList=function(e){var t=this;e.sort(i.Smartcard.compare),this.opalAccountStore.setSmartCards(e),this.opalAccount.smartcards=o.__spreadArrays(e.filter(function(e){return e.pendingBalanceActivation&&"HOTLISTED"!==e.cardState}),e.filter(function(e){return!(e.pendingBalanceActivation&&"HOTLISTED"!==e.cardState)})),this.cardFromQueryString?(this.cardNumberSelected(e[e.findIndex(function(e){return e.smartcardId===t.cardFromQueryString})]),this.smartcardService.publishSelectionChange(this.selectedSmartcard)):this.selectedSmartcard||this.cardNumberSelected(this.opalAccount.smartcards[0])},e.prototype.getOpalImageName=function(){if(!this.selectedSmartcard)return null;switch(this.selectedSmartcard.cardTypeCode){case a.OpalCardType.Adult:return"adult";case a.OpalCardType.Child:return"youth";case a.OpalCardType.Concession:return"concession";case a.OpalCardType.Senior:return"senior"}return null},e.prototype.cardNumberSelected=function(e){this.totalSelectedCardBalance=(e.svBalance?e.svBalance:0)+(e.svPending?e.svPending:0),this.canTransferToAnotherCard=this.balanceTransferService.transferableCards(this.opalAccount.smartcards,e).length>0&&0!==this.totalSelectedCardBalance,this.cdRef.detectChanges(),e.isConcessionSeniorPensioner()&&this.entitlementService.details(e.smartcardId).subscribe(function(t){e.entitlementExpiryDate=t.entitlementExpiryDate,e.entitlementIssuerName=t.entitlementIssuerName,e.entitlementIssuerEntitlementId=t.entitlementIssuerEntitlementId}),this.selectedSmartcard=e.pendingBalanceActivation&&"HOTLISTED"!==e.cardState?null:e},e.\u0275fac=function(t){return new(t||e)(c.\u0275\u0275directiveInject(s.SmartcardService),c.\u0275\u0275directiveInject(l.EntitlementService),c.\u0275\u0275directiveInject(d.OpalAccountStore),c.\u0275\u0275directiveInject(p.TrackOpalEventService),c.\u0275\u0275directiveInject(u.Title),c.\u0275\u0275directiveInject(m.DataSharingService),c.\u0275\u0275directiveInject(f.ActivatedRoute),c.\u0275\u0275directiveInject(g.LoaderService),c.\u0275\u0275directiveInject(f.Router),c.\u0275\u0275directiveInject(h.UiStateService),c.\u0275\u0275directiveInject(v.FeatureToggleService),c.\u0275\u0275directiveInject(C.BalanceTransferService),c.\u0275\u0275directiveInject(c.ChangeDetectorRef))},e.\u0275cmp=c.\u0275\u0275defineComponent({type:e,selectors:[["tni-opal-cards"]],decls:4,vars:2,consts:[[1,"opal-cards-page-container","container-fluid","form"],["class","opal-cards-details row",4,"ngIf","ngIfElse"],["spinnerTemplate",""],[1,"opal-cards-details","row"],[3,"activeCard","isUnRegistered","smartCards","cardNumberSelected"],["class","tabs",4,"ngIf"],["class","tabs no-card",4,"ngIf"],[1,"tabs"],[3,"activeTabId"],["tabId","tni-opal-activity-tab","title","Activity"],[1,"container","opal-cards__tabs--thin"],[1,"row"],[4,"ngIf"],[3,"smartCard"],[3,"fullBleed"],["tabId","tni-opal-topup-tab","title","Top up"],[1,"container"],[3,"queryData","smartCard"],["tabId","tni-opal-card-details-tab",3,"title"],[3,"selectedSmartcard","isUnRegistered","showBlock","canTransferToAnotherCard"],[1,"tabs","no-card"],["tabId","tni-opal-activity-tab","title","Activity",3,"disabled"],[1,"no-card-activity"],[1,"no-card-activity--image__container"],["src","assets/images/no-card-activity.svg","title","No opal activity",1,"no-card-activity--image"],[1,"no-card-activity--message"],["tabId","tni-opal-topup-tab","title","Top up",3,"disabled"],["tabId","tni-opal-card-details-tab",3,"title","disabled"],[1,"opal-selector","skeleton-card-container"],["imageName","assets/logos/logo_opal-loading.svg","imageTitle","Opal loading",1,"skeleton-opal-logo"],[1,"opal-cards-details"],["title","Activity",3,"disabled"],[1,"skeleton-card"],[1,"skeleton-bar-square-thick","center","lg"],[1,"skeleton-bar-round-big","center","x-lg"],[1,"skeleton-bar-square-thin","center","md"],[1,"skeleton-card","inline"],[1,"skeleton-bar-square-thick","left","x-lg"],[1,"skeleton-bar-square-thick","left","lg"],[1,"skeleton-bar-square-thick","left","md"],[1,"skeleton-avatar"],[1,"skeleton-bar-square-thin","left","x-sm"],[1,"skeleton-bar-square-thin","left","md"],[1,"skeleton-bar-square-thin","left","sm"],["title","Top up",3,"disabled"],[3,"title","disabled"]],template:function(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"div",0),c.\u0275\u0275template(1,L,4,5,"div",1),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(2,R,29,4,"ng-template",null,2,c.\u0275\u0275templateRefExtractor)),2&e){var n=c.\u0275\u0275reference(3);c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",!t.isLoadingData)("ngIfElse",n)}},directives:[_.NgIf,b.CardCarouselComponent,x.TniTabGroupComponent,y.TniTabComponent,M.PageFrameComponent,P.CardWeeklyStatusComponent,O.CardActivitiesComponent,S.OpalTopupComponent,w.CardManageComponent,k.CardManageActionsComponent,E.UnregisteredCardComponent,T.TniImageComponent],styles:[".tfnsw-spinner[_ngcontent-%COMP%]{text-align:center;position:relative}.tfnsw-spinner[_ngcontent-%COMP%]   .spinner-image[_ngcontent-%COMP%]{display:none}.tfnsw-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%], .tfnsw-spinner[_ngcontent-%COMP%]   .spinner-image[_ngcontent-%COMP%]{width:50px;height:50px;margin:0 auto;text-align:center}.tfnsw-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{-webkit-animation:circle .75s linear infinite;animation:circle .75s linear infinite;border:5px solid #1d69b4;border-top-color:transparent;border-radius:100%}@-webkit-keyframes circle{0%{transform:rotate(0)}to{transform:rotate(1turn)}}@keyframes circle{0%{transform:rotate(0)}to{transform:rotate(1turn)}}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.tfnsw-spinner[_ngcontent-%COMP%]   .spinner-image[_ngcontent-%COMP%]{display:block}.tfnsw-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:none}}.opal-cards-page-container[_ngcontent-%COMP%]   .spinner-cotainer[_ngcontent-%COMP%]{margin:30px}.opal-cards-page-container[_ngcontent-%COMP%]   .opal-cards-details[_ngcontent-%COMP%]   .smart-card-radio[_ngcontent-%COMP%]{margin-left:5px}.opal-cards-page-container[_ngcontent-%COMP%]   .opal-cards-details[_ngcontent-%COMP%]   .smart-card-radio[_ngcontent-%COMP%]   .smart-card[_ngcontent-%COMP%]{padding:15px 30px;background:#fff;box-shadow:0 2px 3px 0 rgba(0,0,0,.4)}.opal-cards-page-container[_ngcontent-%COMP%]   .opal-cards-details[_ngcontent-%COMP%]   .card-selection[_ngcontent-%COMP%]{background:#0065b4;display:flex;padding:50px 0;align-items:center;justify-content:center}.opal-cards-page-container[_ngcontent-%COMP%]   .opal-cards-details[_ngcontent-%COMP%]   .card-selection.form-group[_ngcontent-%COMP%]{margin-bottom:0}@media (max-width:767px){.opal-cards-page-container[_ngcontent-%COMP%]   .opal-cards-details[_ngcontent-%COMP%]   .card-selection[_ngcontent-%COMP%]{flex-direction:column;padding:10px}}@media (max-width:767px){.opal-cards-page-container[_ngcontent-%COMP%]   .opal-cards-details[_ngcontent-%COMP%]   .card-selection-image[_ngcontent-%COMP%]{padding:10px 0}}.opal-cards-page-container[_ngcontent-%COMP%]   .opal-cards-details[_ngcontent-%COMP%]   .card-selection[_ngcontent-%COMP%]   .form-control-select[_ngcontent-%COMP%]{height:38px;width:250px;margin-left:20px}@media (max-width:767px){.opal-cards-page-container[_ngcontent-%COMP%]   .opal-cards-details[_ngcontent-%COMP%]   .card-selection[_ngcontent-%COMP%]   .form-control-select[_ngcontent-%COMP%]{margin-left:0}}.opal-cards-page-container[_ngcontent-%COMP%]   .opal-cards-details[_ngcontent-%COMP%]   .card-selection[_ngcontent-%COMP%]   .tp-icon.opal-icon[_ngcontent-%COMP%], .opal-cards-page-container[_ngcontent-%COMP%]   .opal-cards-details[_ngcontent-%COMP%]   .card-selection[_ngcontent-%COMP%]   .tp-icon.opal-icon[_ngcontent-%COMP%]   image[_ngcontent-%COMP%]{height:200px;width:320px}@media (max-width:767px){.opal-cards-page-container[_ngcontent-%COMP%]   .opal-cards-details[_ngcontent-%COMP%]   .card-selection[_ngcontent-%COMP%]   .tp-icon.opal-icon[_ngcontent-%COMP%], .opal-cards-page-container[_ngcontent-%COMP%]   .opal-cards-details[_ngcontent-%COMP%]   .card-selection[_ngcontent-%COMP%]   .tp-icon.opal-icon[_ngcontent-%COMP%]   image[_ngcontent-%COMP%]{height:100%;width:100%}}@media (min-width:992px){.opal-cards__tabs--thin[_ngcontent-%COMP%]{width:770px}}  .tni-tab-container{width:100%;background:#fff;box-shadow:0 2px 1px 0 rgba(0,0,0,.1)}  .tni-tab-container .tni-tab-header-container{margin:0 auto;width:100%}@media (min-width:992px){  .tni-tab-container .tni-tab-header-container{width:770px}}.no-card-activity[_ngcontent-%COMP%]{position:absolute;top:50%;bottom:50%;transform:translate(-50%,-50%);left:50%}@media (max-width:767px){.no-card-activity[_ngcontent-%COMP%]{min-height:200px;margin-top:20px}}.no-card-activity--message[_ngcontent-%COMP%]{text-align:center;font-size:24px;font-weight:400;min-width:200px;margin-top:15px}@media (max-width:767px){.no-card-activity--message[_ngcontent-%COMP%]{font-size:20px}}.no-card-activity--image__container[_ngcontent-%COMP%]{max-width:200px;margin-left:25px;text-align:center}@media (max-width:767px){.no-card-activity--image[_ngcontent-%COMP%]{height:150px}}@media (min-width:768px){.no-card-activity--image[_ngcontent-%COMP%]{height:200px;margin-top:80px}}.tabs.no-card[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{height:400px}@media (max-width:767px){.tabs.no-card[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{min-height:250px;position:relative}}  .card-details-component .collapsible-card-details.form{box-shadow:none;background:none}h2[_ngcontent-%COMP%]{margin-top:0;font-weight:300;font-size:24px;line-height:1.3333}.skeleton-card[_ngcontent-%COMP%]{margin-bottom:8px}.skeleton-card.inline[_ngcontent-%COMP%]{margin-bottom:0}.skeleton-card.inline[_ngcontent-%COMP%]:last-child{margin-bottom:24px}"]}),e}()},"4ptd":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnregisteredCardComponent=void 0,n("fXoL");var o=n("fXoL"),r=n("tyNb");t.UnregisteredCardComponent=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-unregistered-card"]],decls:41,vars:0,consts:[[1,"unregistered-card-component"],["routerLink","/create-account"],[1,"row","info-container"],[1,"col-md-3","col-xs-6","text-center","info-block"],[1,"info-icon"],["xmlns","http://www.w3.org/2000/svg","width","24","viewBox","0 0 50 41"],["fill","currentColor","fill-rule","evenodd"],["d","M44.1257887,8.15131564 L43.0389466,8.15131564 C43.0389466,8.58605247 43.1476308,9.02078931 43.1476308,9.45552614 C43.1476308,9.89026298 43.1476308,10.433684 43.0389466,10.8684209 L44.1257887,10.8684209 C45.6473676,10.8684209 46.9515781,12.1726314 46.9515781,13.6942103 L46.9515781,35.3223678 C46.9515781,36.8439467 45.6473676,38.1481572 44.1257887,38.1481572 L5.86894726,38.1481572 C4.34736834,38.1481572 3.04315784,36.8439467 3.04315784,35.3223678 L3.04315784,13.6942103 C3.04315784,12.1726314 4.34736834,10.8684209 5.86894726,10.8684209 L21.0847365,10.8684209 C20.9760522,10.433684 20.9760522,9.89026298 20.9760522,9.45552614 C20.9760522,9.02078931 20.9760522,8.58605247 21.0847365,8.15131564 L5.86894726,8.15131564 C2.82578942,8.15131564 0.326052626,10.6510524 0.326052626,13.6942103 L0.326052626,35.3223678 C0.326052626,38.3655256 2.82578942,40.8652624 5.86894726,40.8652624 L44.1257887,40.8652624 C47.1689465,40.8652624 49.6686833,38.3655256 49.6686833,35.3223678 L49.6686833,13.6942103 C49.6686833,10.6510524 47.1689465,8.15131564 44.1257887,8.15131564"],["d","M10.8684209,23.8018417 L13.1507892,23.8018417 L17.9328944,34.8876309 L15.4331576,34.8876309 L14.4549997,32.3878941 L9.78157877,32.3878941 L8.80342089,34.8876309 L6.30368409,34.8876309 L10.8684209,23.8018417 Z M13.3681576,30.3228942 L11.9552629,26.7363153 L10.5423682,30.3228942 L13.3681576,30.3228942 Z"],["transform","translate(18.476)"],["d","M.326052626 32.0618415L.326052626 26.6276311 2.71710521 26.6276311 2.71710521 31.3010521C2.71710521 32.3878941 3.26052626 33.0399994 4.12999992 33.0399994 4.99947359 33.0399994 5.65157884 32.4965783 5.65157884 31.3010521L5.65157884 26.6276311 8.04263143 26.6276311 8.04263143 35.1049994 5.65157884 35.1049994 5.65157884 33.9094731C5.1081578 34.6702625 4.34736834 35.2136836 3.15184205 35.2136836 1.41289471 35.2136836.326052626 34.0181573.326052626 32.0618415M10.6510524 32.6052626L10.6510524 28.5839468 9.67289456 28.5839468 9.67289456 26.5189469 10.6510524 26.5189469 10.6510524 24.3452627 13.042105 24.3452627 13.042105 26.5189469 14.9984208 26.5189469 14.9984208 28.5839468 13.042105 28.5839468 13.042105 32.1705257C13.042105 32.7139468 13.2594734 33.0399994 13.8028945 33.0399994 14.2376313 33.0399994 14.6723682 32.9313152 14.9984208 32.7139468L14.9984208 34.6702625C14.4549997 34.9963151 13.9115787 35.1049994 13.1507892 35.1049994 11.6292103 35.2136836 10.6510524 34.5615783 10.6510524 32.6052626M16.0852629 30.8663152L16.0852629 30.8663152C16.0852629 28.3665784 18.0415786 26.4102627 20.6499996 26.4102627 23.2584206 26.4102627 25.2147364 28.3665784 25.2147364 30.757631L25.2147364 30.757631C25.2147364 33.1486836 23.2584206 35.1049994 20.6499996 35.1049994 18.0415786 35.2136836 16.0852629 33.2573678 16.0852629 30.8663152M22.932368 30.8663152L22.932368 30.8663152C22.932368 29.5621047 22.0628943 28.4752626 20.7586838 28.4752626 19.3457891 28.4752626 18.5849997 29.5621047 18.5849997 30.757631L18.5849997 30.757631C18.5849997 31.9531573 19.4544733 33.0399994 20.7586838 33.0399994 22.0628943 33.1486836 22.932368 32.0618415 22.932368 30.8663152M14.2376313 9.89026298L14.2376313 12.2813156C15.107105 12.1726314 15.5418418 11.7378945 15.5418418 11.1944735 15.5418418 10.5423682 15.3244734 10.2163156 14.2376313 9.89026298M11.9552629 6.84710514C11.9552629 7.39052618 12.1726314 7.7165788 13.2594734 8.04263143L13.2594734 5.76026305C12.3899998 5.86894726 11.9552629 6.30368409 11.9552629 6.84710514"],["d","M14.3463155,13.5855261 L14.3463155,14.3463155 C14.3463155,14.6723682 14.1289471,14.8897366 13.8028945,14.8897366 C13.4768419,14.8897366 13.2594734,14.6723682 13.2594734,14.3463155 L13.2594734,13.5855261 C12.2813156,13.4768419 11.4118419,13.1507892 10.5423682,12.6073682 C10.3249998,12.498684 10.2163156,12.2813156 10.2163156,11.9552629 C10.2163156,11.5205261 10.5423682,11.1944735 10.9771051,11.1944735 C11.0857893,11.1944735 11.3031577,11.1944735 11.4118419,11.3031577 C12.0639471,11.7378945 12.6073682,12.0639471 13.3681576,12.1726314 L13.3681576,9.56421035 C11.4118419,9.02078931 10.5423682,8.36868406 10.5423682,6.84710514 C10.5423682,5.43421043 11.6292103,4.45605255 13.2594734,4.34736834 L13.2594734,4.02131572 C13.2594734,3.69526309 13.4768419,3.47789467 13.8028945,3.47789467 C14.1289471,3.47789467 14.3463155,3.69526309 14.3463155,4.02131572 L14.3463155,4.34736834 C15.107105,4.45605255 15.7592102,4.67342097 16.4113155,5.1081578 C16.6286839,5.21684201 16.8460523,5.43421043 16.8460523,5.76026305 C16.8460523,6.19499989 16.5199997,6.52105251 16.0852629,6.52105251 C15.9765787,6.52105251 15.8678944,6.52105251 15.650526,6.4123683 C15.2157892,6.08631568 14.7810524,5.97763147 14.3463155,5.86894726 L14.3463155,8.36868406 C16.3026313,8.9121051 17.1721049,9.67289456 17.1721049,11.0857893 C17.0634207,12.498684 15.9765787,13.4768419 14.3463155,13.5855261 M13.5855261,0.543421043 C8.69473668,0.543421043 4.67342097,4.56473676 4.67342097,9.45552614 C4.67342097,14.3463155 8.69473668,18.3676312 13.5855261,18.3676312 C18.4763154,18.3676312 22.4976312,14.3463155 22.4976312,9.45552614 C22.4976312,4.56473676 18.4763154,0.543421043 13.5855261,0.543421043"],[1,"info-text"],["xmlns","http://www.w3.org/2000/svg","width","24","height","23","viewBox","0 0 24 23"],["fill","currentColor","d","M11.833,23 C5.48172538,23 0.333,17.8512746 0.333,11.5 C0.333,5.14872538 5.48172538,0 11.833,0 C18.1842746,0 23.333,5.14872538 23.333,11.5 C23.333,17.8512746 18.1842746,23 11.833,23 Z M11.833,11.5 C13.6199922,11.5 15.067375,10.0526172 15.067375,8.265625 C15.067375,6.47863281 13.6199922,5.03125 11.833,5.03125 C10.0460078,5.03125 8.598625,6.47863281 8.598625,8.265625 C8.598625,10.0526172 10.0460078,11.5 11.833,11.5 Z M11.833,13.1171875 C9.67405469,13.1171875 5.36425,14.2007031 5.36425,16.3515625 L5.36425,17.96875 L18.30175,17.96875 L18.30175,16.3515625 C18.30175,14.2007031 13.9919453,13.1171875 11.833,13.1171875 Z"],["xmlns","http://www.w3.org/2000/svg","width","21","height","23","viewBox","0 0 21 23"],["fill","currentColor","d","M7.291667,20.125 L0.104167,20.125 L0.104167,18.9398611 L2.47444478,16.5695833 L2.47444478,10.0625 C2.47444478,6.42881944 4.99006978,3.38770833 8.38895867,2.58270833 L8.38895867,1.77770833 C8.38895867,0.793819444 9.18277811,0 10.166667,0 C11.1505559,0 11.9443753,0.793819444 11.9443753,1.77770833 L11.9443753,2.58270833 C15.3432642,3.38770833 17.8588892,6.42881944 17.8588892,10.0625 L17.8588892,16.5695833 L20.229167,18.9398611 L20.229167,20.125 L11.604167,20.125 C11.604167,21.714196 10.639814,23 9.447917,23 C8.25602002,23 7.291667,21.714196 7.291667,20.125 Z"],["xmlns","http://www.w3.org/2000/svg","width","23","height","23","viewBox","0 0 23 23"],["fill","currentColor","d","M7.66666667,10.35 L5.11111111,10.35 L5.11111111,12.65 L7.66666667,12.65 L7.66666667,10.35 Z M12.7777778,10.35 L10.2222222,10.35 L10.2222222,12.65 L12.7777778,12.65 L12.7777778,10.35 Z M17.8888889,10.35 L15.3333333,10.35 L15.3333333,12.65 L17.8888889,12.65 L17.8888889,10.35 Z M20.4444444,2.3 C21.85,2.3 23,3.335 23,4.6 L23,20.7 C23,21.965 21.85,23 20.4444444,23 L2.55555556,23 C1.13722222,23 0,21.965 0,20.7 L0.0127777778,4.6 C0.0127777778,3.335 1.13722222,2.3 2.55555556,2.3 L3.83333333,2.3 L3.83333333,0 L6.38888889,0 L6.38888889,2.3 L16.6111111,2.3 L16.6111111,0 L19.1666667,0 L19.1666667,2.3 L20.4444444,2.3 Z M20.4444444,20.7 L20.4444444,8.05 L2.55555556,8.05 L2.55555556,20.7 L20.4444444,20.7 Z"],[1,"text-center"],["routerLink","/create-account",1,"btn-create"]],template:function(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"h2"),o.\u0275\u0275text(2,"Your Opal card is unregistered"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"span"),o.\u0275\u0275text(4,"Protect your balance by "),o.\u0275\u0275elementStart(5,"a",1),o.\u0275\u0275text(6,"creating an account"),o.\u0275\u0275elementEnd(),o.\u0275\u0275text(7," in case of theft or loss. Other benefits include:"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(8,"div",2),o.\u0275\u0275elementStart(9,"div",3),o.\u0275\u0275elementStart(10,"div",4),o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(11,"svg",5),o.\u0275\u0275elementStart(12,"g",6),o.\u0275\u0275element(13,"path",7),o.\u0275\u0275element(14,"path",8),o.\u0275\u0275elementStart(15,"g",9),o.\u0275\u0275element(16,"path",10),o.\u0275\u0275element(17,"path",11),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275namespaceHTML(),o.\u0275\u0275elementStart(18,"div",12),o.\u0275\u0275text(19,"Enable auto top up"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(20,"div",3),o.\u0275\u0275elementStart(21,"div",4),o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(22,"svg",13),o.\u0275\u0275element(23,"path",14),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275namespaceHTML(),o.\u0275\u0275elementStart(24,"div",12),o.\u0275\u0275text(25,"Manage multiple cards"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(26,"div",3),o.\u0275\u0275elementStart(27,"div",4),o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(28,"svg",15),o.\u0275\u0275element(29,"path",16),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275namespaceHTML(),o.\u0275\u0275elementStart(30,"div",12),o.\u0275\u0275text(31,"Set up notifications"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(32,"div",3),o.\u0275\u0275elementStart(33,"div",4),o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(34,"svg",17),o.\u0275\u0275element(35,"path",18),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275namespaceHTML(),o.\u0275\u0275elementStart(36,"div",12),o.\u0275\u0275text(37,"View card activities"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(38,"div",19),o.\u0275\u0275elementStart(39,"a",20),o.\u0275\u0275text(40,"Create account"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd())},directives:[r.RouterLinkWithHref],styles:['.unregistered-card-component{margin-top:20px;font-size:16px}.unregistered-card-component span a{text-decoration:underline}.unregistered-card-component svg{height:24px}.unregistered-card-component .info-container{padding:20px;margin:30px 0;background:#f5f5f5}@media (max-width:767px){.unregistered-card-component .info-container{margin:5px;padding:10px}}.unregistered-card-component .btn-create{border-radius:4px;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background-color:#1d69b4;border:0 solid #195c9e;color:#fff;font-family:transtext;font-weight:300;margin:20px auto;text-decoration:none}.unregistered-card-component .btn-create[disabled]{background:#e8e8e8;color:#373636;border-color:transparent}.unregistered-card-component .btn-create:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button+.unregistered-card-component .btn-create{margin-top:10px}.unregistered-card-component .info-icon{color:#1d69b4;fill:#1d69b4}@media (max-width:767px){.unregistered-card-component .info-block{margin-bottom:20px}}.unregistered-card-component .info-text{line-height:1.2}.unregistered-card-component .collapsible-card-details{padding:0}.unregistered-card-component .collapsible-card-details h2{font-size:18px;font-weight:400;padding:15px 0 15px 20px;margin:0}@media (max-width:767px){.unregistered-card-component .collapsible-card-details{margin:20px 10px 0}}.unregistered-card-component .collapsible-card-details-body{padding:15px 20px;border-top:1px solid #ddd}.unregistered-card-component-footer{box-shadow:0 2px 3px 0 rgba(0,0,0,.4);background:#fff;padding:10px;text-align:right;border-top:1px solid #ddd}.unregistered-card-component-footer a{text-decoration:underline}@media (max-width:767px){.unregistered-card-component-footer{margin:0 10px}}'],encapsulation:2}),e}()},"4ti1":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddressFormComponent=void 0;var o=n("fXoL"),r=n("tJ3N"),i=n("fXoL"),a=n("jbib"),c=n("ofXK"),s=n("3Pt+");function l(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",13),i.\u0275\u0275elementStart(1,"div",14),i.\u0275\u0275elementStart(2,"input",15),i.\u0275\u0275listener("ngModelChange",function(e){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().copytoDelivery=e}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"label",16),i.\u0275\u0275elementStart(4,"span"),i.\u0275\u0275text(5,"Save as delivery address"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("ngModel",o.copytoDelivery)}}function d(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",17),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().submit()}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",o.submitLabel," ")}}function p(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",18),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().cancelClicked()}),i.\u0275\u0275text(1,"Cancel"),i.\u0275\u0275elementEnd()}}t.AddressFormComponent=function(){function e(){this.cancel=new o.EventEmitter,this.submitAddress=new o.EventEmitter,this.copytoDelivery=!1,this.validationMessages=new r.ValidationMessages,this.submitLabel="Submit",this.hideSubmitButton=!1}return e.prototype.ngOnInit=function(){this.submitLabel=this.customSubmitLabel?this.customSubmitLabel:this.submitLabel},e.prototype.submit=function(){this.showCopyToDelivery?this.submitAddress.emit(this.copytoDelivery):this.submitAddress.emit()},e.prototype.cancelClicked=function(){this.cancel.emit()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["address-form"]],inputs:{group:"group",title:"title",showCopyToDelivery:"showCopyToDelivery",hideSubmitButton:"hideSubmitButton",customSubmitLabel:"customSubmitLabel",showCancelButton:"showCancelButton"},outputs:{cancel:"cancel",submitAddress:"submitAddress"},decls:13,vars:15,consts:[[1,"address-form"],[1,"container-fluid"],[1,"row"],["labelText","Address line 1","inputName","address1","helpText","","inputType","text",1,"col-md-12",3,"control","errorMap"],["labelText","Address line 2 (optional)","inputName","address2","helpText","","inputType","text",1,"col-md-12",3,"control","errorMap"],["labelText","City/Suburb","inputName","suburb","helpText","","inputType","text",1,"col-md-12",3,"control","errorMap"],["labelText","State","inputName","state","helpText","","inputType","text",1,"col-md-6",3,"control","errorMap"],["labelText","Postcode","inputName","Postcode","helpText","","inputType","text",1,"col-md-6",3,"control","errorMap"],["labelText","Country","inputName","country","helpText","","inputType","text",1,"col-md-12",3,"control","errorMap"],["class","col-md-12 address-form__actions",4,"ngIf"],[1,"col-md-12","address-form__actions","actions"],["class","address-form__submit",3,"click",4,"ngIf"],["class","cancel-button",3,"click",4,"ngIf"],[1,"col-md-12","address-form__actions"],[1,"checkbox-container"],["id","styled-checkbox-1","type","checkbox",1,"styled-checkbox",3,"ngModel","ngModelChange"],["for","styled-checkbox-1"],[1,"address-form__submit",3,"click"],[1,"cancel-button",3,"click"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275element(3,"tni-form-input",3),i.\u0275\u0275element(4,"tni-form-input",4),i.\u0275\u0275element(5,"tni-form-input",5),i.\u0275\u0275element(6,"tni-form-input",6),i.\u0275\u0275element(7,"tni-form-input",7),i.\u0275\u0275element(8,"tni-form-input",8),i.\u0275\u0275template(9,l,6,1,"div",9),i.\u0275\u0275elementStart(10,"div",10),i.\u0275\u0275template(11,d,2,1,"button",11),i.\u0275\u0275template(12,p,2,0,"button",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(3),i.\u0275\u0275property("control",t.group.controls.address1)("errorMap",t.validationMessages.addressLine1),i.\u0275\u0275advance(1),i.\u0275\u0275property("control",t.group.controls.address2)("errorMap",t.validationMessages.addressLine1),i.\u0275\u0275advance(1),i.\u0275\u0275property("control",t.group.controls.suburb)("errorMap",t.validationMessages.suburb),i.\u0275\u0275advance(1),i.\u0275\u0275property("control",t.group.controls.state)("errorMap",t.validationMessages.state),i.\u0275\u0275advance(1),i.\u0275\u0275property("control",t.group.controls.postcode)("errorMap",t.validationMessages.postcode),i.\u0275\u0275advance(1),i.\u0275\u0275property("control",t.group.controls.country)("errorMap",t.validationMessages.country),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.showCopyToDelivery),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",!t.hideSubmitButton),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.showCancelButton))},directives:[a.FormInputComponent,c.NgIf,s.CheckboxControlValueAccessor,s.NgControlStatus,s.NgModel],styles:['.address-form__submit[_ngcontent-%COMP%]{border-radius:4px;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background-color:#1d69b4;border:0 solid #195c9e;color:#fff}.address-form__submit[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.address-form__submit[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .address-form__submit[_ngcontent-%COMP%]{margin-top:10px}label[_ngcontent-%COMP%]{font-weight:300}small[_ngcontent-%COMP%]{font-size:12px}.cancel-button[_ngcontent-%COMP%]{border-radius:4px;border:0 solid transparent;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background:transparent}.cancel-button[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.cancel-button[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .cancel-button[_ngcontent-%COMP%]{margin-top:10px}.checkbox-container[_ngcontent-%COMP%]{margin-bottom:20px}.checkbox-container[_ngcontent-%COMP%]   .styled-checkbox[_ngcontent-%COMP%]{position:absolute;opacity:0}.checkbox-container[_ngcontent-%COMP%]   .styled-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{position:relative;cursor:pointer;font-size:13px;line-height:16px;padding:0 0 0 30px}.checkbox-container[_ngcontent-%COMP%]   .styled-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{float:left;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.checkbox-container[_ngcontent-%COMP%]   .styled-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{content:"";margin-right:10px;float:left;vertical-align:text-top;width:20px;height:20px;background:#f9f9f9;border-radius:3px;border:1px solid;margin-top:-2px;margin-left:-30px}.checkbox-container[_ngcontent-%COMP%]   .styled-checkbox[_ngcontent-%COMP%]:hover + label[_ngcontent-%COMP%]:before{background:#1d69b4}.checkbox-container[_ngcontent-%COMP%]   .styled-checkbox[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%]{box-shadow:0 0 0 3px rgba(0,0,0,.12)}.checkbox-container[_ngcontent-%COMP%]   .styled-checkbox[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{background:#1d69b4}.checkbox-container[_ngcontent-%COMP%]   .styled-checkbox[_ngcontent-%COMP%]:disabled + label[_ngcontent-%COMP%]{color:#b8b8b8;cursor:auto}.checkbox-container[_ngcontent-%COMP%]   .styled-checkbox[_ngcontent-%COMP%]:disabled + label[_ngcontent-%COMP%]:before{box-shadow:none;background:#ddd}.checkbox-container[_ngcontent-%COMP%]   .styled-checkbox[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:7px;background:#fff;width:2px;height:2px;box-shadow:2px 0 0 #fff,4px 0 0 #fff,4px -2px 0 #fff,4px -4px 0 #fff,4px -6px 0 #fff,4px -8px 0 #fff;transform:rotate(45deg)}']}),e}()},"54GQ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentDetailsFormComponent=void 0;var o=n("fXoL"),r=n("tJ3N"),i=(n("3Pt+"),n("0ywJ"),n("fXoL")),a=n("0ywJ"),c=n("ofXK"),s=n("BaDl"),l=n("jbib"),d=n("gUXI"),p=n("gOn0"),u=n("vwDF");function m(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",18),i.\u0275\u0275elementStart(1,"span",12),i.\u0275\u0275text(2,"American Express"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(3,"tni-icon",19),i.\u0275\u0275elementStart(4,"span",12),i.\u0275\u0275text(5,"MasterCard"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(6,"tni-icon",20),i.\u0275\u0275elementStart(7,"span",12),i.\u0275\u0275text(8,"VISA"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(9,"tni-icon",21),i.\u0275\u0275elementStart(10,"span",12),i.\u0275\u0275text(11,"JCB"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(12,"tni-icon",22),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(3),i.\u0275\u0275property("iconAriaHidden",!0),i.\u0275\u0275advance(3),i.\u0275\u0275property("iconAriaHidden",!0),i.\u0275\u0275advance(3),i.\u0275\u0275property("iconAriaHidden",!0),i.\u0275\u0275advance(3),i.\u0275\u0275property("iconAriaHidden",!0))}function f(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",23),i.\u0275\u0275elementStart(1,"span",12),i.\u0275\u0275text(2,"MasterCard"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(3,"tni-icon",20),i.\u0275\u0275elementStart(4,"span",12),i.\u0275\u0275text(5,"VISA"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(6,"tni-icon",21),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(3),i.\u0275\u0275property("iconAriaHidden",!0),i.\u0275\u0275advance(3),i.\u0275\u0275property("iconAriaHidden",!0))}function g(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"tni-form-input",24),i.\u0275\u0275elementContainerEnd()),2&e){var n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("control",n.group.controls.number)("errorMap",n.validationMessages.creditCardNumber(!0))}}function h(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"tni-form-input",24),i.\u0275\u0275elementContainerEnd()),2&e){var n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("control",n.group.controls.number)("errorMap",n.validationMessages.creditCardNumber(!1))}}function v(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"tni-form-input",25),i.\u0275\u0275elementContainerEnd()),2&e){var n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("control",n.group.controls.cvv)("errorMap",n.validationMessages.cvv(!0))}}function C(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"tni-form-input",26),i.\u0275\u0275elementContainerEnd()),2&e){var n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("control",n.group.controls.cvv)("errorMap",n.validationMessages.cvv(!1))}}function _(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"tni-form-checkbox",27),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("control",n.group.controls.saveCard),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n.getCheckboxText()," ")}}function b(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",31),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(3).submit()}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",o.submitLabel," ")}}function x(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",32),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(3).cancelClicked()}),i.\u0275\u0275text(1,"Cancel"),i.\u0275\u0275elementEnd()}}function y(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",28),i.\u0275\u0275template(1,b,2,1,"button",29),i.\u0275\u0275template(2,x,2,0,"button",30),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!n.hideSubmitButton),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.showCancelButton)}}function M(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",2),i.\u0275\u0275elementStart(1,"div",3),i.\u0275\u0275elementStart(2,"div",4),i.\u0275\u0275text(3,"Accepted cards:"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,m,13,4,"div",5),i.\u0275\u0275template(5,f,7,2,"div",6),i.\u0275\u0275elementStart(6,"div",7),i.\u0275\u0275element(7,"tni-form-input",8),i.\u0275\u0275template(8,g,2,2,"ng-container",9),i.\u0275\u0275template(9,h,2,2,"ng-container",9),i.\u0275\u0275elementStart(10,"div",10),i.\u0275\u0275template(11,v,2,2,"ng-container",9),i.\u0275\u0275template(12,C,2,2,"ng-container",9),i.\u0275\u0275elementStart(13,"button",11),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().toggleModal(!0)}),i.\u0275\u0275elementStart(14,"span",12),i.\u0275\u0275text(15,"More information about card verification number"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(16,"tni-icon",13),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(17,"tni-form-input",14),i.\u0275\u0275elementStart(18,"div",15),i.\u0275\u0275template(19,_,2,2,"tni-form-checkbox",16),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(20,y,3,2,"div",17),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext();i.\u0275\u0275advance(4),i.\u0275\u0275property("featureToggle","opal-allow-amex-and-jcb-payments"),i.\u0275\u0275advance(1),i.\u0275\u0275property("featureToggle","!opal-allow-amex-and-jcb-payments"),i.\u0275\u0275advance(2),i.\u0275\u0275property("control",o.group.controls.name)("errorMap",o.validationMessages.nameOnCreditCard),i.\u0275\u0275advance(1),i.\u0275\u0275property("featureToggle","opal-allow-amex-and-jcb-payments"),i.\u0275\u0275advance(1),i.\u0275\u0275property("featureToggle","!opal-allow-amex-and-jcb-payments"),i.\u0275\u0275advance(2),i.\u0275\u0275property("featureToggle","opal-allow-amex-and-jcb-payments"),i.\u0275\u0275advance(1),i.\u0275\u0275property("featureToggle","!opal-allow-amex-and-jcb-payments"),i.\u0275\u0275advance(4),i.\u0275\u0275property("iconName","info")("iconClasses","xs")("iconAriaHidden",!0)("iconTitle","Card verification number information")("iconHidden",!0),i.\u0275\u0275advance(1),i.\u0275\u0275property("control",o.group.controls.expiry)("errorMap",o.validationMessages.creditCardExpiry),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",o.showAddCard),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!o.hideSubmitButton||o.showCancelButton)}}function P(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",35),i.\u0275\u0275elementStart(2,"h3"),i.\u0275\u0275text(3,"Where to find the CVV"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(4,"img",36),i.\u0275\u0275elementStart(5,"div"),i.\u0275\u0275elementStart(6,"strong"),i.\u0275\u0275text(7,"American Express"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"p"),i.\u0275\u0275text(9,"CVV is the 4 digit number on the front of your card"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"div"),i.\u0275\u0275elementStart(11,"strong"),i.\u0275\u0275text(12,"Visa/Mastercard/JCB"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(13,"p"),i.\u0275\u0275text(14,"CVV is the 3 digit number on the back of your card"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function O(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"img",37),i.\u0275\u0275elementStart(2,"p"),i.\u0275\u0275text(3,"The CVV is located on the back of your card."),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd())}function S(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tni-modal",33),i.\u0275\u0275listener("closeEvent",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().toggleModal(!1)}),i.\u0275\u0275template(1,P,15,0,"ng-container",9),i.\u0275\u0275template(2,O,4,0,"ng-container",9),i.\u0275\u0275elementStart(3,"button",34),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().toggleModal(!1)})("keyup",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().toggleModal(!1)}),i.\u0275\u0275text(4," OK "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("featureToggle","opal-allow-amex-and-jcb-payments"),i.\u0275\u0275advance(1),i.\u0275\u0275property("featureToggle","!opal-allow-amex-and-jcb-payments"))}t.PaymentDetailsFormComponent=function(){function e(e){this.panelRefreshService=e,this.cancel=new o.EventEmitter,this.submitDetails=new o.EventEmitter,this.copytoDelivery=!1,this.validationMessages=new r.ValidationMessages,this.submitLabel="Submit",this.isModalOpen=!1,this.hideSubmitButton=!1}return e.prototype.ngOnInit=function(){var e=this;this.submitLabel=this.customSubmitLabel?this.customSubmitLabel:this.submitLabel,this.group.valueChanges.subscribe(function(){return e.panelRefreshService.pushPanelRefreshEvent()})},e.prototype.submit=function(){this.submitDetails.emit()},e.prototype.cancelClicked=function(){this.cancel.emit()},e.prototype.toggleModal=function(e){this.isModalOpen=e},e.prototype.getCheckboxText=function(){return this.checkBoxText?this.checkBoxText:"Add card details to my account"},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(a.TniPanelRefreshService))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["payment-details-form"]],inputs:{group:"group",title:"title",showCopyToDelivery:"showCopyToDelivery",hideSubmitButton:"hideSubmitButton",customSubmitLabel:"customSubmitLabel",showCancelButton:"showCancelButton",checkBoxText:"checkBoxText",showAddCard:"showAddCard"},outputs:{cancel:"cancel",submitDetails:"submitDetails"},decls:2,vars:2,consts:[["class","payment-details-form",4,"ngIf"],["ariaLabel","Where to find the CVV","class","payment-details-form__modal",3,"closeEvent",4,"ngIf"],[1,"payment-details-form"],[1,"container-fluid"],[1,"card-text","col-md-12"],["class","payment-detail__icon payment-detail__icon--amex-and-jcb-payments-allowed col-md-12",4,"featureToggle"],["class","payment-detail__icon col-md-12",4,"featureToggle"],[1,"row"],["labelText","Name on card","inputName","name","helpText","","inputType","text",1,"col-md-12",3,"control","errorMap"],[4,"featureToggle"],[1,"col-md-6","payment-details-form__cvv--wrap"],[1,"icon",3,"click"],[1,"sr-only"],[1,"info-link",3,"iconName","iconClasses","iconAriaHidden","iconTitle","iconHidden"],["labelText","Expiry date (MM/YY)","inputName","expiry","helpText","","inputType","expiry",1,"col-md-6",3,"control","errorMap"],[1,"col-md-12"],["class","add-card-container","name","saveCard",3,"control",4,"ngIf"],["class","col-md-12 payment-details-form__actions actions",4,"ngIf"],[1,"payment-detail__icon","payment-detail__icon--amex-and-jcb-payments-allowed","col-md-12"],["iconName","amex","iconClasses","md","iconTitle","amex",3,"iconAriaHidden"],["iconName","mastercard","iconClasses","xl","iconTitle","mastercard",3,"iconAriaHidden"],["iconName","visa","iconClasses","xl","iconTitle","visa",3,"iconAriaHidden"],["iconName","jcb","iconClasses","lg","iconTitle","jcb",3,"iconAriaHidden"],[1,"payment-detail__icon","col-md-12"],["labelText","Credit card number","inputName","number","helpText","","inputType","text","maxLength","16",1,"col-md-12",3,"control","errorMap"],["labelText","CVV","inputName","cvv","helpText","","inputType","text","maxLength","4",3,"control","errorMap"],["labelText","CVV","inputName","cvv","helpText","","inputType","text","maxLength","3",3,"control","errorMap"],["name","saveCard",1,"add-card-container",3,"control"],[1,"col-md-12","payment-details-form__actions","actions"],["class","payment-details-form__submit",3,"click",4,"ngIf"],["class","cancel-button",3,"click",4,"ngIf"],[1,"payment-details-form__submit",3,"click"],[1,"cancel-button",3,"click"],["ariaLabel","Where to find the CVV",1,"payment-details-form__modal",3,"closeEvent"],[1,"payment-details-form__modal__close-btn",3,"click","keyup"],[1,"payment-details-form__modal--amex-and-jcb-payments-allowed"],["src","assets/images/img_card-graphics-cvv-overlay.svg","alt","",1,"payment-details-form__cvv"],["src","assets/images/credit-card.png","alt","",1,"payment-details-form__cvv"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,M,21,17,"div",0),i.\u0275\u0275template(1,S,5,2,"tni-modal",1)),2&e&&(i.\u0275\u0275property("ngIf",t.group),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.isModalOpen))},directives:[c.NgIf,s.FeatureToggleDirective,l.FormInputComponent,d.IconComponent,p.FormCheckboxComponent,u.ModalWindowComponent],styles:['.payment-details-form__submit[_ngcontent-%COMP%]{border-radius:4px;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background-color:#1d69b4;border:0 solid #195c9e;color:#fff}.payment-details-form__submit[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.payment-details-form__submit[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .payment-details-form__submit[_ngcontent-%COMP%]{margin-top:10px}label[_ngcontent-%COMP%]{font-weight:300}small[_ngcontent-%COMP%]{font-size:12px}.cancel-button[_ngcontent-%COMP%]{border-radius:4px;border:0 solid transparent;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background:transparent}.cancel-button[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.cancel-button[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .cancel-button[_ngcontent-%COMP%]{margin-top:10px}.checkbox-container[_ngcontent-%COMP%]{margin-bottom:20px}.payment-details-form__cvv--wrap[_ngcontent-%COMP%]{position:relative}.payment-details-form__cvv--wrap[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:absolute;right:32px;top:39px;width:20px;height:26px;border:none;background:none;padding:0}.add-card-container[_ngcontent-%COMP%]{padding:0 7px;margin-bottom:-35px}.add-card-container[_ngcontent-%COMP%]     .copy-text{margin:-25px 0 25px}.add-card-container[_ngcontent-%COMP%]     .form-input.nohelp{padding:0}.add-card-container[_ngcontent-%COMP%]     .text{text-align:left;font-size:12px;letter-spacing:.51px;line-height:16px;padding-top:4px}.add-card-container[_ngcontent-%COMP%]     .text a{text-decoration:underline}.card-text[_ngcontent-%COMP%]{font-size:12px;padding:25px 0 5px}.payment-detail__icon[_ngcontent-%COMP%]{border:1px solid #dbdbdb;text-align:center;border-radius:4px;padding:8px 0;margin-bottom:15px}.payment-detail__icon[_ngcontent-%COMP%]   tni-icon[_ngcontent-%COMP%]{padding:0 5%}.payment-detail__icon--amex-and-jcb-payments-allowed[_ngcontent-%COMP%]{display:flex;justify-content:space-around}.payment-detail__icon--amex-and-jcb-payments-allowed[_ngcontent-%COMP%]   tni-icon[_ngcontent-%COMP%]{display:grid;place-content:center}tni-modal[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{color:#0069b7}.payment-details-form__modal__close-btn[_ngcontent-%COMP%]{font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;max-width:270px;background:#fff;color:#1d69b4;border:1px solid #dbdbdb;border-radius:4px;padding:8px 32px;width:auto;min-width:130px;margin-top:48px;width:100%}.payment-details-form__modal__close-btn[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.payment-details-form__modal__close-btn[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .payment-details-form__modal__close-btn[_ngcontent-%COMP%]{margin-top:10px}.payment-details-form__modal__close-btn[_ngcontent-%COMP%]:hover{border:1px solid #1d69b4;background:#fff}.payment-details-form__modal__close-btn[_ngcontent-%COMP%]:hover:after{display:none}@media (min-width:768px){.payment-details-form__modal__close-btn[_ngcontent-%COMP%]{width:auto}}.payment-details-form__cvv[_ngcontent-%COMP%]{width:143px}tni-form-checkbox[_ngcontent-%COMP%]{margin-left:10px}.payment-details-form__modal--amex-and-jcb-payments-allowed[_ngcontent-%COMP%]{display:flex;flex-direction:column}.payment-details-form__modal--amex-and-jcb-payments-allowed[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{padding:32px;width:300px}.payment-details-form__modal--amex-and-jcb-payments-allowed[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{text-align:left}.payment-details-form__modal--amex-and-jcb-payments-allowed[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-of-type{margin-bottom:32px}.payment-details-form__modal--amex-and-jcb-payments-allowed[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}']}),e}()},"5A3l":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BusinessComponentsModule=void 0,n("fXoL");var o=n("ofXK"),r=n("jhN1"),i=n("3Pt+"),a=n("R1ws"),c=n("tyNb"),s=n("bXO7"),l=n("+AZU"),d=(n("HYg0"),n("DkoF"),n("q8mF"),n("7q50"),n("D2aF"),n("ui0D"),n("UI8/"),n("knLn"),n("mb9H"),n("SuK/"),n("MyN3"),n("Tz4i"),n("6cuf"),n("4U9u"),n("MSaF"),n("Ti8x"),n("w0to"),n("Tueg"),n("C1fI"),n("nVUv"),n("xpgH"),n("FPfk"),n("S3W/"),n("4ptd"),n("Fam3")),p=n("6TJL"),u=(n("N+3c"),n("ryGM"),n("iAux"),n("37k+"),n("aeCY"),n("1+U/"),n("nOpk"),n("NJII"),n("fXoL"));t.BusinessComponentsModule=function(){function e(){}return e.\u0275mod=u.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=u.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule,r.BrowserModule,d.TniPipesModules,p.UiComponentsModule,i.FormsModule,i.ReactiveFormsModule,l.TniFormComponentsModule,c.RouterModule,s.environment.disableAnimations?a.NoopAnimationsModule:a.BrowserAnimationsModule,l.TniFormComponentsModule]]}),e}()},"5Jp9":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServerErrorService=void 0,n("fXoL");var o=n("1UBY"),r=n("fXoL");t.ServerErrorService=function(){function e(e,t,n,o){this.componentFactoryResolver=e,this.appRef=t,this.injector=n,this.zone=o}return e.prototype.attachServerErrorToBody=function(){var e=this;this.zone.runGuarded(function(){var t=e.componentFactoryResolver.resolveComponentFactory(o.ServerErrorComponent).create(e.injector),n=t.hostView.rootNodes[0];e.appRef.attachView(t.hostView),document.body.insertBefore(n,document.body.firstChild),e.appRef.tick(),t.instance.closeEvent.subscribe(function(){e.detachServerErrorFromBody(t,n)})})},e.prototype.detachServerErrorFromBody=function(e,t){document.body.removeChild(t),this.appRef.detachView(e.hostView),e.destroy()},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(r.ComponentFactoryResolver),r.\u0275\u0275inject(r.ApplicationRef),r.\u0275\u0275inject(r.Injector),r.\u0275\u0275inject(r.NgZone))},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},"5P5b":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniPanelGroupModule=void 0,n("fXoL"),n("+xla"),n("SPMH"),n("u1nx");var o=n("0ywJ"),r=n("ofXK"),i=n("fXoL");t.TniPanelGroupModule=function(){function e(){}return e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},providers:[o.TniPanelRefreshService],imports:[[r.CommonModule]]}),e}()},"5VQw":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoTopupService=void 0;var o=n("qCKp"),r=n("kU1M"),i=(n("fXoL"),n("tk/3"),n("fXoL")),a=n("tk/3");t.AutoTopupService=function(){function e(e){this.http=e,this.cardIdToAmountsInCentsCache=new Map}return e.prototype.getAvailableTopupAmounts=function(e){var t=this;return this.cardIdToAmountsInCentsCache.get(e)?o.of(this.cardIdToAmountsInCentsCache.get(e)):this.http.get("/api/opal/api/smartcard/autoload/"+e).pipe(r.map(function(n){var o=n.AutoloadAmount.map(function(e){return e.Value});return t.cardIdToAmountsInCentsCache.set(e,o),o}))},e.prototype.setAutoTopup=function(e,t){return this.http.post("/api/opal/api/smartcard/autoload/",{SmartcardId:e,AutoloadValue:t}).pipe(r.map(function(e){return e.SmartcardId}))},e.prototype.disableAutoTopup=function(e){return this.http.delete("/api/opal/api/smartcard/autoload/"+e).pipe(r.map(function(e){return e.SmartcardId}))},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(a.HttpClient))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},"5rcV":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OneoffTopupPaymentProcessService=t.PaymentProcessStateType=void 0,n("fXoL");var o=n("qCKp"),r=(n("ELlc"),n("XQ1l")),i=(n("tf7G"),n("kU1M")),a=n("fXoL"),c=n("ELlc"),s=n("tf7G"),l=t.PaymentProcessStateType=function(e){return e.INITIAL="Initial",e.TOPUP_REQUESTED="TopupRequested",e.TOPUP_COMPLETE="TopupComplete",e.TOPUP_ERROR="TopupError",e.BPOINT_CALLBACK_REQUESTED="BpointCallbackRequested",e.BPOINT_CALLBACK_ERROR="BpointCallbackError",e.PAYMENT_TOKEN_REQUESTED="PaymentTokenRequested",e.PAYMENT_TOKEN_ERROR="PaymentTokenError",e.PAYMENT_TOKEN_COMPLETE="PaymentTokenComplete",e.VERIFY_TOKEN_REQUESTED="VerifyTokenRequested",e.VERIFY_TOKEN_COMPLETE="VerifyTokenComplete",e.VERIFY_TOKEN_REQUEST_RETRY="VerifyTokenRequestRetry",e.VERIFY_TOKEN_RETRY="VerifyTokenRetry",e.VERIFY_TOKEN_ERROR="VerifyTokenError",e.SYNC_TOPUP_REQUESTED="SyncTopupRequested",e.SYNC_TOPUP_RETRY="SyncTopupRetry",e.SYNC_TOPUP_REQUEST_RETRY="SyncTopupRequestRetry",e.SYNC_TOPUP_ERROR="SyncTopupError",e.SYNC_TOPUP_COMPLETE="SyncTopupComplete",e}(t.PaymentProcessStateType||{});t.OneoffTopupPaymentProcessService=function(){function e(e,t){this.paymentService=e,this.topupService=t,this.oneOffTopupPaymentProcessState=new o.BehaviorSubject({stateName:l.INITIAL})}return e.prototype.refreshSubject=function(){this.oneOffTopupPaymentProcessState=new o.BehaviorSubject({stateName:l.INITIAL})},e.prototype.changeState=function(e){this.oneOffTopupPaymentProcessState.value.stateName!==e.stateName&&this.oneOffTopupPaymentProcessState.next(e)},e.prototype.topup=function(e,t){var n=this;this.changeState({stateName:l.TOPUP_REQUESTED}),this.topupService.topup(e,t).pipe(i.take(1)).subscribe(function(e){n.changeState({stateName:l.TOPUP_COMPLETE,data:{orderNo:e.orderId}})},function(){n.changeState({stateName:l.TOPUP_ERROR})})},e.prototype.getPaymentToken=function(e,t){var n=this;this.changeState({stateName:l.PAYMENT_TOKEN_REQUESTED}),this.paymentService.getPaymentRequestToken(e,t).subscribe(function(e){n.changeState({stateName:l.PAYMENT_TOKEN_COMPLETE,data:{tokenResponse:e}})},function(){n.changeState({stateName:l.PAYMENT_TOKEN_ERROR})})},e.prototype.bpointCallback=function(e,t){this.oneOffTopupPaymentProcessState.next({stateName:l.BPOINT_CALLBACK_REQUESTED}),e?this.verifyToken(t):this.oneOffTopupPaymentProcessState.next({stateName:l.BPOINT_CALLBACK_ERROR})},e.prototype.verifyToken=function(e,t){var n=this;void 0===t&&(t=0),this.changeState({stateName:l.VERIFY_TOKEN_REQUESTED});var a=parseInt(e.smartCard,10),c=parseInt(e.out_amount,10);this.paymentService.verifyToken(r.PaymentTransationModel.toRequest(a,c,e.out_merchant_reference,e)).pipe(i.take(1),i.catchError(function(){return t>=2?(t=0,o.of("requestRetry")):(t++,o.of("retry"))})).subscribe(function(o){"requestRetry"===o?n.changeState({stateName:l.VERIFY_TOKEN_REQUEST_RETRY}):"retry"===o?(n.changeState({stateName:l.VERIFY_TOKEN_RETRY}),n.verifyToken(e,t)):(n.changeState({stateName:l.VERIFY_TOKEN_COMPLETE}),n.initiateSyncTopUp(e))})},e.prototype.cancelVerifyToken=function(){this.changeState({stateName:l.VERIFY_TOKEN_ERROR})},e.prototype.initiateSyncTopUp=function(e){this.changeState({stateName:l.SYNC_TOPUP_REQUESTED}),this.syncTopup(e)},e.prototype.syncTopup=function(e,t){var n=this;if(void 0===t&&(t=0),e&&e.merchantReceipt){var r=parseInt(e.smartCard,10),a=parseInt(e.out_amount,10);this.topupService.topup(r,a,e.merchantReceipt).pipe(i.take(1),i.catchError(function(e){return t>0&&425===e.status&&e.error&&"Unable to create order"===e.error.Message?o.of("alreadyCreated"):425===e.status&&e.error&&"Invalid topup amount"===e.error.Message?o.of("invalidPayment"):t>=2?(t=0,o.of("requestRetry")):(t++,o.of("retry"))})).subscribe(function(o){"invalidPayment"===o?n.changeState({stateName:l.SYNC_TOPUP_ERROR}):"requestRetry"===o?n.changeState({stateName:l.SYNC_TOPUP_REQUEST_RETRY}):"retry"===o?(n.changeState({stateName:l.SYNC_TOPUP_RETRY,data:{topupErrorCount:t}}),n.syncTopup(e,t)):n.changeState({stateName:l.SYNC_TOPUP_COMPLETE,data:{orderNo:e.merchantReceipt,amount:a}})})}},e.prototype.cancelSyncTopup=function(){this.changeState({stateName:l.SYNC_TOPUP_ERROR})},e.prototype.finishPaymentProcess=function(){this.changeState({stateName:l.INITIAL})},e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275inject(c.PaymentService),a.\u0275\u0275inject(s.TopupService))},e.\u0275prov=a.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},"6TJL":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UiComponentsModule=void 0,n("fXoL");var o=n("ofXK"),r=n("3Pt+"),i=n("sDue"),a=n("+gHY"),c=n("7aLH"),s=(n("DRCh"),n("1UBY"),n("GMQf")),l=n("lTWT"),d=n("E8FH"),p=n("MVJ0"),u=n("qYMD"),m=n("p7iu"),f=n("Pxei"),g=n("NKuO"),h=n("s+A7"),v=n("USdT"),C=n("pc1u"),_=n("khGg"),b=n("mAtO"),x=n("5P5b"),y=n("smBZ"),M=n("0bNP"),P=n("6YBc"),O=n("uA0r"),S=n("wxrw"),w=n("VnzS"),k=n("Ts6m"),E=n("cMt+"),T=n("8okd"),I=n("Dz93"),A=n("QFCG"),N=n("BosL"),L=n("2qlC"),R=n("CJsN"),j=n("zKOy"),F=n("swtb"),V=n("pshO"),D=n("TMHu"),B=n("LkoC"),U=n("fXoL");t.UiComponentsModule=function(){function e(){}return e.\u0275mod=U.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=U.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule,i.FormCheckboxModule,a.FormInputModule,c.FormSelectInputModule,r.FormsModule,r.ReactiveFormsModule,s.TniAccordionModule,l.TniCardCodeModule,d.TniCardNumberModule,p.TniCheckboxModule,u.TniCollapsibleCardModule,m.TniFormInputSwitchModule,f.TniFormMessageModule,g.TniIconModule,h.TniImageModule,v.TniLinguaDropdownModule,C.TniModalModule,_.TniOptionModule,b.TniPanelCardModule,x.TniPanelGroupModule,y.TniRadioButtonModule,y.TniRadioButtonModule,M.TniRadioPanelModule,P.TniRefreshModule,O.TniRemovableCardModule,S.TniSlideDownModule,w.TniSpinnerModule,k.TniStateBannerModule,E.TniTabModule,T.TniTextFieldModule,I.TniMessagePanelModule,A.TniInputFieldModule,N.TitleBarModule,R.LayoutModule,L.PageFrameModule,j.HeaderModule,F.FooterModule,V.LoaderModule,D.ActionListModule,B.SecurityMessageModule],i.FormCheckboxModule,a.FormInputModule,c.FormSelectInputModule,s.TniAccordionModule,l.TniCardCodeModule,d.TniCardNumberModule,p.TniCheckboxModule,u.TniCollapsibleCardModule,m.TniFormInputSwitchModule,f.TniFormMessageModule,g.TniIconModule,h.TniImageModule,v.TniLinguaDropdownModule,C.TniModalModule,_.TniOptionModule,b.TniPanelCardModule,x.TniPanelGroupModule,y.TniRadioButtonModule,M.TniRadioPanelModule,P.TniRefreshModule,O.TniRemovableCardModule,S.TniSlideDownModule,w.TniSpinnerModule,k.TniStateBannerModule,E.TniTabModule,T.TniTextFieldModule,I.TniMessagePanelModule,A.TniInputFieldModule,N.TitleBarModule,L.PageFrameModule,R.LayoutModule,j.HeaderModule,F.FooterModule,V.LoaderModule,D.ActionListModule,B.SecurityMessageModule]}),e}()},"6YBc":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniRefreshModule=void 0,n("fXoL");var o=n("NKuO"),r=(n("g96h"),n("fXoL"));t.TniRefreshModule=function(){function e(){}return e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.TniIconModule]]}),e}()},"6cuf":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalAccountSummaryComponent=void 0,n("fXoL"),n("c7H9"),n("QK+Z"),n("YORH"),n("puoa"),n("84CM");var o=n("fXoL"),r=n("c7H9"),i=n("QK+Z"),a=n("puoa"),c=n("YORH"),s=n("84CM");t.OpalAccountSummaryComponent=function(){function e(e,t,n,o,r){this.profileService=e,this.opalAccountStore=t,this.windowRef=n,this.trackOpalEventService=o,this.logoutService=r}return e.prototype.ngAfterViewInit=function(){this.logoutService.startLogoutTimer()},e.prototype.logout=function(e){this.logoutService.logout(!1)},e.prototype.redirectToOpalCardsPage=function(){this.opalAccountStore.isRegistered()?this.trackOpalEventService.clickViewDetailsRegistered():this.trackOpalEventService.clickViewDetailsUnregistered(),this.windowRef.redirectToUrl("/opal-view/#/account/cards")},e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(r.ProfileService),o.\u0275\u0275directiveInject(i.OpalAccountStore),o.\u0275\u0275directiveInject(a.WindowRef),o.\u0275\u0275directiveInject(c.TrackOpalEventService),o.\u0275\u0275directiveInject(s.LogoutService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-opal-account-summary"]],inputs:{nameOrCard:"nameOrCard",email:"email"},decls:11,vars:2,consts:[[1,"opal-account-registered"],[1,"full-name"],[1,"email"],[1,"btn-container"],["type","submit",1,"btn-view-details","btn","btn-primary",3,"click"],["type","button","id","link-logout","href","javascript:;",1,"btn-logout","btn-link",3,"click"]],template:function(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"div",2),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"div",3),o.\u0275\u0275elementStart(6,"button",4),o.\u0275\u0275listener("click",function(){return t.redirectToOpalCardsPage()}),o.\u0275\u0275text(7," View details "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(8,"div",3),o.\u0275\u0275elementStart(9,"button",5),o.\u0275\u0275listener("click",function(){return t.logout(!1)}),o.\u0275\u0275text(10," Log out "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",t.nameOrCard," "),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",t.email," "))},styles:[".tfnsw-spinner[_ngcontent-%COMP%]{text-align:center;position:relative}.tfnsw-spinner[_ngcontent-%COMP%]   .spinner-image[_ngcontent-%COMP%]{display:none}.tfnsw-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%], .tfnsw-spinner[_ngcontent-%COMP%]   .spinner-image[_ngcontent-%COMP%]{width:50px;height:50px;margin:0 auto;text-align:center}.tfnsw-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{-webkit-animation:circle .75s linear infinite;animation:circle .75s linear infinite;border:5px solid #1d69b4;border-top-color:transparent;border-radius:100%}@-webkit-keyframes circle{0%{transform:rotate(0)}to{transform:rotate(1turn)}}@keyframes circle{0%{transform:rotate(0)}to{transform:rotate(1turn)}}@media (-ms-high-contrast:active),(-ms-high-contrast:none){.tfnsw-spinner[_ngcontent-%COMP%]   .spinner-image[_ngcontent-%COMP%]{display:block}.tfnsw-spinner[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{display:none}}.opal-account-registered[_ngcontent-%COMP%]{display:flex;flex-direction:column}.opal-account-registered[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]{display:flex;padding-top:10px;flex-direction:row}.opal-account-registered[_ngcontent-%COMP%]   .btn-container[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{flex-grow:1}.opal-account-registered[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{color:#1d69b4;float:right;border:0;padding:0;background:transparent;text-decoration:underline;font-weight:lighter;font-size:14px}.opal-account-registered[_ngcontent-%COMP%]   .full-name[_ngcontent-%COMP%]{font-weight:400}.opal-account-registered[_ngcontent-%COMP%]   .email[_ngcontent-%COMP%]{padding-bottom:15px}"]}),e}()},"6i2Y":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureToggleService=void 0;var o=n("qCKp"),r=n("kU1M"),i=(n("fXoL"),n("tk/3"),n("bXO7")),a=n("fXoL"),c=n("tk/3");t.FeatureToggleService=function(){function e(e){this.http=e,this.env=i.environment}return e.prototype.getToggles=function(){var e=this;return this.featureToggles?o.from([this.featureToggles]):this.http.get(this.env.localDev?"http://localhost:3000/toggles":"/api/opal/toggles/").pipe(r.map(function(t){return e.featureToggles=t,e.featureToggles}),r.catchError(function(e){return o.of(!1)}))},e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275inject(c.HttpClient))},e.\u0275prov=a.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},"73Ru":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniFormMessageComponent=void 0,n("fXoL");var o=n("fXoL"),r=n("gUXI"),i=["*"];t.TniFormMessageComponent=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-form-message"]],ngContentSelectors:i,decls:4,vars:2,consts:[[1,"form-message"],[1,"form-message__container"],["iconName","alert","iconClasses","xs","iconTitle","Travel Rewards Information",1,"info-link",3,"iconAriaHidden","iconHidden"]],template:function(e,t){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275element(2,"tni-icon",2),o.\u0275\u0275projection(3),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(2),o.\u0275\u0275property("iconAriaHidden",!0)("iconHidden",!0))},directives:[r.IconComponent],styles:["[_nghost-%COMP%]{display:block}.form-message[_ngcontent-%COMP%]{font-size:14px;line-height:1.5;border:1px solid #e4022d;padding:15px 2em 15px 10px;font-weight:400;display:-ms-flexbox;color:#555}.form-message__container[_ngcontent-%COMP%]{padding-left:30px;position:relative}.form-message__container[_ngcontent-%COMP%]     svg{margin:1px 9px 0 2px;position:absolute;left:0;top:0}"]}),e}()},"74Ue":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormValidationService=void 0,n("fXoL"),n("0ruu");var o=n("fXoL"),r=n("0ruu");t.FormValidationService=function(){function e(e){this.scrollService=e}return e.prototype.focusOnInvalidElement=function(e){var t=document.querySelector(".ng-invalid:not(form)");if(t){var n=t;t.childElementCount>0&&(n=t.querySelector("input")||t.querySelector("option").parentElement),n.focus(),this.scrollService.scrollToElement(n,100)}},e.prototype.markInvalidAsDirty=function(e){Object.keys(e.controls).reverse().forEach(function(t){e.controls[t].invalid&&e.controls[t].markAsDirty()})},e.prototype.validate=function(e){Object.keys(e.controls).reverse().forEach(function(t){e.controls[t].updateValueAndValidity()}),this.markInvalidAsDirty(e),this.focusOnInvalidElement(e)},e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(r.ScrollService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},"7aLH":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormSelectInputModule=void 0,n("fXoL");var o=n("ofXK"),r=(n("Mfk8"),n("3Pt+")),i=n("NKuO"),a=n("khGg"),c=n("fXoL");t.FormSelectInputModule=function(){function e(){}return e.\u0275mod=c.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=c.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[i.TniIconModule,o.CommonModule,r.ReactiveFormsModule,r.FormsModule,a.TniOptionModule]]}),e}()},"7q50":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardCarouselComponent=void 0;var o=n("fXoL"),r=n("2cv0"),i=(n("Mp0x"),n("PShm"),n("WcMK"),n("tyNb"),n("U+qi"),n("fXoL")),a=n("Mp0x"),c=n("PShm"),s=n("WcMK"),l=n("tyNb"),d=n("U+qi"),p=n("ofXK"),u=n("D2aF"),m=n("gUXI"),f=n("vwDF");function g(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",8),i.\u0275\u0275elementStart(1,"a",9),i.\u0275\u0275namespaceSVG(),i.\u0275\u0275elementStart(2,"svg",10),i.\u0275\u0275elementStart(3,"g",11),i.\u0275\u0275element(4,"path",12),i.\u0275\u0275element(5,"path",13),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275namespaceHTML(),i.\u0275\u0275elementStart(6,"span",14),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().showRegistration=!0}),i.\u0275\u0275text(7,"Link card"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("link-card-only",o.smartcards&&!o.smartCards.length)}}function h(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",26),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"centsToDollar"),i.\u0275\u0275elementStart(3,"span",27),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(3).togglePendingInfoModal()}),i.\u0275\u0275text(4,"i"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext(2).$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind2(2,1,o.svPending,"1.0-2")," pending ")}}function v(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275elementStart(1,"p",24),i.\u0275\u0275text(2),i.\u0275\u0275pipe(3,"centsToDollar"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,h,5,4,"div",25),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275nextContext().$implicit;i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",i.\u0275\u0275pipeBind1(3,2,n.svBalance)," "),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",n.svPending>0)}}var C=function(e){return{active:e}};function _(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",15),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(n);var e=t.index;return i.\u0275\u0275nextContext().snapTo(e)})("keypress",function(e){i.\u0275\u0275restoreView(n);var o=t.index;return i.\u0275\u0275nextContext().snapTo(o,e)}),i.\u0275\u0275elementStart(1,"div",16),i.\u0275\u0275elementStart(2,"div",17),i.\u0275\u0275element(3,"img",18),i.\u0275\u0275elementStart(4,"tni-card-carousel-status",19),i.\u0275\u0275listener("initiateActivation",function(){i.\u0275\u0275restoreView(n);var e=t.$implicit;return i.\u0275\u0275nextContext().initiateActivation(e.smartcardId)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"div",20),i.\u0275\u0275elementStart(6,"div",21),i.\u0275\u0275elementStart(7,"h3",22),i.\u0275\u0275text(8),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(9,v,5,4,"div",23),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var o=t.$implicit,r=t.index,a=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(9,C,r===a.activeIndex)),i.\u0275\u0275attribute("aria-selected",r===a.activeIndex)("aria-label",a.getVoiceOverMessage(o)),i.\u0275\u0275advance(3),i.\u0275\u0275propertyInterpolate1("src","assets/logos/opal-types/",a.getOpalImageName(o),".svg",i.\u0275\u0275sanitizeUrl),i.\u0275\u0275advance(1),i.\u0275\u0275property("isBlocked",a.isCardBlocked(o))("isInactive",!!o.pendingBalanceActivation),i.\u0275\u0275advance(3),i.\u0275\u0275attribute("aria-label",a.cardTitle(o)),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(a.cardTitle(o)),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!o.pendingBalanceActivation)}}function b(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"span",28),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().prevSlide()})("keypress",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().prevSlide()}),i.\u0275\u0275element(1,"tni-icon",29),i.\u0275\u0275elementEnd()}2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("iconAriaHidden",!0))}function x(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"span",30),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().nextSlide()})("keypress",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().nextSlide()}),i.\u0275\u0275element(1,"tni-icon",31),i.\u0275\u0275elementEnd()}2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("iconAriaHidden",!0))}function y(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"li",34),i.\u0275\u0275listener("click",function(){i.\u0275\u0275restoreView(n);var e=t.index;return i.\u0275\u0275nextContext(2).snapTo(e)}),i.\u0275\u0275elementEnd()}if(2&e){var o=t.index,r=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("ngClass",i.\u0275\u0275pureFunction1(1,C,o==r.activeIndex))}}function M(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"ol",32),i.\u0275\u0275template(1,y,1,3,"li",33),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",n.smartCards)}}function P(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tni-modal",35),i.\u0275\u0275listener("closeEvent",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().togglePendingInfoModal()}),i.\u0275\u0275elementStart(1,"span",36),i.\u0275\u0275text(2,"i"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"h3"),i.\u0275\u0275text(4,"Balance pending"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"p"),i.\u0275\u0275text(6,"Online top ups show as \u2018pending\u2019 until the card is tapped on at an Opal reader."),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"button",37),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().togglePendingInfoModal()})("keyup",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().togglePendingInfoModal()}),i.\u0275\u0275text(8,"OK"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}}t.CardCarouselComponent=function(){function e(e,t,n,r,i,a){this.centsToDollarPipe=e,this.smartcardService=t,this.dataSharingService=n,this.router=r,this.cdRef=i,this.opalCardNumberPipe=a,this.cardNumberSelected=new o.EventEmitter,this.pointerXCoord=0,this.panning=!1,this.lastMove="",this.imageLeftCord=0,this.carouselStyle={},this.activeIndex=0,this.showRegistration=!1,this.showPendingInfoModal=!1}return e.prototype.ngAfterViewInit=function(){var e=this;this.cardSelectionSubscription=this.smartcardService.smartcard$.subscribe(function(t){var n=e.smartCards.findIndex(function(e){return e.smartcardId===t.smartcardId});e.smartCards[n]=t}),!this.initiCardSet&&this.activeCard&&(this.initiCardSet=!0,this.snapTo(this.smartCards.findIndex(function(t){return t.smartcardId===e.activeCard}),null),this.cdRef.detectChanges())},e.prototype.ngOnDestroy=function(){this.cdRef.detach(),this.cardSelectionSubscription.unsubscribe()},e.prototype.getOpalImageName=function(e){switch(e.cardTypeCode){case r.OpalCardType.Child:return"youth";case r.OpalCardType.Concession:return"concession";case r.OpalCardType.Senior:return"senior";default:return"adult"}},e.prototype.isCardBlocked=function(e){return e.isBlocked},e.prototype.onPanStart=function(e){this.pointerXCoord=e.pointers[0].pageX,this.panning=!0,this.lastMove=e.additionalEvent},e.prototype.onPanEnd=function(e){var t=this;switch(!0){case"panright"===t.lastMove:t.prevSlide();break;case"panleft"===t.lastMove:t.nextSlide();break;default:t.snapNext(!1)}},e.prototype.onPanMove=function(e){if(!(this.smartCards&&this.smartCards.length<2)){var t=e.pointers[0].pageX-this.pointerXCoord;this.carouselStyle={transition:"initial",transform:"translate3d("+(this.imageLeftCord+t)+"px, 0, 0)"},this.imageLeftCord+=t,this.pointerXCoord=e.pointers[0].pageX}},e.prototype.prevSlide=function(){this.activeIndex>0&&(this.activeIndex--,this.snapNext(!1))},e.prototype.nextSlide=function(){this.activeIndex<this.smartCards.length-1&&(this.activeIndex++,this.snapNext(!1))},e.prototype.snapNext=function(e){e=e||this.activeIndex;var t=document.getElementsByClassName("item active")[0].getBoundingClientRect().width;this.pointerXCoord=0,this.imageLeftCord=-t*e,this.lastMove="",this.animateSlide(this.imageLeftCord),this.cardNumberSelected.emit(this.smartCards[this.activeIndex])},e.prototype.snapTo=function(e,t){this.shouldSelect(t)&&(this.snapNext(e),this.panning=!1,this.cardNumberSelected.emit(this.smartCards[e]),this.activeIndex=e)},e.prototype.getVoiceOverMessage=function(e){return(e.isBlocked?"Blocked":"")+" card "+(void 0===e.cardNickName||e.pendingBalanceActivation?"ending in "+e.smartcardId.toString().substr(12,4):"named "+e.cardNickName)+(e.pendingBalanceActivation?"":", balance "+this.centsToDollarPipe.transform(e.svBalance))+(e.svPending?", pending "+this.centsToDollarPipe.transform(e.svPending):"")},e.prototype.togglePendingInfoModal=function(){this.showPendingInfoModal=!this.showPendingInfoModal},e.prototype.animateSlide=function(e){this.carouselStyle={transition:"all 260ms",transform:"translate3d("+e+"px, 0, 0)"}},e.prototype.shouldSelect=function(e){return!(this.panning||e&&"Enter"!==e.key)},e.prototype.initiateActivation=function(e){this.dataSharingService.set("smartcardId",e),this.router.navigate(["/account/activate-card"])},e.prototype.cardTitle=function(e){return e.pendingBalanceActivation?this.opalCardNumberPipe.transform(e.smartcardId.toString()):e.cardNickName||this.opalCardNumberPipe.transform(e.smartcardId.toString())},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(a.CentsToDollarPipe),i.\u0275\u0275directiveInject(c.SmartcardService),i.\u0275\u0275directiveInject(s.DataSharingService),i.\u0275\u0275directiveInject(l.Router),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(d.OpalCardNumberPipe))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tni-card-carousel"]],inputs:{smartCards:"smartCards",isUnRegistered:"isUnRegistered",activeCard:"activeCard"},outputs:{cardNumberSelected:"cardNumberSelected"},decls:8,vars:7,consts:[["id","touch-carousel","data-interval","false",1,"slide","carousel","carousel--cards","opal-selector",3,"panstart","panmove","panend"],["role","tablist","id","carousel-inner",1,"carousel-inner",3,"ngStyle"],["class","item opal-selector__item opal-selector__item--add-new",3,"link-card-only",4,"ngIf"],["class","item opal-selector__item","role","tab","tabindex","0",3,"ngClass","click","keypress",4,"ngFor","ngForOf"],["class","left carousel-control carousel-prev card-carousel__control","role","button","aria-hidden","true",3,"click","keypress",4,"ngIf"],["class","right carousel-control carousel-next card-carousel__control","role","button","aria-hidden","true",3,"click","keypress",4,"ngIf"],["class","carousel-indicators","aria-hidden","true",4,"ngIf"],["ariaLabel","Session expired",3,"closeEvent",4,"ngIf"],[1,"item","opal-selector__item","opal-selector__item--add-new"],["routerLink","/account/add-card",1,"item-image","opal-selector__card--add"],["width","15px","height","15px","viewBox","0 0 15 15","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink"],["stroke","#ffffff","stroke-width","1","fill","none","fill-rule","evenodd","stroke-linecap","square"],["d","M7,0 L7,15"],["d","M0,7 L15,7"],["role","button",3,"click"],["role","tab","tabindex","0",1,"item","opal-selector__item",3,"ngClass","click","keypress"],[1,"item-inner"],[1,"item-image","opal-selector__card"],[1,"carousel-image",3,"src"],[3,"isBlocked","isInactive","initiateActivation"],[1,"carousel-caption","item-caption"],[1,"caption-inner"],[1,"opal-selector__card-name"],[4,"ngIf"],[1,"opal-selector__card-value"],["class","opal-selector__pending",4,"ngIf"],[1,"opal-selector__pending"],[1,"opal-selector__pending-icon",3,"click"],["role","button","aria-hidden","true",1,"left","carousel-control","carousel-prev","card-carousel__control",3,"click","keypress"],["iconName","nav-left","iconClasses","md","iconTitle","",3,"iconAriaHidden"],["role","button","aria-hidden","true",1,"right","carousel-control","carousel-next","card-carousel__control",3,"click","keypress"],["iconName","nav-right","iconClasses","md","iconTitle","",3,"iconAriaHidden"],["aria-hidden","true",1,"carousel-indicators"],["tabindex","-1",3,"ngClass","click",4,"ngFor","ngForOf"],["tabindex","-1",3,"ngClass","click"],["ariaLabel","Session expired",3,"closeEvent"],["aria-hidden","true",1,"modal__icon"],[1,"modal__close-btn",3,"click","keyup"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275listener("panstart",function(e){return t.onPanStart(e)})("panmove",function(e){return t.onPanMove(e)})("panend",function(e){return t.onPanEnd(e)}),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275template(2,g,8,2,"div",2),i.\u0275\u0275template(3,_,10,11,"div",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(4,b,2,1,"span",4),i.\u0275\u0275template(5,x,2,1,"span",5),i.\u0275\u0275template(6,M,2,1,"ol",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(7,P,9,0,"tni-modal",7)),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("ngStyle",t.carouselStyle),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.isUnRegistered),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.smartCards),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.activeIndex>0),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.smartCards&&t.activeIndex<t.smartCards.length-1),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.smartCards&&t.smartCards.length>1),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.showPendingInfoModal))},directives:[p.NgStyle,p.NgIf,p.NgForOf,l.RouterLinkWithHref,p.NgClass,u.CardCarouselStatusComponent,m.IconComponent,f.ModalWindowComponent],pipes:[a.CentsToDollarPipe],styles:['[_nghost-%COMP%]{position:relative;display:block}.opal-selector[_ngcontent-%COMP%]{padding-left:calc(50% - 81px);position:relative}.opal-selector__item--add-new[_ngcontent-%COMP%]{position:absolute;left:-136px;top:26px}@media (min-width:768px){.opal-selector__item--add-new[_ngcontent-%COMP%]{left:-162px}}.link-card-only[_ngcontent-%COMP%]{left:0;top:70px}.link-card-only[_ngcontent-%COMP%]   .opal-selector__card--add[_ngcontent-%COMP%]{height:85px}@media (max-width:767px){.link-card-only[_ngcontent-%COMP%]   .opal-selector__card--add[_ngcontent-%COMP%]{width:120px;padding-top:19px}}.opal-selector__card--add[_ngcontent-%COMP%]{display:block;margin:13px auto 0;height:75px;border:2px solid #569ee2;border-radius:4px;background:linear-gradient(0deg,#1b91d4,#1f6db7 47.91%,#1d69b4);font-size:12px;color:#fff;text-align:center;text-decoration:none;transform:translateY(0);padding-top:16px;width:64px}@media (min-width:768px){.opal-selector__card--add[_ngcontent-%COMP%]{width:120px;padding-top:19px}}.opal-selector__card--add[_ngcontent-%COMP%]:hover{transform:translateY(1px)}.opal-selector__card--add[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{display:block;margin:0 auto 4px}.opal-selector__pending[_ngcontent-%COMP%]{font-size:12px;color:#fff;height:25px;background:hsla(0,0%,100%,.1);border-radius:25px;line-height:25px;position:relative;width:auto;margin:0 auto;padding-left:16px;padding-right:35px;display:inline-block;font-weight:500}.opal-selector__pending-icon[_ngcontent-%COMP%]{position:absolute;top:4px;right:4px;height:17px;background:#fff;color:#1d69b4;border-radius:20px;width:17px;cursor:pointer;line-height:18px;font-weight:600;text-align:center;font-size:11px}.modal__close-btn[_ngcontent-%COMP%]{font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;max-width:270px;background:#fff;color:#1d69b4;border:1px solid #dbdbdb;border-radius:4px;padding:8px 32px;width:auto;min-width:130px;margin-top:48px;width:100%}.modal__close-btn[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.modal__close-btn[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .modal__close-btn[_ngcontent-%COMP%]{margin-top:10px}.modal__close-btn[_ngcontent-%COMP%]:hover{border:1px solid #1d69b4;background:#fff}.modal__close-btn[_ngcontent-%COMP%]:hover:after{display:none}@media (min-width:768px){.modal__close-btn[_ngcontent-%COMP%]{width:auto}}.modal__icon[_ngcontent-%COMP%]{width:35px;height:35px;background:#1d69b4;border-radius:30px;color:#fff;display:inline-block;line-height:35px;font-weight:400;font-size:24px}']}),e}()},"7qcx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CtpRoutingModule=void 0,n("fXoL");var o=n("tyNb"),r=n("flw8"),i=n("0uEL"),a=n("w8Yy"),c=n("fXoL"),s=(n("tyNb"),[{path:"contactless",component:i.ContactlessComponent,canActivate:[a.CTPGuardService],children:[{path:"payments",component:r.ContactlessPaymentsComponent},{path:"",redirectTo:"payments",pathMatch:"full"}]}]);t.CtpRoutingModule=function(){function e(){}return e.\u0275mod=c.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=c.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.RouterModule.forChild(s)],o.RouterModule]}),e}()},"84CM":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogoutService=void 0,n("fXoL");var o=n("tk/3"),r=(n("jGKr"),n("QK+Z"),n("YORH"),n("puoa"),n("wd/R")),i=n("fXoL"),a=n("YORH"),c=n("QK+Z"),s=n("jGKr"),l=n("puoa");t.LogoutService=function(){function e(e,t,n,o,r,i){this._trackOpalEventService=e,this._opalAccountStore=t,this._opalSessionStore=n,this._zone=o,this._windowRef=r,this._injector=i}return e.prototype.logout=function(e){var t=this;setTimeout(function(){var n=function(){};t._injector.get(o.HttpClient).delete("/api/opal/logout").subscribe(n,n);var r=t._opalSessionStore.load(),i=r&&r.loginUrl&&"/"!==r.loginUrl?r.loginUrl:"/tickets-opal/opal/manage-your-opal-card#/login",a=!!t._opalAccountStore.get().unregisteredCardNo;e?(t._trackOpalEventService.sessionExpired(),t._opalSessionStore.setOpalSessionRedirect(a)):(t._trackOpalEventService.logout(),t._opalSessionStore.clear()),t._opalAccountStore.clear();var c=a?"unregistered":"registered";i.indexOf(c)<0&&(i=i+"?"+c),t._windowRef.redirectToUrl(i),!e&&i.indexOf(window.location.pathname)>=0&&window.location.reload()})},e.prototype.startLogoutTimer=function(){var e=this,t=this._opalSessionStore.load();if(t){var n=t.expiresIn.diff(r());n=n>0?n:0,this._zone.runOutsideAngular(function(){e.timeout&&window.clearTimeout(e.timeout),e.timeout=setTimeout(function(){e.logout(!0)},n)})}},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(a.TrackOpalEventService),i.\u0275\u0275inject(c.OpalAccountStore),i.\u0275\u0275inject(s.OpalSessionStore),i.\u0275\u0275inject(i.NgZone),i.\u0275\u0275inject(l.WindowRef),i.\u0275\u0275inject(i.Injector))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},"8okd":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniTextFieldModule=void 0,n("fXoL");var o=n("ofXK"),r=(n("m8sF"),n("NKuO")),i=n("3Pt+"),a=n("VnzS"),c=n("fXoL");t.TniTextFieldModule=function(){function e(){}return e.\u0275mod=c.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=c.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule,i.FormsModule,r.TniIconModule,a.TniSpinnerModule]]}),e}()},"9ans":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthService=void 0;var o=n("qCKp"),r=n("kU1M"),i=(n("fXoL"),n("tk/3"),n("DWut")),a=n("41hm"),c=n("fXoL"),s=n("tk/3");t.AuthService=function(){function e(e){this.http=e}return e.prototype.login=function(e){return this.http.post(e.recaptchaResponse?"/api/opal/opal-login":"/api/opal/login",e).pipe(r.map(function(e){var t=new a.AuthResponse(!0,i.LoginStatusEnum.Ok);return t.accessToken=e.access_token,t.expiresIn=e.expires_in,t}),r.catchError(this.handleError))},e.prototype.handleError=function(e){var t;401===e.status?t=i.LoginStatusEnum.Unauthorized:423===e.status?t=i.LoginStatusEnum.Locked:403===e.status&&(t=i.LoginStatusEnum.AlreadyRegistered);var n=new a.AuthResponse(e.ok,t);return o.throwError(n)},e.\u0275fac=function(t){return new(t||e)(c.\u0275\u0275inject(s.HttpClient))},e.\u0275prov=c.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},"9v/V":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditableInputFieldComponent=void 0;var o=n("fXoL"),r=n("3Pt+"),i=(n("0ruu"),n("fXoL")),a=n("3Pt+"),c=n("0ruu"),s=n("ofXK"),l=n("jbib");function d(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"p",7),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(n.helpText)}}t.EditableInputFieldComponent=function(){function e(e,t){this.formBuilder=e,this.scrollService=t,this.cancelEdit=new o.EventEmitter,this.saveValue=new o.EventEmitter,this.saving=!1}return e.prototype.ngOnInit=function(){this.buildForm(),this.scrollService.focusElem(this.label)},e.prototype.buildForm=function(){this.inputForm=this.formBuilder.group({inputField:this.formBuilder.control(this.value,this.getValidators())})},e.prototype.getValidators=function(){var e=[];return this.required&&e.push(r.Validators.required),this.pattern&&e.push(r.Validators.pattern(this.pattern)),e},e.prototype.cancel=function(){this.cancelEdit.emit()},e.prototype.save=function(){this.saving=!1,this.saveValue.emit(this.inputForm.controls.inputField.value)},e.prototype.isDisabled=function(){return this.inputForm.controls.inputField.errors||this.value===this.inputForm.controls.inputField.value?"disabled":null},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(a.FormBuilder),i.\u0275\u0275directiveInject(c.ScrollService))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tni-editable-input-field"]],inputs:{helpText:"helpText",label:"label",value:"value",required:"required",errorMessage:"errorMessage",pattern:"pattern",maxLength:"maxLength"},outputs:{cancelEdit:"cancelEdit",saveValue:"saveValue"},decls:9,vars:11,consts:[["autocomplete","off",3,"formGroup"],[1,"editable-text-field-component"],["class","help-text",4,"ngIf"],["helpText","","inputType","text",3,"control","inputName","errorMap","maxLength"],[1,"editable-text-field-component-footer"],[1,"btn-secondary","btn","btn-cancel",3,"click"],[1,"btn-secondary","btn","btn-save",3,"click"],[1,"help-text"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"form",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275template(2,d,2,1,"p",2),i.\u0275\u0275element(3,"tni-form-input",3),i.\u0275\u0275elementStart(4,"div",4),i.\u0275\u0275elementStart(5,"button",5),i.\u0275\u0275listener("click",function(){return t.cancel()}),i.\u0275\u0275text(6,"CANCEL"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"button",6),i.\u0275\u0275listener("click",function(){return t.save()}),i.\u0275\u0275text(8," SAVE "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275property("formGroup",t.inputForm),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.helpText),i.\u0275\u0275advance(1),i.\u0275\u0275property("control",t.inputForm.controls.inputField)("inputName",t.label)("errorMap",t.errorMessage)("maxLength",t.maxLength),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("disabled",t.saving),i.\u0275\u0275advance(2),i.\u0275\u0275classProp("disabled",t.isDisabled()),i.\u0275\u0275attribute("disabled",t.isDisabled()))},directives:[a.\u0275angular_packages_forms_forms_y,a.NgControlStatusGroup,a.FormGroupDirective,s.NgIf,l.FormInputComponent],styles:["[_nghost-%COMP%]{width:100%;display:block}.editable-text-field-component[_ngcontent-%COMP%]{overflow:hidden}.editable-text-field-component[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:13px;min-width:70px;height:30px;line-height:14px;font-weight:500;color:#1d69b4}.editable-text-field-component[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:active{box-shadow:none;outline:none}.editable-text-field-component[_ngcontent-%COMP%]   .help-text[_ngcontent-%COMP%]{margin-bottom:-10px;font-size:13px;line-height:18px}.editable-text-field-component[_ngcontent-%COMP%]   .btn-save[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.2)}.editable-text-field-component[_ngcontent-%COMP%]   .editable-text-field-component-footer[_ngcontent-%COMP%]{position:relative;float:right}"]}),e}()},AQDy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureToggleDirectiveModule=void 0,n("fXoL"),n("BaDl");var o=n("fXoL");t.FeatureToggleDirectiveModule=function(){function e(){}return e.\u0275mod=o.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=o.\u0275\u0275defineInjector({factory:function(t){return new(t||e)}}),e}()},BaDl:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FeatureToggleDirective=void 0;var o=n("fXoL"),r=(n("6i2Y"),n("fXoL")),i=n("6i2Y");t.FeatureToggleDirective=function(){function e(e,t,n){this.templateRef=e,this.viewContainerRef=t,this.featureToggleService=n,this._isOn=!1}return e.prototype.ngOnInit=function(){if(!this.featureToggle)throw new Error("Attribute `featureToggle` should not be null or empty");this._shouldRender()},e.prototype.ngDoCheck=function(){this._isOn!==this._isOnCheck(this.featureToggle)&&this._shouldRender()},e.prototype._shouldRender=function(){this._isOn=this._isOnCheck(this.featureToggle),this._isOn?this.viewContainerRef.createEmbeddedView(this.templateRef):this.viewContainerRef.clear()},e.prototype._isOnCheck=function(e){var t=this,n=function(e){return"!"===e[0]?!t._isFeatureToggleOnFromService(e.replace("!","")):t._isFeatureToggleOnFromService(e)};return"string"==typeof e?n(e):Array.isArray(e)?e.every(n):void(o.isDevMode()&&console.error('"featureToggle" should receive an array or an string as a value.'))},e.prototype._isFeatureToggleOnFromService=function(e){var t,n;return!!(null===(n=null===(t=this.featureToggleService.featureToggles)||void 0===t?void 0:t.toggles)||void 0===n?void 0:n[e])},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(r.TemplateRef),r.\u0275\u0275directiveInject(r.ViewContainerRef),r.\u0275\u0275directiveInject(i.FeatureToggleService))},e.\u0275dir=r.\u0275\u0275defineDirective({type:e,selectors:[["","featureToggle",""]],inputs:{featureToggle:"featureToggle"}}),e}()},BosL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TitleBarModule=void 0,n("fXoL");var o=n("ofXK"),r=(n("VD0A"),n("fXoL"));t.TitleBarModule=function(){function e(){}return e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule]]}),e}()},"C/YF":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalAccount=void 0,t.OpalAccount=function(){return function(){}}()},C1fI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalNotificationPreferenceComponent=void 0;var o=n("mrSG"),r=n("fXoL"),i=(n("3OCy"),n("VmUZ")),a=n("3Pt+"),c=(n("6i2Y"),n("c7H9"),n("YORH"),n("NRRr"),n("kU1M")),s=n("u3Ad"),l=n("tJ3N"),d=n("fXoL"),p=n("3OCy"),u=n("3Pt+"),m=n("NRRr"),f=n("6i2Y"),g=n("YORH"),h=n("c7H9"),v=n("pxjO"),C=n("ofXK"),_=n("HqcF"),b=n("73Ru"),x=n("LUra"),y=n("gUXI"),M=n("9v/V"),P=n("M6bo");function O(e,t){if(1&e){var n=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"div",12),d.\u0275\u0275elementStart(1,"label",13),d.\u0275\u0275elementStart(2,"div",14),d.\u0275\u0275elementStart(3,"div",15),d.\u0275\u0275text(4),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(5,"div",16),d.\u0275\u0275text(6),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(7,"tni-form-input-switch",17),d.\u0275\u0275listener("switchValue",function(e){return d.\u0275\u0275restoreView(n),d.\u0275\u0275nextContext(2).trackSwitchChanges(e)}),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()}if(2&e){var o=t.$implicit;d.\u0275\u0275advance(1),d.\u0275\u0275property("for",o.notificationId),d.\u0275\u0275advance(3),d.\u0275\u0275textInterpolate1(" ",o.notificationCategory," "),d.\u0275\u0275advance(2),d.\u0275\u0275textInterpolate1(" ",o.notificationDescription," "),d.\u0275\u0275advance(1),d.\u0275\u0275property("controlId",o.notificationId)("control",o.control)("description",o.notificationCategory)("inputName",o.notificationId)}}function S(e,t){1&e&&(d.\u0275\u0275elementStart(0,"tni-form-message",18),d.\u0275\u0275text(1," Something went wrong. Please try again. "),d.\u0275\u0275elementEnd())}function w(e,t){if(1&e){var n=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"div",22),d.\u0275\u0275text(1," A contact method is required for notifications. "),d.\u0275\u0275elementStart(2,"a",23),d.\u0275\u0275listener("click",function(){return d.\u0275\u0275restoreView(n),d.\u0275\u0275nextContext(3).navigateToProfile()}),d.\u0275\u0275text(3,"Update your personal details"),d.\u0275\u0275elementEnd(),d.\u0275\u0275text(4," with an email address or mobile number before you set up notifications. "),d.\u0275\u0275elementEnd()}}function k(e,t){if(1&e){var n=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"button",32),d.\u0275\u0275listener("click",function(){return d.\u0275\u0275restoreView(n),d.\u0275\u0275nextContext(4).editemail=!0}),d.\u0275\u0275element(1,"tni-icon",33),d.\u0275\u0275elementStart(2,"span",34),d.\u0275\u0275text(3),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()}if(2&e){var o=d.\u0275\u0275nextContext(4);d.\u0275\u0275advance(3),d.\u0275\u0275textInterpolate1("edit ",o.label,"")}}function E(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"span",35),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),2&e){var n=d.\u0275\u0275nextContext(4);d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ",n.profile.email," ")}}function T(e,t){if(1&e){var n=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"tni-editable-input-field",36),d.\u0275\u0275listener("saveValue",function(e){return d.\u0275\u0275restoreView(n),d.\u0275\u0275nextContext(4).updateProfileData(e,"email")})("cancelEdit",function(){return d.\u0275\u0275restoreView(n),d.\u0275\u0275nextContext(4).editemail=!1}),d.\u0275\u0275elementEnd()}if(2&e){var o=d.\u0275\u0275nextContext(4);d.\u0275\u0275property("value",o.profile.email)("required",!0)("errorMessage",o.validationMessages.email)("maxLength","250")("helpText","Your previously saved address will be overwritten if you enter a new address.")("label","Email")("pattern",o.emailValidator)}}function I(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"tni-radio-panel",24),d.\u0275\u0275elementStart(1,"div",25),d.\u0275\u0275elementStart(2,"div",26),d.\u0275\u0275element(3,"tni-icon",27),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(4,"span",28),d.\u0275\u0275text(5," Email "),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(6,k,4,1,"button",29),d.\u0275\u0275template(7,E,2,1,"span",30),d.\u0275\u0275template(8,T,1,7,"tni-editable-input-field",31),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()),2&e){var n=d.\u0275\u0275nextContext(3);d.\u0275\u0275property("control",n.methodControl),d.\u0275\u0275advance(3),d.\u0275\u0275property("iconAriaHidden",!0),d.\u0275\u0275advance(3),d.\u0275\u0275property("ngIf",!n.editemail),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",!n.editemail),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",n.editemail)}}function A(e,t){if(1&e){var n=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"button",32),d.\u0275\u0275listener("click",function(){return d.\u0275\u0275restoreView(n),d.\u0275\u0275nextContext(4).editmobile=!0}),d.\u0275\u0275element(1,"tni-icon",33),d.\u0275\u0275elementStart(2,"span",34),d.\u0275\u0275text(3),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()}if(2&e){var o=d.\u0275\u0275nextContext(4);d.\u0275\u0275advance(3),d.\u0275\u0275textInterpolate1("edit ",o.label,"")}}function N(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"span",40),d.\u0275\u0275text(1),d.\u0275\u0275elementEnd()),2&e){var n=d.\u0275\u0275nextContext(4);d.\u0275\u0275advance(1),d.\u0275\u0275textInterpolate1(" ",n.profile.mobile," ")}}function L(e,t){if(1&e){var n=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"tni-editable-input-field",36),d.\u0275\u0275listener("saveValue",function(e){return d.\u0275\u0275restoreView(n),d.\u0275\u0275nextContext(4).updateProfileData(e,"mobile")})("cancelEdit",function(){return d.\u0275\u0275restoreView(n),d.\u0275\u0275nextContext(4).editmobile=!1}),d.\u0275\u0275elementEnd()}if(2&e){var o=d.\u0275\u0275nextContext(4);d.\u0275\u0275property("value",o.profile.mobile)("required",!0)("errorMessage",o.validationMessages.mobile)("maxLength","25")("helpText","Your previously saved mobile number will be overwritten if you enter a new number.")("label","Mobile")("pattern",o.mobileValidator)}}function R(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"tni-radio-panel",37),d.\u0275\u0275elementStart(1,"div",25),d.\u0275\u0275elementStart(2,"div",26),d.\u0275\u0275element(3,"tni-icon",38),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(4,"span",28),d.\u0275\u0275text(5," Mobile "),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(6,A,4,1,"button",29),d.\u0275\u0275template(7,N,2,1,"span",39),d.\u0275\u0275template(8,L,1,7,"tni-editable-input-field",31),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()),2&e){var n=d.\u0275\u0275nextContext(3);d.\u0275\u0275property("control",n.methodControl),d.\u0275\u0275advance(3),d.\u0275\u0275property("iconAriaHidden",!0),d.\u0275\u0275advance(3),d.\u0275\u0275property("ngIf",!n.editmobile),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",!n.editmobile),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",n.editmobile)}}function j(e,t){if(1&e&&(d.\u0275\u0275elementStart(0,"div"),d.\u0275\u0275template(1,w,5,0,"div",19),d.\u0275\u0275template(2,I,9,5,"tni-radio-panel",20),d.\u0275\u0275template(3,R,9,5,"tni-radio-panel",21),d.\u0275\u0275elementEnd()),2&e){var n=d.\u0275\u0275nextContext(2);d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",!n.profile.email&&!n.profile.mobile),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",n.profile.email),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",n.profile.mobile)}}function F(e,t){if(1&e){var n=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementContainerStart(0),d.\u0275\u0275elementStart(1,"div",2),d.\u0275\u0275elementStart(2,"h2",3),d.\u0275\u0275text(3,"Notifications"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(4,"div",4),d.\u0275\u0275elementStart(5,"h3",5),d.\u0275\u0275text(6,"Turn on the notifications you\u2019d like to receive"),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(7,O,8,7,"div",6),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(8,"div",7),d.\u0275\u0275elementStart(9,"h3",5),d.\u0275\u0275text(10,"How would you like to receive your alerts?"),d.\u0275\u0275elementEnd(),d.\u0275\u0275template(11,S,2,0,"tni-form-message",8),d.\u0275\u0275template(12,j,4,3,"div",0),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(13,"div",9),d.\u0275\u0275elementStart(14,"button",10),d.\u0275\u0275listener("click",function(){return d.\u0275\u0275restoreView(n),d.\u0275\u0275nextContext().submit()}),d.\u0275\u0275text(15," Update Settings "),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementStart(16,"button",11),d.\u0275\u0275listener("click",function(){return d.\u0275\u0275restoreView(n),d.\u0275\u0275nextContext().cancel()}),d.\u0275\u0275text(17,"Cancel"),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementContainerEnd()}if(2&e){var o=d.\u0275\u0275nextContext();d.\u0275\u0275advance(7),d.\u0275\u0275property("ngForOf",o.notificationPreferences),d.\u0275\u0275advance(4),d.\u0275\u0275property("ngIf",o.profileUpdateError),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",!!o.methodControl),d.\u0275\u0275advance(2),d.\u0275\u0275classProp("notifications__update--disabled",o.form&&!o.form.valid),d.\u0275\u0275attribute("disabled",o.form&&!o.form.valid||o.editemail||o.editmobile?"disabled":null)}}function V(e,t){if(1&e){var n=d.\u0275\u0275getCurrentView();d.\u0275\u0275elementStart(0,"tni-message-panel",41),d.\u0275\u0275elementStart(1,"div",9),d.\u0275\u0275elementStart(2,"button",42),d.\u0275\u0275listener("click",function(){return d.\u0275\u0275restoreView(n),d.\u0275\u0275nextContext().handleDone()}),d.\u0275\u0275text(3),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd(),d.\u0275\u0275elementEnd()}if(2&e){var o=d.\u0275\u0275nextContext();d.\u0275\u0275property("title",o.responseSuccess?o.successResponseMessage:o.errorResponseMessage)("success",o.responseSuccess),d.\u0275\u0275advance(3),d.\u0275\u0275textInterpolate1(" ",o.responseSuccess?"DONE":"OK"," ")}}t.OpalNotificationPreferenceComponent=function(){function e(e,t,n,o,i,a){this.opalNotificationService=e,this.fb=t,this.loaderService=n,this.featureToggleService=o,this.trackOpalEventService=i,this.profileService=a,this.updateProfile=new r.EventEmitter,this.navigateToProfileTab=new r.EventEmitter,this.isLoading=!1,this.trackingData={switchValues:[],method:null},this.responseReceived=!1,this.successResponseMessage="Notifications updated",this.errorResponseMessage="Notifications not updated",this.editemail=!1,this.editmobile=!1,this.emailValidator=s.TniRegularExpressions.email,this.mobileValidator=s.TniRegularExpressions.phone,this.validationMessages=new l.ValidationMessages,this.profileUpdateError=!1}return e.prototype.ngOnInit=function(){this.setupNotifications()},e.prototype.setupNotifications=function(){var e=this;this.isLoading=!0,this.opalNotificationService.list().pipe(c.finalize(function(){e.isLoading=!1})).subscribe(function(t){e.notificationPreferences=e.sortNotifications(t),e.notificationPreferences&&e.notificationPreferences.length&&(e.contactMethod=e.opalNotificationService.contactMethod),e.newForm()})},e.prototype.validateContactMethod=function(e){return"OFF"!==e.value?null:{contactMethod:!0}},e.prototype.validateForm=function(e){var t="OFF"!==e.get("method").value,n=e.get("notifications").dirty,o=e.get("method").dirty,r=e.get("notifications").controls,i=Object.keys(r).reduce(function(e,t){return r[t].value||e},!1);return n&&t||i&&o?null:{invalidForm:!0}},e.prototype.newForm=function(){var e=this,t={};this.methodControl=new a.FormControl(this.contactMethod.method,this.validateContactMethod),this.unsubscribeMethodChanges(),this.methodChanges$=this.methodControl.valueChanges.subscribe(function(){e.changeAlertMethod()}),this.notificationPreferences.forEach(function(e){var n=new a.FormControl(0!==e.deliveryChannel.id);e.control=n,t[e.notificationId]=e.control}),this.notificationsFormGroup=this.fb.group(t),this.form=this.fb.group({notifications:this.notificationsFormGroup,method:this.methodControl}),this.initialNotifications=this.notificationsFormGroup.value,this.initialMethodValue=this.methodControl.value,this.form.setValidators(this.validateForm)},e.prototype.sortNotifications=function(e){var t=e.find(function(e){return"SYSTEM"===e.notificationId}),n=e.filter(function(e){return"SYSTEM"!==e.notificationId});return n.unshift(t),n},e.prototype.submit=function(){var e=this;this.form.valid&&this.form.dirty&&(this.loaderService.display(!0),this.opalNotificationService.postNotifications(this.notificationsFormGroup.getRawValue(),this.methodControl.value).pipe(c.take(1),c.finalize(function(){e.loaderService.display(!1),e.responseReceived=!0})).subscribe(function(){e.trackOpalEventService.trackNotifications(e.trackingData),e.trackingData.method=null,e.trackingData.switchValues=[],e.initialNotifications=e.notificationsFormGroup.value,e.responseSuccess=!0,e.setupNotifications()},function(){e.responseSuccess=!1}))},e.prototype.cancel=function(){this.newForm()},e.prototype.handleDone=function(){this.responseReceived=!1},e.prototype.getContactMethodValue=function(e){var t=(e=e||{id:0,method:"None"}).method;return this.profile&&(1===e.id?t=this.profile.email:2===e.id&&(t=this.profile.mobile)),t},e.prototype.changeAlertMethod=function(){this.initialMethodValue!==this.methodControl.value&&(this.trackingData.method=this.methodControl.value)},e.prototype.unsubscribeMethodChanges=function(){void 0===this.methodChanges$||this.methodChanges$.closed||this.methodChanges$.unsubscribe()},e.prototype.ngOnDestroy=function(){this.unsubscribeMethodChanges(),this.profileData$&&this.profileData$.unsubscribe()},e.prototype.trackSwitchChanges=function(e){-1===this.trackingData.switchValues.indexOf(e.label)&&this.initialNotifications[e.inputName]!==this.notificationsFormGroup.value[e.inputName]&&this.trackingData.switchValues.push(e.label)},e.prototype.updateProfileData=function(e,t){var n=this;this.loaderService.display(!0),this.profileUpdateError=!1;var r=o.__assign({},this.profile);r.title="",r[t]=e,this.profileData$=this.profileService.postCustomerDetails(i.Profile.postReqauest(r)).pipe(c.finalize(function(){return n.loaderService.display(!1)})).subscribe(function(){n.profile[t]=e,n.updateProfile.emit(),n.editemail=!1,n.editmobile=!1},function(){return n.profileUpdateError=!0})},e.prototype.navigateToProfile=function(){this.navigateToProfileTab.emit()},e.\u0275fac=function(t){return new(t||e)(d.\u0275\u0275directiveInject(p.OpalNotificationPreferenceService),d.\u0275\u0275directiveInject(u.FormBuilder),d.\u0275\u0275directiveInject(m.LoaderService),d.\u0275\u0275directiveInject(f.FeatureToggleService),d.\u0275\u0275directiveInject(g.TrackOpalEventService),d.\u0275\u0275directiveInject(h.ProfileService))},e.\u0275cmp=d.\u0275\u0275defineComponent({type:e,selectors:[["opal-notification-preference"]],inputs:{profile:"profile"},outputs:{updateProfile:"updateProfile",navigateToProfileTab:"navigateToProfileTab"},decls:3,vars:2,consts:[[4,"ngIf"],[3,"title","success",4,"ngIf"],[1,"notifications"],[1,"notifications__heading"],[1,"notifications__options"],[1,"notifications__sub-heading"],["class","notifications__option",4,"ngFor","ngForOf"],[1,"notifications__contact-method"],["class","notifications--profile-update__error","id","card-update-error",4,"ngIf"],[1,"notifications__actions"],[1,"notifications__update",3,"click"],[1,"notifications__cancel",3,"click"],[1,"notifications__option"],[1,"notifications__option-label",3,"for"],[1,"notifications__option-container"],[1,"notifications__option-title"],[1,"notifications__option-description"],[1,"notifications__option-switch",3,"controlId","control","description","inputName","switchValue"],["id","card-update-error",1,"notifications--profile-update__error"],["class","notifications__contact-method__default",4,"ngIf"],["name","method[]","controlId","emailMethod","value","Email",3,"control",4,"ngIf"],["name","method[]","controlId","mobileMethod","value","Mobile",3,"control",4,"ngIf"],[1,"notifications__contact-method__default"],[3,"click"],["name","method[]","controlId","emailMethod","value","Email",3,"control"],[1,"notifications__contact-method__label-container"],[1,"notifications__contact-method__icon"],["iconName","envelope","iconClasses","md","iconTitle","",3,"iconAriaHidden"],[1,"notifications__contact-method__label"],["class","mail-edit-btn",3,"click",4,"ngIf"],["class","notifications__contact-method__value--email",4,"ngIf"],[3,"value","required","errorMessage","maxLength","helpText","label","pattern","saveValue","cancelEdit",4,"ngIf"],[1,"mail-edit-btn",3,"click"],["iconName","edit","iconClasses","xs edit","iconAriaHidden","false","iconTitle","edit"],[1,"sr-only"],[1,"notifications__contact-method__value--email"],[3,"value","required","errorMessage","maxLength","helpText","label","pattern","saveValue","cancelEdit"],["name","method[]","controlId","mobileMethod","value","Mobile",3,"control"],["iconName","mobile","iconClasses","md","iconTitle","",3,"iconAriaHidden"],["class","notifications__contact-method__value--mobile",4,"ngIf"],[1,"notifications__contact-method__value--mobile"],[3,"title","success"],[1,"notifications__done",3,"click"]],template:function(e,t){1&e&&(d.\u0275\u0275elementStart(0,"tni-page-frame"),d.\u0275\u0275template(1,F,18,6,"ng-container",0),d.\u0275\u0275template(2,V,4,3,"tni-message-panel",1),d.\u0275\u0275elementEnd()),2&e&&(d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",!t.responseReceived),d.\u0275\u0275advance(1),d.\u0275\u0275property("ngIf",t.responseReceived))},directives:[v.PageFrameComponent,C.NgIf,C.NgForOf,_.TniFormInputSwitchComponent,b.TniFormMessageComponent,x.RadioPanelComponent,y.IconComponent,M.EditableInputFieldComponent,P.TniMessagePanelComponent],styles:['.notifications__heading[_ngcontent-%COMP%]{margin-top:0;font-weight:300;font-size:24px;line-height:1.3333;margin-bottom:8px}.notifications__sub-heading[_ngcontent-%COMP%]{font-weight:500;font-size:16px;line-height:1.333;margin-bottom:16px;margin-top:32px}.notifications__option[_ngcontent-%COMP%]{border-radius:4px;border:1px solid transparent;box-shadow:0 1px 2px 0 rgba(0,0,0,.2);box-sizing:border-box;cursor:pointer;display:block;position:relative;padding:15px;margin-bottom:8px}.notifications__option[_ngcontent-%COMP%]:hover{box-shadow:0 2px 3px 0 rgba(0,0,0,.2);border:1px solid #1d69b4;box-shadow:0 1px 2px 0 rgba(0,0,0,.2);border:1px solid transparent;cursor:auto}.notifications__option-label[_ngcontent-%COMP%]{font-weight:400}.notifications__option-description[_ngcontent-%COMP%]{font-size:12px;line-height:1.4em}.notifications__option-title[_ngcontent-%COMP%]{font-size:16px}.notifications__option-container[_ngcontent-%COMP%]{margin:0 45px 0 0}.notifications__option-switch[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px}.notifications__contact-method[_ngcontent-%COMP%]{margin-bottom:20px;padding-bottom:20px}.notifications__contact-method[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:ng-deep   label[_ngcontent-%COMP%]{overflow:hidden}.notifications__contact-method__label-container[_ngcontent-%COMP%]{padding:12px}@media (min-width:768px){.notifications__contact-method__label-container[_ngcontent-%COMP%]{padding:20px}}.notifications__contact-method__label[_ngcontent-%COMP%]{font-weight:200;font-size:16px;vertical-align:middle}.notifications__contact-method__icon[_ngcontent-%COMP%]{display:inline-block;vertical-align:middle;max-width:24px;margin-right:12px}.notifications__contact-method__icon[_ngcontent-%COMP%]     svg{min-width:24px;width:24px}.notifications__contact-method__value--email[_ngcontent-%COMP%], .notifications__contact-method__value--mobile[_ngcontent-%COMP%]{font-weight:200;max-width:100%;width:100%;font-size:12px;display:block;margin:8px 0;word-break:break-all}@media (min-width:768px){.notifications__contact-method__value--email[_ngcontent-%COMP%], .notifications__contact-method__value--mobile[_ngcontent-%COMP%]{float:right;margin:0;line-height:1.9;font-size:16px;width:auto}}.mail-edit-btn[_ngcontent-%COMP%]{float:right;margin-left:5px;border:none;background:none}.notifications__contact-method__default[_ngcontent-%COMP%]{font-size:14px}.notifications__contact-method__default[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;text-decoration:underline}.notifications--profile-update__error[_ngcontent-%COMP%]{margin-bottom:15px}.notifications__done[_ngcontent-%COMP%], .notifications__update[_ngcontent-%COMP%]{border-radius:4px;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background-color:#1d69b4;border:0 solid #195c9e;color:#fff}.notifications__done[disabled][_ngcontent-%COMP%], .notifications__update[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.notifications__done[_ngcontent-%COMP%]:hover:after, .notifications__update[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .notifications__done[_ngcontent-%COMP%], button[_ngcontent-%COMP%] + .notifications__update[_ngcontent-%COMP%]{margin-top:10px}@media (max-width:767px){.notifications__done[_ngcontent-%COMP%], .notifications__update[_ngcontent-%COMP%]{max-width:none}}.notifications__update--disabled[_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.notifications__cancel[_ngcontent-%COMP%]{border-radius:4px;border:0 solid transparent;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background:transparent}.notifications__cancel[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.notifications__cancel[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .notifications__cancel[_ngcontent-%COMP%]{margin-top:10px}@media (max-width:767px){.notifications__cancel[_ngcontent-%COMP%]{max-width:none}}']}),e}()},CJsN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutModule=void 0,n("fXoL");var o=n("ofXK"),r=(n("E2dh"),n("zKOy")),i=n("swtb"),a=n("pshO"),c=n("fXoL");t.LayoutModule=function(){function e(){}return e.\u0275mod=c.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=c.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule,r.HeaderModule,i.FooterModule,a.LoaderModule]]}),e}()},D1HI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CTPToPaymentCardPipe=void 0,n("fXoL");var o=n("fXoL");t.CTPToPaymentCardPipe=function(){function e(){}return e.prototype.transform=function(e,t){return{partialNumber:e.PanPartial}},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.\u0275\u0275definePipe({name:"ctpToPaymentCard",type:e,pure:!0}),e}()},D2aF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardCarouselStatusComponent=void 0;var o=n("fXoL"),r=n("fXoL"),i=n("ofXK");function a(e,t){if(1&e){var n=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",1),r.\u0275\u0275elementStart(1,"div",2),r.\u0275\u0275elementStart(2,"a",3),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(n),r.\u0275\u0275nextContext().activateCard()}),r.\u0275\u0275elementStart(3,"strong"),r.\u0275\u0275text(4,"Activate"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"strong",4),r.\u0275\u0275text(6,"Activate"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}}function c(e,t){1&e&&(r.\u0275\u0275elementStart(0,"div",1),r.\u0275\u0275elementStart(1,"div",2),r.\u0275\u0275elementStart(2,"strong",5),r.\u0275\u0275text(3,"Blocked"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())}t.CardCarouselStatusComponent=function(){function e(){this.initiateActivation=new o.EventEmitter}return e.prototype.activateCard=function(){this.initiateActivation.emit()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tni-card-carousel-status"]],inputs:{isBlocked:"isBlocked",isInactive:"isInactive",cardId:"cardId"},outputs:{initiateActivation:"initiateActivation"},decls:2,vars:2,consts:[["class","opal-selector__card-status-wrapper",4,"ngIf"],[1,"opal-selector__card-status-wrapper"],[1,"opal-selector__card-status"],["aria-label","Activate card",1,"card-block-link",3,"click"],[1,"card-block-status"],[1,"card-block-status","card-block-status--blocked"]],template:function(e,t){1&e&&(r.\u0275\u0275template(0,a,7,0,"div",0),r.\u0275\u0275template(1,c,4,0,"div",0)),2&e&&(r.\u0275\u0275property("ngIf",t.isInactive&&!t.isBlocked),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.isBlocked))},directives:[i.NgIf],styles:[".card-block-status[_ngcontent-%COMP%]{font-size:14px}.card-block-link[_ngcontent-%COMP%],   .active .card-block-status{display:none}.card-block-status[_ngcontent-%COMP%]{color:#1d69b4;text-decoration:underline}  .active .card-block-link{display:block;cursor:pointer;background:none;border:none;text-decoration:underline}.card-block-status--blocked[_ngcontent-%COMP%]{text-decoration:none;color:#373636;display:block}"]}),e}()},DMPg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContactlessActivityComponent=void 0,n("fXoL");var o=n("wd/R"),r=n("fXoL"),i=n("gUXI"),a=n("Mp0x");t.ContactlessActivityComponent=function(){function e(){}return e.prototype.ngOnInit=function(){this.time=o(this.activity.date).format("hh:mm")},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tni-contactless-activity"]],inputs:{activity:"activity"},decls:16,vars:11,consts:[[1,"contactless-activity__icon"],[1,"sr-only"],["iconClasses","md","aria-hidden","true",3,"iconName"],[1,"contactless-activity__time"],[1,"contactless-activity__price"],[1,"contactless-activity__journey"],["iconName","arrow-right-small","aria-hidden","true","iconClasses","sm"]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"li"),r.\u0275\u0275elementStart(1,"div",0),r.\u0275\u0275elementStart(2,"span",1),r.\u0275\u0275text(3),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(4,"tni-icon",2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"div",3),r.\u0275\u0275text(6),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"div",4),r.\u0275\u0275text(8),r.\u0275\u0275pipe(9,"centsToDollar"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"div",5),r.\u0275\u0275text(11),r.\u0275\u0275elementStart(12,"span",1),r.\u0275\u0275text(13,"to"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(14,"tni-icon",6),r.\u0275\u0275text(15),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275classMapInterpolate1("contactless-activity contactless-activity--",t.activity.mode,""),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate(t.activity.mode),r.\u0275\u0275advance(1),r.\u0275\u0275property("iconName",t.activity.mode),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",t.time," "),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1("-",r.\u0275\u0275pipeBind1(9,9,t.activity.fare),""),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate1(" ",t.activity.from," "),r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate1(" ",t.activity.to," "))},directives:[i.IconComponent],pipes:[a.CentsToDollarPipe],styles:[".contactless-activity[_ngcontent-%COMP%]{border-top:1px solid #d8d8d8;border-left:4px solid grey;list-style:none;padding:16px 0 16px 65px;margin:0;position:relative;font-size:16px;font-weight:400}.contactless-activity--bus[_ngcontent-%COMP%]{border-left:4px solid #009eec}.contactless-activity--train[_ngcontent-%COMP%]{border-left:4px solid #f18500}.contactless-activity--ferry[_ngcontent-%COMP%]{border-left:4px solid #5ab031}.contactless-activity--transaction[_ngcontent-%COMP%]{border-left:4px solid #009eec}.contactless-activity__icon[_ngcontent-%COMP%]{position:absolute;top:16px;left:16px}.contactless-activity__time[_ngcontent-%COMP%]{font-weight:500}.contactless-activity__price[_ngcontent-%COMP%]{float:right;font-weight:500;margin:0 16px}"]}),e}()},DRCh:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MouseFocusDirective=void 0,n("fXoL");var o=n("fXoL");t.MouseFocusDirective=function(){function e(e){this.renderer=e}return e.prototype.onClick=function(){this.renderer.addClass(document.body,"focus--mouse")},e.prototype.onKeyPress=function(){this.renderer.removeClass(document.body,"focus--mouse")},e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(o.Renderer2))},e.\u0275dir=o.\u0275\u0275defineDirective({type:e,selectors:[["","mouseFocus",""]],hostBindings:function(e,t){1&e&&o.\u0275\u0275listener("click",function(){return t.onClick()},!1,o.\u0275\u0275resolveBody)("keyup",function(){return t.onKeyPress()},!1,o.\u0275\u0275resolveBody)}}),e}()},DWut:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginStatusEnum=void 0,t.LoginStatusEnum=function(e){return e[e.Ok=0]="Ok",e[e.Unauthorized=1]="Unauthorized",e[e.Locked=2]="Locked",e[e.AlreadyRegistered=3]="AlreadyRegistered",e[e.Unexpected=4]="Unexpected",e}(t.LoginStatusEnum||{})},DkoF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardActivitiesComponent=void 0,n("fXoL"),n("puoa");var o=n("wd/R"),r=n("YAaT"),i=(n("SC3b"),n("T/fq"),n("PShm"),n("QK+Z"),n("fXoL")),a=n("QK+Z"),c=n("PShm"),s=n("puoa"),l=n("T/fq"),d=n("ofXK"),p=n("3Pt+"),u=n("MFE2"),m=n("T42N"),f=n("g96h"),g=n("q8mF"),h=["activityContainer"];function v(e,t){if(1&e&&i.\u0275\u0275element(0,"tni-option",16),2&e){var n=t.$implicit;i.\u0275\u0275property("value",n.value)("label",n.label)}}function C(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"form",8),i.\u0275\u0275text(1," Show me "),i.\u0275\u0275elementStart(2,"tni-lingua-dropdown",9),i.\u0275\u0275listener("selectedValueChange",function(e){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().selectedActivityTypeFilter=e})("selectedValueChange",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onActivityTypeFilterChange()}),i.\u0275\u0275element(3,"tni-option",10),i.\u0275\u0275element(4,"tni-option",11),i.\u0275\u0275element(5,"tni-option",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(6,"br"),i.\u0275\u0275text(7," for "),i.\u0275\u0275elementStart(8,"tni-lingua-dropdown",13),i.\u0275\u0275listener("selectedValueChange",function(e){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().selectedMonthYearFilter=e})("selectedValueChange",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onDateFilterChange()}),i.\u0275\u0275template(9,v,1,2,"tni-option",14),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"p",15),i.\u0275\u0275text(11,"Transactions may take up to 48 hours to appear on your activity statement."),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext();i.\u0275\u0275advance(2),i.\u0275\u0275property("selectedValue",o.selectedActivityTypeFilter),i.\u0275\u0275advance(1),i.\u0275\u0275property("value",o.ActivityFilterTypeEnum.All),i.\u0275\u0275advance(1),i.\u0275\u0275property("value",o.ActivityFilterTypeEnum.TOPUPS),i.\u0275\u0275advance(1),i.\u0275\u0275property("value",o.ActivityFilterTypeEnum.INCOMPLETEJOURNEY),i.\u0275\u0275advance(3),i.\u0275\u0275property("selectedValue",o.selectedMonthYearFilter),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",o.monthYearFilterOptions)}}function _(e,t){1&e&&(i.\u0275\u0275elementStart(0,"p",20),i.\u0275\u0275text(1,"Activity statement has been refreshed"),i.\u0275\u0275elementEnd())}function b(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",17),i.\u0275\u0275elementStart(1,"tni-refresh",18),i.\u0275\u0275listener("refreshClick",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().onRefreshClick()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(2,_,2,0,"p",19),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("lastUpdated",o.lastUpdated)("ariaSuffix","activity"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",o.showRefreshSR)}}function x(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275elementStart(1,"div",21),i.\u0275\u0275element(2,"div",22),i.\u0275\u0275element(3,"div",23),i.\u0275\u0275element(4,"div",24),i.\u0275\u0275element(5,"div",25),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",21),i.\u0275\u0275element(7,"div",22),i.\u0275\u0275element(8,"div",23),i.\u0275\u0275element(9,"div",24),i.\u0275\u0275element(10,"div",25),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(11,"div",21),i.\u0275\u0275element(12,"div",22),i.\u0275\u0275element(13,"div",23),i.\u0275\u0275element(14,"div",24),i.\u0275\u0275element(15,"div",25),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd())}function y(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",26),i.\u0275\u0275namespaceSVG(),i.\u0275\u0275elementStart(1,"svg",27),i.\u0275\u0275element(2,"image",28),i.\u0275\u0275elementEnd(),i.\u0275\u0275namespaceHTML(),i.\u0275\u0275elementStart(3,"p",29),i.\u0275\u0275text(4,"No Opal card activity"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd())}function M(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"li"),i.\u0275\u0275element(1,"tni-card-activity",38),i.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("cardActivity",n)}}function P(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",32,33),i.\u0275\u0275elementStart(2,"div",34),i.\u0275\u0275elementStart(3,"div",35),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"ol",36),i.\u0275\u0275template(6,M,2,1,"li",37),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,o=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate(n),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",o.filteredActivitiesMap.get(n))}}function O(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",30),i.\u0275\u0275template(1,P,7,2,"div",31),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",n.getActivitiesByDateKeys())}}t.CardActivitiesComponent=function(){function e(e,t,n,o,i,a){this.smartcardService=t,this.ngZone=n,this.cdRef=o,this.windowRef=i,this.accessibleAlertsService=a,this.ActivityFilterTypeEnum=r.ActivityFilterTypeEnum,this.monthYearFilterOptions=[],this.filteredActivitiesMap=new Map,this.websiteNavBarHeight=0;var c=e.get();this.isRegistered=!c.unregisteredCardNo,this.isLoadingData=!1,this.createMonthYearFilterOptions(),this.selectedMonthYearFilter=this.monthYearFilterOptions[0].value,this.selectedActivityTypeFilter=r.ActivityFilterTypeEnum.All,this.firstLoad=!0}return e.prototype.ngAfterViewInit=function(){null!=document.querySelector(".opal-header")&&(this.websiteNavBarHeight=document.querySelector(".opal-header").getBoundingClientRect().height),this.windowRef.isMobileView()||(this.websiteNavBarHeight=this.websiteNavBarHeight-5)},e.prototype.ngOnChanges=function(e){e.smartCard&&e.smartCard.currentValue&&this.fetchCardActivites(!1)},e.prototype.onDateFilterChange=function(){this.fetchCardActivites(!1)},e.prototype.onActivityTypeFilterChange=function(){this.filterByTypeAndGroupByDate()},e.prototype.onRefreshClick=function(){this.fetchCardActivites(!0)},e.prototype.getActivitiesByDateKeys=function(){return Array.from(this.filteredActivitiesMap.keys())},e.prototype.createMonthYearFilterOptions=function(){for(var e=o().startOf("month"),t=o(e).subtract(18,"months");t.isBefore(e,"day");)this.monthYearFilterOptions.push({value:o(e),label:o(e).format("MMMM YYYY")}),e.subtract(1,"month");this.monthYearFilterOptions.splice(0,0,{value:null,label:"the last 7 days"})},e.prototype.fetchCardActivites=function(e){var t,n,r,i=this;this.isRegistered?(this.selectedMonthYearFilter?(t=o(this.selectedMonthYearFilter.startOf("month")),n=o(this.selectedMonthYearFilter.endOf("month"))):(n=o(),t=o().subtract(7,"days")),r=500):(t=o().subtract(6,"months"),n=o(),r=10),this.isLoadingData=!0,this.activitiesSubscription&&this.activitiesSubscription.unsubscribe(),this.activitiesSubscription=this.smartcardService.activity(this.smartCard.smartcardId,0,r,t,n,!this.isRegistered).subscribe(function(t){i.lastUpdated=o(),i.fetchedActivityList=t.activities.sort(i.sortByActivityDate).slice(0,r),i.filterByTypeAndGroupByDate(),e&&i.showAndHideRefreshSR(),i.fetchedActivityList.length||i.firstLoad||i.accessibleAlertsService.sendAlert("No Opal card activity"),i.isLoadingData=!1,i.firstLoad=!1},function(){return i.isLoadingData=!1})},e.prototype.sortByActivityDate=function(e,t){return t.activityDate.diff(e.activityDate)},e.prototype.filterByTypeAndGroupByDate=function(){var e=this;this.filteredActivitiesMap.clear(),this.filterByActivityType(this.fetchedActivityList).forEach(function(t){e.filteredActivitiesMap.has(t.activityDate.format("dddd DD MMM YYYY"))||e.filteredActivitiesMap.set(t.activityDate.format("dddd DD MMM YYYY"),[]),e.filteredActivitiesMap.get(t.activityDate.format("dddd DD MMM YYYY")).push(t)})},e.prototype.filterByActivityType=function(e){return this.selectedActivityTypeFilter===r.ActivityFilterTypeEnum.All?e:this.selectedActivityTypeFilter===r.ActivityFilterTypeEnum.INCOMPLETEJOURNEY?e.filter(function(e){return e.isIncompleteJourney()}):this.selectedActivityTypeFilter===r.ActivityFilterTypeEnum.TOPUPS?e.filter(function(e){return e.isTopupTransaction()}):void 0},e.prototype.showAndHideRefreshSR=function(){var e=this;this.showRefreshSR=!0,this.ngZone.runOutsideAngular(function(){setTimeout(function(){e.showRefreshSR=!1},5e3)})},e.prototype.onWindowScroll=function(){var e=this;this.activityContainerElList.forEach(function(t){var n=t.nativeElement.querySelector(".activity-date"),o=t.nativeElement.querySelector(".cards-list"),r=o.getBoundingClientRect().top-n.getBoundingClientRect().height,i=o.getBoundingClientRect().bottom-n.getBoundingClientRect().height+5;r<=e.websiteNavBarHeight&&i>=e.websiteNavBarHeight?(n.classList.add("sticky-activity-date"),n.style.width=t.nativeElement.querySelector(".sticky-header-wrapper").getBoundingClientRect().width+"px"):(n.classList.remove("sticky-activity-date"),n.style.width="inherit")})},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(a.OpalAccountStore),i.\u0275\u0275directiveInject(c.SmartcardService),i.\u0275\u0275directiveInject(i.NgZone),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(s.WindowRef),i.\u0275\u0275directiveInject(l.AccessibleAlertsService))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tni-card-activities"]],viewQuery:function(e,t){var n;1&e&&i.\u0275\u0275viewQuery(h,!0),2&e&&i.\u0275\u0275queryRefresh(n=i.\u0275\u0275loadQuery())&&(t.activityContainerElList=n)},hostBindings:function(e,t){1&e&&i.\u0275\u0275listener("scroll",function(){return t.onWindowScroll()},!1,i.\u0275\u0275resolveWindow)},inputs:{smartCard:"smartCard"},features:[i.\u0275\u0275NgOnChangesFeature],decls:8,vars:5,consts:[[1,"card-activities-component"],[1,"card-activities-component-header"],["class","month-view",4,"ngIf"],["aria-live","assertive","aria-atomic","true"],["class","refresh-container",4,"ngIf"],[4,"ngIf"],["class","no-activity-wrapper","role","alert","aria-live","assertive",4,"ngIf"],["class","activity-container-wrapper",4,"ngIf"],[1,"month-view"],["selectName","filterActivityType","selectClass","filter-selector",3,"selectedValue","selectedValueChange"],["label","everything",3,"value"],["label","top ups",3,"value"],["label","incomplete journeys",3,"value"],["selectClass","month-view-selector","selectName","filterMonthYear",3,"selectedValue","selectedValueChange"],[3,"value","label",4,"ngFor","ngForOf"],[1,"disclaimer"],[3,"value","label"],[1,"refresh-container"],[3,"lastUpdated","ariaSuffix","refreshClick"],["class","sr-only",4,"ngIf"],[1,"sr-only"],[1,"skeleton-card","inline"],[1,"skeleton-avatar"],[1,"skeleton-bar-square-thin","left","x-sm"],[1,"skeleton-bar-square-thin","left","md"],[1,"skeleton-bar-square-thin","left","sm"],["role","alert","aria-live","assertive",1,"no-activity-wrapper"],["aria-hidden","true","aria-labelledby","linkOpalPay","focusable","false",1,"tp-icon","md","middle","opal-card"],[0,"xmlns","xlink","http://www.w3.org/1999/xlink","height","100%","width","100%",0,"xlink","href","assets/images/opal/tp_opal.svg"],[1,"no-activity-container","no-activity"],[1,"activity-container-wrapper"],["class","activity-by-date-container",4,"ngFor","ngForOf"],[1,"activity-by-date-container"],["activityContainer",""],[1,"sticky-header-wrapper"],[1,"activity-date"],[1,"cards-list"],[4,"ngFor","ngForOf"],[3,"cardActivity"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275template(2,C,12,6,"form",2),i.\u0275\u0275elementStart(3,"div",3),i.\u0275\u0275template(4,b,3,3,"div",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(5,x,16,0,"div",5),i.\u0275\u0275template(6,y,5,0,"div",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(7,O,2,1,"div",7),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.isRegistered),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.lastUpdated&&!t.isLoadingData),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.isLoadingData),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.isLoadingData&&0===t.filteredActivitiesMap.size),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.isLoadingData&&t.filteredActivitiesMap.size>0))},directives:[d.NgIf,p.\u0275angular_packages_forms_forms_y,p.NgControlStatusGroup,p.NgForm,u.TniLinguaDropdownComponent,m.TniOptionComponent,d.NgForOf,f.RefreshComponent,g.CardActivityComponent],styles:[".card-activities-component-header[_ngcontent-%COMP%]{padding-top:5px}.card-activities-component-header[_ngcontent-%COMP%]   .disclaimer[_ngcontent-%COMP%]{margin-top:12px;font-size:14px;color:#797979}.card-activities-component-header[_ngcontent-%COMP%]     .activity-spinner{padding:20px 0}.card-activities-component-header[_ngcontent-%COMP%]   .no-activity-wrapper[_ngcontent-%COMP%]{text-align:center;height:200px}.card-activities-component-header[_ngcontent-%COMP%]   .no-activity-wrapper[_ngcontent-%COMP%]   .no-activity-container[_ngcontent-%COMP%]{font-weight:500;outline:0}.card-activities-component-header[_ngcontent-%COMP%]   .month-view[_ngcontent-%COMP%]{margin-top:10px;padding:0 10px 10px 23px;font-size:18px;border-bottom:1px solid #e4e4e4}@media (max-width:767px){.card-activities-component-header[_ngcontent-%COMP%]   .month-view[_ngcontent-%COMP%]{font-size:15px}}.card-activities-component-header[_ngcontent-%COMP%]   .month-view[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{line-height:45px;font-weight:400}.card-activities-component-header[_ngcontent-%COMP%]   .month-view[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:0}.card-activities-component-header[_ngcontent-%COMP%]   .month-view[_ngcontent-%COMP%]   br[_ngcontent-%COMP%]{display:block;line-height:30px}@media (min-width:1200px){.card-activities-component-header[_ngcontent-%COMP%]   .month-view[_ngcontent-%COMP%]   br[_ngcontent-%COMP%]{display:none}}.card-activities-component-header[_ngcontent-%COMP%]   .refresh-container[_ngcontent-%COMP%]{padding:15px 0 15px 23px}@media (max-width:767px){.card-activities-component-header[_ngcontent-%COMP%]   .refresh-container[_ngcontent-%COMP%]{margin:0;padding:15px 10px}}.card-activities-component-header[_ngcontent-%COMP%]   .refresh-container[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding-bottom:2px}.card-activities-component[_ngcontent-%COMP%]   .activity-container-wrapper[_ngcontent-%COMP%]{background:#f6f6f6}.card-activities-component[_ngcontent-%COMP%]   .activity-container-wrapper[_ngcontent-%COMP%]   .activity-by-date-container[_ngcontent-%COMP%]{margin-bottom:10px;background:#fff;border-radius:4px}.card-activities-component[_ngcontent-%COMP%]   .activity-container-wrapper[_ngcontent-%COMP%]   .activity-by-date-container[_ngcontent-%COMP%]   .sticky-header-wrapper[_ngcontent-%COMP%]{min-height:48px;line-height:45px}.card-activities-component[_ngcontent-%COMP%]   .activity-container-wrapper[_ngcontent-%COMP%]   .activity-by-date-container[_ngcontent-%COMP%]   .activity-date[_ngcontent-%COMP%]{background:#fff;min-height:45px;padding:3px 10px 3px 23px;border-bottom:1px solid #e4e4e4;border-top:1px solid #e4e4e4;vertical-align:middle;font-weight:400}.card-activities-component[_ngcontent-%COMP%]   .activity-container-wrapper[_ngcontent-%COMP%]   .activity-by-date-container[_ngcontent-%COMP%]   .sticky-activity-date[_ngcontent-%COMP%]{position:fixed;top:0;z-index:50;transition:all .7s linear}.card-activities-component[_ngcontent-%COMP%]   .activity-container-wrapper[_ngcontent-%COMP%]   .activity-by-date-container[_ngcontent-%COMP%]   ol.cards-list[_ngcontent-%COMP%]{margin:0;padding:0}.card-activities-component[_ngcontent-%COMP%]   .activity-container-wrapper[_ngcontent-%COMP%]   .activity-by-date-container[_ngcontent-%COMP%]   ol.cards-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none}.card-activities-component[_ngcontent-%COMP%]   .activity-container-wrapper[_ngcontent-%COMP%]   .activity-by-date-container[_ngcontent-%COMP%]   ol.cards-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child)     .card-activity{border-bottom:1px solid #e4e4e4;margin-bottom:-1px}.card-activities-component[_ngcontent-%COMP%]   .activity-container-wrapper[_ngcontent-%COMP%]   .activity-by-date-container[_ngcontent-%COMP%]   ol.cards-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:first-child{margin-top:-1px}.card-activities-component[_ngcontent-%COMP%]   .tp-icon.opal-card[_ngcontent-%COMP%], .card-activities-component[_ngcontent-%COMP%]   .tp-icon[_ngcontent-%COMP%]   image[_ngcontent-%COMP%]{height:40px;width:40px}"]}),e}()},Dz93:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniMessagePanelModule=void 0,n("fXoL");var o=n("ofXK"),r=(n("M6bo"),n("NKuO")),i=n("fXoL");t.TniMessagePanelModule=function(){function e(){}return e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule,r.TniIconModule]]}),e}()},E2dh:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LayoutComponent=void 0,n("fXoL");var o=n("fXoL"),r=n("NYfO"),i=n("K3X+"),a=n("NCCL"),c=["*"];t.LayoutComponent=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-layout"]],ngContentSelectors:c,decls:5,vars:0,consts:[["mouseFocus",""]],template:function(e,t){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275element(1,"tni-opal-header"),o.\u0275\u0275projection(2),o.\u0275\u0275element(3,"tni-opal-footer"),o.\u0275\u0275element(4,"tni-loader"),o.\u0275\u0275elementEnd())},directives:[r.OpalHeaderComponent,i.OpalFooterComponent,a.LoaderComponent],styles:["[_nghost-%COMP%]{display:block;padding:0 0 222px;background:#f6f6f6;min-height:100vh;box-sizing:border-box;position:relative}@media (min-width:768px){[_nghost-%COMP%]{padding:0 0 72px}}"]}),e}()},E8FH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniCardNumberModule=void 0,n("fXoL"),n("09AV");var o=n("ofXK"),r=n("3Pt+"),i=n("fXoL");t.TniCardNumberModule=function(){function e(){}return e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule,r.ReactiveFormsModule,r.FormsModule]]}),e}()},ELlc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentService=void 0,n("fXoL"),n("tk/3"),n("6i2Y");var o=n("fXoL"),r=n("tk/3"),i=n("6i2Y");t.PaymentService=function(){function e(e,t){var n=this;this.http=e,this.featureToggleService=t,this.featureToggleService.getToggles().subscribe(function(e){return n.configuration=e.configs})}return e.prototype.getPaymentRequestToken=function(e,t){return this.http.get("/api/opal/api/bpoint/paymentauthtoken/"+e+"?amt="+t)},e.prototype.getAutoTopUpPaymentRequestToken=function(){return this.http.get("/api/opal/api/bpoint/dvauthtoken/")},e.prototype.dvPayments=function(e){return this.http.post("/api/opal/api/bpoint/dvpaymentaccount/",e)},e.prototype.verifyToken=function(e){return this.http.post("/api/opal/api/bpoint/paymenttransaction/",e)},e.prototype.getPageUrl=function(){return window.location.href.indexOf("transportnsw.info")>=0?"opal-view/#/account/cards":"opal-view#/account/cards"},e.prototype.createBpayRequest=function(e,t,n,o,r,i,a,c,s){var l={},d=n.split("/")[0],p=n.split("/")[1],u=this.getPageUrl();l.in_amount=t,l.in_credit_card=r,l.in_crn1=e.Crn1,l.in_crn2=e.Crn2,l.in_cvv=o,l.in_expiry_month=d,l.in_expiry_year=p,l.in_merchant_number=e.MerchantNumber,l.in_pay_token=e.PaymentAuthToken,l.in_store_card=i?"1":"0",l.in_receipt_page_url=window.location.origin+"/"+u,l.in_merchant_reference=e.MerchantReceipt,l.component=a,l.smartCard=c,l.merchantReceipt=s,this.submitFORM(this.configuration.bpointUrl,"POST",l)},e.prototype.addToBpointDataVault=function(e,t,n,o,r,i,a,c,s){var l={},d=this.getPageUrl();l.in_token=e.DVAuthToken,l.in_receipt_page_url=window.location.origin+"/"+d,l.in_credit_card=o,l.in_expiry_month=t.split("/")[0],l.in_expiry_year=t.split("/")[1],l.component=i,l.smartCard=a,l.selectedAutoTopupAmount=c,l.changeCard=s,this.submitFORM(this.configuration.bpointDataVaultUrl,"POST",l)},e.prototype.submitFORM=function(e,t,n){t=t||"post";var o=document.createElement("form");for(var r in o.setAttribute("method",t),o.setAttribute("action",e),o.setAttribute("enctype","application/x-www-form-urlencoded"),o.id="bpoint-form",o._submit_function_=o.submit,n)if(n.hasOwnProperty(r)){var i=document.createElement("input");i.setAttribute("type","hidden"),i.setAttribute("name",r),i.setAttribute("value",n[r]),o.appendChild(i)}document.body.appendChild(o),o._submit_function_()},e.prototype.removebPayForm=function(){document.body.removeChild(document.getElementById("frm-bpoint")),document.body.removeChild(document.getElementById("bpoint-form"))},e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(r.HttpClient),o.\u0275\u0275inject(i.FeatureToggleService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},Effa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SpinnerComponent=void 0,n("fXoL");var o=n("fXoL"),r=n("ofXK");function i(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"p"),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",n.displayText," ")}}t.SpinnerComponent=function(){function e(){this.srText="Loading",this.spinnerId="tni-spinner-"+e.counter++}return e.counter=0,e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-spinner"]],inputs:{srText:"srText",spinnerId:"spinnerId",spinnerClass:"spinnerClass",displayText:"displayText"},decls:6,vars:4,consts:[["aria-live","assertive",1,"tfnsw-spinner",3,"id","ngClass"],["aria-atomic","true","role","status",1,"sr-only"],[1,"spinner"],["src","assets/images/spinner.gif","alt","loading",1,"spinner-image"],[4,"ngIf"]],template:function(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"p",1),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(3,"div",2),o.\u0275\u0275element(4,"img",3),o.\u0275\u0275template(5,i,2,1,"p",4),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("id",t.spinnerId)("ngClass",t.spinnerClass),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(t.srText),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",t.displayText))},directives:[r.NgClass,r.NgIf],encapsulation:2}),e}()},FPfk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentComponent=void 0;var o=n("fXoL"),r=(n("VzkM"),n("6i2Y"),n("0ywJ"),n("3Pt+")),i=n("u3Ad"),a=n("37k+"),c=n("aeCY"),s=(n("tyNb"),n("NRRr"),n("fXoL")),l=n("0ywJ"),d=n("tyNb"),p=n("6i2Y"),u=n("NRRr"),m=n("pxjO"),f=n("ofXK"),g=n("gUXI"),h=n("cGJq"),v=n("73Ru"),C=n("aeCY"),_=n("3Pt+"),b=n("54GQ"),x=n("37k+");function y(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div",2),s.\u0275\u0275element(1,"tni-icon",3),s.\u0275\u0275elementStart(2,"p"),s.\u0275\u0275text(3,"Payment card updated successfully"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(4,"p",4),s.\u0275\u0275text(5," A pre-authorisation of $1 has been held while your financial institution verifies this account. It will be returned, usually within 5-10 business days, depending upon your financial institution. "),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(6,"button",5),s.\u0275\u0275listener("click",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().hideSuccessBox()}),s.\u0275\u0275text(7),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}if(2&e){var o=s.\u0275\u0275nextContext();s.\u0275\u0275advance(7),s.\u0275\u0275textInterpolate1(" ",o.customLabel?o.customLabel:"OK"," ")}}function M(e,t){1&e&&(s.\u0275\u0275elementStart(0,"tni-form-message",9),s.\u0275\u0275text(1," Something went wrong, please try again later. "),s.\u0275\u0275elementEnd())}function P(e,t){1&e&&(s.\u0275\u0275elementStart(0,"p"),s.\u0275\u0275text(1,"Add a debit or credit card to your account to easily top up your Opal cards."),s.\u0275\u0275elementEnd())}function O(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div",10),s.\u0275\u0275elementStart(1,"tni-display-credit-card",11),s.\u0275\u0275listener("changeCard",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext(2).changeCardDetails()}),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}if(2&e){var o=s.\u0275\u0275nextContext(2);s.\u0275\u0275advance(1),s.\u0275\u0275property("cardType",o.paymentAccount.bankCardType)("paymentAccount",o.paymentAccount)("featureToggle",!0)}}function S(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"button",17),s.\u0275\u0275listener("click",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext(3).cancel()}),s.\u0275\u0275text(1,"Cancel"),s.\u0275\u0275elementEnd()}}function w(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"form",12),s.\u0275\u0275element(1,"payment-details-form",13),s.\u0275\u0275elementStart(2,"div",14),s.\u0275\u0275elementStart(3,"add-card-to-vault",15),s.\u0275\u0275listener("addCardToVaultError",function(e){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext(2).addCardToVaultError(e)})("addCardToVaultSuccess",function(e){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext(2).addCardToVaultSuccess(e)}),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(4,S,2,0,"button",16),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}if(2&e){var o=s.\u0275\u0275nextContext(2);s.\u0275\u0275property("formGroup",o.paymentForm),s.\u0275\u0275advance(1),s.\u0275\u0275property("group",o.paymentForm)("hideSubmitButton",!0)("showCancelButton",!1)("showAddCard",!1),s.\u0275\u0275advance(2),s.\u0275\u0275propertyInterpolate("CTAtext",o.paymentAccount?"SAVE":"ADD CARD"),s.\u0275\u0275property("paymentForm",o.paymentForm)("component","payment")("smartCard",o.smartCard)("enableCTA",o.enableSaveCard())("changeCard",o.changeCard)("shouldTrackClickEvent",!0)("hasPaymentAccount",!!o.paymentAccount),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",o.paymentAccount)}}function k(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"div"),s.\u0275\u0275template(1,M,2,0,"tni-form-message",6),s.\u0275\u0275template(2,P,2,0,"p",1),s.\u0275\u0275template(3,O,2,3,"div",7),s.\u0275\u0275template(4,w,5,14,"form",8),s.\u0275\u0275element(5,"tni-security-message"),s.\u0275\u0275elementEnd()),2&e){var n=s.\u0275\u0275nextContext();s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",n.updateCardError),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",!n.paymentAccount),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",n.paymentAccount),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",n.changeCard||!n.paymentAccount)}}t.PaymentComponent=function(){function e(e,t,n,r,i,a){this.panelRefreshService=e,this.activatedRoute=t,this.router=n,this.cdRef=r,this.featureToggleService=i,this.loaderService=a,this.getPaymentAccount=new o.EventEmitter,this.changeCard=!1,this.updateCardError=!1,this.updatecardSuccess=!1}return e.prototype.ngOnInit=function(){this.setUpPaymentForm(),this.getQueryParams()},e.prototype.setUpPaymentForm=function(){var e,t,n=null===(t=null===(e=this.featureToggleService.featureToggles)||void 0===e?void 0:e.toggles)||void 0===t?void 0:t["opal-allow-amex-and-jcb-payments"];this.paymentForm=new r.FormGroup({name:new r.FormControl(null,[r.Validators.required]),number:new r.FormControl(null,[r.Validators.required,r.Validators.pattern(i.TniRegularExpressions.creditCardNumber(n))]),cvv:new r.FormControl(null,[r.Validators.required,r.Validators.pattern(i.TniRegularExpressions.cvv(n))]),expiry:new r.FormControl(null,[r.Validators.required,r.Validators.pattern(i.TniRegularExpressions.creditCardExpiry)])})},e.prototype.changeCardDetails=function(){this.changeCard=!0,this.panelRefreshService.pushPanelRefreshEvent()},e.prototype.enableSaveCard=function(){return this.paymentForm.valid},e.prototype.cancel=function(){this.changeCard=!1,this.displayCreditCardComponent.displayChangeBtn=!0},e.prototype.addCardToVaultSuccess=function(e){this.getPaymentAccount.emit(),this.changeCard=!1,this.updatecardSuccess=!0,this.router.navigate(["/account/profile"]),this.updateCardError=!1},e.prototype.getQueryParams=function(){var e=this;this.activatedRoute.queryParams.subscribe(function(t){t.component&&(t.out_token?(e.loaderService.display(!0),e.changeCard=!0,e.cdRef.detectChanges()):e.addCardToVaultError({}))})},e.prototype.addCardToVaultError=function(e){this.changeCard=!1,this.updatecardSuccess=!1,this.router.navigate(["/account/profile"]),this.loaderService.display(!1),this.updateCardError=!0},e.prototype.hideSuccessBox=function(){this.updatecardSuccess=!1},e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275directiveInject(l.TniPanelRefreshService),s.\u0275\u0275directiveInject(d.ActivatedRoute),s.\u0275\u0275directiveInject(d.Router),s.\u0275\u0275directiveInject(s.ChangeDetectorRef),s.\u0275\u0275directiveInject(p.FeatureToggleService),s.\u0275\u0275directiveInject(u.LoaderService))},e.\u0275cmp=s.\u0275\u0275defineComponent({type:e,selectors:[["tni-payment"]],viewQuery:function(e,t){if(1&e&&(s.\u0275\u0275viewQuery(a.AddCardToVaultComponent,!0),s.\u0275\u0275viewQuery(c.DisplayCreditCardComponent,!0)),2&e){var n=void 0;s.\u0275\u0275queryRefresh(n=s.\u0275\u0275loadQuery())&&(t.addCardToVaultComponent=n.first),s.\u0275\u0275queryRefresh(n=s.\u0275\u0275loadQuery())&&(t.displayCreditCardComponent=n.first)}},inputs:{paymentAccount:"paymentAccount"},outputs:{getPaymentAccount:"getPaymentAccount"},decls:5,vars:2,consts:[["class","col-xs-12 col-md-6","class","success-panel",4,"ngIf"],[4,"ngIf"],[1,"success-panel"],["iconName","success","iconClasses","xl","iconAriaHidden","true","iconHidden","false",1,"submit__success__icon"],[1,"add-info"],[1,"btn","btn-sm","btn-primary","next-btn","btn-done",3,"click"],["class","card-change-error","id","card-change-error",4,"ngIf"],["class","payment-secure-msg",4,"ngIf"],["class","row",3,"formGroup",4,"ngIf"],["id","card-change-error",1,"card-change-error"],[1,"payment-secure-msg"],[3,"cardType","paymentAccount","featureToggle","changeCard"],[1,"row",3,"formGroup"],[3,"group","hideSubmitButton","showCancelButton","showAddCard"],[1,"payment-card__actions"],[3,"paymentForm","component","smartCard","enableCTA","changeCard","shouldTrackClickEvent","hasPaymentAccount","CTAtext","addCardToVaultError","addCardToVaultSuccess"],["class","cancel-btn",3,"click",4,"ngIf"],[1,"cancel-btn",3,"click"]],template:function(e,t){1&e&&(s.\u0275\u0275elementStart(0,"tni-page-frame"),s.\u0275\u0275elementStart(1,"h2"),s.\u0275\u0275text(2,"Payment card"),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(3,y,8,1,"div",0),s.\u0275\u0275template(4,k,6,4,"div",1),s.\u0275\u0275elementEnd()),2&e&&(s.\u0275\u0275advance(3),s.\u0275\u0275property("ngIf",t.updatecardSuccess),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",!t.updatecardSuccess))},directives:[m.PageFrameComponent,f.NgIf,g.IconComponent,h.SecurityMessageComponent,v.TniFormMessageComponent,C.DisplayCreditCardComponent,_.\u0275angular_packages_forms_forms_y,_.NgControlStatusGroup,_.FormGroupDirective,b.PaymentDetailsFormComponent,x.AddCardToVaultComponent],styles:['.payment-component[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]{padding-bottom:15px}.payment-component[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   .data-field-block[_ngcontent-%COMP%]{margin-bottom:15px;width:100%}.payment-component[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   .data-field-block[_ngcontent-%COMP%]   .data-label[_ngcontent-%COMP%]{font-size:14px;color:#999e9f;min-height:24px;margin-bottom:-8px}.payment-component[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   .data-field-block[_ngcontent-%COMP%]   .data-value[_ngcontent-%COMP%]{padding:2px 2px 5px;border:solid #555;border-width:0 0 1px;min-height:31px;word-break:break-all}@media (max-width:767px){.payment-component[_ngcontent-%COMP%]   .details-card[_ngcontent-%COMP%]   .data-field-block[_ngcontent-%COMP%]   .data-value[_ngcontent-%COMP%]{min-height:28px}}.opal-website-link[_ngcontent-%COMP%]{border-top:1px solid #ddd;padding:10px 20px;text-align:right}.success-panel[_ngcontent-%COMP%]{text-align:center;font-size:19px}.success-panel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:50%}.success-panel[_ngcontent-%COMP%]   .add-info[_ngcontent-%COMP%]{font-size:16px;line-height:20px}.card-change-error[_ngcontent-%COMP%]{margin-bottom:30px}.app-badge-group[_ngcontent-%COMP%]{padding:0}.app-badge-group[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{clear:both;margin:0 0 10px}.app-badge-group[_ngcontent-%COMP%]   a[_ngcontent-%COMP%], .app-badge-group[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{max-width:135px;max-height:40px}.payment-details-referal[_ngcontent-%COMP%]{font-size:14.25px;margin:0 15px 15px}.payment-card__actions[_ngcontent-%COMP%]{margin:0 16px 48px}.cancel-btn[_ngcontent-%COMP%]{border-radius:4px;border:0 solid transparent;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background:transparent;margin:10px auto 0}.cancel-btn[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.cancel-btn[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .cancel-btn[_ngcontent-%COMP%]{margin-top:10px}.message[_ngcontent-%COMP%]{font-size:12px;text-align:center}.message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-left:5px}.copy-text[_ngcontent-%COMP%]{font-size:14px;border-bottom:1px solid #ddd;padding:0 0 25px}']}),e}()},Fam3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniPipesModules=void 0,n("fXoL");var o=n("Mp0x"),r=n("iccS"),i=n("kxHz"),a=n("eE13"),c=n("jhCk"),s=n("U+qi"),l=n("x+y0"),d=n("WmLy"),p=n("ofXK"),u=n("zjfG"),m=n("fXoL");t.TniPipesModules=function(){function e(){}return e.\u0275mod=m.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=m.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},providers:[o.CentsToDollarPipe,r.CreditCardMonthPipe,i.CreditCardNumberAsterikPipe,a.CreditCardNumberPipe,p.DatePipe,c.MobileNumberPipe,s.OpalCardNumberPipe,l.LastUpdatedDescriptionPipe,d.PhoneNumberPipe,u.AddressPipe]}),e}()},G3li:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AuthGuardService=void 0,n("fXoL"),n("84CM"),n("QK+Z"),n("jGKr");var o=n("fXoL"),r=n("jGKr"),i=n("QK+Z"),a=n("84CM");t.AuthGuardService=function(){function e(e,t,n){this.opalSessionStore=e,this.opalAccountStore=t,this.logoutService=n}return e.prototype.canActivate=function(){var e=this.opalAccountStore.hasActiveSessionToken(),t=this.opalSessionStore.hasValidSession();return!(!e||!t)||(this.logoutService.logout(e&&!t),!1)},e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(r.OpalSessionStore),o.\u0275\u0275inject(i.OpalAccountStore),o.\u0275\u0275inject(a.LogoutService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},GGEm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CTPModule=void 0,n("fXoL");var o=n("ofXK"),r=n("tk/3"),i=n("fiHy"),a=n("fX4m"),c=n("jy4o"),s=n("D1HI"),l=n("7qcx"),d=n("iS8h"),p=(n("flw8"),n("0uEL"),n("RUUZ"),n("DMPg"),n("84CM")),u=n("6TJL"),m=n("Fam3"),f=n("fXoL");t.CTPModule=function(){function e(){}return e.\u0275mod=f.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=f.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},providers:[i.CTPAuthService,a.CTPTripsService,s.CTPToPaymentCardPipe,c.CTPToJourneyPipe,p.LogoutService,{provide:r.HTTP_INTERCEPTORS,useClass:d.CTPInterceptorService,multi:!0}],imports:[[o.CommonModule,l.CtpRoutingModule,u.UiComponentsModule,m.TniPipesModules]]}),e}()},GMQf:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniAccordionModule=void 0,n("fXoL"),n("c3qe");var o=n("ofXK"),r=n("fXoL");t.TniAccordionModule=function(){function e(){}return e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule]]}),e}()},GPsQ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppComponent=void 0,n("fXoL");var o=n("+aTx"),r=(n("jGKr"),n("YORH"),n("fXoL")),i=n("jGKr"),a=n("YORH"),c=n("tyNb");t.AppComponent=function(){function e(e,t,n){this.sessionStore=e,this.elementRef=t,this.trackOpalEventService=n,e.loginWindowType=this.elementRef.nativeElement.getAttribute("login")}return e.prototype.ngOnInit=function(){o()},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(i.OpalSessionStore),r.\u0275\u0275directiveInject(r.ElementRef),r.\u0275\u0275directiveInject(a.TrackOpalEventService))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tni-opal-app-root"]],decls:2,vars:0,consts:[["id","recaptcha"]],template:function(e,t){1&e&&(r.\u0275\u0275element(0,"div",0),r.\u0275\u0275element(1,"router-outlet"))},directives:[c.RouterOutlet],styles:["#recaptcha[_ngcontent-%COMP%]{position:relative;z-index:10}"]}),e}()},HJIk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniCollapsibleCardComponent=void 0,n("fXoL");var o=n("fXoL"),r=n("ofXK"),i=n("gUXI");function a(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",5),o.\u0275\u0275listener("keyup.enter",function(e){return e.stopPropagation()}),o.\u0275\u0275projection(1),o.\u0275\u0275elementEnd())}var c=function(e){return{"collapsible-card-details-header":!0,expanded:e}},s=["*"];t.TniCollapsibleCardComponent=function(){function e(){this.expanded=!0}return e.prototype.toggleExpanded=function(){this.expanded=!this.expanded},e.prototype.ngOnChanges=function(e){e.defaultCollapsed&&e.defaultCollapsed.currentValue&&e.defaultCollapsed.isFirstChange()&&(this.expanded=!1)},e.prototype.getAriaLabel=function(){return this.header+" "+(this.expanded?"expanded":"collapsed")},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-collapsible-card"]],inputs:{header:"header",defaultCollapsed:"defaultCollapsed"},features:[o.\u0275\u0275NgOnChangesFeature],ngContentSelectors:s,decls:6,vars:9,consts:[["role","presentation",1,"collapsible-card-details","form"],["tabindex","0",3,"ngClass","keyup.enter","click"],[1,"triangle"],["iconClasses","md form-control-select-arrow",2,"display","none",3,"iconName","iconAriaHidden","iconTitle"],["class","collapsible-card-details-body",3,"keyup.enter",4,"ngIf"],[1,"collapsible-card-details-body",3,"keyup.enter"]],template:function(e,t){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"h2",1),o.\u0275\u0275listener("keyup.enter",function(){return t.toggleExpanded()})("click",function(){return t.toggleExpanded()}),o.\u0275\u0275text(2),o.\u0275\u0275element(3,"span",2),o.\u0275\u0275element(4,"tni-icon",3),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(5,a,2,0,"div",4),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(7,c,t.expanded)),o.\u0275\u0275attribute("aria-label",t.getAriaLabel()),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t.header," "),o.\u0275\u0275advance(2),o.\u0275\u0275property("iconName",t.expanded?"arrow-up-small":"arrow-down-small")("iconAriaHidden",!0)("iconTitle","card details "+(t.expanded?"expanded":"collapsed")),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.expanded))},directives:[r.NgClass,i.IconComponent,r.NgIf],styles:[".collapsible-card-details[_ngcontent-%COMP%]{padding:0 10px 5px}@media (max-width:767px){.collapsible-card-details[_ngcontent-%COMP%]{padding:5px 20px}}.collapsible-card-details-header[_ngcontent-%COMP%]{font-size:24px;position:relative;cursor:pointer;margin-top:0}.collapsible-card-details-header[_ngcontent-%COMP%]   .triangle[_ngcontent-%COMP%]{border:6px solid transparent;border-top-color:#555;border-bottom:0;float:right;margin:14px 5px 14px 14px}.collapsible-card-details-header.expanded[_ngcontent-%COMP%]   .triangle[_ngcontent-%COMP%]{transform:rotate(-180deg)}"]}),e}()},HRm0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CTPAccountStoreService=void 0,n("fXoL");var o=n("qCKp"),r=n("kU1M"),i=(n("fX4m"),n("jy4o"),n("D1HI"),n("fXoL")),a=n("fX4m"),c=n("jy4o"),s=n("D1HI");t.CTPAccountStoreService=function(){function e(e,t,n){this.ctpTripsService=e,this.ctpToJourneyPipe=t,this.ctpToPaymentCardPipe=n,this.tripsRequest=this.ctpTripsService.getTrips().pipe(r.take(1),r.multicast(function(){return new o.ReplaySubject(1)}))}return e.prototype.getJourneys=function(){var e=this;return this.tripsRequest.connect(),this.tripsRequest.pipe(r.take(1),r.map(function(t){return t.TripHistory.map(function(t){return e.ctpToJourneyPipe.transform(t)})}))},e.prototype.getPaymentCard=function(){var e=this;return this.tripsRequest.connect(),this.tripsRequest.pipe(r.take(1),r.map(function(t){return e.ctpToPaymentCardPipe.transform(t.TripHistory[0])}))},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(a.CTPTripsService),i.\u0275\u0275inject(c.CTPToJourneyPipe),i.\u0275\u0275inject(s.CTPToPaymentCardPipe))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},HYg0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AutoTopupComponent=void 0;var o=n("kU1M"),r=n("fXoL"),i=(n("SC3b"),n("5VQw"),n("VzkM"),n("NRRr"),n("6i2Y"),n("YORH"),n("0ywJ"),n("3Pt+")),a=n("u3Ad"),c=(n("tyNb"),n("fXoL")),s=n("0ywJ"),l=n("5VQw"),d=n("NRRr"),p=n("YORH"),u=n("tyNb"),m=n("6i2Y"),f=n("ofXK"),g=n("cGJq"),h=n("3Pt+"),v=n("aeCY"),C=n("54GQ"),_=n("37k+"),b=n("gUXI"),x=n("vwDF"),y=n("Mp0x"),M=["autoTopupMessage"];function P(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"div",15),c.\u0275\u0275text(1," Auto top up turned on for "),c.\u0275\u0275elementStart(2,"span",16),c.\u0275\u0275text(3),c.\u0275\u0275pipe(4,"centsToDollar"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(3),c.\u0275\u0275textInterpolate(c.\u0275\u0275pipeBind2(4,1,n.smartCard.autoLoadAmount,"1.0"))}}function O(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",17),c.\u0275\u0275elementStart(1,"label",18),c.\u0275\u0275elementStart(2,"input",19),c.\u0275\u0275listener("change",function(e){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext(2).onSelectionChange(e)})("ngModelChange",function(e){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext(2).selectedAutoTopupAmount=e}),c.\u0275\u0275elementEnd(),c.\u0275\u0275text(3),c.\u0275\u0275pipe(4,"centsToDollar"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()}if(2&e){var o=t.$implicit,r=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(1),c.\u0275\u0275classProp("selected",o===r.selectedAutoTopupAmount),c.\u0275\u0275advance(1),c.\u0275\u0275property("value",o)("ngModel",r.selectedAutoTopupAmount),c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate1(" ",c.\u0275\u0275pipeBind2(4,5,o,"1.0")," ")}}function S(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"button",25,26),c.\u0275\u0275listener("click",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext(3).onDisableClick()}),c.\u0275\u0275text(2),c.\u0275\u0275pipe(3,"uppercase"),c.\u0275\u0275elementEnd()}2&e&&(c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate1(" ",c.\u0275\u0275pipeBind1(3,1,"Turn off auto top up")," "))}function w(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div"),c.\u0275\u0275elementStart(1,"div",20),c.\u0275\u0275text(2,"Pay with:"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(3,"tni-display-credit-card",21),c.\u0275\u0275listener("changeCard",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext(2).changeCardDetails()}),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"div",22),c.\u0275\u0275elementStart(5,"button",23),c.\u0275\u0275listener("click",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext(2).onEnableClick()}),c.\u0275\u0275text(6),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(7,S,4,3,"button",24),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()}if(2&e){var o=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(3),c.\u0275\u0275property("paymentAccount",o.paymentAccount)("cardType",o.cardType)("featureToggle",!0),c.\u0275\u0275advance(2),c.\u0275\u0275property("disabled",!o.newSelectionMade),c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate1(" ",o.isAutoTopupEnabled?"Update amount":"Turn on auto top up"," "),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",o.isAutoTopupEnabled)}}function k(e,t){1&e&&(c.\u0275\u0275elementStart(0,"p",33),c.\u0275\u0275text(1," This payment card will be saved to your profile. Any previously saved payment details will be overwritten. "),c.\u0275\u0275elementEnd())}function E(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"button",34),c.\u0275\u0275listener("click",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext(3).cancel()}),c.\u0275\u0275text(1,"Cancel"),c.\u0275\u0275elementEnd()}}function T(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"form",27),c.\u0275\u0275element(1,"payment-details-form",28),c.\u0275\u0275template(2,k,2,0,"p",29),c.\u0275\u0275elementStart(3,"div",30),c.\u0275\u0275elementStart(4,"div",22),c.\u0275\u0275elementStart(5,"add-card-to-vault",31),c.\u0275\u0275listener("addCardToVaultError",function(e){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext(2).addCardToVaultError(e)})("addCardToVaultSuccess",function(e){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext(2).addCardToVaultSuccess(e)}),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(6,E,2,0,"button",32),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()}if(2&e){var o=c.\u0275\u0275nextContext(2);c.\u0275\u0275property("formGroup",o.paymentForm),c.\u0275\u0275advance(1),c.\u0275\u0275property("group",o.paymentForm)("hideSubmitButton",!0)("showCancelButton",!1)("showAddCard",!1),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",o.displayHelpText),c.\u0275\u0275advance(3),c.\u0275\u0275property("paymentForm",o.paymentForm)("component","auto-topup")("selectedAutoTopupAmount",o.selectedAutoTopupAmount)("smartCard",o.smartCard)("enableCTA",o.enableAutoTopUp())("changeCard",o.changeCard),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",o.displayHelpText)}}function I(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"div"),c.\u0275\u0275template(1,P,5,4,"div",9),c.\u0275\u0275elementStart(2,"div",10),c.\u0275\u0275text(3," Your card will automatically top up with your "),c.\u0275\u0275elementStart(4,"strong"),c.\u0275\u0275text(5,"selected amount"),c.\u0275\u0275elementEnd(),c.\u0275\u0275text(6," when the balance is low. "),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(7,"div",11),c.\u0275\u0275text(8,"Select auto top up amount"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(9,"div",12),c.\u0275\u0275template(10,O,5,8,"div",13),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(11,w,8,6,"div",4),c.\u0275\u0275template(12,T,7,13,"form",14),c.\u0275\u0275element(13,"tni-security-message"),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",n.isAutoTopupEnabled),c.\u0275\u0275advance(9),c.\u0275\u0275property("ngForOf",n.availableTopupAmounts),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",n.paymentAccount),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",!n.paymentAccount||n.changeCard)}}function A(e,t){1&e&&(c.\u0275\u0275elementStart(0,"p"),c.\u0275\u0275text(1," Your card will be automatically topped up with the amount above when the balance gets low. "),c.\u0275\u0275elementEnd())}function N(e,t){1&e&&(c.\u0275\u0275elementStart(0,"p"),c.\u0275\u0275text(1," Your payment card has been saved to your profile and will be used to automatically top up this Opal card when the balance gets low. "),c.\u0275\u0275elementEnd())}function L(e,t){1&e&&(c.\u0275\u0275elementStart(0,"p"),c.\u0275\u0275text(1," A pre-authorisation of $1 has been held while your financial institution verifies this account. It will be returned, usually within 5-10 business days, depending upon your financial institution. "),c.\u0275\u0275elementEnd())}function R(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div"),c.\u0275\u0275element(1,"tni-icon",37),c.\u0275\u0275elementStart(2,"h2",38),c.\u0275\u0275text(3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"span",39),c.\u0275\u0275text(5),c.\u0275\u0275pipe(6,"centsToDollar"),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(7,A,2,0,"p",4),c.\u0275\u0275template(8,N,2,0,"p",4),c.\u0275\u0275template(9,L,2,0,"p",4),c.\u0275\u0275elementStart(10,"button",40),c.\u0275\u0275listener("click",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext(2).onDoneClick()}),c.\u0275\u0275text(11,"DONE"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()}if(2&e){var o=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(3),c.\u0275\u0275textInterpolate1(" ",o.updated?"Auto top up updated":"Auto top up turned on successfully"," "),c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate(c.\u0275\u0275pipeBind2(6,5,o.smartCard.autoLoadAmount,"1.0")),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",!o.addedNewCard),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",o.addedNewCard),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",o.changeOrAddPaymentCardDetails)}}function j(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div"),c.\u0275\u0275element(1,"tni-icon",41),c.\u0275\u0275elementStart(2,"h2",38),c.\u0275\u0275text(3,"Auto top up unsuccessful"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"p",42),c.\u0275\u0275text(5," We are unable to change your auto top up preferences. Please check your payment card details and try again. "),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(6,"button",40),c.\u0275\u0275listener("click",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext(2).onDoneClick()}),c.\u0275\u0275text(7,"OK"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()}}function F(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"div",35),c.\u0275\u0275elementStart(1,"div",36),c.\u0275\u0275template(2,R,12,8,"div",4),c.\u0275\u0275template(3,j,8,0,"div",4),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",!n.errorOnSavingData),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",n.errorOnSavingData)}}function V(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"tni-modal",43),c.\u0275\u0275listener("closeEvent",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext().closeDisableModal()}),c.\u0275\u0275elementStart(1,"div",44),c.\u0275\u0275elementStart(2,"div",45),c.\u0275\u0275element(3,"tni-icon",46),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"h3",47),c.\u0275\u0275text(5,"Turn off auto top up"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(6,"p",48),c.\u0275\u0275text(7,"Are you sure you want to turn off auto top up?"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(8,"p",49),c.\u0275\u0275text(9," You'll need to tap your Opal card at an Opal card reader within 60 days to finalise this request. "),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(10,"div",22),c.\u0275\u0275elementStart(11,"button",50),c.\u0275\u0275listener("click",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext().disableTopup()}),c.\u0275\u0275text(12,"Turn off"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(13,"button",25),c.\u0275\u0275listener("click",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext().closeDisableModal()}),c.\u0275\u0275text(14,"Cancel"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()}if(2&e){var o=c.\u0275\u0275nextContext();c.\u0275\u0275property("openingElement",o.disableAutoTopupButton)("noCloseButton",!0),c.\u0275\u0275advance(3),c.\u0275\u0275property("iconAriaHidden",!0)}}t.AutoTopupComponent=function(){function e(e,t,n,o,i,a,c,s){this.panelRefreshService=e,this.autoTopupService=t,this.loaderService=n,this.trackOpalEventService=o,this.activeRoute=i,this.router=a,this.featureToggleService=c,this.cdRef=s,this.getPaymentAccount=new r.EventEmitter,this.state={confirmAmount:!1,requested:!1,updateMode:!0},this.model={},this.autoLocadThreshHold=0,this.showDisableTopupModal=!1,this.newSelectionMade=!1,this.isSavingData=!1,this.addedNewCard=!1,this.changeCard=!1,this.displayHelpText=!1,this.changeOrAddPaymentCardDetails=!1}return e.prototype.ngOnInit=function(){this.setUpPaymentForm(),this.displayHelpText=!!this.paymentAccount},e.prototype.setUpPaymentForm=function(){var e,t,n=null===(t=null===(e=this.featureToggleService.featureToggles)||void 0===e?void 0:e.toggles)||void 0===t?void 0:t["opal-allow-amex-and-jcb-payments"];this.paymentForm=new i.FormGroup({name:new i.FormControl(this.model.name,[i.Validators.required]),number:new i.FormControl(this.model.number,[i.Validators.required,i.Validators.pattern(a.TniRegularExpressions.creditCardNumber(n))]),cvv:new i.FormControl(this.model.cvv,[i.Validators.required,i.Validators.pattern(a.TniRegularExpressions.cvv(n))]),expiry:new i.FormControl(this.model.expiry,[i.Validators.required,i.Validators.pattern(a.TniRegularExpressions.creditCardExpiry)])})},e.prototype.ngOnChanges=function(e){var t,n;e.smartCard&&this.refresh(),this.cardType=null===(n=null===(t=e.paymentAccount)||void 0===t?void 0:t.currentValue)||void 0===n?void 0:n.bankCardType},e.prototype.ngAfterViewInit=function(){var e=this;this.activeRoute$=this.activeRoute.queryParams.subscribe(function(t){t.action&&t.component&&"auto-topup"===t.component?(e.panelRefreshService.setActivePanel("panel1"),e.loaderService.display(!1)):t.component&&"auto-topup"===t.component&&(e.panelRefreshService.setActivePanel("panel1"),e.router.navigateByUrl("/account/cards"),e.smartCard.smartcardId=Number(t.smartCard),e.selectedAutoTopupAmount=Number(t.selectedAutoTopupAmount),t.changeCard&&(e.changeCard=!0,e.cdRef.detectChanges()))})},e.prototype.onEnableClick=function(){var e=this;this.loaderService.display(!0),this.errorOnSavingData=!1,this.autoTopupService.setAutoTopup(this.smartCard.smartcardId,this.selectedAutoTopupAmount).pipe(o.finalize(function(){e.autoTopupMessage.nativeElement.focus(),e.loaderService.display(!1),e.panelRefreshService.pushPanelRefreshEvent()})).subscribe(function(){e.isAutoTopupEnabled?e.trackOpalEventService.autoTopUpUpdate():e.trackOpalEventService.autoTopUpOn(),e.smartCard.autoLoadAmount=e.selectedAutoTopupAmount,e.newSelectionMade=!1,e.updated=e.state.updateMode,e.state={confirmAmount:!1,requested:!0,updateMode:!1}},function(){e.errorOnSavingData=!0,e.state={confirmAmount:!1,requested:!0,updateMode:!1}})},e.prototype.closeDisableModal=function(){this.showDisableTopupModal=!1,this.panelRefreshService.pushPanelRefreshEvent()},e.prototype.onDisableClick=function(){this.showDisableTopupModal=!0},e.prototype.disableTopup=function(){var e=this;this.showDisableTopupModal=!1,this.loaderService.display(!0),this.isSavingData=!0,this.errorOnSavingData=!1,this.autoTopupService.disableAutoTopup(this.smartCard.smartcardId).pipe(o.finalize(function(){e.isSavingData=!1,e.loaderService.display(!1),e.panelRefreshService.pushPanelRefreshEvent()})).subscribe(function(){e.trackOpalEventService.autoTopUpOff(),e.smartCard.autoLoadAmount=0,e.refresh()})},e.prototype.refresh=function(){this.smartCard.autoLoadAmount>0?(this.isAutoTopupEnabled=!0,this.selectedAutoTopupAmount=this.smartCard.autoLoadAmount,this.state={confirmAmount:!1,requested:!1,updateMode:!0}):(this.isAutoTopupEnabled=!1,this.selectedAutoTopupAmount=null,this.state={confirmAmount:!0,requested:!1,updateMode:!1}),this.paymentAccount||(this.selectedAutoTopupAmount=this.availableTopupAmounts[0]),this.panelRefreshService.pushPanelRefreshEvent()},e.prototype.onNextClick=function(){this.state={confirmAmount:!0,requested:!1,updateMode:!1}},e.prototype.onDoneClick=function(){this.changeCard=!1,this.errorOnSavingData||(this.isAutoTopupEnabled=!0),this.state={confirmAmount:!1,requested:!1,updateMode:!0},this.changeOrAddPaymentCardDetails=!1,this.panelRefreshService.pushPanelRefreshEvent()},e.prototype.onSelectionChange=function(e){this.newSelectionMade=this.selectedAutoTopupAmount!==this.smartCard.autoLoadAmount},e.prototype.addCardToVaultError=function(e){this.loaderService.display(!1),this.errorOnSavingData=!0,this.state={confirmAmount:!1,requested:!0,updateMode:!1}},e.prototype.addCardToVaultSuccess=function(e){this.changeOrAddPaymentCardDetails=!0,this.onEnableClick(),this.addedNewCard=!0,this.getPaymentAccount.emit(),this.displayHelpText=!0},e.prototype.enableAutoTopUp=function(){return this.selectedAutoTopupAmount&&this.paymentForm.valid},e.prototype.changeCardDetails=function(){this.paymentAccount=null,this.changeCard=!0,this.isAutoTopupEnabled&&this.trackOpalEventService.trackChangeButton(),this.panelRefreshService.pushPanelRefreshEvent()},e.prototype.cancel=function(){this.loaderService.display(!0),this.getPaymentAccount.emit(),this.changeCard=!1},e.\u0275fac=function(t){return new(t||e)(c.\u0275\u0275directiveInject(s.TniPanelRefreshService),c.\u0275\u0275directiveInject(l.AutoTopupService),c.\u0275\u0275directiveInject(d.LoaderService),c.\u0275\u0275directiveInject(p.TrackOpalEventService),c.\u0275\u0275directiveInject(u.ActivatedRoute),c.\u0275\u0275directiveInject(u.Router),c.\u0275\u0275directiveInject(m.FeatureToggleService),c.\u0275\u0275directiveInject(c.ChangeDetectorRef))},e.\u0275cmp=c.\u0275\u0275defineComponent({type:e,selectors:[["tni-auto-topup"]],viewQuery:function(e,t){var n;1&e&&c.\u0275\u0275staticViewQuery(M,!0),2&e&&c.\u0275\u0275queryRefresh(n=c.\u0275\u0275loadQuery())&&(t.autoTopupMessage=n.first)},inputs:{smartCard:"smartCard",availableTopupAmounts:"availableTopupAmounts",paymentAccount:"paymentAccount"},outputs:{getPaymentAccount:"getPaymentAccount"},features:[c.\u0275\u0275NgOnChangesFeature],decls:10,vars:3,consts:[[1,"auto-topup-component"],[1,"auto-topup-container"],[1,"top-up"],[1,"auto-topup__header"],[4,"ngIf"],["tabindex","-1",1,"auto-topup-message"],["autoTopupMessage",""],["class","auto-topup-component__success",4,"ngIf"],["ariaLabel","Turn off auto top up",3,"openingElement","noCloseButton","closeEvent",4,"ngIf"],["class","auto-topup-enabled-message",4,"ngIf"],[1,"auto-top-info"],[1,"select-auto-topup"],[1,"auto-top-amount-radio"],["class","auto-top-amount-radio-item",4,"ngFor","ngForOf"],[3,"formGroup",4,"ngIf"],[1,"auto-topup-enabled-message"],[1,"amount"],[1,"auto-top-amount-radio-item"],[1,"auto-top-amount-radio-item-option"],["type","radio","name","autoTopupAmountRadio",1,"sr-only",3,"value","ngModel","change","ngModelChange"],[1,"pay-with"],[3,"paymentAccount","cardType","featureToggle","changeCard"],[1,"button-block"],[1,"auto-topup__enable-btn",3,"disabled","click"],["class","auto-topup__disable-modal__cancel-btn",3,"click",4,"ngIf"],[1,"auto-topup__disable-modal__cancel-btn",3,"click"],["disableAutoTopupButton",""],[3,"formGroup"],[3,"group","hideSubmitButton","showCancelButton","showAddCard"],["class","payment-card-info col-md-12",4,"ngIf"],[1,"col-md-12"],["CTAtext","TURN ON AUTO TOP UP",3,"paymentForm","component","selectedAutoTopupAmount","smartCard","enableCTA","changeCard","addCardToVaultError","addCardToVaultSuccess"],["class","auto-topup__cancel-btn",3,"click",4,"ngIf"],[1,"payment-card-info","col-md-12"],[1,"auto-topup__cancel-btn",3,"click"],[1,"auto-topup-component__success"],[1,"auto-topup-component__inner"],["iconName","success","iconClasses","xl","iconAriaHidden","true","iconHidden","false",1,"auto-topup-component__success__icon"],[1,"auto-topup-component__success__heading"],[1,"auto-topup-component__success__amount"],[1,"auto-topup-component__btn-done",3,"click"],["iconName","alert","iconClasses","xl","iconAriaHidden","true","iconHidden","false",1,"auto-topup-component__success__icon","error-message"],[1,"auto-topup-component__error__message"],["ariaLabel","Turn off auto top up",3,"openingElement","noCloseButton","closeEvent"],[1,"auto-topup__disable-modal"],[1,"auto-topup__disable-modal__icon"],["iconName","opal-auto-topup","iconClasses","middle xl padlock","iconTitle","",3,"iconAriaHidden"],["tabIndex","0",1,"auto-topup__disable-modal__heading","modal-title"],[1,"auto-topup__disable-modal__text"],[1,"auto-topup__disable-modal__infos"],[1,"auto-topup__disable-modal__disable-btn",3,"click"]],template:function(e,t){1&e&&(c.\u0275\u0275elementStart(0,"div",0),c.\u0275\u0275elementStart(1,"div",1),c.\u0275\u0275elementStart(2,"div",2),c.\u0275\u0275elementStart(3,"h3",3),c.\u0275\u0275text(4,"Auto top up"),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(5,I,14,4,"div",4),c.\u0275\u0275elementStart(6,"div",5,6),c.\u0275\u0275template(8,F,4,2,"div",7),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(9,V,15,3,"tni-modal",8),c.\u0275\u0275elementEnd()),2&e&&(c.\u0275\u0275advance(5),c.\u0275\u0275property("ngIf",!t.state.requested),c.\u0275\u0275advance(3),c.\u0275\u0275property("ngIf",t.state.requested),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",t.showDisableTopupModal))},directives:[f.NgIf,f.NgForOf,g.SecurityMessageComponent,h.RadioControlValueAccessor,h.DefaultValueAccessor,h.NgControlStatus,h.NgModel,v.DisplayCreditCardComponent,h.\u0275angular_packages_forms_forms_y,h.NgControlStatusGroup,h.FormGroupDirective,C.PaymentDetailsFormComponent,_.AddCardToVaultComponent,b.IconComponent,x.ModalWindowComponent],pipes:[y.CentsToDollarPipe,f.UpperCasePipe],styles:['.auto-topup-component__error[_ngcontent-%COMP%], .auto-topup-component__success[_ngcontent-%COMP%]{text-align:center}.auto-topup-component__error__heading[_ngcontent-%COMP%], .auto-topup-component__success__heading[_ngcontent-%COMP%]{font-size:24px;font-weight:300}.auto-topup-component__error__amount[_ngcontent-%COMP%], .auto-topup-component__success__amount[_ngcontent-%COMP%]{font-size:22px;color:#00881f;font-weight:700}.auto-topup-component__error__message[_ngcontent-%COMP%], .auto-topup-component__success__message[_ngcontent-%COMP%]{font-size:16px;margin:25px 0;text-align:left}@media (max-width:767px){.auto-topup-component__error__message[_ngcontent-%COMP%], .auto-topup-component__success__message[_ngcontent-%COMP%]{text-align:center}}.auto-topup-component[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{fill:#d62d20;color:#d62d20}.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-container[_ngcontent-%COMP%]{justify-content:center}@media (max-width:767px){.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-container[_ngcontent-%COMP%]{display:block}}.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-container[_ngcontent-%COMP%]   .auto-topup-enabled-message[_ngcontent-%COMP%]{margin-bottom:15px}.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-container[_ngcontent-%COMP%]   .auto-topup-enabled-message[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#009e4d;font-weight:500}.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-container[_ngcontent-%COMP%]   .top-up[_ngcontent-%COMP%]{text-align:left}.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-container[_ngcontent-%COMP%]   .error-on-saving[_ngcontent-%COMP%]{color:#e4022d;margin-bottom:15px}@media (min-width:768px){.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-container[_ngcontent-%COMP%]   .error-on-saving[_ngcontent-%COMP%]{font-size:.85em}}.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-container[_ngcontent-%COMP%]   .select-auto-topup[_ngcontent-%COMP%]{text-align:center;font-weight:500;margin-bottom:25px;font-size:16px}.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-container[_ngcontent-%COMP%]   .auto-top-amount-radio[_ngcontent-%COMP%]{display:flex;justify-content:center;min-height:65px;height:65px;align-items:center;text-align:center}@media (max-width:767px){.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-container[_ngcontent-%COMP%]   .auto-top-amount-radio[_ngcontent-%COMP%]{min-height:50px}}.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-container[_ngcontent-%COMP%]   .auto-top-amount-radio-item[_ngcontent-%COMP%]{display:inline-block;flex:0 1 55px;margin:0 10px}@media (max-width:767px){.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-container[_ngcontent-%COMP%]   .auto-top-amount-radio-item[_ngcontent-%COMP%]{flex:0 1;margin:0 2px}}.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-container[_ngcontent-%COMP%]   .auto-top-amount-radio-item-option[_ngcontent-%COMP%]{transition:transform .1s ease;border-radius:50%;box-sizing:border-box;border:1px solid #dbdbdb;background-color:#f1f1f1;height:55px;width:55px;line-height:54px;font-size:15px;cursor:pointer}@media (max-width:767px){.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-container[_ngcontent-%COMP%]   .auto-top-amount-radio-item-option[_ngcontent-%COMP%]{height:45px;line-height:44px;width:45px;font-size:12px}}.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-container[_ngcontent-%COMP%]   .auto-top-amount-radio-item[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{transform:scale(1.2);background-color:#00881f;color:#fff;border:0}@media (max-width:767px){.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-container[_ngcontent-%COMP%]   .auto-top-amount-radio-item[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{transform:scale(1.15)}}.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-container[_ngcontent-%COMP%]   .auto-top-info[_ngcontent-%COMP%]{margin:5px 5px 15px 0;font-size:16px;line-height:1.5}.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-container[_ngcontent-%COMP%]   .payment-card-info[_ngcontent-%COMP%]{font-size:13px;font-weight:400;margin-bottom:0;line-height:16px}.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-container[_ngcontent-%COMP%]   .button-block[_ngcontent-%COMP%]{align-items:left;padding-bottom:10px;margin:48px 0}.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-container[_ngcontent-%COMP%]   .button-block[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1}.auto-topup-component[_ngcontent-%COMP%]   .saving-data-overlay[_ngcontent-%COMP%]{position:fixed;width:100%;height:100%;top:0;left:0;right:0;bottom:0;background-color:#f6f6f6;opacity:.92;z-index:999;font-weight:500;text-align:center;color:#1d69b4}.auto-topup-component[_ngcontent-%COMP%]   .saving-data-overlay[_ngcontent-%COMP%]     .saving-spinner{position:absolute;top:35%;right:0;left:0;margin:auto;width:200px;padding:20px 0}.auto-topup-component[_ngcontent-%COMP%]     .collapsible-card-details{margin:20px 0;padding:5px 10px 20px}@media (max-width:767px){.auto-topup-component[_ngcontent-%COMP%]     .collapsible-card-details{margin:20px 10px!important;padding:5px 15px!important}}.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-disable-btn[_ngcontent-%COMP%], .auto-topup-component[_ngcontent-%COMP%]   .auto-topup__enable-btn[_ngcontent-%COMP%], .auto-topup-component[_ngcontent-%COMP%]   .btn-done[_ngcontent-%COMP%], .auto-topup-component[_ngcontent-%COMP%]   .next-btn[_ngcontent-%COMP%]{border-radius:4px;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background-color:#1d69b4;border:0 solid #195c9e;color:#fff}.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-disable-btn[disabled][_ngcontent-%COMP%], .auto-topup-component[_ngcontent-%COMP%]   .auto-topup__enable-btn[disabled][_ngcontent-%COMP%], .auto-topup-component[_ngcontent-%COMP%]   .btn-done[disabled][_ngcontent-%COMP%], .auto-topup-component[_ngcontent-%COMP%]   .next-btn[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-disable-btn[_ngcontent-%COMP%]:hover:after, .auto-topup-component[_ngcontent-%COMP%]   .auto-topup__enable-btn[_ngcontent-%COMP%]:hover:after, .auto-topup-component[_ngcontent-%COMP%]   .btn-done[_ngcontent-%COMP%]:hover:after, .auto-topup-component[_ngcontent-%COMP%]   .next-btn[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .auto-topup-component[_ngcontent-%COMP%]   .auto-topup-disable-btn[_ngcontent-%COMP%], button[_ngcontent-%COMP%] + .auto-topup-component[_ngcontent-%COMP%]   .auto-topup__enable-btn[_ngcontent-%COMP%], button[_ngcontent-%COMP%] + .auto-topup-component[_ngcontent-%COMP%]   .btn-done[_ngcontent-%COMP%], button[_ngcontent-%COMP%] + .auto-topup-component[_ngcontent-%COMP%]   .next-btn[_ngcontent-%COMP%]{margin-top:10px}.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-disable-btn[_ngcontent-%COMP%]{background:transparent;text-transform:uppercase;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;padding:12px}.auto-topup-component[_ngcontent-%COMP%]   .auto-topup-disable-btn[_ngcontent-%COMP%]:hover{background:rgba(29,105,180,.1)}.auto-topup-component[_ngcontent-%COMP%]   .next-btn[_ngcontent-%COMP%]{width:100%}.auto-topup-component[_ngcontent-%COMP%]   .pay-with[_ngcontent-%COMP%]{font-size:12px;margin-top:25px}.auto-topup-component[_ngcontent-%COMP%]   .btn-done[_ngcontent-%COMP%]{margin:25px 0}.auto-topup__disable-modal[_ngcontent-%COMP%]{text-align:center;width:100%}@media (min-width:768px){.auto-topup__disable-modal[_ngcontent-%COMP%]{width:300px;margin:50px auto 0}}.auto-topup__disable-modal__icon[_ngcontent-%COMP%]{margin:0 0 16px;color:#000}.auto-topup__disable-modal_heading[_ngcontent-%COMP%]{margin:0 0 16px}.auto-topup__disable-modal__text[_ngcontent-%COMP%]{margin:0 0 30px}.auto-topup__disable-modal__infos[_ngcontent-%COMP%]{font-weight:100}.auto-topup-component__btn-done[_ngcontent-%COMP%], .auto-topup__disable-modal__disable-btn[_ngcontent-%COMP%]{border-radius:4px;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background-color:#1d69b4;border:0 solid #195c9e;color:#fff;margin-top:48px}.auto-topup-component__btn-done[disabled][_ngcontent-%COMP%], .auto-topup__disable-modal__disable-btn[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.auto-topup-component__btn-done[_ngcontent-%COMP%]:hover:after, .auto-topup__disable-modal__disable-btn[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .auto-topup-component__btn-done[_ngcontent-%COMP%], button[_ngcontent-%COMP%] + .auto-topup__disable-modal__disable-btn[_ngcontent-%COMP%]{margin-top:10px}.auto-topup__cancel-btn[_ngcontent-%COMP%], .auto-topup__disable-modal__cancel-btn[_ngcontent-%COMP%]{border-radius:4px;border:0 solid transparent;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background:transparent}.auto-topup__cancel-btn[disabled][_ngcontent-%COMP%], .auto-topup__disable-modal__cancel-btn[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.auto-topup__cancel-btn[_ngcontent-%COMP%]:hover:after, .auto-topup__disable-modal__cancel-btn[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}.auto-topup__cancel-btn[_ngcontent-%COMP%], button[_ngcontent-%COMP%] + .auto-topup__cancel-btn[_ngcontent-%COMP%], button[_ngcontent-%COMP%] + .auto-topup__disable-modal__cancel-btn[_ngcontent-%COMP%]{margin-top:10px}.payment-details-referal[_ngcontent-%COMP%]{font-size:12px;line-height:1.25em}.auto-topup-message[_ngcontent-%COMP%]{outline:0}.auto-topup__header[_ngcontent-%COMP%]{margin-top:0;font-weight:300;font-size:24px;line-height:1.3333;margin-bottom:2rem}.cancel-btn[_ngcontent-%COMP%]{border-radius:4px;border:0 solid transparent;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background:transparent;max-width:none;margin:-48px 0 48px}.cancel-btn[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.cancel-btn[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .cancel-btn[_ngcontent-%COMP%]{margin-top:10px}.auto-topup-component__success__icon[_ngcontent-%COMP%]{display:inline-block;margin:0 0 16px}']}),e}()},HqcF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniFormInputSwitchComponent=void 0;var o=n("fXoL"),r=(n("3Pt+"),n("fXoL")),i=n("3Pt+");t.TniFormInputSwitchComponent=function(){function e(){this.switchValue=new o.EventEmitter,this.hasFocus=!1}return e.prototype.toggleSwitch=function(){this.control.value&&this.switchValue.emit({label:this.description,inputName:this.inputName})},e.prototype.toggleFocus=function(){this.hasFocus=!this.hasFocus},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tni-form-input-switch"]],inputs:{control:"control",inputName:"inputName",description:"description",controlId:"controlId"},outputs:{switchValue:"switchValue"},decls:7,vars:5,consts:[[1,"option-switch"],["type","checkbox",1,"option-switch__input",3,"name","formControl","id","focus","blur","change"],[1,"option-switch__bar"],["aria-hidden","true",1,"option-switch__bar--on"],["aria-hidden","true",1,"option-switch__bar--off"]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275elementStart(1,"input",1),r.\u0275\u0275listener("focus",function(){return t.toggleFocus()})("blur",function(){return t.toggleFocus()})("change",function(){return t.toggleSwitch()}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"span",2),r.\u0275\u0275elementStart(3,"span",3),r.\u0275\u0275text(4,"On"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(5,"span",4),r.\u0275\u0275text(6,"Off"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275classProp("option-switch--has-focus",t.hasFocus),r.\u0275\u0275advance(1),r.\u0275\u0275property("name",t.inputName)("formControl",t.control)("id",t.controlId))},directives:[i.CheckboxControlValueAccessor,i.NgControlStatus,i.FormControlDirective],styles:['.option-switch[_ngcontent-%COMP%]{cursor:pointer;padding:5px}.option-switch__bar[_ngcontent-%COMP%]{content:"";position:relative;width:42px;height:16px;background:#d8d8d8;border-radius:15px;transition:background .3s ease;vertical-align:middle;margin:0}.option-switch__bar[_ngcontent-%COMP%]:after, .option-switch__bar[_ngcontent-%COMP%]:before{background:#fff;content:"";border:0;position:absolute;display:inline-block;width:20px;height:20px;border-radius:50%;left:-1px;top:-3px;box-shadow:0 3px 1px hsla(0,0%,58.8%,.5);transition:left .3s ease}.option-switch__bar[_ngcontent-%COMP%]:before{background:#c8c8c8;width:21px;height:21px;box-shadow:none}.option-switch[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute!important;clip:rect(1px,1px,1px,1px);padding:0!important;border:0!important;height:1px!important;width:1px!important;overflow:hidden}input[type=checkbox][_ngcontent-%COMP%]:checked + .option-switch__bar[_ngcontent-%COMP%]{background:#00881f}input[type=checkbox][_ngcontent-%COMP%]:checked + .option-switch__bar[_ngcontent-%COMP%]:after, input[type=checkbox][_ngcontent-%COMP%]:checked + .option-switch__bar[_ngcontent-%COMP%]:before{left:23px}.option-switch__bar[_ngcontent-%COMP%]{display:inline-block}.option-switch__bar--off[_ngcontent-%COMP%], .option-switch__bar--on[_ngcontent-%COMP%]{font-size:10px;line-height:1.7em;padding-left:6px}.option-switch__bar--on[_ngcontent-%COMP%]{color:#fff;display:none}.option-switch__bar--off[_ngcontent-%COMP%]{display:block;padding-left:22px}.option-switch__input[_ngcontent-%COMP%]:checked + .option-switch__bar[_ngcontent-%COMP%]   .option-switch__bar--off[_ngcontent-%COMP%]{display:none}.option-switch__input[_ngcontent-%COMP%]:checked + .option-switch__bar[_ngcontent-%COMP%]   .option-switch__bar--on[_ngcontent-%COMP%]{display:block}.option-switch--has-focus[_ngcontent-%COMP%]{border:3px solid rgba(50,50,50,.5);padding:2px}']}),e}()},IL3P:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionDefinition=void 0;var o=n("mrSG"),r=(n("fXoL"),n("fXoL"));t.TransactionDefinition=function(){function e(){}return e.getDefinition=function(e,t,n,r){if(80===e)switch(t){case"CWS":return this.TRANSACTION_80_CWS;case"MWS":return this.TRANSACTION_80_MWS;case"OAPI":return this.TRANSACTION_80_OAPI;case"TNI":return this.TRANSACTION_80_TNI;case"CRM":return this.TRANSACTION_80_CRM;case"IVR":return this.TRANSACTION_80_IVR;default:return this.TRANSACTION_80}if(10===e){var i=o.__assign({},this.TRANSACTION_10);return i.transactionSource=n,i}if(11===e){var a=o.__assign({},this.TRANSACTION_11);return a.transactionSource=r,a}if(800===e)return"CRM"===t?this.TRANSACTION_800_CRM:this.TRANSACTION_800;if(801===e)switch(t){case"CWS":return this.TRANSACTION_801_CWS;case"CRM":return this.TRANSACTION_801_CRM;case"TNI":return this.TRANSACTION_801_TNI;default:return this.TRANSACTION_801}if(84===e)switch(t){case"CWS":return this.TRANSACTION_84_CWS;case"MWS":return this.TRANSACTION_84_MWS;case"OAPI":return this.TRANSACTION_84_OAPI;case"TNI":return this.TRANSACTION_84_TNI;case"CRM":return this.TRANSACTION_84_CRM;case"IVR":return this.TRANSACTION_84_IVR;default:return this.TRANSACTION_84}if(85===e){var c=o.__assign({},this.TRANSACTION_85);return c.transactionSource=n||r,c}if(998===e)switch(t){case"CWS":return this.TRANSACTION_998_CWS;case"MWS":return this.TRANSACTION_998_MWS;case"OAPI":return this.TRANSACTION_998_OAPI;case"TNI":return this.TRANSACTION_998_TNI;case"CRM":return this.TRANSACTION_998_CRM;case"IVR":return this.TRANSACTION_998_IVR;default:return this.TRANSACTION_998}if(110===e){var s=o.__assign({},this.TRANSACTION_110);return s.transactionSource=n,s}if(111===e){var l=o.__assign({},this.TRANSACTION_111);return l.transactionSource=n,l}if(112===e)return this.TRANSACTION_112;if(994===e)return this.TRANSACTION_994;if(30===e)return this.TRANSACTION_30;if(86===e)return this.TRANSACTION_86;if(4===e)return this.TRANSACTION_4;if(5===e){var d=o.__assign({},this.TRANSACTION_5);return d.transactionSource=n,d}return 61===e?this.TRANSACTION_61:null},e.TRANSACTION_80_CWS={transactionType:80,channelCode:"CWS",transactionName:"Top up",transactionSource:"opal.com.au",icon:"opal-top-up"},e.TRANSACTION_80_MWS={transactionType:80,channelCode:"MWS",transactionName:"Top up",transactionSource:"m.opal.com.au",icon:"opal-top-up"},e.TRANSACTION_80_OAPI={transactionType:80,channelCode:"OAPI",transactionName:"Top up",transactionSource:"Opal Travel App",icon:"opal-top-up"},e.TRANSACTION_80_TNI={transactionType:80,channelCode:"TNI",transactionName:"Top up",transactionSource:"transportnsw.info",icon:"opal-top-up"},e.TRANSACTION_80_CRM={transactionType:80,channelCode:"CRM",transactionName:"Top up",transactionSource:"Opal Customer Care",icon:"opal-top-up"},e.TRANSACTION_80_IVR={transactionType:80,channelCode:"IVR",transactionName:"Top up",transactionSource:"Phone",icon:"opal-top-up"},e.TRANSACTION_80={transactionType:80,channelCode:"TNI",transactionName:"Top up",icon:"opal-top-up"},e.TRANSACTION_10={transactionType:10,transactionName:"Top up",transactionSource:"",icon:"opal-top-up"},e.TRANSACTION_11={transactionType:11,transactionName:"Top up reversal",transactionSource:"",icon:"reversal"},e.TRANSACTION_800_CRM={transactionType:800,channelCode:"CRM",transactionName:"Adjustment",transactionSource:"Opal Customer Care",icon:"reversal"},e.TRANSACTION_800={transactionType:800,transactionName:"Adjustment",icon:"reversal"},e.TRANSACTION_801_CWS={transactionType:801,channelCode:"CWS",transactionName:"Balance transfer",transactionSource:"opal.com.au",icon:"reversal"},e.TRANSACTION_801_CRM={transactionType:801,channelCode:"CRM",transactionName:"Balance transfer",transactionSource:"Opal Customer Care",icon:"reversal"},e.TRANSACTION_801_TNI={transactionType:801,channelCode:"TNI",transactionName:"Balance transfer",transactionSource:"transportnsw.info",icon:"reversal"},e.TRANSACTION_801={transactionType:801,transactionName:"Balance transfer",icon:"reversal"},e.TRANSACTION_84_CWS={transactionType:84,channelCode:"CWS",transactionName:"Auto top up turned on",transactionSource:"opal.com.au",icon:"autotopup"},e.TRANSACTION_84_MWS={transactionType:84,channelCode:"MWS",transactionName:"Auto top up turned on",transactionSource:"m.opal.com.au",icon:"autotopup"},e.TRANSACTION_84_OAPI={transactionType:84,channelCode:"OAPI",transactionName:"Auto top up turned on",transactionSource:"Opal Travel App",icon:"autotopup"},e.TRANSACTION_84_TNI={transactionType:84,channelCode:"TNI",transactionName:"Auto top up turned on",transactionSource:"transportnsw.info",icon:"autotopup"},e.TRANSACTION_84_IVR={transactionType:84,channelCode:"IVR",transactionName:"Auto top up turned on",transactionSource:"Phone",icon:"autotopup"},e.TRANSACTION_84_CRM={transactionType:84,channelCode:"CRM",transactionName:"Auto top up turned on",transactionSource:"Opal Customer Care",icon:"autotopup"},e.TRANSACTION_84={transactionType:84,transactionName:"Auto top up turned on",icon:"autotopup"},e.TRANSACTION_85={transactionType:85,transactionName:"Auto top up",transactionSource:void 0,icon:"autotopup"},e.TRANSACTION_998_CWS={transactionType:998,channelCode:"CWS",transactionName:"Auto top up turned off",transactionSource:"opal.com.au",icon:"autotopup"},e.TRANSACTION_998_MWS={transactionType:998,channelCode:"MWS",transactionName:"Auto top up turned off",transactionSource:"m.opal.com.au",icon:"autotopup"},e.TRANSACTION_998_OAPI={transactionType:998,channelCode:"OAPI",transactionName:"Auto top up turned off",transactionSource:"Opal Travel App",icon:"autotopup"},e.TRANSACTION_998_TNI={transactionType:998,channelCode:"TNI",transactionName:"Auto top up turned off",transactionSource:"transportnsw.info",icon:"autotopup"},e.TRANSACTION_998_CRM={transactionType:998,channelCode:"CRM",transactionName:"Auto top up turned off",transactionSource:"Opal Customer Care",icon:"autotopup"},e.TRANSACTION_998_IVR={transactionType:998,channelCode:"CRM",transactionName:"Auto top up turned off",transactionSource:"Phone",icon:"autotopup"},e.TRANSACTION_998={transactionType:998,transactionName:"Auto top up turned off",icon:"autotopup"},e.TRANSACTION_110={transactionType:110,channelCode:"private_FERRIES",transactionName:"Opalpay",transactionSource:"",icon:"opal_pay"},e.TRANSACTION_111={transactionType:111,channelCode:"PRIVATE_FERRIES",transactionName:"Opalpay reversal",transactionSource:"",icon:"reversal"},e.TRANSACTION_112={transactionType:112,channelCode:"OPFF",transactionName:"Auto top up",transactionSource:"Opalpay",icon:"autotopup"},e.TRANSACTION_994={transactionType:994,transactionName:"No details available"},e.TRANSACTION_30={transactionType:30,transactionName:"Opal card blocked"},e.TRANSACTION_86={transactionType:86,transactionName:"Rejected action"},e.TRANSACTION_4={transactionType:4,transactionName:"Opal card expired"},e.TRANSACTION_5={transactionType:4,transactionName:"Opal card cancelled",transactionSource:""},e.TRANSACTION_61={transactionType:61,transactionName:"Warning - Opal card nearing expiry date"},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}()},IRyT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccountService=void 0;var o=n("kU1M"),r=(n("fXoL"),n("tk/3"),n("fXoL")),i=n("tk/3");t.AccountService=function(){function e(e){this.http=e}return e.prototype.create=function(e){return this.http.post("/api/opal/api/customer/new/",e).pipe(o.map(function(e){return e.Result}))},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(i.HttpClient))},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},IpRS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniCheckboxComponent=void 0;var o=n("fXoL"),r=n("fXoL"),i=n("ofXK"),a=n("gUXI"),c=function(e){return{checked:e}};t.TniCheckboxComponent=function(){function e(){this.valueChange=new o.EventEmitter}return e.prototype.onToggleCheckbox=function(){this.value=!this.value,this.valueChange.emit(this.value)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tni-checkbox"]],inputs:{value:"value",label:"label",inputName:"inputName",id:"id"},outputs:{valueChange:"valueChange"},decls:7,vars:17,consts:[[1,"tni-checkbox"],["tabindex","0","role","checkbox","role","checkbox",1,"checkbox",3,"id","keyup.enter","click"],[1,"styled-check",3,"ngClass"],[3,"iconName","iconClasses","iconAriaHidden","iconTitle","iconHidden"],["type","checkbox","role","checkbox","tabindex","-1",1,"hidden",3,"name"],[1,"select-label",3,"id"]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"label",0),r.\u0275\u0275elementStart(1,"div",1),r.\u0275\u0275listener("keyup.enter",function(e){return t.onToggleCheckbox(),e.preventDefault()})("click",function(e){return t.onToggleCheckbox(),e.preventDefault()}),r.\u0275\u0275elementStart(2,"div",2),r.\u0275\u0275element(3,"tni-icon",3),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(4,"input",4),r.\u0275\u0275elementStart(5,"span",5),r.\u0275\u0275text(6),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275propertyInterpolate("id",t.id),r.\u0275\u0275attribute("aria-checked",t.value),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngClass",r.\u0275\u0275pureFunction1(15,c,t.value)),r.\u0275\u0275advance(1),r.\u0275\u0275property("iconName","tick")("iconClasses","xs")("iconAriaHidden",!0)("iconTitle","Select option")("iconHidden",!0),r.\u0275\u0275advance(1),r.\u0275\u0275propertyInterpolate("name",t.inputName),r.\u0275\u0275attribute("aria-label",t.label)("aria-labelledby",t.id+"-label")("checked",t.value?"checked":null)("aria-checked",t.value),r.\u0275\u0275advance(1),r.\u0275\u0275propertyInterpolate1("id","",t.id,"-label"),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(t.label))},directives:[i.NgClass,a.IconComponent],styles:["label.tni-checkbox{cursor:pointer}label.tni-checkbox .checkbox{margin-top:5px;margin-bottom:5px}label.tni-checkbox .styled-check{position:absolute;background-color:#fff;text-align:center;border:2px solid #888;top:3px;left:0;width:20px;height:20px;transition:background .2s ease-in-out}label.tni-checkbox .styled-check svg{display:none;vertical-align:top}label.tni-checkbox .styled-check svg use{fill:#1d69b4;color:#1d69b4}label.tni-checkbox .styled-check.checked svg{display:block}label.tni-checkbox .select-label{margin-left:25px}"],encapsulation:2}),e}()},"K3X+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalFooterComponent=void 0,n("fXoL");var o=n("fXoL");t.OpalFooterComponent=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-opal-footer"]],decls:21,vars:0,consts:[[1,"opal-footer"],[1,"container"],[1,"row"],["alt","Opal","src","assets/logos/logo_opal-color.svg",1,"opal-footer__logo"],[1,"opal-footer__menu-block"],[1,"opal-footer__nav"],["href","/terms-conditions"],["href","/privacy"],["href","/opal-refunds"],["href","/opal-terms-of-use"],["href","/contact-us/#opal-help"]],template:function(e,t){1&e&&(o.\u0275\u0275elementStart(0,"footer",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275elementStart(2,"div",2),o.\u0275\u0275element(3,"img",3),o.\u0275\u0275elementStart(4,"div",4),o.\u0275\u0275elementStart(5,"ul",5),o.\u0275\u0275elementStart(6,"li"),o.\u0275\u0275elementStart(7,"a",6),o.\u0275\u0275text(8,"Terms and conditions"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"li"),o.\u0275\u0275elementStart(10,"a",7),o.\u0275\u0275text(11,"Privacy policy"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(12,"li"),o.\u0275\u0275elementStart(13,"a",8),o.\u0275\u0275text(14,"Refund policy"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(15,"li"),o.\u0275\u0275elementStart(16,"a",9),o.\u0275\u0275text(17,"Terms of use"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(18,"li"),o.\u0275\u0275elementStart(19,"a",10),o.\u0275\u0275text(20,"Help"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd())},styles:["[_nghost-%COMP%]{background:#fff;height:222px;bottom:0;left:0;position:absolute;margin-top:-72px;width:100%}@media (min-width:768px){[_nghost-%COMP%]{height:72px}}.opal-footer[_ngcontent-%COMP%]{padding:20px 0;border-top:7px solid #1d69b4;background:#fff}@media (max-width:767px){.opal-footer[_ngcontent-%COMP%]{padding:10px}}.opal-footer__logo[_ngcontent-%COMP%]{width:50px;height:25px;float:none}@media (min-width:768px){.opal-footer__logo[_ngcontent-%COMP%]{width:auto;float:left}}.opal-footer__menu-block[_ngcontent-%COMP%]{text-align:right}@media (max-width:767px){.opal-footer__menu-block[_ngcontent-%COMP%]{text-align:left}}.opal-footer__nav[_ngcontent-%COMP%]{font-size:.86em;list-style:none;margin:0;padding:0}@media (max-width:767px){.opal-footer__nav[_ngcontent-%COMP%]{font-size:1em}}.opal-footer__nav[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{display:block;padding:10px 0}@media (min-width:768px){.opal-footer__nav[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]{padding:0 10px;display:inline-block}}.opal-footer__nav[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:last-child{padding:0 0 0 10px}@media (max-width:767px){.opal-footer__nav[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:last-child{padding:10px 0}}"]}),e}()},LUra:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RadioPanelComponent=void 0;var o=n("fXoL"),r=(n("3Pt+"),n("fXoL")),i=n("3Pt+"),a=["*"];t.RadioPanelComponent=function(){function e(){this.change=new o.EventEmitter}return e.prototype.isSelected=function(){return this.value===this.control.value},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tni-radio-panel"]],inputs:{name:"name",controlId:"controlId",control:"control",value:"value"},outputs:{change:"change"},ngContentSelectors:a,decls:5,vars:8,consts:[[1,"radio-panel"],["type","radio",1,"radio-panel__input",3,"name","formControl","value","id"],[1,"radio-panel__label",3,"for","id"],[1,"radio-panel__content"]],template:function(e,t){1&e&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275element(1,"input",1),r.\u0275\u0275elementStart(2,"label",2),r.\u0275\u0275elementStart(3,"div",3),r.\u0275\u0275projection(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275classProp("radio-panel--selected",t.isSelected()),r.\u0275\u0275advance(1),r.\u0275\u0275property("name",t.name)("formControl",t.control)("value",t.value)("id",t.controlId),r.\u0275\u0275advance(1),r.\u0275\u0275property("for",t.controlId)("id",t.controlId+"__label"))},directives:[i.RadioControlValueAccessor,i.DefaultValueAccessor,i.NgControlStatus,i.FormControlDirective],styles:['.radio-panel[_ngcontent-%COMP%]{font-size:16px}.radio-panel[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{position:absolute!important;clip:rect(1px,1px,1px,1px);padding:0!important;border:0!important;height:1px!important;width:1px!important;overflow:hidden}.radio-panel[_ngcontent-%COMP%] > input[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{border-radius:4px;border:1px solid transparent;box-shadow:0 1px 2px 0 rgba(0,0,0,.2);box-sizing:border-box;cursor:pointer;display:block;position:relative;margin-bottom:8px}.radio-panel[_ngcontent-%COMP%] > input[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:hover{box-shadow:0 2px 3px 0 rgba(0,0,0,.2);border:1px solid #1d69b4}.radio-panel[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:active + label[_ngcontent-%COMP%], .radio-panel[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .radio-panel[_ngcontent-%COMP%] > input[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{border:1px solid #1d69b4}.radio-panel[_ngcontent-%COMP%] > input[disabled=disabled][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{box-shadow:none;cursor:auto}.radio-panel__label[_ngcontent-%COMP%]{font-weight:400}.radio-panel__content[_ngcontent-%COMP%]:after{display:table;content:"";clear:both}']}),e}()},LkoC:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SecurityMessageModule=void 0,n("fXoL");var o=n("ofXK"),r=(n("cGJq"),n("NKuO")),i=n("fXoL");t.SecurityMessageModule=function(){function e(){}return e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule,r.TniIconModule]]}),e}()},M4hh:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StateBannerComponent=void 0,n("fXoL"),n("tyNb");var o=n("fXoL"),r=n("tyNb"),i=n("ofXK"),a=n("gUXI");function c(e,t){1&e&&o.\u0275\u0275element(0,"tni-icon",5)}function s(e,t){1&e&&o.\u0275\u0275element(0,"tni-icon",6)}function l(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"p"),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(n.message)}}var d=["*"];t.StateBannerComponent=function(){function e(e){this.router=e}return e.prototype.navigate=function(){this.router.navigate([this.redirect])},e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(r.Router))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-state-banner"]],inputs:{state:"state",message:"message",redirect:"redirect",customLabel:"customLabel"},ngContentSelectors:d,decls:7,vars:4,consts:[[1,"state-panel"],["iconName","alert","class","submit__success__icon","iconClasses","xl","iconAriaHidden","true","iconHidden","false",4,"ngIf"],["iconName","success","class","submit__success__icon","iconClasses","xl","iconAriaHidden","true","iconHidden","false",4,"ngIf"],[4,"ngIf"],[1,"btn","btn-sm","btn-primary","next-btn","btn-done",3,"click"],["iconName","alert","iconClasses","xl","iconAriaHidden","true","iconHidden","false",1,"submit__success__icon"],["iconName","success","iconClasses","xl","iconAriaHidden","true","iconHidden","false",1,"submit__success__icon"]],template:function(e,t){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275template(1,c,1,0,"tni-icon",1),o.\u0275\u0275template(2,s,1,0,"tni-icon",2),o.\u0275\u0275template(3,l,2,1,"p",3),o.\u0275\u0275projection(4),o.\u0275\u0275elementStart(5,"button",4),o.\u0275\u0275listener("click",function(){return t.navigate()}),o.\u0275\u0275text(6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!t.state),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.state),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.message),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate1(" ",t.customLabel?t.customLabel:"OK"," "))},directives:[i.NgIf,a.IconComponent],styles:[".state-panel[_ngcontent-%COMP%]{text-align:center;padding:0 10%}.state-panel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:40%}"],changeDetection:0}),e}()},M6bo:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniMessagePanelComponent=void 0,n("fXoL");var o=n("fXoL"),r=n("ofXK"),i=n("gUXI"),a=["heading"];function c(e,t){1&e&&o.\u0275\u0275element(0,"tni-icon",5)}function s(e,t){1&e&&o.\u0275\u0275element(0,"tni-icon",6)}var l=["*"];t.TniMessagePanelComponent=function(){function e(){}return e.prototype.ngAfterContentInit=function(){this.heading.nativeElement.focus()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-message-panel"]],viewQuery:function(e,t){var n;1&e&&o.\u0275\u0275staticViewQuery(a,!0),2&e&&o.\u0275\u0275queryRefresh(n=o.\u0275\u0275loadQuery())&&(t.heading=n.first)},inputs:{success:"success",title:"title"},ngContentSelectors:l,decls:7,vars:3,consts:[[1,"message-panel"],["iconName","success","iconClasses","xl","class","message-panel__icon","iconAriaHidden","true","iconHidden","false",4,"ngIf"],["iconName","alert","class","message-panel__icon message-panel--error","iconClasses","xl","iconAriaHidden","true","iconHidden","false",4,"ngIf"],["tabindex","-1",1,"message-panel__heading"],["heading",""],["iconName","success","iconClasses","xl","iconAriaHidden","true","iconHidden","false",1,"message-panel__icon"],["iconName","alert","iconClasses","xl","iconAriaHidden","true","iconHidden","false",1,"message-panel__icon","message-panel--error"]],template:function(e,t){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275template(1,c,1,0,"tni-icon",1),o.\u0275\u0275template(2,s,1,0,"tni-icon",2),o.\u0275\u0275elementStart(3,"h3",3,4),o.\u0275\u0275text(5),o.\u0275\u0275elementEnd(),o.\u0275\u0275projection(6),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.success),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!t.success),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate1(" ",t.title," "))},directives:[r.NgIf,i.IconComponent],styles:[".message-panel[_ngcontent-%COMP%]{text-align:center;padding:24px 0}.message-panel__heading[_ngcontent-%COMP%]{font-weight:300;font-size:24px;line-height:1.3333;margin:24px 0}.message-panel__heading[_ngcontent-%COMP%]:focus{outline:none}.message-panel--error[_ngcontent-%COMP%]{color:#d0021b}"]}),e}()},MFE2:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniLinguaDropdownComponent=void 0;var o=n("fXoL"),r=n("T42N"),i=n("fXoL"),a=n("3Pt+"),c=n("ofXK"),s=n("gUXI"),l=["dropdownContainer"],d=["select"];function p(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"option",6),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;i.\u0275\u0275property("ngValue",n.value),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n.label," ")}}t.TniLinguaDropdownComponent=function(){function e(){this.selectedValueChange=new o.EventEmitter}return e.prototype.ngOnChanges=function(e){e.selectedValue&&!e.selectedValue.firstChange&&this.resizeSelectWidth()},e.prototype.ngAfterViewInit=function(){this.resizeSelectWidth()},e.prototype.onSelectChange=function(){this.selectedValueChange.emit(this.selectedValue)},e.prototype.resizeSelectWidth=function(){var e=this,t=this.options.find(function(t){return t.value===e.selectedValue}),n=document.createElement("span");n.style.visibility="hidden",n.style.fontWeight="500",n.textContent=t.label,this.dropdownContainerEl.nativeElement.appendChild(n);var o=n.getBoundingClientRect().width;this.selectEl.nativeElement.style.width=o+30+"px",this.selectEl.nativeElement.style.minWidth=o+30+"px",this.dropdownContainerEl.nativeElement.removeChild(n)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tni-lingua-dropdown"]],contentQueries:function(e,t,n){var o;1&e&&i.\u0275\u0275contentQuery(n,r.TniOptionComponent,!1),2&e&&i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(t.options=o)},viewQuery:function(e,t){if(1&e&&(i.\u0275\u0275viewQuery(l,!0),i.\u0275\u0275viewQuery(d,!0)),2&e){var n=void 0;i.\u0275\u0275queryRefresh(n=i.\u0275\u0275loadQuery())&&(t.dropdownContainerEl=n.first),i.\u0275\u0275queryRefresh(n=i.\u0275\u0275loadQuery())&&(t.selectEl=n.first)}},inputs:{selectedValue:"selectedValue",selectClass:"selectClass",selectName:"selectName"},outputs:{selectedValueChange:"selectedValueChange"},features:[i.\u0275\u0275NgOnChangesFeature],decls:6,vars:6,consts:[[1,"lingua-dropdown-container"],["dropdownContainer",""],[3,"ngModel","name","ngModelChange","change"],["select",""],[3,"ngValue",4,"ngFor","ngForOf"],["iconName","arrow-down-small","iconClasses","md",1,"select-arrow",3,"iconAriaHidden"],[3,"ngValue"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0,1),i.\u0275\u0275elementStart(2,"select",2,3),i.\u0275\u0275listener("ngModelChange",function(e){return t.selectedValue=e})("change",function(){return t.onSelectChange()}),i.\u0275\u0275template(4,p,2,2,"option",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(5,"tni-icon",5),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(2),i.\u0275\u0275classMap(t.selectClass),i.\u0275\u0275property("ngModel",t.selectedValue)("name",t.selectName),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",t.options),i.\u0275\u0275advance(1),i.\u0275\u0275property("iconAriaHidden",!0))},directives:[a.SelectControlValueAccessor,a.NgControlStatus,a.NgModel,c.NgForOf,s.IconComponent,a.NgSelectOption,a.\u0275angular_packages_forms_forms_x],styles:[".lingua-dropdown-container[_ngcontent-%COMP%]{display:inline-block;font-size:18px;font-weight:500}.lingua-dropdown-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{color:#1d69b4;background:#fff;border:none}.lingua-dropdown-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]::-ms-expand{display:none}@media (max-width:767px){.lingua-dropdown-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:15px}}.lingua-dropdown-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{color:#555}.lingua-dropdown-container[_ngcontent-%COMP%]   .select-arrow[_ngcontent-%COMP%]{position:relative;margin-left:-30px;pointer-events:none;cursor:pointer}"]}),e}()},MSaF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalCardTypeComponent=void 0;var o=n("fXoL"),r=n("2cv0"),i=n("fXoL"),a=n("ofXK"),c=n("3Pt+");function s(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",3),i.\u0275\u0275elementStart(1,"input",4),i.\u0275\u0275listener("ngModelChange",function(e){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().selectedCard=e})("keypress",function(e){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().selectCardType(e,!1)}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(2,"label",5),i.\u0275\u0275listener("click",function(e){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().selectCardType(e,!0)}),i.\u0275\u0275element(3,"img",6),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var o=t.$implicit,r=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275propertyInterpolate("id",o.cardId+"CardRadio"),i.\u0275\u0275property("value",o.cardId)("ngModel",r.selectedCard),i.\u0275\u0275advance(1),i.\u0275\u0275classMapInterpolate1("select-card-type__label ",o.cardId.toLowerCase(),""),i.\u0275\u0275propertyInterpolate("id",o.cardId.toLowerCase()),i.\u0275\u0275property("for",o.cardId+"CardRadio"),i.\u0275\u0275advance(1),i.\u0275\u0275attribute("src",o.cardImg,i.\u0275\u0275sanitizeUrl),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(o.cardLabel)}}var l=["*"];t.OpalCardTypeComponent=function(){function e(){this.changeSelectedCard=new o.EventEmitter}return e.prototype.selectCardType=function(e,t){var n=this;(t||32===e.charCode)&&setTimeout(function(){n.selectedCard&&n.changeSelectedCard.emit(r.EntitlementCardType[n.selectedCard])},10)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tni-opal-card-type"]],inputs:{cards:"cards"},outputs:{changeSelectedCard:"changeSelectedCard"},ngContentSelectors:l,decls:4,vars:1,consts:[[1,"select-card-type"],[1,"select-card-type__inner"],["class","select-card-type__control",4,"ngFor","ngForOf"],[1,"select-card-type__control"],["type","radio","name","cardType",1,"select-card-type__radio",3,"value","ngModel","id","ngModelChange","keypress"],[3,"for","id","click"],["width","82","alt","",1,"select-card-type__label__icon"]],template:function(e,t){1&e&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275template(2,s,5,10,"div",2),i.\u0275\u0275projection(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",t.cards))},directives:[a.NgForOf,c.RadioControlValueAccessor,c.DefaultValueAccessor,c.NgControlStatus,c.NgModel],styles:['.opal-page-panel__intro[_ngcontent-%COMP%]{color:#171717;font-size:16px;margin-bottom:18px;text-align:center}.select-card-type__control[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{position:absolute!important;clip:rect(1px,1px,1px,1px);padding:0!important;border:0!important;height:1px!important;width:1px!important;overflow:hidden}.select-card-type__control[_ngcontent-%COMP%] > input[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{border-radius:4px;border:1px solid transparent;box-shadow:0 1px 2px 0 rgba(0,0,0,.2);box-sizing:border-box;cursor:pointer;display:block;position:relative;margin-bottom:8px}.select-card-type__control[_ngcontent-%COMP%] > input[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:hover{box-shadow:0 2px 3px 0 rgba(0,0,0,.2);border:1px solid #1d69b4}.select-card-type__control[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:active + label[_ngcontent-%COMP%], .select-card-type__control[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%], .select-card-type__control[_ngcontent-%COMP%] > input[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{border:1px solid #1d69b4}.select-card-type__control[_ngcontent-%COMP%] > input[disabled=disabled][_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{box-shadow:none;cursor:auto}@media (max-width:767px){.select-card-type__control[_ngcontent-%COMP%] > input[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before, .select-card-type__control[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{display:none}.select-card-type__control[_ngcontent-%COMP%]   .select-card-type__label__icon[_ngcontent-%COMP%]{left:30px}.select-card-type__control[_ngcontent-%COMP%]   .select-card-type__label[_ngcontent-%COMP%]{padding-left:125px}}.select-card-type__control[_ngcontent-%COMP%] > input[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{content:"";position:absolute;border-radius:16px;left:20px;width:14px;height:14px;border:1px solid #000;top:20px}@media (min-width:768px){.select-card-type__control[_ngcontent-%COMP%] > input[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{top:50%;transform:translateY(-50%);left:30px}}.select-card-type__control[_ngcontent-%COMP%] > input[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{border:1px solid #1d69b4}.select-card-type__control[_ngcontent-%COMP%] > input[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{content:"";position:absolute;border-radius:16px;width:8px;height:8px;background:#1d69b4;left:23px;top:23px}@media (min-width:768px){.select-card-type__control[_ngcontent-%COMP%] > input[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{top:50%;transform:translateY(-50%);left:33px}}.select-card-type__inner[_ngcontent-%COMP%]{margin:0 auto}@media (min-width:992px){.select-card-type__inner[_ngcontent-%COMP%]{width:500px}}.select-card-type__header[_ngcontent-%COMP%]{text-align:left}.select-card-type__header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:63px}.opal-page-panel__text[_ngcontent-%COMP%]{margin-top:46px}.select-card-type__label[_ngcontent-%COMP%]{text-align:left;margin-bottom:8px;font-size:16px;font-weight:500;padding:40px 40px 40px 180px;transition:.2s ease}.select-card-type__label__icon[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);left:70px}.select-card-type__submit[_ngcontent-%COMP%]{border-radius:4px;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;max-width:270px;background-color:#1d69b4;border:0 solid #195c9e;color:#fff;margin-top:26px;width:100%}.select-card-type__submit[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.select-card-type__submit[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .select-card-type__submit[_ngcontent-%COMP%]{margin-top:10px}@media (min-width:992px){.select-card-type__submit[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;max-width:67%}}.select-card-type__cancel[_ngcontent-%COMP%]{border-radius:4px;border:0 solid transparent;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background:transparent;width:75%;margin:0 auto;display:block}.select-card-type__cancel[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.select-card-type__cancel[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .select-card-type__cancel[_ngcontent-%COMP%]{margin-top:10px}@media (min-width:992px){.select-card-type__cancel[_ngcontent-%COMP%]{width:67%}}']}),e}()},MVJ0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniCheckboxModule=void 0,n("fXoL");var o=n("ofXK"),r=(n("IpRS"),n("NKuO")),i=n("fXoL");t.TniCheckboxModule=function(){function e(){}return e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule,r.TniIconModule]]}),e}()},Mfk8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormSelectInputComponent=void 0;var o=n("kU1M"),r=(n("fXoL"),n("3Pt+"),n("T42N")),i=n("fXoL"),a=n("ofXK"),c=n("3Pt+"),s=n("gUXI");function l(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"option",8),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){var n=t.$implicit;i.\u0275\u0275property("ngValue",n.value),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n.label," ")}}function d(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"p"),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,o=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(o.getErrorMessage(n))}}function p(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",9),i.\u0275\u0275template(1,d,2,1,"p",10),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275nextContext(2);i.\u0275\u0275propertyInterpolate1("id","",n.inputName,"-error"),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",n.getErrors())}}function u(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",1),i.\u0275\u0275elementStart(1,"select",2),i.\u0275\u0275listener("blur",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().blurControl()}),i.\u0275\u0275template(2,l,2,2,"option",3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"label",4),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(5,"tni-icon",5),i.\u0275\u0275template(6,p,2,2,"div",6),i.\u0275\u0275elementStart(7,"p",7),i.\u0275\u0275text(8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("nohelp",!o.helpText),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("hasValue",o.control.value)("hadFocus",o.hadFocus)("error",o.control.dirty&&o.control.errors),i.\u0275\u0275attributeInterpolate1("aria-describedby","",o.inputName,"-error"),i.\u0275\u0275property("id",o.inputName)("ngClass",o.typeClass)("formControl",o.control)("name",o.inputName),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",o.options),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("hadFocus",o.hadFocus),i.\u0275\u0275property("for",o.inputName),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(o.labelText),i.\u0275\u0275advance(1),i.\u0275\u0275property("iconAriaHidden",!0),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",o.control.errors&&o.control.dirty),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(o.helpText)}}t.FormSelectInputComponent=function(){function e(){this.hadFocus=!1,this.errors=[]}return e.prototype.ngOnInit=function(){var e=this;this.typeClass="form-select-input--"+this.inputType,this.control.valueChanges.pipe(o.filter(function(){return e.control.invalid})).subscribe()},e.prototype.getErrors=function(){return this.control.errors?Object.keys(this.control.errors).map(function(e){return e}):[]},e.prototype.getErrorMessage=function(e){return this.errorMap?this.errorMap[e]:""},e.prototype.blurControl=function(){this.hadFocus=!0},e.prototype.hasValue=function(){return null!=this.control.value},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tni-form-select-input"]],contentQueries:function(e,t,n){var o;1&e&&i.\u0275\u0275contentQuery(n,r.TniOptionComponent,!1),2&e&&i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(t.options=o)},inputs:{formatted:"formatted",control:"control",labelText:"labelText",inputName:"inputName",helpText:"helpText",inputType:"inputType",maxLength:"maxLength",max:"max",errorMap:"errorMap"},decls:1,vars:1,consts:[["class","form-input",3,"nohelp",4,"ngIf"],[1,"form-input"],[1,"form-input__input",3,"id","ngClass","formControl","name","blur"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"form-input__label",3,"for"],["iconName","arrow-down-small","iconClasses","md",1,"select-arrow",3,"iconAriaHidden"],["class","form-input__error-message","aria-live","assertive","role","alert",3,"id",4,"ngIf"],[1,"form-input__help"],[3,"ngValue"],["aria-live","assertive","role","alert",1,"form-input__error-message",3,"id"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&i.\u0275\u0275template(0,u,9,21,"div",0),2&e&&i.\u0275\u0275property("ngIf",t.control)},directives:[a.NgIf,c.SelectControlValueAccessor,a.NgClass,c.NgControlStatus,c.FormControlDirective,a.NgForOf,s.IconComponent,c.NgSelectOption,c.\u0275angular_packages_forms_forms_x],styles:["[_nghost-%COMP%]{display:block}.form-input[_ngcontent-%COMP%]{margin-bottom:10px;display:flex;position:relative;padding:25px 0;vertical-align:middle;display:block}.form-input__label[_ngcontent-%COMP%]{font-weight:300;position:absolute;bottom:100%;right:auto;color:#999e9f;top:28px;left:5px;font-size:16px;transition:.3s}input[_ngcontent-%COMP%]:focus + .form-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px}select[_ngcontent-%COMP%]:focus + .form-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:.3s}.hasValue[_ngcontent-%COMP%] + .form-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:0s}.error[_ngcontent-%COMP%] + .form-input__label[_ngcontent-%COMP%], .form-input.error[_ngcontent-%COMP%]   .form-input__label[_ngcontent-%COMP%], .form-input__label__mandatory[_ngcontent-%COMP%]{color:#c41f3d}.form-input.hasValue__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:0s}.form-input__input[_ngcontent-%COMP%]{display:block;margin-top:0;background:none;padding:2px 2px 5px;height:35px;border-radius:0;border:solid #555;border-width:0 0 1px;float:left;color:#555;font-weight:400;font-size:16px}@media (max-width:767px){.form-input__input[_ngcontent-%COMP%]{font-size:16px}}.form-input__input[_ngcontent-%COMP%]:focus{box-shadow:none}.form-input__input[type=number][_ngcontent-%COMP%]:out-of-range{color:red}.form-input__input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, .form-input__input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.form-input__error-message[_ngcontent-%COMP%]{display:none}.error[_ngcontent-%COMP%] + label[_ngcontent-%COMP%] + .form-input__error-message[_ngcontent-%COMP%]{display:block;position:absolute;top:78px;left:2px;font-size:12px;color:#c41f3d}.form-input__help[_ngcontent-%COMP%]{display:block;position:absolute;top:78px;left:2px;font-size:12px;color:#c41f3d;display:none;color:#999}.form-input__label[_ngcontent-%COMP%] + .form-input__help[_ngcontent-%COMP%]{display:block}.form-input__input[_ngcontent-%COMP%]{width:100%;float:none;padding-bottom:0}.form-input__label[_ngcontent-%COMP%]{top:41px;left:15px}.error[_ngcontent-%COMP%] + label[_ngcontent-%COMP%] + .form-input__error-message[_ngcontent-%COMP%], .form-input__help[_ngcontent-%COMP%]{position:static}.form-input__input[_ngcontent-%COMP%]{border:solid #1c1c1b;border-width:0 0 2px;background-color:#f9f9f9;border-radius:4px;padding:13px 16px;height:56px;box-sizing:border-box}.form-input__input[_ngcontent-%COMP%]:focus{border-width:1px 1px 2px}.form-input[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;border:solid #1c1c1b;border-width:0 0 2px;background-color:#f9f9f9;border-radius:4px;padding:13px 16px;height:56px;box-sizing:border-box}.form-input[_ngcontent-%COMP%]   tni-icon[_ngcontent-%COMP%]{position:absolute;right:5px;top:40px;pointer-events:none}.form-input[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{width:100%}.form-input.nohelp[_ngcontent-%COMP%]{padding-bottom:0}.form-input[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:0}.form-input[_ngcontent-%COMP%]   select.ng-invalid.ng-dirty[_ngcontent-%COMP%]{border-color:#c41f3d}.form-input__error-message[_ngcontent-%COMP%]{display:block;position:absolute;top:78px;left:2px;font-size:12px;color:#c41f3d;position:static}.form-input__error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:static;line-height:1.5;margin:1em 0}"]}),e}()},Mp0x:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CentsToDollarPipe=void 0,n("fXoL");var o=n("ofXK"),r=n("fXoL");t.CentsToDollarPipe=function(){function e(){}return e.prototype.transform=function(e,t){return t?new o.CurrencyPipe("en-Au").transform(e/100,"AUD","symbol-narrow",t):new o.CurrencyPipe("en-Au").transform(e/100,"AUD","symbol-narrow","1.2-2")},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.\u0275\u0275definePipe({name:"centsToDollar",type:e,pure:!0}),e}()},MyN3:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ForgotUsernameComponent=void 0;var o=n("kU1M"),r=(n("fXoL"),n("aZVF"),n("NRRr"),n("YORH"),n("3Pt+")),i=n("u3Ad"),a=n("fXoL"),c=n("aZVF"),s=n("NRRr"),l=n("YORH"),d=n("3Pt+"),p=n("ofXK"),u=n("E2dh"),m=n("pxjO"),f=n("DRCh"),g=n("amr8"),h=n("73Ru"),v=n("M6bo");function C(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"tni-form-message",9),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate1(" ",n.responseError," ")}}function _(e,t){if(1&e){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div"),a.\u0275\u0275elementStart(1,"div",5),a.\u0275\u0275elementStart(2,"h2",6),a.\u0275\u0275text(3,"Forgot username"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(4,C,2,1,"tni-form-message",7),a.\u0275\u0275elementStart(5,"card-form",8),a.\u0275\u0275listener("cardValidationError",function(){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext(2).cardValidationErrorHandler()})("cancel",function(){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext(2).onCancel()})("submitCardDetails",function(){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext(2).sendUsername()}),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}if(2&e){var o=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(4),a.\u0275\u0275property("ngIf",!!o.responseError),a.\u0275\u0275advance(1),a.\u0275\u0275property("group",o.cardDetails)("customSubmitLabel","NEXT")("showNickname",!1)("hideSubmitButton",!1)("authenticate",!1)("showCancelButton",!0)}}function b(e,t){if(1&e){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"tni-message-panel",10),a.\u0275\u0275elementStart(1,"p",11),a.\u0275\u0275text(2,"Your username has been sent to you by email or SMS."),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"button",12),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext(2).onCancel()}),a.\u0275\u0275text(4,"Back to log in"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}2&e&&a.\u0275\u0275property("success",!0)}function x(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"tni-layout"),a.\u0275\u0275elementStart(1,"div",1),a.\u0275\u0275elementStart(2,"div",2),a.\u0275\u0275elementStart(3,"tni-page-frame"),a.\u0275\u0275elementStart(4,"div",3),a.\u0275\u0275template(5,_,6,7,"div",0),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(6,b,5,1,"tni-message-panel",4),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275nextContext();a.\u0275\u0275advance(5),a.\u0275\u0275property("ngIf",!n.success),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",n.success)}}t.ForgotUsernameComponent=function(){function e(e,t,n,o){this.sendUsernameService=e,this.loaderService=t,this.trackOpalEventService=n,this.formBuilder=o,this.success=!1,this.responseError=""}return e.prototype.ngOnInit=function(){this.createForm()},e.prototype.createForm=function(){this.cardDetails=this.formBuilder.group({cardNumber:this.formBuilder.control(null,[r.Validators.required,r.Validators.pattern(i.TniRegularExpressions.cardNumber)]),cardCode:this.formBuilder.control(null,[r.Validators.required,r.Validators.pattern(i.TniRegularExpressions.pin)])})},e.prototype.onCancel=function(){window.history.back()},e.prototype.sendUsername=function(){var e=this;this.loaderService.display(!0),this.sendUsernameService.post(Number(this.cardDetails.controls.cardNumber.value.replace(/ /g,"")),this.cardDetails.controls.cardCode.value).pipe(o.finalize(function(){e.loaderService.display(!1)})).subscribe(function(){e.success=!0,e.trackOpalEventService.retrieveUsername()},function(t){e.responseError=t.error&&t.error.ErrorType&&"Business"===t.error.ErrorType?"In order for us to send your username, you need a mobile number or email address attached to your account. To retrieve your username, please call 13 OPAL (13 67 25).":"This card number or security code is incorrect, please try again."})},e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(c.SendUsernameService),a.\u0275\u0275directiveInject(s.LoaderService),a.\u0275\u0275directiveInject(l.TrackOpalEventService),a.\u0275\u0275directiveInject(d.FormBuilder))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["forgot-username"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"container"],[1,"row"],["mouseFocus","",1,"forgot-username"],["title","Username sent",3,"success",4,"ngIf"],[1,"forgot-username__header"],[1,"forgot-username__heading","row"],["class","reset-username-error row","id","reset-username-error",4,"ngIf"],["title","Card details",3,"group","customSubmitLabel","showNickname","hideSubmitButton","authenticate","showCancelButton","cardValidationError","cancel","submitCardDetails"],["id","reset-username-error",1,"reset-username-error","row"],["title","Username sent",3,"success"],[1,"forgot-username__success__description"],[1,"btn","btn-primary","forgot-username__success__back",3,"click"]],template:function(e,t){1&e&&a.\u0275\u0275template(0,x,7,2,"tni-layout",0),2&e&&a.\u0275\u0275property("ngIf",t.cardDetails)},directives:[p.NgIf,u.LayoutComponent,m.PageFrameComponent,f.MouseFocusDirective,g.CardFormComponent,h.TniFormMessageComponent,v.TniMessagePanelComponent],styles:[""]}),e}()},Mzpo:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SecretQuestionAuthModel=void 0,t.SecretQuestionAuthModel=function(){function e(){}return e.fromResponse=function(t){var n=new e;return n.token=t.ForgottenPasswordToken,n.question=t.SecretQuestionCode,n},e}()},"N+3c":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateAccountOptionsComponent=void 0;var o=n("fXoL"),r=(n("puoa"),n("YORH"),n("fXoL")),i=n("puoa"),a=n("YORH"),c=n("dwx7"),s=n("gUXI");t.CreateAccountOptionsComponent=function(){function e(e,t){this.windowRef=e,this.trackOpalEventService=t,this.createAccountInvoked=new o.EventEmitter}return e.prototype.startCreateAccount=function(){this.createAccountInvoked.emit()},e.prototype.openOpalWeb=function(){this.windowRef.redirectToUrl("https://www.opal.com.au/ordercard/?execution=e1s1&mobile_redirect=true")},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(i.WindowRef),r.\u0275\u0275directiveInject(a.TrackOpalEventService))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["create-account-options"]],outputs:{createAccountInvoked:"createAccountInvoked"},decls:20,vars:3,consts:[[1,"panel-container"],[1,"col-md-6","col-xs-12"],[3,"linkClicked"],[1,"panel"],[1,"panel-icon","unregistered-card"],["iconName","opal-logo-card","iconClasses","lg","iconTitle","",3,"iconAriaHidden"],[1,"panel-link"],[1,"panel-text"],[1,"panel-icon"],["iconName","question-box","iconClasses","lg","iconTitle","",3,"iconAriaHidden"],[1,"panel-text","opal"],["iconName","external-link","iconClasses","xs","iconTitle","",3,"iconAriaHidden"]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"div",0),r.\u0275\u0275elementStart(1,"div",1),r.\u0275\u0275elementStart(2,"tni-panel-card",2),r.\u0275\u0275listener("linkClicked",function(){return t.startCreateAccount()}),r.\u0275\u0275elementStart(3,"div",3),r.\u0275\u0275elementStart(4,"div",4),r.\u0275\u0275element(5,"tni-icon",5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"div",6),r.\u0275\u0275text(7,"I have an unregistered Opal card"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",7),r.\u0275\u0275text(9,"Create an account and register your card"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(10,"div",1),r.\u0275\u0275elementStart(11,"tni-panel-card",2),r.\u0275\u0275listener("linkClicked",function(){return t.openOpalWeb()}),r.\u0275\u0275elementStart(12,"div",3),r.\u0275\u0275elementStart(13,"div",8),r.\u0275\u0275element(14,"tni-icon",9),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(15,"div",6),r.\u0275\u0275text(16,"I don't have an Opal card"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(17,"div",10),r.\u0275\u0275text(18," Order an Opal card "),r.\u0275\u0275element(19,"tni-icon",11),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(5),r.\u0275\u0275property("iconAriaHidden",!0),r.\u0275\u0275advance(9),r.\u0275\u0275property("iconAriaHidden",!0),r.\u0275\u0275advance(5),r.\u0275\u0275property("iconAriaHidden",!0))},directives:[c.TniPanelCardComponent,s.IconComponent],styles:[".panel-container[_ngcontent-%COMP%]{margin:40px auto;max-width:940px;min-height:450px}.panel[_ngcontent-%COMP%]{height:185px}.panel[_ngcontent-%COMP%]   .panel-icon[_ngcontent-%COMP%]{margin:35px}.panel[_ngcontent-%COMP%]   .panel-icon[_ngcontent-%COMP%]     .tp-icon{width:60%}.panel[_ngcontent-%COMP%]   .panel-link[_ngcontent-%COMP%]{border-bottom:1px solid rgba(0,0,0,.2);padding-bottom:25px;margin:0 20px;color:#1d69b4;font-size:14px;font-weight:400;line-height:18px}.panel[_ngcontent-%COMP%]   .panel-text[_ngcontent-%COMP%]{padding-top:10px;color:#555;font-size:12px}.panel[_ngcontent-%COMP%]   .panel-text[_ngcontent-%COMP%]     .tp-icon{min-width:13px;width:13px}"]}),e}()},NCCL:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoaderComponent=void 0,n("fXoL"),n("NRRr");var o=n("fXoL"),r=n("NRRr"),i=n("ofXK"),a=n("Effa");function c(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"div",1),o.\u0275\u0275element(1,"tni-spinner",2),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("displayText",n.displayText?n.displayText:null)}}t.LoaderComponent=function(){function e(e){this.loaderService=e}return e.prototype.ngOnInit=function(){var e=this;this.display=this.loaderService.status,this.loaderService.spinnerDisplayText.subscribe(function(t){e.displayText=t})},e.prototype.ngOnDestroy=function(){this.loaderService.spinnerDisplayText.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(r.LoaderService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-loader"]],decls:2,vars:3,consts:[["class","loading-data-overlay",4,"ngIf"],[1,"loading-data-overlay"],["spinnerClass","loader-spinner","srText","Loading","aria-live","assertive",3,"displayText"]],template:function(e,t){1&e&&(o.\u0275\u0275template(0,c,2,1,"div",0),o.\u0275\u0275pipe(1,"async")),2&e&&o.\u0275\u0275property("ngIf",o.\u0275\u0275pipeBind1(1,1,t.display))},directives:[i.NgIf,a.SpinnerComponent],pipes:[i.AsyncPipe],styles:[".loading-data-overlay[_ngcontent-%COMP%]{position:fixed;width:100%;height:100%;top:0;left:0;right:0;bottom:0;background-color:#f6f6f6;opacity:.92;z-index:1000;font-weight:500;text-align:center;color:#1d69b4}.loading-data-overlay[_ngcontent-%COMP%]     .loader-spinner{position:absolute;top:35%;right:0;left:0;margin:auto;width:200px;padding:20px 0}"]}),e}()},NJII:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardManageActionsComponent=void 0,n("fXoL"),n("SC3b");var o=n("kU1M"),r=(n("3OCy"),n("tyNb"),n("YORH"),n("fXoL")),i=n("3OCy"),a=n("YORH"),c=n("tyNb"),s=n("gM7n"),l=n("ofXK"),d=n("kAtE"),p=n("b+vG"),u=n("vwDF"),m=n("gUXI");function f(e,t){if(1&e){var n=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"li",3),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(n),r.\u0275\u0275nextContext().handleTransferClick()}),r.\u0275\u0275text(2," Transfer balance of this Opal card "),r.\u0275\u0275elementStart(3,"small",4),r.\u0275\u0275text(4,"Transferring the balance will block this card"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()}}function g(e,t){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"li",5),r.\u0275\u0275text(2," Block this Opal card "),r.\u0275\u0275elementStart(3,"small",4),r.\u0275\u0275text(4,"Protect the balance of a lost or stolen card"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e){var n=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275propertyInterpolate1("actionUrl","/account/block-card/",n.selectedSmartcard.smartcardId,"")}}var h=function(){return{active:"card-details"}};function v(e,t){1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275elementStart(1,"li",6),r.\u0275\u0275text(2," Set up notifications "),r.\u0275\u0275elementStart(3,"small",4),r.\u0275\u0275text(4,"Turn on the notifications you'd like to receive"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementContainerEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("actionUrlParams",r.\u0275\u0275pureFunction0(1,h)))}function C(e,t){if(1&e){var n=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"tni-modal",7),r.\u0275\u0275listener("closeEvent",function(){return r.\u0275\u0275restoreView(n),r.\u0275\u0275nextContext().toggleTransferBalanceNotification()}),r.\u0275\u0275element(1,"tni-icon",8),r.\u0275\u0275elementStart(2,"h3"),r.\u0275\u0275text(3,"Transfer the balance of this card"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"p"),r.\u0275\u0275text(5," If you wish to transfer the balance to another Opal card, "),r.\u0275\u0275elementStart(6,"strong"),r.\u0275\u0275text(7,"this card will be blocked"),r.\u0275\u0275elementEnd(),r.\u0275\u0275text(8,". Blocking a card is permanent and cannot be undone. "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(9,"div",9),r.\u0275\u0275elementStart(10,"button",10),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(n),r.\u0275\u0275nextContext().transferBalanceProceed()}),r.\u0275\u0275text(11,"Proceed"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"button",11),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(n),r.\u0275\u0275nextContext().toggleTransferBalanceNotification()}),r.\u0275\u0275text(13,"Cancel"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("iconAriaHidden",!0))}t.CardManageActionsComponent=function(){function e(e,t,n){this.notificationPreferenceService=e,this.trackOpalEventService=t,this.router=n,this.hasSetNotifcations=!0,this.showTransferBalanceNotificationModal=!1}return e.prototype.ngOnInit=function(){var e=this;this.notificationPreferenceService.list().pipe(o.take(1)).subscribe(function(t){e.hasSetNotifcations=t.reduce(function(e,t){return"None"!==t.deliveryChannel.method||e},!1)})},e.prototype.handleTransferClick=function(){this.trackOpalEventService.trackActionLink({action:"Transfer the balance of this Opal card"}),this.toggleTransferBalanceNotification()},e.prototype.toggleTransferBalanceNotification=function(){this.showTransferBalanceNotificationModal=!this.showTransferBalanceNotificationModal},e.prototype.transferBalanceProceed=function(){this.router.navigate(["/account/block-card/"+this.selectedSmartcard.smartcardId])},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(i.OpalNotificationPreferenceService),r.\u0275\u0275directiveInject(a.TrackOpalEventService),r.\u0275\u0275directiveInject(c.Router))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tni-card-manage-actions"]],inputs:{selectedSmartcard:"selectedSmartcard",isUnRegistered:"isUnRegistered",canTransferToAnotherCard:"canTransferToAnotherCard",showBlock:"showBlock"},decls:5,vars:4,consts:[[1,"cards-page__action-list"],[4,"ngIf"],["class","cards-page__transfer-modal","ariaLabel","Transfer balance",3,"closeEvent",4,"ngIf"],["tni-action-item","","icon","transfer",1,"opal-cards-page__action-item",3,"click"],[1,"opal-card-details-tab__description"],["tni-action-url","","trackAction","Block this Opal card CTA","icon","block",1,"opal-cards-page__action-item",3,"actionUrl"],["tni-action-url","","actionUrl","/account/profile","icon","bell",1,"opal-cards-page__action-item",3,"actionUrlParams"],["ariaLabel","Transfer balance",1,"cards-page__transfer-modal",3,"closeEvent"],["iconName","alert","iconClasses","md","iconTitle","",1,"cards-page__transfer-modal__alert-icon",3,"iconAriaHidden"],[1,"cards-page__transfer-modal"],[1,"cards-page__transfer-modal__proceed",3,"click"],[1,"cards-page__transfer-modal__cancel",3,"click"]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"tni-action-list",0),r.\u0275\u0275template(1,f,5,0,"ng-container",1),r.\u0275\u0275template(2,g,5,1,"ng-container",1),r.\u0275\u0275template(3,v,5,2,"ng-container",1),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(4,C,14,1,"tni-modal",2)),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.canTransferToAnotherCard&&!t.selectedSmartcard.isBlocked&&t.showBlock&&!t.isUnRegistered),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!t.selectedSmartcard.isBlocked&&t.showBlock&&!t.isUnRegistered),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!t.hasSetNotifcations),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.showTransferBalanceNotificationModal))},directives:[s.ActionListComponent,l.NgIf,d.ActionItemComponent,p.ActionUrlComponent,u.ModalWindowComponent,m.IconComponent],styles:['.cards-page__action-list[_ngcontent-%COMP%]{display:block}.opal-cards-page__action-item[_ngcontent-%COMP%]:first-child{margin-top:40px}.opal-cards-page__action-item[_ngcontent-%COMP%]{display:block}.cards-page__transfer-modal__proceed[_ngcontent-%COMP%]{border-radius:4px;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background-color:#1d69b4;border:0 solid #195c9e;color:#fff}.cards-page__transfer-modal__proceed[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.cards-page__transfer-modal__proceed[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .cards-page__transfer-modal__proceed[_ngcontent-%COMP%]{margin-top:10px}.cards-page__transfer-modal__cancel[_ngcontent-%COMP%]{border-radius:4px;border:0 solid transparent;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background:transparent}.cards-page__transfer-modal__cancel[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.cards-page__transfer-modal__cancel[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .cards-page__transfer-modal__cancel[_ngcontent-%COMP%]{margin-top:10px}.cards-page__transfer-modal__alert-icon[_ngcontent-%COMP%]{color:#d0021b}.opal-card-details-tab__description[_ngcontent-%COMP%]{display:block;color:#373636}']}),e}()},NKuO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniIconModule=void 0,n("fXoL");var o=n("ofXK"),r=(n("gUXI"),n("fXoL"));t.TniIconModule=function(){function e(){}return e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule]]}),e}()},NRRr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoaderService=void 0,n("fXoL");var o=n("qCKp"),r=n("fXoL");t.LoaderService=function(){function e(){this.status=new o.BehaviorSubject(!1),this.spinnerDisplayText=new o.BehaviorSubject("")}return e.prototype.display=function(e){this.status.next(e)},e.prototype.loadSpinnerWithDisplayText=function(e){this.setDisplayText(e),this.display(!0)},e.prototype.unloadSpinner=function(){this.setDisplayText(""),this.display(!1)},e.prototype.setDisplayText=function(e){this.spinnerDisplayText.next(e)},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}()},NYfO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalHeaderComponent=void 0,n("fXoL");var o=n("fXoL");t.OpalHeaderComponent=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-opal-header"]],decls:7,vars:0,consts:[[1,"opal-header"],[1,"transport-header"],["itemprop","url","href","/"],["media","(min-width: 768px)","srcset","/themes/custom/tfnsw_bootstrap/assets/images/logos/warrahop.svg"],["src","/themes/custom/tfnsw_bootstrap/assets/images/logos/warrahop_mobile.svg","alt","transportnsw.info"]],template:function(e,t){1&e&&(o.\u0275\u0275elementStart(0,"header",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275elementStart(2,"div"),o.\u0275\u0275elementStart(3,"a",2),o.\u0275\u0275elementStart(4,"picture"),o.\u0275\u0275element(5,"source",3),o.\u0275\u0275element(6,"img",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd())},styles:[".transport-header[_ngcontent-%COMP%]{background-color:#fff;height:100px;border-bottom:1px solid #ddd;display:grid;place-items:center}.transport-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:60px;width:138px;transform:translateX(-1px)}@media (min-width:576px){.transport-header[_ngcontent-%COMP%]{height:110px;padding:25px 0 15px}}@media (min-width:768px){.transport-header[_ngcontent-%COMP%]{justify-items:start}.transport-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:61px;aspect-ratio:auto 260/61;width:260px;transform:translate(10px,1px)}}@media (min-width:1200px){.transport-header[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;max-width:1200px;margin:0 auto}.transport-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:translate(3px,1px)}}"]}),e}()},PFYy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalSession=void 0;var o=n("wd/R");t.OpalSession=function(){function e(){this.expiresIn=o(),this.loginUrl="/"}return e.fromJson=function(t){var n=new e;return n.expiresIn=o(t.expiresIn),n.redirected=t.redirected,n.isUnregistered=t.isUnregistered,n.loginUrl=t.loginUrl,n},e.prototype.setExpiresIn=function(e){this.expiresIn=o().add(e,"s")},e.prototype.isExpired=function(){return o().isSameOrAfter(this.expiresIn)},e}()},PShm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SmartcardService=void 0;var o=n("kU1M"),r=(n("fXoL"),n("tk/3"),n("qCKp")),i=n("SC3b"),a=n("YpR8"),c=n("wd/R"),s=n("iMrD"),l=n("fXoL"),d=n("tk/3");t.SmartcardService=function(){function e(e){this.http=e,this.smartCardSubject=new r.Subject,this.selectedCardSubject=new r.Subject,this.smartCardListSubject=new r.Subject,this.selectedCard$=this.selectedCardSubject.asObservable(),this.smartcard$=this.smartCardSubject.asObservable(),this.smartCardList$=this.smartCardListSubject.asObservable()}return e.prototype.getListAndPublish=function(){var e=this;return this.http.get("/api/opal/api/customer/smartcards/").pipe(o.map(function(e){return(e?e.SmartcardDetails:[]).map(function(e){return i.Smartcard.fromResponse(e)})}),o.tap(function(t){return e.publishCardList(t)}))},e.prototype.getDetailAndPublish=function(e){var t=this;return this.http.get("/api/opal/api/smartcard/details/"+e).pipe(o.map(function(e){return i.Smartcard.fromResponse(e)}),o.tap(function(e){return t.publishUpdate(e)}))},e.prototype.activity=function(e,t,n,r,i,s){var l="YYYY-MM-DD",d=c(r).format(l),p=c(i).format(l);return this.http.get("/api/opal/api/smartcard/activity/"+e+"?start="+t+"&nr="+n+"&from="+d+"&to="+p+"&sort="+(s?"desc":"")).pipe(o.map(function(e){return a.CardActivities.fromResponse(e)}))},e.prototype.updateCardNickname=function(e,t){return this.http.post("/api/opal/api/smartcard/nickname/",{SmartcardId:e,CardNickname:t}).pipe(o.map(function(e){return s.UpdateCardNicknameResponse.fromResponse(e)}))},e.prototype.register=function(e,t,n){var r={SmartcardId:parseInt(e,10),SmartcardSc:t,CardNickname:n};return r.CardNickname||delete r.CardNickname,this.http.post("/api/opal/api/smartcard/register/",r).pipe(o.map(function(e){return e.toString()}))},e.prototype.registerEntitlementCards=function(e){return e.CardNickname&&"undefined"!==e.CardNickname||delete e.CardNickname,this.http.post("/api/opal/api/smartcard/register/",e)},e.prototype.getEntitlementIssuers=function(e){return this.http.get("/api/opal/api/entitlement/issuers/?fcc="+e)},e.prototype.publishUpdate=function(e){this.smartCardSubject.next(e)},e.prototype.publishCardList=function(e){this.smartCardListSubject.next(e)},e.prototype.publishSelectionChange=function(e){this.selectedCardSubject.next(e)},e.\u0275fac=function(t){return new(t||e)(l.\u0275\u0275inject(d.HttpClient))},e.\u0275prov=l.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},PZPe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivateCardService=void 0;var o=n("kU1M"),r=(n("fXoL"),n("tk/3"),n("fXoL")),i=n("tk/3");t.ActivateCardService=function(){function e(e){this.http=e}return e.prototype.activate=function(e){return this.http.post("/api/opal/api/smartcard/activate/",e).pipe(o.map(function(e){return e.Result}))},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(i.HttpClient))},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},Pxei:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniFormMessageModule=void 0,n("fXoL");var o=n("ofXK"),r=(n("73Ru"),n("NKuO")),i=n("fXoL");t.TniFormMessageModule=function(){function e(){}return e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule,r.TniIconModule]]}),e}()},QFCG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniInputFieldModule=void 0,n("fXoL");var o=n("ofXK"),r=(n("9v/V"),n("NKuO")),i=n("3Pt+"),a=n("VnzS"),c=n("+gHY"),s=n("fXoL");t.TniInputFieldModule=function(){function e(){}return e.\u0275mod=s.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=s.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule,i.FormsModule,r.TniIconModule,a.TniSpinnerModule,i.ReactiveFormsModule,c.FormInputModule]]}),e}()},"QK+Z":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalAccountStore=void 0,n("fXoL");var o=n("C/YF"),r=n("qCKp"),i=n("fXoL");t.OpalAccountStore=function(){function e(){this.key="opal-account",this.opalAccountData=new r.BehaviorSubject(null)}return e.prototype.setAccessToken=function(e){var t=this.get();return t.accessToken=e,this.save(t),t},e.prototype.setCTPAccessToken=function(e){var t=this.get();return t.ctpAccessToken=e,this.save(t),t},e.prototype.setSmartCards=function(e){var t=this.get();return t.smartcards=e,this.save(t),t},e.prototype.setProfile=function(e){var t=this.get();return t.profile=e,this.save(t),t},e.prototype.setUnregisteredCardNo=function(e,t){var n=this.get();return n.unregisteredCardNo=e,n.unregisteredCardSc=t,this.save(n),n},e.prototype.clear=function(){sessionStorage.removeItem(this.key),this.opalAcc=null},e.prototype.get=function(){return this.opalAcc||this.load(),this.opalAcc},e.prototype.save=function(e){this.opalAcc=e,e.profile&&this.opalAccountData.next(e.profile),sessionStorage.setItem(this.key,JSON.stringify(this.opalAcc))},e.prototype.load=function(){var e=sessionStorage.getItem(this.key);return this.opalAcc=e?Object.assign(new o.OpalAccount,JSON.parse(e)):new o.OpalAccount,this.opalAcc},e.prototype.hasActiveSessionToken=function(){return!!sessionStorage.getItem(this.key)},e.prototype.isRegistered=function(){return!this.get().unregisteredCardNo},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}()},QeVs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Entitlement=void 0,t.Entitlement=function(){function e(){}return e.fromResponse=function(t){var n=new e;return t&&(n.smartcardId=t.SmartcardId,n.status=t.Status,n.firstName=t.FirstName,n.lastName=t.LastName,n.entitlementIssuerEntitlementId=t.EntitlementIssuerEntitlementId,n.entitlementIssuerName=t.EntitlementIssuerName,n.entitlementExpiryDate=t.EntitlementExpiryDate?this.convertToDate(t.EntitlementExpiryDate):null),n},e.convertToDate=function(e){var t=e.split("+")[0].split("-");return new Date(Number(t[0]),Number(t[1])-1,Number(t[2]))},e}()},RJWm:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PersonalDetailsComponent=void 0;var o=n("fXoL"),r=n("tJ3N"),i=n("fXoL"),a=n("jbib"),c=n("ofXK");function s(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",12),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().submit()}),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",o.submitLabel," ")}}function l(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",13),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().cancelClicked()}),i.\u0275\u0275text(1,"Cancel"),i.\u0275\u0275elementEnd()}}t.PersonalDetailsComponent=function(){function e(){this.cancel=new o.EventEmitter,this.submitPersonalDetails=new o.EventEmitter,this.validationMessages=new r.ValidationMessages,this.submitLabel="Submit",this.hideSubmitButton=!1}return e.prototype.ngOnInit=function(){this.customSubmitLabel&&(this.submitLabel=this.customSubmitLabel)},e.prototype.submit=function(){this.submitPersonalDetails.emit()},e.prototype.cancelClicked=function(){this.cancel.emit()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["personal-details"]],inputs:{group:"group",hideSubmitButton:"hideSubmitButton",customSubmitLabel:"customSubmitLabel",showCancelButton:"showCancelButton"},outputs:{cancel:"cancel",submitPersonalDetails:"submitPersonalDetails"},decls:12,vars:14,consts:[[1,"personal-details"],[1,"container-fluid"],[1,"row"],["labelText","Given name","inputName","firstname","helpText","","inputType","text",1,"col-md-6",3,"control","errorMap"],["labelText","Family name","inputName","surname","helpText","","inputType","text",1,"col-md-6",3,"control","errorMap"],["labelText","Email address","inputName","email","helpText","","inputType","text",1,"col-md-12",3,"control","errorMap"],["labelText","Mobile phone","inputName","mobile","helpText","","inputType","text",1,"col-md-12",3,"control","errorMap"],["labelText","Home/business phone (optional)","inputName","telephone","helpText","","inputType","text",1,"col-md-12",3,"control","errorMap"],["labelText","Date of birth DD/MM/YYYY (optional)","inputName","dob","helpText","","inputType","text",1,"col-md-12",3,"control","errorMap"],[1,"col-md-12","personal-details__actions","actions"],["class","personal-details__submit",3,"click",4,"ngIf"],["class","cancel-button",3,"click",4,"ngIf"],[1,"personal-details__submit",3,"click"],[1,"cancel-button",3,"click"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275element(3,"tni-form-input",3),i.\u0275\u0275element(4,"tni-form-input",4),i.\u0275\u0275element(5,"tni-form-input",5),i.\u0275\u0275element(6,"tni-form-input",6),i.\u0275\u0275element(7,"tni-form-input",7),i.\u0275\u0275element(8,"tni-form-input",8),i.\u0275\u0275elementStart(9,"div",9),i.\u0275\u0275template(10,s,2,1,"button",10),i.\u0275\u0275template(11,l,2,0,"button",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(3),i.\u0275\u0275property("control",t.group.controls.firstName)("errorMap",t.validationMessages.firstName),i.\u0275\u0275advance(1),i.\u0275\u0275property("control",t.group.controls.lastName)("errorMap",t.validationMessages.lastName),i.\u0275\u0275advance(1),i.\u0275\u0275property("control",t.group.controls.email)("errorMap",t.validationMessages.email),i.\u0275\u0275advance(1),i.\u0275\u0275property("control",t.group.controls.mobile)("errorMap",t.validationMessages.mobile),i.\u0275\u0275advance(1),i.\u0275\u0275property("control",t.group.controls.telephone)("errorMap",t.validationMessages.telephone),i.\u0275\u0275advance(1),i.\u0275\u0275property("control",t.group.controls.dateOfBirth)("errorMap",t.validationMessages.dob),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",!t.hideSubmitButton),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.showCancelButton))},directives:[a.FormInputComponent,c.NgIf],styles:['.personal-details__submit[_ngcontent-%COMP%]{border-radius:4px;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background-color:#1d69b4;border:0 solid #195c9e;color:#fff}.personal-details__submit[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.personal-details__submit[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .personal-details__submit[_ngcontent-%COMP%]{margin-top:10px}.personal-details__actions[_ngcontent-%COMP%]{margin-top:20px}.cancel-button[_ngcontent-%COMP%]{border-radius:4px;border:0 solid transparent;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background:transparent}.cancel-button[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.cancel-button[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .cancel-button[_ngcontent-%COMP%]{margin-top:10px}']}),e}()},RRJJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginFieldEnum=void 0,t.LoginFieldEnum=function(e){return e[e.CardNumber=0]="CardNumber",e[e.Code=1]="Code",e[e.Username=2]="Username",e[e.Password=3]="Password",e[e.cardNick=4]="cardNick",e}(t.LoginFieldEnum||{})},RUUZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContactlessCardComponent=void 0,n("fXoL");var o=n("fXoL"),r=n("ofXK"),i=n("gUXI");function a(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"div",5),o.\u0275\u0275elementStart(1,"div",6),o.\u0275\u0275element(2,"tni-icon",7),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"div",8),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275property("iconAriaHidden",!0),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 \u2022\u2022\u2022\u2022 ",n.paymentCard.partialNumber," ")}}function c(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",9),o.\u0275\u0275element(1,"div",10),o.\u0275\u0275elementStart(2,"div",8),o.\u0275\u0275element(3,"div",11),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd())}t.ContactlessCardComponent=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-contactless-card"]],inputs:{paymentCard:"paymentCard"},decls:5,vars:2,consts:[[1,"contactless-card"],[1,"container"],[1,"row"],["class","contactless-card__card",4,"ngIf"],["class","contactless-card__card contactless-card__card--skeleton",4,"ngIf"],[1,"contactless-card__card"],[1,"contactless-card__card-icon"],["iconName","wave","iconClasses","md","iconTitle","",3,"iconAriaHidden"],[1,"contactless-card__card-number"],[1,"contactless-card__card","contactless-card__card--skeleton"],[1,"contactless-card__card-icon","contactless-card__card-icon--skeleton","skeleton--white"],[1,"skeleton-bar-round-big","center","x-lg","skeleton--white"]],template:function(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275elementStart(2,"div",2),o.\u0275\u0275template(3,a,5,2,"div",3),o.\u0275\u0275template(4,c,4,0,"div",4),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",t.paymentCard),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!t.paymentCard))},directives:[r.NgIf,i.IconComponent],styles:[".contactless-card[_ngcontent-%COMP%]{background:linear-gradient(222.95deg,#1b91d4,#1f6db7 23.62%,#1d69b4)}.contactless-card__card[_ngcontent-%COMP%]{width:270px;height:150px;margin:34px auto;padding:16px 16px 16px 0;background:#dbdbdb;border-radius:10px;box-shadow:0 2px 3px 0 rgba(0,0,0,.2);color:#000;position:relative}.contactless-card__card--skeleton[_ngcontent-%COMP%]{padding-left:16px}.contactless-card__card-number[_ngcontent-%COMP%]{font-size:20px;text-align:right;clear:right;padding-top:20px;font-family:monospace;font-weight:100}.contactless-card__card-icon[_ngcontent-%COMP%]{float:right}.contactless-card__card-icon--skeleton[_ngcontent-%COMP%]{width:30px;height:30px;border-radius:15px}.contactless-card__card-exp[_ngcontent-%COMP%]{position:absolute;bottom:16px;right:16px;font-size:12px}.contactless-card__card-exp-title[_ngcontent-%COMP%]{font-size:10px;font-weight:400}"]}),e}()},RnhZ:function(e,t,n){var o={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn-bd":"loYQ","./bn-bd.js":"loYQ","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-in":"7C5Q","./en-in.js":"7C5Q","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./en-sg":"t+mt","./en-sg.js":"t+mt","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-mx":"tbfe","./es-mx.js":"tbfe","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fil":"1ppg","./fil.js":"1ppg","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./ga":"USCx","./ga.js":"USCx","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-deva":"qvJo","./gom-deva.js":"qvJo","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it-ch":"bxKX","./it-ch.js":"bxKX","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ku":"JCF/","./ku.js":"JCF/","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./oc-lnc":"Fnuy","./oc-lnc.js":"Fnuy","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tk":"Wv91","./tk.js":"Wv91","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-mo":"OmwH","./zh-mo.js":"OmwH","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id="RnhZ"},RutN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrackEventService=void 0,n("fXoL"),n("puoa");var o=n("fXoL"),r=n("puoa");t.TrackEventService=function(){function e(e){this.winRef=e}return e.prototype.Utils=function(){return this.winRef.ALLUtils()||this.winRef.Utils()},e.prototype.trackEvent=function(e,t,n){if(this.Utils()&&this.Utils().safelyExecute&&t)this.Utils().safelyExecute.call(this,t.action,function(){null!=n?this.Utils().sendGAEvent(e,t.action,t.label,n):t.label?this.Utils().sendGAEvent(e,t.action,t.label):this.Utils().sendGAEvent(e,t.action)});else if(("Opal transaction"===e||"Mobile vs desktop"===e)&&t){var o=this.winRef.dataLayer()||[];void 0!==typeof o&&o.push({event:"fireGAEvent","GA Event Category":e,"GA Event Action":t.action,"GA Event Label":t.label,"GA Event Value":n})}},e.prototype.trackSocial=function(e,t){this.Utils()&&e&&this.Utils().safelyExecute.call(this,e.network+" "+e.action,function(){null!=t?this.Utils().sendGASocial(e.network,e.action,t):this.Utils().sendGASocial(e.network,e.action)})},e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(r.WindowRef))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},"S3W/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProfileDetailsComponent=void 0;var o=n("fXoL"),r=n("3Pt+"),i=(n("ofXK"),n("6i2Y"),n("c7H9"),n("VmUZ")),a=(n("NRRr"),n("74Ue"),n("C/YF"),n("0ywJ"),n("0ruu"),n("u3Ad")),c=n("fXoL"),s=n("3Pt+"),l=n("c7H9"),d=n("ofXK"),p=n("6i2Y"),u=n("NRRr"),m=n("74Ue"),f=n("0ywJ"),g=n("0ruu"),h=n("+xla"),v=n("u1nx"),C=n("SPMH"),_=n("73Ru"),b=n("RJWm"),x=n("4ti1"),y=n("gUXI"),M=n("vwDF"),P=["success"],O=["panelGroup"];function S(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"span",23),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate(n.opalAccount.profile.firstName)}}function w(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"span",23),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate(n.opalAccount.profile.lastName)}}function k(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"span",23),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate(n.opalAccount.profile.mobile)}}function E(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"span",23),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate(n.opalAccount.profile.email)}}function T(e,t){1&e&&(c.\u0275\u0275elementStart(0,"tni-form-message",24),c.\u0275\u0275text(1," Something went wrong and we can't process your request. Please try again. "),c.\u0275\u0275elementEnd())}function I(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"personal-details",25),c.\u0275\u0275listener("submitPersonalDetails",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext().submit()}),c.\u0275\u0275elementEnd()}if(2&e){var o=c.\u0275\u0275nextContext();c.\u0275\u0275property("group",o.form.controls.profile)}}var A=function(){return{type:"Personal details"}};function N(e,t){if(1&e&&c.\u0275\u0275elementContainer(0,26),2&e){c.\u0275\u0275nextContext();var n=c.\u0275\u0275reference(68);c.\u0275\u0275property("ngTemplateOutlet",n)("ngTemplateOutletContext",c.\u0275\u0275pureFunction0(2,A))}}function L(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"span",23),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate(n.opalAccount.profile.address.address1)}}function R(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"span",23),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate(n.opalAccount.profile.address.address2)}}function j(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"span",23),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate(n.opalAccount.profile.address.suburb)}}function F(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"span",23),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate(n.opalAccount.profile.address.state)}}function V(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"span",23),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate1("",n.opalAccount.profile.address.postcode," ")}}function D(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"span",23),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate(n.opalAccount.profile.address.country)}}function B(e,t){1&e&&(c.\u0275\u0275elementStart(0,"tni-form-message",24),c.\u0275\u0275text(1," Something went wrong and we can't process your request. Please try again. "),c.\u0275\u0275elementEnd())}function U(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"address-form",27),c.\u0275\u0275listener("submitAddress",function(e){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext().submit(e)}),c.\u0275\u0275elementEnd()}if(2&e){var o=c.\u0275\u0275nextContext();c.\u0275\u0275propertyInterpolate("showCopyToDelivery",!0),c.\u0275\u0275property("group",o.addressForm)}}var X=function(){return{type:"Address"}};function z(e,t){if(1&e&&c.\u0275\u0275elementContainer(0,26),2&e){c.\u0275\u0275nextContext();var n=c.\u0275\u0275reference(68);c.\u0275\u0275property("ngTemplateOutlet",n)("ngTemplateOutletContext",c.\u0275\u0275pureFunction0(2,X))}}function q(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"span",23),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate(n.opalAccount.profile.deliveryAddress.address1)}}function H(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"span",23),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate(n.opalAccount.profile.deliveryAddress.address2)}}function K(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"span",23),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate(n.opalAccount.profile.deliveryAddress.suburb)}}function Y(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"span",23),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate(n.opalAccount.profile.deliveryAddress.state)}}function Q(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"span",23),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate1("",n.opalAccount.profile.deliveryAddress.postcode," ")}}function G(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"span",23),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate(n.opalAccount.profile.deliveryAddress.country)}}function W(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"address-form",28),c.\u0275\u0275listener("submitAddress",function(e){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext().submit(e)}),c.\u0275\u0275elementEnd()}if(2&e){var o=c.\u0275\u0275nextContext();c.\u0275\u0275property("group",o.deliveryAddressForm)}}var J=function(){return{type:"Delivery address"}};function Z(e,t){if(1&e&&c.\u0275\u0275elementContainer(0,26),2&e){c.\u0275\u0275nextContext();var n=c.\u0275\u0275reference(68);c.\u0275\u0275property("ngTemplateOutlet",n)("ngTemplateOutletContext",c.\u0275\u0275pureFunction0(2,J))}}function $(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",29),c.\u0275\u0275element(1,"tni-icon",30),c.\u0275\u0275elementStart(2,"p"),c.\u0275\u0275text(3),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"button",31),c.\u0275\u0275listener("click",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext().showInitialState()}),c.\u0275\u0275text(5,"OK"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()}if(2&e){var o=t.type;c.\u0275\u0275advance(3),c.\u0275\u0275textInterpolate1("",o," updated")}}function ee(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"tni-modal",32),c.\u0275\u0275listener("closeEvent",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext().showConfirmationPanel=!1}),c.\u0275\u0275elementStart(1,"div",33),c.\u0275\u0275elementStart(2,"h3"),c.\u0275\u0275text(3,"Are you sure?"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"p"),c.\u0275\u0275text(5," You have unsaved changes. If you leave without saving, your changes will be lost. Are you sure you want to leave this page? "),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(6,"div",34),c.\u0275\u0275elementStart(7,"button",35),c.\u0275\u0275listener("click",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext().skipUnsavedChanges()}),c.\u0275\u0275text(8,"Yes"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(9,"button",36),c.\u0275\u0275listener("click",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext().showConfirmationPanel=!1}),c.\u0275\u0275text(10,"Cancel"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()}if(2&e){var o=c.\u0275\u0275nextContext();c.\u0275\u0275property("closeAtBottomRightLayout",!1)("ariaLabel","Are you sure?")("openingElement",o.focusableButton)("noCloseButton",!1)}}t.ProfileDetailsComponent=function(){function e(e,t,n,r,i,a,c,s){this.fb=e,this.profileService=t,this.datePipe=n,this.featureToggleService=r,this.loaderService=i,this.formValidationService=a,this.tniPanelRefreshService=c,this.scrollService=s,this.updateProfile=new o.EventEmitter,this.showConfirmChangeModal=!1,this.confirmEvent$=new o.EventEmitter,this.hasEditProfileFeature=!1,this.showbackupLink=!1,this.serviceError=!1,this.isFormChanged=!1,this.showConfirmationPanel=!1}return e.prototype.ngOnChanges=function(e){this.setUpForm()},e.prototype.ngOnInit=function(){this.setUpForm()},e.prototype.setUpForm=function(){var e=this,t=this.opalAccount.profile.dateOfBirth?new Date(this.opalAccount.profile.dateOfBirth):null;t=t?this.datePipe.transform(t.getTime(),"dd/MM/yyyy").toString():null,this.addressForm=new r.FormGroup({address1:new r.FormControl(this.opalAccount.profile.address.address1,r.Validators.required),address2:new r.FormControl(this.opalAccount.profile.address.address2),country:new r.FormControl(this.opalAccount.profile.address.country,r.Validators.required),postcode:new r.FormControl(this.opalAccount.profile.address.postcode,r.Validators.required),state:new r.FormControl(this.opalAccount.profile.address.state,r.Validators.required),suburb:new r.FormControl(this.opalAccount.profile.address.suburb,r.Validators.required)}),this.deliveryAddressForm=new r.FormGroup({address1:new r.FormControl(this.opalAccount.profile.deliveryAddress.address1,r.Validators.required),address2:new r.FormControl(this.opalAccount.profile.deliveryAddress.address2),suburb:new r.FormControl(this.opalAccount.profile.deliveryAddress.suburb,r.Validators.required),state:new r.FormControl(this.opalAccount.profile.deliveryAddress.state,r.Validators.required),postcode:new r.FormControl(this.opalAccount.profile.deliveryAddress.postcode,r.Validators.required),country:new r.FormControl(this.opalAccount.profile.deliveryAddress.country,r.Validators.required)}),this.form=this.fb.group({profile:new r.FormGroup({firstName:new r.FormControl(this.opalAccount.profile.firstName,r.Validators.required),lastName:new r.FormControl(this.opalAccount.profile.lastName,r.Validators.required),email:new r.FormControl(this.opalAccount.profile.email,[r.Validators.required,r.Validators.pattern(a.TniRegularExpressions.email)]),dateOfBirth:new r.FormControl(t,[r.Validators.pattern(a.TniRegularExpressions.date)]),mobile:new r.FormControl(this.opalAccount.profile.mobile,[r.Validators.required,r.Validators.pattern(a.TniRegularExpressions.phone),r.Validators.maxLength(25)]),telephone:new r.FormControl(this.opalAccount.profile.telephone,[r.Validators.pattern(a.TniRegularExpressions.phone)]),address:this.addressForm,deliveryAddress:this.deliveryAddressForm})}),this.formChangesSubscription$=this.form.statusChanges.subscribe(function(){return e.tniPanelRefreshService.pushPanelRefreshEvent()}),this.initialProfileState=this.form.getRawValue().profile},e.prototype.submit=function(e){var t=this;this.formValidationService.validate(this.addressForm),this.formValidationService.validate(this.deliveryAddressForm),this.form.valid&&(this.serviceError=!1,this.loaderService.display(!0),this.profileData$=this.profileService.postCustomerDetails(this.getPayload(e)).subscribe(function(){t.serviceError=!1,t.showConfirmChangeModal=!0,t.loaderService.display(!1),t.tniPanelRefreshService.pushPanelRefreshEvent(),t.initialProfileState=t.form.getRawValue().profile,setTimeout(function(){t.scrollService.scrollToElementById("success-panel",300)},100),t.updateProfile.emit()},function(){t.loaderService.display(!1),t.tniPanelRefreshService.pushPanelRefreshEvent(),t.serviceError=!0,setTimeout(function(){t.scrollService.smoothScrollFocusToElementById("submit-error",200,1e3)},10)}))},e.prototype.getPayload=function(e){if(e){var t=i.Profile.toRequest(this.form.getRawValue().profile);return t.DeliveryAddress=t.Address,t}return i.Profile.toRequest(this.form.getRawValue().profile)},e.prototype.showInitialState=function(){this.showConfirmChangeModal=!1,this.tniPanelRefreshService.pushPanelRefreshEvent(),this.panelGroup.closeActivePanel()},e.prototype.panelClick=function(e){this.showConfirmChangeModal=!1,this.serviceError=!1,this.compareChanges(e)},e.prototype.compareChanges=function(e){this.isFormChanged=JSON.stringify(this.initialProfileState)!==JSON.stringify(this.form.getRawValue().profile),this.showConfirmationPanel=this.isFormChanged,this.navigateToPanel=this.isFormChanged?e:null},e.prototype.skipUnsavedChanges=function(){this.showConfirmationPanel=!1,this.setUpForm(),this.isFormChanged=!1,this.navigateToPanel?(this.panelGroup.changeActivePanel(this.navigateToPanel),this.navigateToPanel=null):this.panelGroup.closeActivePanel()},e.prototype.ngOnDestroy=function(){this.featureToggle$&&this.featureToggle$.unsubscribe(),this.profileData$&&this.profileData$.unsubscribe(),this.formChangesSubscription$&&this.formChangesSubscription$.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(c.\u0275\u0275directiveInject(s.FormBuilder),c.\u0275\u0275directiveInject(l.ProfileService),c.\u0275\u0275directiveInject(d.DatePipe),c.\u0275\u0275directiveInject(p.FeatureToggleService),c.\u0275\u0275directiveInject(u.LoaderService),c.\u0275\u0275directiveInject(m.FormValidationService),c.\u0275\u0275directiveInject(f.TniPanelRefreshService),c.\u0275\u0275directiveInject(g.ScrollService))},e.\u0275cmp=c.\u0275\u0275defineComponent({type:e,selectors:[["tni-profile-details"]],viewQuery:function(e,t){if(1&e&&(c.\u0275\u0275viewQuery(P,!0),c.\u0275\u0275viewQuery(O,!0)),2&e){var n=void 0;c.\u0275\u0275queryRefresh(n=c.\u0275\u0275loadQuery())&&(t.success=n.first),c.\u0275\u0275queryRefresh(n=c.\u0275\u0275loadQuery())&&(t.panelGroup=n.first)}},inputs:{opalAccount:"opalAccount"},outputs:{updateProfile:"updateProfile"},features:[c.\u0275\u0275NgOnChangesFeature],decls:70,vars:35,consts:[[1,"profile-details"],[1,"container"],[1,"row"],[3,"isChanged"],["panelGroup",""],["targetsPanel","panel1","navId","panelNav1",3,"isDisabled","active","click"],[1,"profile-details__panel"],[1,"profile-details__panel-edit"],[1,"profile-details__panel-nav-heading"],["class","data-value",4,"ngIf"],["panelId","panel1","targetedBy","panelNav1",3,"active","closePanel"],["class","col-md-12 submit-error","id","submit-error",4,"ngIf"],[1,"profile-details__panel-heading"],[3,"group","submitPersonalDetails",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngIf"],["targetsPanel","panel2","navId","panelNav2",3,"active","isDisabled","click"],["panelId","panel2","targetedBy","panelNav2",3,"active","closePanel"],["title","Address",3,"group","showCopyToDelivery","submitAddress",4,"ngIf"],["targetsPanel","panel3","navId","panelNav3",3,"active","isDisabled","click"],["panelId","panel3","targetedBy","panelNav3",3,"active","closePanel"],["title","Delivery Address",3,"group","submitAddress",4,"ngIf"],["success",""],["noCloseButton","true",3,"closeAtBottomRightLayout","ariaLabel","openingElement","noCloseButton","closeEvent",4,"ngIf"],[1,"data-value"],["id","submit-error",1,"col-md-12","submit-error"],[3,"group","submitPersonalDetails"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["title","Address",3,"group","showCopyToDelivery","submitAddress"],["title","Delivery Address",3,"group","submitAddress"],["id","success-panel",1,"success-panel"],["iconName","success","iconClasses","xl","iconAriaHidden","true","iconHidden","false",1,"submit__success__icon"],[1,"btn","btn-sm","btn-primary","next-btn","btn-done",3,"click"],["noCloseButton","true",3,"closeAtBottomRightLayout","ariaLabel","openingElement","noCloseButton","closeEvent"],[1,"are-you-sure-modal"],[1,"are-you-sure__actions"],[1,"continue-btn",3,"click"],[1,"cancel-btn",3,"click"]],template:function(e,t){1&e&&(c.\u0275\u0275elementStart(0,"div",0),c.\u0275\u0275elementStart(1,"div",1),c.\u0275\u0275elementStart(2,"div",2),c.\u0275\u0275elementStart(3,"tni-panel-group",3,4),c.\u0275\u0275elementStart(5,"tni-panel-nav",5),c.\u0275\u0275listener("click",function(){return t.panelClick("panel1")}),c.\u0275\u0275elementStart(6,"div",6),c.\u0275\u0275elementStart(7,"span",7),c.\u0275\u0275text(8,"Edit"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(9,"h3",8),c.\u0275\u0275text(10,"Personal details"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(11,"div"),c.\u0275\u0275template(12,S,2,1,"span",9),c.\u0275\u0275template(13,w,2,1,"span",9),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(14,"div"),c.\u0275\u0275template(15,k,2,1,"span",9),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(16,"div"),c.\u0275\u0275template(17,E,2,1,"span",9),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(18,"tni-panel",10),c.\u0275\u0275listener("closePanel",function(){return t.compareChanges()}),c.\u0275\u0275template(19,T,2,0,"tni-form-message",11),c.\u0275\u0275elementStart(20,"h3",12),c.\u0275\u0275text(21,"Personal details"),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(22,I,1,1,"personal-details",13),c.\u0275\u0275template(23,N,1,3,"ng-container",14),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(24,"tni-panel-nav",15),c.\u0275\u0275listener("click",function(){return t.panelClick("panel2")}),c.\u0275\u0275elementStart(25,"div",6),c.\u0275\u0275elementStart(26,"span",7),c.\u0275\u0275text(27,"Edit"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(28,"h3",8),c.\u0275\u0275text(29,"Address"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(30,"div"),c.\u0275\u0275template(31,L,2,1,"span",9),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(32,"div"),c.\u0275\u0275template(33,R,2,1,"span",9),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(34,"div"),c.\u0275\u0275template(35,j,2,1,"span",9),c.\u0275\u0275template(36,F,2,1,"span",9),c.\u0275\u0275template(37,V,2,1,"span",9),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(38,"div"),c.\u0275\u0275template(39,D,2,1,"span",9),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(40,"tni-panel",16),c.\u0275\u0275listener("closePanel",function(){return t.compareChanges()}),c.\u0275\u0275template(41,B,2,0,"tni-form-message",11),c.\u0275\u0275elementStart(42,"h3",12),c.\u0275\u0275text(43,"Address"),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(44,U,1,2,"address-form",17),c.\u0275\u0275template(45,z,1,3,"ng-container",14),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(46,"tni-panel-nav",18),c.\u0275\u0275listener("click",function(){return t.panelClick("panel3")}),c.\u0275\u0275elementStart(47,"div",6),c.\u0275\u0275elementStart(48,"span",7),c.\u0275\u0275text(49,"Edit"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(50,"h3",8),c.\u0275\u0275text(51,"Delivery address"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(52,"div"),c.\u0275\u0275template(53,q,2,1,"span",9),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(54,"div"),c.\u0275\u0275template(55,H,2,1,"span",9),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(56,"div"),c.\u0275\u0275template(57,K,2,1,"span",9),c.\u0275\u0275template(58,Y,2,1,"span",9),c.\u0275\u0275template(59,Q,2,1,"span",9),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(60,"div"),c.\u0275\u0275template(61,G,2,1,"span",9),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(62,"tni-panel",19),c.\u0275\u0275listener("closePanel",function(){return t.compareChanges()}),c.\u0275\u0275elementStart(63,"h3",12),c.\u0275\u0275text(64,"Delivery address"),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(65,W,1,1,"address-form",20),c.\u0275\u0275template(66,Z,1,3,"ng-container",14),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(67,$,6,1,"ng-template",null,21,c.\u0275\u0275templateRefExtractor),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(69,ee,11,4,"tni-modal",22),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()),2&e&&(c.\u0275\u0275advance(3),c.\u0275\u0275property("isChanged",t.isFormChanged),c.\u0275\u0275advance(2),c.\u0275\u0275property("isDisabled",!1)("active",!1),c.\u0275\u0275advance(7),c.\u0275\u0275property("ngIf",t.opalAccount.profile.firstName),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",t.opalAccount.profile.lastName),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",t.opalAccount.profile.mobile),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",t.opalAccount.profile.email),c.\u0275\u0275advance(1),c.\u0275\u0275property("active",!1),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",t.serviceError),c.\u0275\u0275advance(3),c.\u0275\u0275property("ngIf",!t.showConfirmChangeModal),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",t.showConfirmChangeModal),c.\u0275\u0275advance(1),c.\u0275\u0275property("active",!1)("isDisabled",!1),c.\u0275\u0275advance(7),c.\u0275\u0275property("ngIf",t.opalAccount.profile.address.address1),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",t.opalAccount.profile.address.address2),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",t.opalAccount.profile.address.suburb),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",t.opalAccount.profile.address.state),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",t.opalAccount.profile.address.postcode),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",t.opalAccount.profile.address.country),c.\u0275\u0275advance(1),c.\u0275\u0275property("active",!1),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",t.serviceError),c.\u0275\u0275advance(3),c.\u0275\u0275property("ngIf",!t.showConfirmChangeModal),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",t.showConfirmChangeModal),c.\u0275\u0275advance(1),c.\u0275\u0275property("active",!1)("isDisabled",!1),c.\u0275\u0275advance(7),c.\u0275\u0275property("ngIf",t.opalAccount.profile.deliveryAddress.address1),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",t.opalAccount.profile.deliveryAddress.address2),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",t.opalAccount.profile.deliveryAddress.suburb),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",t.opalAccount.profile.deliveryAddress.state),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",t.opalAccount.profile.deliveryAddress.postcode),c.\u0275\u0275advance(2),c.\u0275\u0275property("ngIf",t.opalAccount.profile.deliveryAddress.country),c.\u0275\u0275advance(1),c.\u0275\u0275property("active",!1),c.\u0275\u0275advance(3),c.\u0275\u0275property("ngIf",!t.showConfirmChangeModal),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",t.showConfirmChangeModal),c.\u0275\u0275advance(3),c.\u0275\u0275property("ngIf",t.showConfirmationPanel))},directives:[h.TniPanelGroupComponent,v.TniPanelNavComponent,d.NgIf,C.TniPanelComponent,_.TniFormMessageComponent,b.PersonalDetailsComponent,d.NgTemplateOutlet,x.AddressFormComponent,y.IconComponent,M.ModalWindowComponent],styles:['.profile-details__panel[_ngcontent-%COMP%]{padding:23px;text-align:left;font-size:16px;color:#373636}.profile-details__panel[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{word-break:break-all}.profile-details__panel-edit[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;border:1px solid #dbdbdb;border-radius:4px;padding:5px 10px;line-height:1.2em;color:#1d69b4;text-transform:uppercase;font-weight:600;font-size:14px}  .panel-group__link--active .profile-details__panel-edit{display:none}.profile-details__panel-nav-heading[_ngcontent-%COMP%]{font-size:12px;margin:0 0 10px}.profile-details__panel-heading[_ngcontent-%COMP%]{font-size:24px;margin:0 0 24px 15px;font-weight:300;position:static}.profile-details__confirm-modal[_ngcontent-%COMP%]{text-align:center;width:100%}@media (min-width:768px){.profile-details__confirm-modal[_ngcontent-%COMP%]{width:400px;margin:50px auto 0}}.profile-details__confirm-modal__icon[_ngcontent-%COMP%]{margin:0 0 16px;color:#1d69b4}.profile-details__confirm-modal__heading[_ngcontent-%COMP%]{margin:0 0 16px}.profile-details__confirm-modal__text[_ngcontent-%COMP%]{margin-bottom:40px}.profile-details__confirm-modal__confirmed-btn[_ngcontent-%COMP%]{border-radius:4px;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;max-width:270px;background-color:#1d69b4;border:0 solid #195c9e;color:#fff;display:block;margin:0 auto;width:100%}.profile-details__confirm-modal__confirmed-btn[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.profile-details__confirm-modal__confirmed-btn[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .profile-details__confirm-modal__confirmed-btn[_ngcontent-%COMP%]{margin-top:10px}.profile-details__confirm-modal__cancel-btn[_ngcontent-%COMP%]{border-radius:4px;border:0 solid transparent;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;max-width:270px;background:transparent;display:block;width:100%;margin-bottom:10px}.profile-details__confirm-modal__cancel-btn[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.profile-details__confirm-modal__cancel-btn[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .profile-details__confirm-modal__cancel-btn[_ngcontent-%COMP%]{margin-top:10px}@media (min-width:768px){.profile-details__confirm-modal__cancel-btn[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto}}.profile-details__adding-more-features[_ngcontent-%COMP%]{padding:20px;text-align:left;font-size:16px;color:#373636}.profile-details__adding-more-features[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:0}.app-badge-group[_ngcontent-%COMP%]{margin-top:20px}.profile-details__confirm-modal__actions[_ngcontent-%COMP%]{width:270px;margin:0 auto}.success-panel[_ngcontent-%COMP%]{text-align:center}.success-panel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:60%}.submit-error[_ngcontent-%COMP%]{margin-bottom:20px}.are-you-sure-modal[_ngcontent-%COMP%]{text-align:center}.are-you-sure-modal[_ngcontent-%COMP%]   .are-you-sure__actions[_ngcontent-%COMP%]   .continue-btn[_ngcontent-%COMP%]{border-radius:4px;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;max-width:270px;background-color:#1d69b4;border:0 solid #195c9e;color:#fff;margin-top:26px;width:100%}.are-you-sure-modal[_ngcontent-%COMP%]   .are-you-sure__actions[_ngcontent-%COMP%]   .continue-btn[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.are-you-sure-modal[_ngcontent-%COMP%]   .are-you-sure__actions[_ngcontent-%COMP%]   .continue-btn[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .are-you-sure-modal[_ngcontent-%COMP%]   .are-you-sure__actions[_ngcontent-%COMP%]   .continue-btn[_ngcontent-%COMP%]{margin-top:10px}@media (min-width:992px){.are-you-sure-modal[_ngcontent-%COMP%]   .are-you-sure__actions[_ngcontent-%COMP%]   .continue-btn[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;max-width:270px}}.are-you-sure-modal[_ngcontent-%COMP%]   .are-you-sure__actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{border-radius:4px;border:0 solid transparent;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background:transparent;margin-top:12px}.are-you-sure-modal[_ngcontent-%COMP%]   .are-you-sure__actions[_ngcontent-%COMP%]   .cancel-btn[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.are-you-sure-modal[_ngcontent-%COMP%]   .are-you-sure__actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .are-you-sure-modal[_ngcontent-%COMP%]   .are-you-sure__actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{margin-top:10px}.data-value[_ngcontent-%COMP%]{padding-right:5px}']}),e}()},SC3b:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Smartcard=void 0,t.Smartcard=function(){function e(){}return e.fromResponse=function(t){var n=new e;return n.pendingBalanceActivation=t.PendingBalanceActivation,n.lastSeenDate=new Date(t.LastSeenDateTime),n.cardExpiryDate=new Date(t.CardExpiryDate),n.autoLoadAmount=t.AutoLoadAmount,n.autoLocadThreshHold=t.AutoLoadThreshold,n.smartcardId=t.SmartcardId,n.svPending=t.SVPending,n.svBalance=t.SVBalance,n.cardTypeDescription=t.CardTypeDescription,n.cardState=t.CardState,n.fouCount=t.FOUCount,n.cardTypeCode=t.CardTypeCode,n.cardNickName=t.CardNickName,n.cardTypeDescriptionTni=this.getTypeDescriptionForTypeCode(t.CardTypeCode),n.registered=!1!==t.IsRegistered,n.weeklyRewardAchieved=t.FOUCount>=8,n.weeklyRewardUsed=t.FOUCount>8,n.svMax=this.getMaxBalanceByTypeCode(n.cardTypeCode),n},e.compare=function(t,n){return e.statusOrder(t)!==e.statusOrder(n)?e.statusOrder(t)-e.statusOrder(n):t.smartcardId-n.smartcardId},e.getMaxBalanceByTypeCode=function(e){switch(e){case 1:case 3:return 250;case 2:case 4:return 150}},e.getTypeDescriptionForTypeCode=function(e){switch(e){case 1:return"Adult";case 2:return"Concession";case 3:return"Senior/Pensioner";case 4:return"Child/Youth"}},e.statusOrder=function(e){return e.isActive?10:e.isCancelled?20:e.isBlocked?30:1e3},Object.defineProperty(e.prototype,"isBlocked",{get:function(){var e=new Set(["BLOCKED","HOTLISTED"]);return!!this.cardState&&e.has(this.cardState)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCancelled",{get:function(){var e=new Set(["LOST","STOLEN","DAMAGED","DEFECTIVE","CANCELLED","INACTIVE","INITIALISED"]);return!!this.cardState&&e.has(this.cardState)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isActive",{get:function(){var e=new Set(["ACTIVE","ENABLED","ISSUED","DEHOTLISTED"]);return!!this.cardState&&e.has(this.cardState)},enumerable:!1,configurable:!0}),e.prototype.isConcessionSeniorPensioner=function(){return 2===this.cardTypeCode||3===this.cardTypeCode},e}()},SPMH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniPanelComponent=void 0;var o=n("fXoL"),r=n("R0Ic"),i=(n("0ywJ"),n("fXoL")),a=n("0ywJ"),c=n("ofXK"),s=["panelEl"];function l(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"div",1,2),i.\u0275\u0275elementStart(3,"div",3),i.\u0275\u0275elementStart(4,"button",4),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().handleCloseBtnClick()}),i.\u0275\u0275elementStart(5,"span",5),i.\u0275\u0275text(6,"close"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"span",6),i.\u0275\u0275text(8,"\xd7"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"div",7),i.\u0275\u0275projection(10),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()}if(2&e){var o=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("panel-group__panel-container--active",o.active),i.\u0275\u0275property("@panelActive",o.active)("id",o.panelId),i.\u0275\u0275attribute("labelledby",o.targetedBy)}}var d=["*"];t.TniPanelComponent=function(){function e(e){this.panelRefreshService=e,this.closePanel=new o.EventEmitter}return e.prototype.ngOnChanges=function(e){e.active&&this.panelRefreshService.pushPanelRefreshEvent()},e.prototype.handleCloseBtnClick=function(){this.closePanel.emit()},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(a.TniPanelRefreshService))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tni-panel"]],viewQuery:function(e,t){var n;1&e&&i.\u0275\u0275viewQuery(s,!0),2&e&&i.\u0275\u0275queryRefresh(n=i.\u0275\u0275loadQuery())&&(t.panelEl=n.first)},inputs:{panelId:"panelId",targetedBy:"targetedBy",active:"active"},outputs:{closePanel:"closePanel"},features:[i.\u0275\u0275NgOnChangesFeature],ngContentSelectors:d,decls:1,vars:1,consts:[[4,"ngIf"],["role","region",1,"panel-group__panel-container","col-sm-8",3,"id"],["panelEl",""],[1,"panel-group__panel"],[1,"panel-group__close-btn",3,"click"],[1,"sr-only"],["aria-hidden","true"],[1,"panel-group__panel-content"]],template:function(e,t){1&e&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275template(0,l,11,5,"ng-container",0)),2&e&&i.\u0275\u0275property("ngIf",t.active)},directives:[c.NgIf],styles:[".panel-group__panel-container[_ngcontent-%COMP%]{display:none;position:absolute;top:0;right:0}.panel-group__panel-container--active[_ngcontent-%COMP%]{display:block}@media (max-width:767px){.panel-group__panel-container[_ngcontent-%COMP%]{padding:0 10px;width:100%}}.panel-group__panel[_ngcontent-%COMP%]{position:relative;background:#fff;box-shadow:0 2px 3px 0 rgba(0,0,0,.2);border-radius:4px;padding:40px 16px 48px}@media (max-width:767px){.panel-group__panel[_ngcontent-%COMP%]{padding:32px 16px 48px}}.panel-group__close-btn[_ngcontent-%COMP%]{border:0;background:transparent;position:absolute;top:16px;right:16px;padding:0;font-size:25px}@media (max-width:767px){.panel-group__close-btn[_ngcontent-%COMP%]{display:block}}.panel-group__panel-content[_ngcontent-%COMP%]{max-width:430px;margin:0 auto}@media (min-width:992px){.panel-group__panel-content[_ngcontent-%COMP%]{max-width:450px}}"],data:{animation:[r.trigger("panelActive",[r.state("1",r.style({position:"absolute",top:0,opacity:1})),r.state("0",r.style({opacity:0})),r.transition("1 => 0",r.animate("200ms ease-out")),r.transition("0 => 1",r.animate("200ms ease-out")),r.transition("void => 1",[r.style({position:"absolute",top:30,opacity:0}),r.animate("200ms 200ms ease-out")]),r.transition("1 => void",r.animate("200ms ease-out",r.style({opacity:0})))])]}}),e}()},"SuK/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ForgotPasswordComponent=t.ForgotPasswordFieldsEnum=void 0;var o=n("kU1M"),r=(n("fXoL"),n("3Pt+"),n("2QCD"),n("74Ue"),n("puoa"),n("jGKr"),n("NRRr"),n("YORH"),n("fXoL")),i=n("2QCD"),a=n("jGKr"),c=n("puoa"),s=n("74Ue"),l=n("NRRr"),d=n("YORH"),p=n("E2dh"),u=n("DRCh"),m=n("ofXK"),f=n("3Pt+"),g=n("09AV"),h=n("obkt"),v=["opalCardLoginForm"],C=["secretQaForm"];function _(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",31),r.\u0275\u0275namespaceSVG(),r.\u0275\u0275elementStart(1,"svg",32),r.\u0275\u0275element(2,"use",33),r.\u0275\u0275elementEnd(),r.\u0275\u0275namespaceHTML(),r.\u0275\u0275elementStart(3,"span",34),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){var n=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(n.responseError)}}function b(e,t){if(1&e){var n=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",5),r.\u0275\u0275elementStart(1,"div",6),r.\u0275\u0275elementStart(2,"h2",7),r.\u0275\u0275text(3,"Forgot password"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",8),r.\u0275\u0275elementStart(5,"div",9),r.\u0275\u0275element(6,"img",10),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(7,_,5,1,"div",11),r.\u0275\u0275elementStart(8,"form",12,13),r.\u0275\u0275elementStart(10,"div",14),r.\u0275\u0275elementStart(11,"div",15),r.\u0275\u0275elementStart(12,"div",16),r.\u0275\u0275elementStart(13,"div",17),r.\u0275\u0275text(14," Card number "),r.\u0275\u0275elementStart(15,"span",18),r.\u0275\u0275text(16,"*"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(17,"card-number",19,20),r.\u0275\u0275listener("ngModelChange",function(e){return r.\u0275\u0275restoreView(n),r.\u0275\u0275nextContext().model.cardNumber=e})("onBlur",function(){r.\u0275\u0275restoreView(n);var e=r.\u0275\u0275nextContext();return e.onBlur(e.ForgotPasswordFieldsEnum.cardNumber)})("keyDownCardNumber",function(e){return r.\u0275\u0275restoreView(n),r.\u0275\u0275nextContext().keyDownCardNumber(e)})("onFocus",function(){r.\u0275\u0275restoreView(n);var e=r.\u0275\u0275nextContext();return e.onFocus(e.ForgotPasswordFieldsEnum.cardNumber)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(19,"div",21),r.\u0275\u0275text(20,"A 16 digit card number is required."),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(21,"div",15),r.\u0275\u0275elementStart(22,"div",22),r.\u0275\u0275elementStart(23,"div",17),r.\u0275\u0275text(24," Security code "),r.\u0275\u0275elementStart(25,"span",18),r.\u0275\u0275text(26,"*"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(27,"card-code",23,24),r.\u0275\u0275listener("ngModelChange",function(e){return r.\u0275\u0275restoreView(n),r.\u0275\u0275nextContext().model.cardCode=e})("onBlur",function(){r.\u0275\u0275restoreView(n);var e=r.\u0275\u0275nextContext();return e.onBlur(e.ForgotPasswordFieldsEnum.cardCode)})("onFocus",function(){r.\u0275\u0275restoreView(n);var e=r.\u0275\u0275nextContext();return e.onFocus(e.ForgotPasswordFieldsEnum.cardCode)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(29,"div",21),r.\u0275\u0275text(30,"A 4 digit security code is required."),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(31,"div",15),r.\u0275\u0275elementStart(32,"div",25),r.\u0275\u0275elementStart(33,"div",17),r.\u0275\u0275text(34," Username "),r.\u0275\u0275elementStart(35,"span",18),r.\u0275\u0275text(36,"*"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(37,"input",26,27),r.\u0275\u0275listener("ngModelChange",function(e){return r.\u0275\u0275restoreView(n),r.\u0275\u0275nextContext().model.userName=e})("focus",function(){r.\u0275\u0275restoreView(n);var e=r.\u0275\u0275nextContext();return e.onFocus(e.ForgotPasswordFieldsEnum.userName)})("blur",function(){r.\u0275\u0275restoreView(n);var e=r.\u0275\u0275nextContext();return e.onBlur(e.ForgotPasswordFieldsEnum.userName)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(39,"div",21),r.\u0275\u0275text(40,"A username is required."),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(41,"div",28),r.\u0275\u0275elementStart(42,"button",29),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(n),r.\u0275\u0275nextContext().validateCard()}),r.\u0275\u0275pipe(43,"async"),r.\u0275\u0275text(44),r.\u0275\u0275pipe(45,"async"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(46,"button",30),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(n),r.\u0275\u0275nextContext().onCancel()}),r.\u0275\u0275text(47,"Cancel"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&e){var o=r.\u0275\u0275reference(18),i=r.\u0275\u0275reference(28),a=r.\u0275\u0275reference(38),c=r.\u0275\u0275nextContext();r.\u0275\u0275advance(7),r.\u0275\u0275property("ngIf",c.responseError),r.\u0275\u0275advance(5),r.\u0275\u0275classProp("error",o.dirty&&o.invalid)("onFocus",c.inputFocus.cardNumber)("hasValue",!!c.model.cardNumber),r.\u0275\u0275advance(5),r.\u0275\u0275propertyInterpolate("errorMessage",o.dirty&&o.invalid),r.\u0275\u0275property("ngModel",c.model.cardNumber),r.\u0275\u0275advance(5),r.\u0275\u0275classProp("error",i.dirty&&i.invalid)("onFocus",c.inputFocus.cardCode)("hasValue",!!c.model.cardCode),r.\u0275\u0275advance(5),r.\u0275\u0275propertyInterpolate("errorMessage",i.dirty&&i.invalid),r.\u0275\u0275property("ngModel",c.model.cardCode),r.\u0275\u0275advance(5),r.\u0275\u0275classProp("error",a.dirty&&a.invalid)("onFocus",c.inputFocus.userName)("hasValue",!!c.model.userName),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngModel",c.model.userName),r.\u0275\u0275advance(5),r.\u0275\u0275property("disabled",r.\u0275\u0275pipeBind1(43,26,c.isLoadingData)),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind1(45,28,c.isLoadingData)?"Verifying...":"Next"," ")}}function x(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",31),r.\u0275\u0275namespaceSVG(),r.\u0275\u0275elementStart(1,"svg",32),r.\u0275\u0275element(2,"use",33),r.\u0275\u0275elementEnd(),r.\u0275\u0275namespaceHTML(),r.\u0275\u0275elementStart(3,"span",34),r.\u0275\u0275text(4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e){var n=r.\u0275\u0275nextContext(2);r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(n.responseError)}}function y(e,t){if(1&e){var n=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",35),r.\u0275\u0275elementStart(1,"div",6),r.\u0275\u0275elementStart(2,"h2",7),r.\u0275\u0275text(3,"Reset password"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"div",8),r.\u0275\u0275elementStart(5,"form",12,36),r.\u0275\u0275template(7,x,5,1,"div",11),r.\u0275\u0275elementStart(8,"div",14),r.\u0275\u0275elementStart(9,"div",15),r.\u0275\u0275elementStart(10,"div",25),r.\u0275\u0275elementStart(11,"div",17),r.\u0275\u0275text(12),r.\u0275\u0275elementStart(13,"span",18),r.\u0275\u0275text(14,"*"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(15,"input",37,38),r.\u0275\u0275listener("ngModelChange",function(e){return r.\u0275\u0275restoreView(n),r.\u0275\u0275nextContext().model.secretAnswer=e})("focus",function(){r.\u0275\u0275restoreView(n);var e=r.\u0275\u0275nextContext();return e.onFocus(e.ForgotPasswordFieldsEnum.secretAnswer)})("blur",function(){r.\u0275\u0275restoreView(n);var e=r.\u0275\u0275nextContext();return e.onBlur(e.ForgotPasswordFieldsEnum.secretAnswer)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(17,"div",21),r.\u0275\u0275text(18,"Security question answer required."),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(19,"div",39),r.\u0275\u0275text(20," Password must contain: "),r.\u0275\u0275elementStart(21,"ul",40),r.\u0275\u0275elementStart(22,"li"),r.\u0275\u0275text(23,"Minimum of 8 characters"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(24,"li"),r.\u0275\u0275text(25,"1 upper case letter"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(26,"li"),r.\u0275\u0275text(27,"1 number"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(28,"div",15),r.\u0275\u0275elementStart(29,"div",25),r.\u0275\u0275elementStart(30,"div",17),r.\u0275\u0275text(31," New password "),r.\u0275\u0275elementStart(32,"span",18),r.\u0275\u0275text(33,"*"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(34,"input",41,42),r.\u0275\u0275listener("ngModelChange",function(e){return r.\u0275\u0275restoreView(n),r.\u0275\u0275nextContext().model.newPassword=e})("focus",function(){r.\u0275\u0275restoreView(n);var e=r.\u0275\u0275nextContext();return e.onFocus(e.ForgotPasswordFieldsEnum.newPassword)})("blur",function(){r.\u0275\u0275restoreView(n);var e=r.\u0275\u0275nextContext();return e.onBlur(e.ForgotPasswordFieldsEnum.newPassword)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(36,"div",21),r.\u0275\u0275text(37,"Required."),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(38,"div",15),r.\u0275\u0275elementStart(39,"div",25),r.\u0275\u0275elementStart(40,"div",17),r.\u0275\u0275text(41," Confirm password "),r.\u0275\u0275elementStart(42,"span",18),r.\u0275\u0275text(43,"*"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(44,"input",43,44),r.\u0275\u0275listener("ngModelChange",function(e){return r.\u0275\u0275restoreView(n),r.\u0275\u0275nextContext().model.confirmPassword=e})("focus",function(){r.\u0275\u0275restoreView(n);var e=r.\u0275\u0275nextContext();return e.onFocus(e.ForgotPasswordFieldsEnum.confirmPassword)})("blur",function(){r.\u0275\u0275restoreView(n);var e=r.\u0275\u0275nextContext();return e.onBlur(e.ForgotPasswordFieldsEnum.confirmPassword)}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(46,"div",21),r.\u0275\u0275text(47,"Required."),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(48,"div",28),r.\u0275\u0275elementStart(49,"button",45),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(n),r.\u0275\u0275nextContext().changePassword()}),r.\u0275\u0275pipe(50,"async"),r.\u0275\u0275text(51),r.\u0275\u0275pipe(52,"async"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(53,"button",30),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(n),r.\u0275\u0275nextContext().onCancel()}),r.\u0275\u0275text(54,"Cancel"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&e){var o=r.\u0275\u0275reference(16),i=r.\u0275\u0275reference(35),a=r.\u0275\u0275reference(45),c=r.\u0275\u0275nextContext();r.\u0275\u0275advance(7),r.\u0275\u0275property("ngIf",c.responseError),r.\u0275\u0275advance(3),r.\u0275\u0275classProp("error",o.dirty&&o.invalid)("onFocus",c.inputFocus.secretAnswer)("hasValue",!!c.model.secretAnswer),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",c.model.secretQuestion," "),r.\u0275\u0275advance(3),r.\u0275\u0275property("ngModel",c.model.secretAnswer),r.\u0275\u0275advance(14),r.\u0275\u0275classProp("error",i.dirty&&i.invalid)("onFocus",c.inputFocus.newPassword)("hasValue",!!c.model.newPassword),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngModel",c.model.newPassword),r.\u0275\u0275advance(5),r.\u0275\u0275classProp("error",a.dirty&&a.invalid)("onFocus",c.inputFocus.confirmPassword)("hasValue",!!c.model.confirmPassword),r.\u0275\u0275advance(5),r.\u0275\u0275property("ngModel",c.model.confirmPassword),r.\u0275\u0275advance(5),r.\u0275\u0275property("disabled",r.\u0275\u0275pipeBind1(50,25,c.isLoadingData)),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind1(52,27,c.isLoadingData)?"Resetting password...":"Set new password"," ")}}function M(e,t){if(1&e){var n=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",46),r.\u0275\u0275elementStart(1,"div",47),r.\u0275\u0275namespaceSVG(),r.\u0275\u0275elementStart(2,"svg",48),r.\u0275\u0275element(3,"use",49),r.\u0275\u0275elementEnd(),r.\u0275\u0275namespaceHTML(),r.\u0275\u0275elementStart(4,"h2",50),r.\u0275\u0275text(5,"Password updated"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(6,"button",51),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(n),r.\u0275\u0275nextContext().redirectToLogin()}),r.\u0275\u0275text(7," Back to log In "),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}}var P=t.ForgotPasswordFieldsEnum=function(e){return e[e.cardNumber=1]="cardNumber",e[e.cardCode=2]="cardCode",e[e.userName=3]="userName",e[e.secretAnswer=4]="secretAnswer",e[e.newPassword=5]="newPassword",e[e.confirmPassword=6]="confirmPassword",e}(t.ForgotPasswordFieldsEnum||{});t.ForgotPasswordComponent=function(){function e(e,t,n,o,r,i){this.secretQaService=e,this.opalSessionStore=t,this.windowRef=n,this.formValidationService=o,this.loaderService=r,this.trackOpalEventService=i,this.state={validateCardUser:!0,secretQa:!1,token:null,success:!1},this.responseError=null,this.ForgotPasswordFieldsEnum=P,this.success=!1,this.opalPasswordRegEx=/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}.*$/,this.secretQuestions=[],this.initForm()}return e.prototype.ngOnInit=function(){var e=this;this.secretQaService.list().subscribe(function(t){e.secretQuestions=t}),this.isLoadingData=this.loaderService.status},e.prototype.initForm=function(){this.model={cardNumber:null,cardCode:null,userName:null,secretQuestion:null,newPassword:null,confirmPassword:null,secretAnswer:null},this.inputFocus={cardNumber:!1,cardCode:!1,userName:!1,secretAnswer:!1,newPassword:!1,confirmPassword:!1}},e.prototype.getQuesionDescriptionByCode=function(e){var t=this.secretQuestions.findIndex(function(t){return t.code===e});if(t>-1)return this.secretQuestions[t].question},e.prototype.onFocus=function(e){this.inputFocus[P[e]]=!0},e.prototype.keyDownCardNumber=function(e){this.model.cardNumber=e},e.prototype.onBlur=function(e){this.inputFocus[P[e]]=!1},e.prototype.validateCard=function(){var e=this;this.formValidationService.validate(this.opalCardLoginForm),this.opalCardLoginForm.invalid||(this.loaderService.display(!0),this.responseError=null,this.secretQaService.getSecretQuestion(this.model.cardNumber,this.model.cardCode,this.model.userName).pipe(o.finalize(function(){e.loaderService.display(!1)})).subscribe(function(t){e.state.validateCardUser=!1,e.state.secretQa=!0,e.model.secretQuestionCode=t.question,e.model.secretQuestion=e.getQuesionDescriptionByCode(t.question),e.state.token=t.token},function(t){e.responseError="Opal card number or security code is incorrect, please try again."}))},e.prototype.onCancel=function(){window.history.back()},e.prototype.changePassword=function(){var e=this;if(this.formValidationService.validate(this.secretQaForm),!this.secretQaForm.invalid){if(this.model.newPassword!==this.model.confirmPassword)return this.responseError="New password and confirm password do not match.",!1;if(!this.opalPasswordRegEx.test(this.model.newPassword))return this.responseError="New password must contain at least 8 characters, 1 upper case letter and 1 number.",!1;this.responseError=null,this.loaderService.display(!0),this.secretQaService.changePassword(this.state.token,this.model.userName,this.model.secretQuestionCode,this.model.secretAnswer,this.model.newPassword).pipe(o.finalize(function(){return e.loaderService.display(!1)})).subscribe(function(t){e.state.secretQa=!1,e.state.success=!0,e.trackOpalEventService.setNewPassword()},function(t){e.responseError="The answer to your security question is incorrect, please try again."})}},e.prototype.redirectToLogin=function(){var e=this.opalSessionStore.load();this.windowRef.redirectToUrl(e.loginUrl)},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(i.SecretQaService),r.\u0275\u0275directiveInject(a.OpalSessionStore),r.\u0275\u0275directiveInject(c.WindowRef),r.\u0275\u0275directiveInject(s.FormValidationService),r.\u0275\u0275directiveInject(l.LoaderService),r.\u0275\u0275directiveInject(d.TrackOpalEventService))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tni-forgot-password"]],viewQuery:function(e,t){if(1&e&&(r.\u0275\u0275viewQuery(v,!0),r.\u0275\u0275viewQuery(C,!0)),2&e){var n=void 0;r.\u0275\u0275queryRefresh(n=r.\u0275\u0275loadQuery())&&(t.opalCardLoginForm=n.first),r.\u0275\u0275queryRefresh(n=r.\u0275\u0275loadQuery())&&(t.secretQaForm=n.first)}},decls:6,vars:3,consts:[["mouseFocus","",1,"forgot-password"],[1,"opal-login-container"],["class","opal-login-form",4,"ngIf"],["class","opal-secret-qa",4,"ngIf"],["class","opal-secret-qa success forgot-password__success",4,"ngIf"],[1,"opal-login-form"],[1,"forgot-password__header"],[1,"forgot-password__heading"],[1,"forgot-password__inner"],[1,"opal-card-image"],["src","assets/images/Back-of-Opal-Card-Code.png"],["class","error incorrect forgot-password__error",4,"ngIf"],["novalidate","",1,"form"],["opalCardLoginForm","ngForm"],[1,"forgot-password__inputs"],[1,"input-wrapper"],["id","smartcardId",1,"input-container"],[1,"title"],[1,"mandatory"],["name","card-number","required","required",1,"card-number",3,"ngModel","errorMessage","ngModelChange","onBlur","keyDownCardNumber","onFocus"],["cardNumber","ngModel"],[1,"error-message"],["id","smartcardSc",1,"input-container"],["id","cardCode","name","cardCode","required","required",1,"md-input",3,"ngModel","errorMessage","ngModelChange","onBlur","onFocus"],["cardCode","ngModel"],[1,"input-container"],["id","userName","type","text","name","userName","required","required",1,"md-input","username",3,"ngModel","ngModelChange","focus","blur"],["userName","ngModel"],[1,"forgot-password__btn-panel"],["type","submit",1,"btn","btn-primary","validate-card","forgot-password__next-btn",3,"disabled","click"],[1,"btn-tertiary","btn","forgot-password__cancel",3,"click"],[1,"error","incorrect","forgot-password__error"],["focusable","false","aria-hidden","true",1,"tp-icon","xs"],[0,"xmlns","xlink","http://www.w3.org/1999/xlink",0,"xlink","href","assets/icons/icons.svg#tp_alert"],[1,"response-error"],[1,"opal-secret-qa"],["secretQaForm","ngForm"],["id","secretAnswer","type","text","name","secretAnswer","required","required",1,"md-input","secret-answer",3,"ngModel","ngModelChange","focus","blur"],["secretAnswer","ngModel"],[1,"text-left","small","forgot-password__instructions"],[1,"forgot-password__instructions__points"],["id","newPassword","type","password","name","newPassword","required","required",1,"md-input","new-password",3,"ngModel","ngModelChange","focus","blur"],["newPassword","ngModel"],["id","confirmPassword","type","password","name","confirmPassword","required","required",1,"md-input","confirm-password",3,"ngModel","ngModelChange","focus","blur"],["confirmPassword","ngModel"],["type","submit",1,"btn","btn-primary","btn-change-password","forgot-password__set-password-btn",3,"disabled","click"],[1,"opal-secret-qa","success","forgot-password__success"],[1,"opal-login-container__inner","forgot-password__inner"],["aria-hidden","true","focusable","false",1,"forgot-password__success__icon"],[0,"xmlns","xlink","http://www.w3.org/1999/xlink",0,"xlink","href","assets/icons/icons.svg#tp_success"],[1,"forgot-password__success__heading"],[1,"btn","btn-primary","forgot-password__success__return-link",3,"click"]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"tni-layout"),r.\u0275\u0275elementStart(1,"div",0),r.\u0275\u0275elementStart(2,"div",1),r.\u0275\u0275template(3,b,48,30,"div",2),r.\u0275\u0275template(4,y,55,29,"div",3),r.\u0275\u0275template(5,M,8,0,"div",4),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(3),r.\u0275\u0275property("ngIf",t.state.validateCardUser),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.state.secretQa),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",t.state.success))},directives:[p.LayoutComponent,u.MouseFocusDirective,m.NgIf,f.\u0275angular_packages_forms_forms_y,f.NgControlStatusGroup,f.NgForm,g.CardNumberComponent,f.RequiredValidator,f.NgControlStatus,f.NgModel,h.CardCodeComponent,f.DefaultValueAccessor],pipes:[m.AsyncPipe],styles:['.ng4-form[_ngcontent-%COMP%],   .opal-login-container{background:#fff}.ng4-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%],   .opal-login-container label{color:#1d69b4;font-weight:500;font-size:14px;height:0;padding:7px 7px 7px 0}@media (max-width:767px){.ng4-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%],   .opal-login-container label{font-size:13px}}.ng4-form[_ngcontent-%COMP%]   .opal-login-form[_ngcontent-%COMP%],   .opal-login-container .opal-login-form{padding:0}.ng4-form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%],   .opal-login-container h1{display:flex;align-items:center;height:35px;justify-content:center;color:#555}@media (max-width:767px){.ng4-form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%],   .opal-login-container h1{font-size:19.53px}}.ng4-form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%],   .opal-login-container h1 svg{height:35px;width:70px}.ng4-form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%],   .opal-login-container h1 .separator{font-size:26px;display:inline;color:#999}.ng4-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%],   .opal-login-container .form-group{display:flex;border-bottom:1px solid #ccc;height:40px;margin:25px 0;position:relative}.ng4-form[_ngcontent-%COMP%]   .btn-panel[_ngcontent-%COMP%],   .opal-login-container .btn-panel{display:flex;margin:20px 0}.ng4-form[_ngcontent-%COMP%]   .btn-panel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%],   .opal-login-container .btn-panel button{flex-grow:1}.ng4-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .popover.error-popover.right[_ngcontent-%COMP%],   .opal-login-container .form .popover.error-popover.right{display:none;position:absolute;right:0;top:-9px;font-size:15px;left:auto;border-radius:4px;font-family:transtext,sans-serif}@media (max-width:767px){.ng4-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .popover.error-popover.right[_ngcontent-%COMP%],   .opal-login-container .form .popover.error-popover.right{font-size:13px;width:165px}}.ng4-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group.error[_ngcontent-%COMP%],   .opal-login-container .form .form-group.error{border-bottom-color:#e4022d}.ng4-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group.error[_ngcontent-%COMP%]   label[_ngcontent-%COMP%],   .opal-login-container .form .form-group.error label{color:#e4022d}.ng4-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group.error[_ngcontent-%COMP%]   .popover.error-popover.right[_ngcontent-%COMP%],   .opal-login-container .form .form-group.error .popover.error-popover.right{display:block}.ng4-form[_ngcontent-%COMP%]   .error.blocked[_ngcontent-%COMP%], .ng4-form[_ngcontent-%COMP%]   .error.incorrect[_ngcontent-%COMP%], .ng4-form[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%],   .opal-login-container .error.blocked,   .opal-login-container .error.incorrect,   .opal-login-container .success{font-size:13px;margin:0 20px;border:1px solid #e4022d;padding:10px 15px 10px 10px;font-weight:400;display:flex}.ng4-form[_ngcontent-%COMP%]   .error.blocked[_ngcontent-%COMP%]   .tp-icon[_ngcontent-%COMP%], .ng4-form[_ngcontent-%COMP%]   .error.incorrect[_ngcontent-%COMP%]   .tp-icon[_ngcontent-%COMP%], .ng4-form[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]   .tp-icon[_ngcontent-%COMP%],   .opal-login-container .error.blocked .tp-icon,   .opal-login-container .error.incorrect .tp-icon,   .opal-login-container .success .tp-icon{margin:3px 5px}.ng4-form[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%],   .opal-login-container .success{border-color:#009e4d}.ng4-form[_ngcontent-%COMP%]   .go-btn[_ngcontent-%COMP%],   .opal-login-container .go-btn{width:50px;height:42px;padding:0;font-size:113%;box-shadow:0 1px 2px 0 rgba(0,0,0,.3);transition:background .05s ease-in-out}.opal-login-container[_ngcontent-%COMP%]{max-width:900px;margin:auto}.opal-login-container[_ngcontent-%COMP%]   .spinner-cotainer[_ngcontent-%COMP%]{margin:30px}.opal-login-container[_ngcontent-%COMP%]   .opal-secret-qa.success[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:none}.opal-login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{font-size:16px}.opal-login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .control-label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;color:#1d69b4;font-size:14px;padding:7px 7px 7px 0;font-size:90%;z-index:1}.opal-login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:0;box-shadow:none;height:0;padding:0 10px 0 80px}.opal-login-container[_ngcontent-%COMP%]   .btn-panel[_ngcontent-%COMP%]{margin-bottom:0}.opal-login-container[_ngcontent-%COMP%]   .btn-panel[_ngcontent-%COMP%] + .link-options[_ngcontent-%COMP%]:not(.content-inline):not(:last-child){padding:0 0 25px}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .link-options[_ngcontent-%COMP%]{position:relative;display:flex;justify-content:space-between;font-size:14px;margin-top:15px}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .link-options.content-inline[_ngcontent-%COMP%]{justify-content:flex-start;flex-direction:column}@media (min-width:768px){.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .link-options.content-inline[_ngcontent-%COMP%]{flex-direction:row}}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .link-options.content-inline[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{text-align:left}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .link-options.content-inline[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-right:5px}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .link-options[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{color:#1d69b4;float:right;border:0;padding:0;background:transparent;text-decoration:underline;font-weight:lighter}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{margin-bottom:10px}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{display:flex;position:relative;padding:25px 2px;vertical-align:middle}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container.onFocus[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:.3s}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container.hasValue[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:0s}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{position:absolute;bottom:100%;right:auto;color:#999e9f;top:28px;left:5px;font-size:16px;transition:.3s}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .mandatory[_ngcontent-%COMP%]{color:#c41f3d}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;margin-top:0;background:none;padding:2px 2px 5px;height:35px;border-radius:0;border:solid #555;border-width:0 0 1px;width:100%;float:left;color:#555;font-weight:500}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:none}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container.error[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#c41f3d}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container.error[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-color:#c41f3d}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container.error[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:block;position:absolute;top:60px;left:2px;font-size:12px;color:#c41f3d}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group.error[_ngcontent-%COMP%]{border-bottom-color:#e4022d}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group.error[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#e4022d}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group.error[_ngcontent-%COMP%]   .popover.error-popover.right[_ngcontent-%COMP%]{display:block}.opal-login-container[_ngcontent-%COMP%]   .opal-card-image[_ngcontent-%COMP%]{width:100%;padding-top:15px;text-align:center;margin-bottom:55px}.opal-login-container[_ngcontent-%COMP%]   .opal-card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px}@media (max-width:767px){.opal-login-container[_ngcontent-%COMP%]   .opal-card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}}.timeout-modal[_ngcontent-%COMP%]{text-align:center;margin-top:20px}.timeout-modal[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.8em}.timeout-modal[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:.9em}@media (max-width:767px){.timeout-modal[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:1em}}.error.blocked[_ngcontent-%COMP%], .error.incorrect[_ngcontent-%COMP%], .success[_ngcontent-%COMP%]{font-size:14px;line-height:1.5;margin:2.5em 0;border:1px solid #e4022d;padding:15px 2em 15px 10px;font-weight:400;display:flex}.error.blocked[_ngcontent-%COMP%]   .tp-icon[_ngcontent-%COMP%], .error.incorrect[_ngcontent-%COMP%]   .tp-icon[_ngcontent-%COMP%], .success[_ngcontent-%COMP%]   .tp-icon[_ngcontent-%COMP%]{margin:1px 9px 0 2px}.success[_ngcontent-%COMP%]{border-color:#009e4d;font-size:16px}.forgot-password[_ngcontent-%COMP%]{background:#fff;box-shadow:0 2px 3px 0 rgba(0,0,0,.2);border-radius:4px;padding-top:1.5rem;margin:2.4rem auto;width:100%;text-align:center;position:relative}@media (min-width:992px){.forgot-password[_ngcontent-%COMP%]{padding-top:4rem}}.forgot-password__inner[_ngcontent-%COMP%]{margin:0 auto}@media (min-width:992px){.forgot-password__inner[_ngcontent-%COMP%]{width:500px}}.forgot-password__header[_ngcontent-%COMP%]{text-align:left}@media (min-width:992px){.forgot-password[_ngcontent-%COMP%]{width:770px}}.forgot-password__error[_ngcontent-%COMP%]{border:1px solid #d0021b;font-size:14px;font-weight:400;color:#555;position:relative;text-align:center;text-align:left;padding:14px 14px 14px 40px;margin:0 0 2rem}@media (min-width:992px){.forgot-password__error[_ngcontent-%COMP%]{padding:14px 32px 14px 52px}}.forgot-password__heading[_ngcontent-%COMP%]{margin-bottom:80px}.forgot-password__next-btn[_ngcontent-%COMP%], .forgot-password__set-password-btn[_ngcontent-%COMP%]{border-radius:4px;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;max-width:270px;background-color:#1d69b4;border:0 solid #195c9e;color:#fff;margin:0 auto;width:100%;display:block}.forgot-password__next-btn[disabled][_ngcontent-%COMP%], .forgot-password__set-password-btn[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.forgot-password__next-btn[_ngcontent-%COMP%]:hover:after, .forgot-password__set-password-btn[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .forgot-password__next-btn[_ngcontent-%COMP%], button[_ngcontent-%COMP%] + .forgot-password__set-password-btn[_ngcontent-%COMP%]{margin-top:10px}@media (min-width:992px){.forgot-password__next-btn[_ngcontent-%COMP%], .forgot-password__set-password-btn[_ngcontent-%COMP%]{margin:0 auto;max-width:67%}}.forgot-password__inputs[_ngcontent-%COMP%]{margin-bottom:45px}.forgot-password__instructions[_ngcontent-%COMP%]{margin-bottom:0}.forgot-password__instructions__points[_ngcontent-%COMP%]{margin:0;padding-left:1.75em}.forgot-password__success__icon[_ngcontent-%COMP%]{margin:80px auto 40px;display:block;height:62px;width:62px}.forgot-password__success__heading[_ngcontent-%COMP%]{font-weight:300;font-size:24px;line-height:1.3333;margin:0 0 85px}.forgot-password__success__return-link[_ngcontent-%COMP%]{border-radius:4px;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;max-width:270px;background-color:#1d69b4;border:0 solid #195c9e;color:#fff;margin:0 auto 80px;width:100%;display:block}.forgot-password__success__return-link[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.forgot-password__success__return-link[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .forgot-password__success__return-link[_ngcontent-%COMP%]{margin-top:10px}@media (min-width:992px){.forgot-password__success__return-link[_ngcontent-%COMP%]{margin:0 auto 80px;max-width:67%}}.forgot-password__cancel[_ngcontent-%COMP%]{border-radius:4px;border:0 solid transparent;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background:transparent;width:75%;margin:0 auto;display:block}.forgot-password__cancel[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.forgot-password__cancel[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .forgot-password__cancel[_ngcontent-%COMP%]{margin-top:10px}@media (min-width:992px){.forgot-password__cancel[_ngcontent-%COMP%]{width:67%}}']}),e}()},"T/fq":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AccessibleAlertsService=void 0,n("fXoL");var o=n("qCKp"),r=n("fXoL");t.AccessibleAlertsService=function(){function e(){this.alert=new o.Subject}return e.prototype.sendAlert=function(e){this.alert.next(e)},e.prototype.Alerts=function(){return this.alert.asObservable()},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}()},T42N:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniOptionComponent=void 0,n("fXoL");var o=n("fXoL");t.TniOptionComponent=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-option"]],inputs:{value:"value",label:"label"},decls:0,vars:0,template:function(e,t){},encapsulation:2}),e}()},TMHu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionListModule=void 0,n("fXoL");var o=n("ofXK"),r=(n("kAtE"),n("gM7n"),n("tyNb")),i=n("NKuO"),a=(n("b+vG"),n("fXoL"));t.ActionListModule=function(){function e(){}return e.\u0275mod=a.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=a.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule,r.RouterModule,i.TniIconModule]]}),e}()},Ti8x:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalLoginComponent=void 0;var o=n("kU1M"),r=(n("fXoL"),n("3Pt+"),n("smRY")),i=(n("9ans"),n("m8Qk")),a=n("DWut"),c=n("j+Iq"),s=n("RRJJ"),l=(n("QK+Z"),n("puoa"),n("YORH"),n("09AV")),d=(n("jGKr"),n("c7H9"),n("ltAX"),n("kU1M")),p=(n("glp8"),n("fXoL")),u=n("9ans"),m=n("QK+Z"),f=n("puoa"),g=n("YORH"),h=n("jGKr"),v=n("c7H9"),C=n("ltAX"),_=n("glp8"),b=n("ofXK"),x=n("vwDF"),y=n("3Pt+"),M=n("09AV"),P=n("6cuf"),O=["opalUserLoginForm"],S=["usernameInput"],w=["passwordInput"],k=["smartcardScInput"];function E(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"tni-modal",3),p.\u0275\u0275listener("closeEvent",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().closeModal()}),p.\u0275\u0275elementStart(1,"div",4),p.\u0275\u0275namespaceSVG(),p.\u0275\u0275elementStart(2,"svg",5),p.\u0275\u0275elementStart(3,"title"),p.\u0275\u0275text(4,"Icon meaning time"),p.\u0275\u0275elementEnd(),p.\u0275\u0275element(5,"path",6),p.\u0275\u0275element(6,"path",7),p.\u0275\u0275elementEnd(),p.\u0275\u0275namespaceHTML(),p.\u0275\u0275elementStart(7,"h3"),p.\u0275\u0275text(8,"Session expired"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(9,"p"),p.\u0275\u0275text(10,"For your security, you have been logged off."),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(11,"button",8),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().closeModal(!0)}),p.\u0275\u0275text(12,"Ok"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}}function T(e,t){if(1&e&&p.\u0275\u0275element(0,"span",18),2&e){var n=p.\u0275\u0275nextContext(4);p.\u0275\u0275property("innerHtml",n.responseMessage.usernameLogin,p.\u0275\u0275sanitizeHtml)}}function I(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"div",14),p.\u0275\u0275namespaceSVG(),p.\u0275\u0275elementStart(1,"svg",15),p.\u0275\u0275element(2,"path",16),p.\u0275\u0275elementEnd(),p.\u0275\u0275namespaceHTML(),p.\u0275\u0275elementStart(3,"div"),p.\u0275\u0275template(4,T,1,1,"span",17),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext(3);p.\u0275\u0275advance(4),p.\u0275\u0275property("ngIf",n.responseStatus!==n.LoginStatusEnum.AlreadyRegistered)}}function A(e,t){if(1&e&&p.\u0275\u0275element(0,"span",18),2&e){var n=p.\u0275\u0275nextContext(4);p.\u0275\u0275property("innerHtml",n.responseMessage.cardLogin,p.\u0275\u0275sanitizeHtml)}}function N(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"span"),p.\u0275\u0275text(1," This Opal card is already registered. "),p.\u0275\u0275elementStart(2,"a",19),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(4).state.usernameLogin=!0}),p.\u0275\u0275text(3,"Log in"),p.\u0275\u0275elementEnd(),p.\u0275\u0275text(4," with your username and password. "),p.\u0275\u0275elementEnd()}}function L(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"div",14),p.\u0275\u0275namespaceSVG(),p.\u0275\u0275elementStart(1,"svg",15),p.\u0275\u0275element(2,"path",16),p.\u0275\u0275elementEnd(),p.\u0275\u0275namespaceHTML(),p.\u0275\u0275elementStart(3,"div"),p.\u0275\u0275template(4,A,1,1,"span",17),p.\u0275\u0275template(5,N,5,0,"span",1),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext(3);p.\u0275\u0275advance(4),p.\u0275\u0275property("ngIf",n.responseStatus!==n.LoginStatusEnum.AlreadyRegistered),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",n.responseStatus===n.LoginStatusEnum.AlreadyRegistered)}}function R(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div"),p.\u0275\u0275elementStart(1,"form",20,21),p.\u0275\u0275elementStart(3,"div",22),p.\u0275\u0275elementStart(4,"div",23),p.\u0275\u0275elementStart(5,"label",24),p.\u0275\u0275text(6,"Username or email "),p.\u0275\u0275elementStart(7,"span",25),p.\u0275\u0275text(8,"*"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(9,"input",26,27),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(3).model.username=e})("focus",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext(3);return e.onFocus(e.LoginFieldEnum.Username)})("blur",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext(3);return e.onBlur(e.LoginFieldEnum.Username)})("keyup",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext(3);return e.onKeyUp(e.LoginFieldEnum.Username)}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(11,"div",28),p.\u0275\u0275text(12,"A username or email is required."),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(13,"div",29),p.\u0275\u0275elementStart(14,"a",30),p.\u0275\u0275text(15,"Forgot username? "),p.\u0275\u0275elementStart(16,"span",31),p.\u0275\u0275text(17," Click here if you have forgotten your username"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(18,"div",22),p.\u0275\u0275elementStart(19,"div",32),p.\u0275\u0275elementStart(20,"label",33),p.\u0275\u0275text(21,"Password "),p.\u0275\u0275elementStart(22,"span",25),p.\u0275\u0275text(23,"*"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(24,"input",34,35),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(3).model.password=e})("focus",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext(3);return e.onFocus(e.LoginFieldEnum.Password)})("blur",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext(3);return e.onBlur(e.LoginFieldEnum.Password)})("keyup",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext(3);return e.onKeyUp(e.LoginFieldEnum.Password)}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(26,"div",28),p.\u0275\u0275text(27,"A password is required."),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(28,"div",29),p.\u0275\u0275elementStart(29,"a",36),p.\u0275\u0275text(30,"Forgot password?"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(31,"span",31),p.\u0275\u0275text(32,"Click here if you have forgotten your password"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(33,"div",37),p.\u0275\u0275elementStart(34,"button",38),p.\u0275\u0275listener("click",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext(3);return e.login(e.state.usernameLogin)}),p.\u0275\u0275text(35),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(36,"div",39),p.\u0275\u0275elementStart(37,"span",40),p.\u0275\u0275text(38,"Not registered? "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(39,"div",41),p.\u0275\u0275elementStart(40,"div",42),p.\u0275\u0275elementStart(41,"a",43),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(3).trackAccountCreation("Unregistered")}),p.\u0275\u0275text(42,"Create account "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(43,"div"),p.\u0275\u0275elementStart(44,"button",44),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(3).switchLogin()}),p.\u0275\u0275text(45," Use your Opal card number "),p.\u0275\u0275elementStart(46,"span",31),p.\u0275\u0275text(47,"Click here to log in with Opal card number"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var o=p.\u0275\u0275nextContext(3);p.\u0275\u0275advance(4),p.\u0275\u0275classProp("error",o.showMessages.username)("onFocus",o.inputFocus.username)("hasValue",!!o.model.username),p.\u0275\u0275advance(5),p.\u0275\u0275propertyInterpolate1("title","",o.responseMessage.usernameLoginAriaPrefix," Enter your username or email"),p.\u0275\u0275property("ngModel",o.model.username),p.\u0275\u0275advance(10),p.\u0275\u0275classProp("error",o.showMessages.password)("onFocus",o.inputFocus.password)("hasValue",!!o.model.password),p.\u0275\u0275advance(5),p.\u0275\u0275property("ngModel",o.model.password),p.\u0275\u0275advance(10),p.\u0275\u0275property("disabled",o.isLoading()),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",o.isLoading()?"Logging in...":"Log in"," ")}}function j(e,t){1&e&&p.\u0275\u0275element(0,"img",64)}function F(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",45),p.\u0275\u0275elementStart(1,"form",20,46),p.\u0275\u0275elementStart(3,"div",22),p.\u0275\u0275elementStart(4,"div",47),p.\u0275\u0275elementStart(5,"label",48),p.\u0275\u0275text(6,"Card number "),p.\u0275\u0275elementStart(7,"span",25),p.\u0275\u0275text(8,"*"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(9,"card-number",49),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(3).model.smartcardId=e})("onBlur",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext(3);return e.onBlur(e.LoginFieldEnum.CardNumber)})("keyDownCardNumber",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(3).keyDownCardNumber(e)})("onFocus",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(3).onFocus(e)}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(10,"div",28),p.\u0275\u0275text(11,"A 16 digit card number is required."),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(12,"div",22),p.\u0275\u0275elementStart(13,"div",50),p.\u0275\u0275elementStart(14,"label",51),p.\u0275\u0275text(15,"Security code "),p.\u0275\u0275elementStart(16,"span",25),p.\u0275\u0275text(17,"*"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(18,"input",52,53),p.\u0275\u0275listener("ngModelChange",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(3).model.smartcardSc=e})("focus",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext(3);return e.onFocus(e.LoginFieldEnum.Code)})("blur",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext(3);return e.onBlur(e.LoginFieldEnum.Code)})("keydown",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(3).onKeyDownCardCode(e)})("keyup",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(3).onKeyUpCardCode(e)}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(20,"div",28),p.\u0275\u0275text(21,"A 4 digit security code is required."),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(22,"div",42),p.\u0275\u0275elementStart(23,"div",54),p.\u0275\u0275elementStart(24,"button",55),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(3).toggleHelp()}),p.\u0275\u0275namespaceSVG(),p.\u0275\u0275elementStart(25,"svg",56),p.\u0275\u0275elementStart(26,"g",57),p.\u0275\u0275element(27,"path",58),p.\u0275\u0275element(28,"path",59),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275text(29," What's my card number/code? "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275namespaceHTML(),p.\u0275\u0275elementStart(30,"div",60),p.\u0275\u0275template(31,j,1,0,"img",61),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(32,"div",37),p.\u0275\u0275elementStart(33,"button",62),p.\u0275\u0275listener("click",function(){p.\u0275\u0275restoreView(n);var e=p.\u0275\u0275nextContext(3);return e.login(e.state.usernameLogin)}),p.\u0275\u0275text(34),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(35,"div",42),p.\u0275\u0275elementStart(36,"a",43),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(3).trackAccountCreation("Registered")}),p.\u0275\u0275text(37,"Create account "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(38,"div",63),p.\u0275\u0275elementStart(39,"button",44),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext(3).switchLogin()}),p.\u0275\u0275text(40," Already registered? "),p.\u0275\u0275elementStart(41,"span",31),p.\u0275\u0275text(42,"Click here if you have already registered"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var o=p.\u0275\u0275nextContext(3);p.\u0275\u0275advance(4),p.\u0275\u0275classProp("error",o.showMessages.smartcardId)("onFocus",o.inputFocus.smartcardId)("hasValue",!!o.model.smartcardId),p.\u0275\u0275advance(5),p.\u0275\u0275property("ngModel",o.model.smartcardId)("errorMessage",o.showMessages.smartcardId)("ariaPrefix",o.responseMessage.cardLoginAriaPrefix),p.\u0275\u0275advance(4),p.\u0275\u0275classProp("error",o.showMessages.smartcardSc)("onFocus",o.inputFocus.smartcardSc)("hasValue",!!o.model.smartcardSc),p.\u0275\u0275advance(5),p.\u0275\u0275property("ngModel",o.model.smartcardSc),p.\u0275\u0275advance(13),p.\u0275\u0275property("ngIf",o.showHelp),p.\u0275\u0275advance(2),p.\u0275\u0275property("disabled",o.isLoading()),p.\u0275\u0275advance(1),p.\u0275\u0275textInterpolate1(" ",o.isLoading()?"Logging in...":"View details"," ")}}function V(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"div",10),p.\u0275\u0275elementStart(1,"div",11),p.\u0275\u0275template(2,I,5,1,"div",12),p.\u0275\u0275template(3,L,6,2,"div",12),p.\u0275\u0275template(4,R,48,17,"div",1),p.\u0275\u0275template(5,F,43,19,"div",13),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext(2);p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",n.state.usernameLogin&&""!=n.responseMessage.usernameLogin),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!n.state.usernameLogin&&""!=n.responseMessage.cardLogin),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",n.state.usernameLogin),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!n.state.usernameLogin)}}function D(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"div"),p.\u0275\u0275element(1,"tni-opal-account-summary",65),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext(2);p.\u0275\u0275advance(1),p.\u0275\u0275property("nameOrCard",n.nameOrCard)("email",n.email)}}function B(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"div"),p.\u0275\u0275template(1,V,6,4,"div",9),p.\u0275\u0275template(2,D,2,2,"div",1),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",!n.loggedIn),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",n.loggedIn&&!n.isLoadingData||n.loggedIn&&!n.isRegistered)}}function U(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"div"),p.\u0275\u0275elementStart(1,"p"),p.\u0275\u0275text(2),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext();p.\u0275\u0275advance(2),p.\u0275\u0275textInterpolate1(" ",n.outageInfo.outageMessage," ")}}function X(e,t){1&e&&(p.\u0275\u0275elementStart(0,"div",66),p.\u0275\u0275elementStart(1,"div",67),p.\u0275\u0275elementStart(2,"span",31),p.\u0275\u0275text(3,"loading icon"),p.\u0275\u0275elementEnd(),p.\u0275\u0275element(4,"div",68),p.\u0275\u0275element(5,"img",69),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd())}t.OpalLoginComponent=function(){function e(e,t,n,o,i,c,l,d,p){this.authService=e,this.opalAccountStore=t,this.windowRef=n,this.trackOpalEventService=o,this.opalSessionStore=i,this.profileService=c,this.elementRef=l,this.outageService=d,this.recaptchaService=p,this.loggedIn=!1,this.isRegistered=!1,this.model=new r.Credentials,this.responseMessage={usernameLogin:"",cardLogin:"",usernameLoginAriaPrefix:"",cardLoginAriaPrefix:""},this.LoginStatusEnum=a.LoginStatusEnum,this.LoginFieldEnum=s.LoginFieldEnum,this.state={usernameLogin:!0},this.ctrlDown=!1,this.showHelp=!1,this.showLoggedOutModal=!1,this.showMessages={username:!1,password:!1,smartcardId:!1,code:!1},this.inputFocus={username:!1,password:!1,smartcardId:!1,code:!1}}return e.prototype.ngOnInit=function(){var e=this;this.outageService.getOutageInfo().subscribe(function(t){return e.outageInfo=t},function(){e.outageInfo={outage:!0,outageMessage:"Opal is currently down for scheduled maintenance. We\u2019ll be up and running as soon as possible so please check back later."}}),this.recaptchaService.addCaptchaScript({render:"invisible",onload:!0}),this.state.usernameLogin=this.opalSessionStore.isRegisteredLoginWindowType();var t=this.opalSessionStore.load(),n=this.opalAccountStore.get();t&&t.redirected&&(this.state.usernameLogin=!t.isUnregistered,this.showLoggedOutModal=!0,this.opalSessionStore.clear(),t=null),this.loggedIn=!!n.accessToken,this.loggedIn&&(this.isRegistered=!n.unregisteredCardNo,this.isRegistered?(this.isLoadingData=!0,this.profileService.get().pipe(o.finalize(function(){return e.isLoadingData=!1})).subscribe(function(t){e.nameOrCard=e.getFullName(t),e.email=t.email})):this.nameOrCard=n.unregisteredCardNo);var r=this.getFirstParam();"registered"===r?(this.state.usernameLogin=!0,this.focusOnFirstField(),this.scrollToTopOfForm()):"unregistered"===r&&(this.state.usernameLogin=!1,this.focusOnFirstField(),this.scrollToTopOfForm())},e.prototype.ngOnDestroy=function(){this.outageSubscription&&this.outageSubscription.unsubscribe()},e.prototype.getFirstParam=function(){var e=this.windowRef.url().split("?");if(e&&e.length>1)return e[1].split("=")[0]},e.prototype.getFullName=function(e){return e.firstName+" "+e.lastName},e.prototype.setFocus=function(e){e===s.LoginFieldEnum.Username?this.inputFocus.username=!0:e===s.LoginFieldEnum.Password?this.inputFocus.password=!0:e===s.LoginFieldEnum.CardNumber?this.inputFocus.smartcardId=!0:e===s.LoginFieldEnum.Code&&(this.inputFocus.smartcardSc=!0)},e.prototype.focusOnInvalidElement=function(e){e?this.showMessages.username?this.setElementFocus(this.usernameInput):this.showMessages.password&&this.setElementFocus(this.passwordInput):this.showMessages.smartcardId?this.smartcardNoInput.focus():this.showMessages.smartcardSc&&this.setElementFocus(this.smartcardScInput)},e.prototype.validateInputField=function(e){e===s.LoginFieldEnum.Username?this.showMessages.username=!this.model.username:e===s.LoginFieldEnum.Password?this.showMessages.password=!this.model.password:e===s.LoginFieldEnum.CardNumber?this.showMessages.smartcardId=!this.model.smartcardId||16!==this.model.smartcardId.length:e===s.LoginFieldEnum.Code&&(this.showMessages.smartcardSc=!this.model.smartcardSc||4!==this.model.smartcardSc.length)},e.prototype.onKeyDownCardCode=function(e){var t=String.fromCharCode(e.charCode?e.charCode:e.which),n=this.model.smartcardSc?this.model.smartcardSc.split(" ").join("")+t:t;e.keyCode!==c.EventKeyCodeEnum.ctrlKey&&e.keyCode!==c.EventKeyCodeEnum.cmdKey||(this.ctrlDown=!0),!(e.keyCode!==c.EventKeyCodeEnum.leftKey&&e.keyCode!==c.EventKeyCodeEnum.rightKey&&e.keyCode!==c.EventKeyCodeEnum.backSpaceKey&&isNaN(Number(n))||e.keyCode===c.EventKeyCodeEnum.spaceKey)||this.ctrlDown&&(e.keyCode===c.EventKeyCodeEnum.aKey||e.keyCode===c.EventKeyCodeEnum.vKey||e.keyCode===c.EventKeyCodeEnum.cKey||e.keyCode===c.EventKeyCodeEnum.xKey)||e.keyCode>=96&&e.keyCode<=105||e.preventDefault()},e.prototype.onKeyUpCardCode=function(e){this.showMessages.smartcardSc&&this.validateInputField(s.LoginFieldEnum.Code),17!==e.keyCode&&91!==e.keyCode||(this.ctrlDown=!1)},e.prototype.keyDownCardNumber=function(e){this.model.smartcardId=e,this.showMessages.smartcardId&&this.validateInputField(s.LoginFieldEnum.CardNumber)},e.prototype.onFocus=function(e){this.setFocus(e)},e.prototype.onBlur=function(e){e===s.LoginFieldEnum.Username?(this.inputFocus.username=!1,this.validateInputField(s.LoginFieldEnum.Username),this.responseMessage.usernameLoginAriaPrefix=""):e===s.LoginFieldEnum.Password?(this.inputFocus.password=!1,this.validateInputField(s.LoginFieldEnum.Password)):e===s.LoginFieldEnum.CardNumber?(this.inputFocus.smartcardId=!1,this.validateInputField(s.LoginFieldEnum.CardNumber),this.responseMessage.cardLoginAriaPrefix=""):e===s.LoginFieldEnum.Code&&(this.inputFocus.smartcardSc=!1,this.validateInputField(s.LoginFieldEnum.Code))},e.prototype.onKeyUp=function(e){e===s.LoginFieldEnum.Username?(this.inputFocus.username=!0,this.validateInputField(s.LoginFieldEnum.Username)):e===s.LoginFieldEnum.Password&&(this.inputFocus.password=!0,this.validateInputField(s.LoginFieldEnum.Password))},e.prototype.switchLogin=function(){this.showHelp=!1,this.state.usernameLogin=!this.state.usernameLogin,this.focusOnFirstField(),this.scrollToTopOfForm()},e.prototype.scrollToTopOfForm=function(){var e=this;setTimeout(function(){e.elementRef.nativeElement.scrollIntoView(),window.scrollBy(0,-145)},200)},e.prototype.toggleHelp=function(){this.showHelp=!this.showHelp},e.prototype.login=function(){var e=this;if(this.responseMessage.usernameLogin=this.state.usernameLogin?"":this.responseMessage.usernameLogin,this.responseMessage.cardLogin=this.state.usernameLogin?this.responseMessage.cardLogin:"",!this.model.isValid(this.state.usernameLogin))return this.state.usernameLogin?(this.validateInputField(s.LoginFieldEnum.Username),this.validateInputField(s.LoginFieldEnum.Password)):(this.validateInputField(s.LoginFieldEnum.CardNumber),this.validateInputField(s.LoginFieldEnum.Code)),this.focusOnInvalidElement(this.state.usernameLogin),!1;this.isLoggingIn=!0,this.state.usernameLogin?(this.model.smartcardId=null,this.model.smartcardSc=null,this.processLoginRequest()):this.recaptchaService.execute().pipe(d.take(1)).subscribe(function(t){e.model.recaptchaResponse=t,e.processLoginRequest()},function(t){e.isLoggingIn=!1})},e.prototype.processLoginRequest=function(){var e=this;this.authService.login(this.model.getValidatedObject(this.state.usernameLogin)).pipe(o.finalize(function(){return e.isLoggingIn=!1})).subscribe(function(t){e.saveSession(t,e.model.smartcardId,e.model.smartcardSc),e.state.usernameLogin?e.trackOpalEventService.logInRegistered():e.trackOpalEventService.logInUnregistered(),e.opalSessionStore.setLoginUrl(e.getValidWindowUrl()),e.redirectToOpalCardsPage()},function(t){e.state.usernameLogin?(t.status===a.LoginStatusEnum.Unauthorized?(e.responseMessage.usernameLogin=i.LoginResponseMessageEnum.UnauthorizedUsername.toString(),e.responseStatus=a.LoginStatusEnum.Unauthorized):t.status===a.LoginStatusEnum.Locked?(e.responseMessage.usernameLogin=i.LoginResponseMessageEnum.Locked.toString(),e.responseStatus=a.LoginStatusEnum.Locked):t.status===a.LoginStatusEnum.AlreadyRegistered?(e.responseMessage.usernameLogin=i.LoginResponseMessageEnum.AlreadyRegistered.toString(),e.responseStatus=a.LoginStatusEnum.AlreadyRegistered):(e.responseMessage.usernameLogin=i.LoginResponseMessageEnum.Unexpected.toString(),e.responseStatus=a.LoginStatusEnum.Unexpected),e.responseMessage.usernameLoginAriaPrefix=e.responseMessage.usernameLogin):(t.status===a.LoginStatusEnum.Unauthorized?(e.responseMessage.cardLogin=i.LoginResponseMessageEnum.UnauthorizedCard.toString(),e.responseStatus=a.LoginStatusEnum.Unauthorized):t.status===a.LoginStatusEnum.Locked?(e.responseMessage.cardLogin=i.LoginResponseMessageEnum.Locked.toString(),e.responseStatus=a.LoginStatusEnum.Locked):t.status===a.LoginStatusEnum.AlreadyRegistered?(e.responseMessage.cardLogin=i.LoginResponseMessageEnum.AlreadyRegistered.toString(),e.responseStatus=a.LoginStatusEnum.AlreadyRegistered):(e.responseMessage.cardLogin=i.LoginResponseMessageEnum.Unexpected.toString(),e.responseStatus=a.LoginStatusEnum.Unexpected),e.responseMessage.cardLoginAriaPrefix=e.responseMessage.cardLogin),e.state.usernameLogin?(e.setElementFocus(e.usernameInput),e.model.password=""):e.smartcardNoInput&&e.smartcardNoInput.focus()})},e.prototype.getValidWindowUrl=function(){var e=this.windowRef.url();return this.state.usernameLogin&&e.indexOf("?unregistered")>0?e=e.replace("?unregistered","?registered"):!this.state.usernameLogin&&e.indexOf("?registered")>0&&(e=e.replace("?registered","?unregistered")),e},e.prototype.saveSession=function(e,t,n){this.opalAccountStore.setAccessToken(e.accessToken),this.opalAccountStore.setUnregisteredCardNo(t,n),this.opalSessionStore.setSessionDetails(e.expiresIn)},e.prototype.redirectToOpalCardsPage=function(){this.isRedirectingPage=!0,this.windowRef.redirectToUrl("/opal-view/#/account/cards")},e.prototype.isLoading=function(){return this.isLoggingIn||this.isRedirectingPage},e.prototype.setElementFocus=function(e){e&&e.nativeElement&&e.nativeElement.focus()},e.prototype.closeModal=function(e){this.showLoggedOutModal=!1,e&&this.focusOnFirstField()},e.prototype.focusOnFirstField=function(){var e=this;setTimeout(function(){e.state.usernameLogin?e.setElementFocus(e.usernameInput):e.smartcardNoInput.focus()},200)},e.prototype.forgotPasswordClick=function(){this.opalSessionStore.setLoginUrl(this.windowRef.url())},e.prototype.trackAccountCreation=function(e){this.trackOpalEventService.trackUserEvent({action:"Create an account link",label:e})},e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(u.AuthService),p.\u0275\u0275directiveInject(m.OpalAccountStore),p.\u0275\u0275directiveInject(f.WindowRef),p.\u0275\u0275directiveInject(g.TrackOpalEventService),p.\u0275\u0275directiveInject(h.OpalSessionStore),p.\u0275\u0275directiveInject(v.ProfileService),p.\u0275\u0275directiveInject(p.ElementRef),p.\u0275\u0275directiveInject(C.OutageService),p.\u0275\u0275directiveInject(_.RecaptchaService))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["opal-login"]],viewQuery:function(e,t){if(1&e&&(p.\u0275\u0275viewQuery(O,!0),p.\u0275\u0275viewQuery(O,!0),p.\u0275\u0275viewQuery(S,!0),p.\u0275\u0275viewQuery(w,!0),p.\u0275\u0275viewQuery(l.CardNumberComponent,!0),p.\u0275\u0275viewQuery(k,!0)),2&e){var n=void 0;p.\u0275\u0275queryRefresh(n=p.\u0275\u0275loadQuery())&&(t.opalUserLoginForm=n.first),p.\u0275\u0275queryRefresh(n=p.\u0275\u0275loadQuery())&&(t.opalCardLoginForm=n.first),p.\u0275\u0275queryRefresh(n=p.\u0275\u0275loadQuery())&&(t.usernameInput=n.first),p.\u0275\u0275queryRefresh(n=p.\u0275\u0275loadQuery())&&(t.passwordInput=n.first),p.\u0275\u0275queryRefresh(n=p.\u0275\u0275loadQuery())&&(t.smartcardNoInput=n.first),p.\u0275\u0275queryRefresh(n=p.\u0275\u0275loadQuery())&&(t.smartcardScInput=n.first)}},decls:4,vars:4,consts:[["ariaLabel","Session expired",3,"closeEvent",4,"ngIf"],[4,"ngIf"],["class","spinner-cotainer",4,"ngIf"],["ariaLabel","Session expired",3,"closeEvent"],[1,"timeout-modal"],["focusable","false","aria-hidden","true","viewBox","0 0 16 16","version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink",1,"timer"],["d","M8,1 C4.13400675,1 1,4.13400675 1,8 C1,11.8659932 4.13400675,15 8,15 C11.8659932,15 15,11.8659932 15,8 C15,6.14348457 14.2625021,4.36300718 12.9497475,3.05025253 C11.6369928,1.73749788 9.85651543,1 8,1 L8,1 Z M12.2447917,12.2447917 C11.9290654,12.5582839 11.579732,12.836004 11.203125,13.0729167 L10.6822917,12.2083333 L10.25,12.4583333 L10.7708333,13.3229167 C9.98777643,13.7336376 9.12312138,13.9649239 8.23958333,14 L8.23958333,13 L7.71875,13 L7.71875,13.9947917 C6.83521195,13.9597156 5.97055691,13.7284293 5.1875,13.3177083 L5.70833333,12.453125 L5.27604167,12.203125 L4.75520833,13.0677083 C4.00971304,12.5917902 3.37695981,11.959037 2.90104167,11.2135417 L3.765625,10.6927083 L3.515625,10.2604167 L2.65104167,10.78125 C2.24032073,9.99819309 2.0090344,9.13353805 1.97395833,8.25 L3,8.25 L3,7.72916667 L2.00520833,7.72916667 C2.0402844,6.84562862 2.27157073,5.98097357 2.68229167,5.19791667 L3.546875,5.71875 L3.796875,5.28645833 L2.93229167,4.765625 C3.41057278,4.02768158 4.04315789,3.40220417 4.78645833,2.93229167 L5.30729167,3.796875 L5.73958333,3.546875 L5.21875,2.68229167 C6.00180691,2.27157073 6.86646195,2.0402844 7.75,2.00520833 L7.75,3 L8.27083333,3 L8.27083333,2.00520833 C9.15437138,2.0402844 10.0190264,2.27157073 10.8020833,2.68229167 L10.28125,3.546875 L10.7135417,3.796875 L11.234375,2.93229167 C11.9798703,3.40820981 12.6126235,4.04096304 13.0885417,4.78645833 L12.2239583,5.30729167 L12.4739583,5.73958333 L13.3385417,5.21875 C13.7492626,6.00180691 13.9805489,6.86646195 14.015625,7.75 L13,7.75 L13,8.27083333 L13.9947917,8.27083333 C13.9597156,9.15437138 13.7284293,10.0190264 13.3177083,10.8020833 L12.453125,10.28125 L12.203125,10.7135417 L13.0677083,11.234375 C12.830601,11.5998405 12.5546938,11.9386127 12.2447917,12.2447917 L12.2447917,12.2447917 Z","fill","#757575"],["d","M12.32,7.55 L8.85,7.55 C8.77003799,7.39387765 8.64903476,7.26250272 8.5,7.17 L8.5,5.12 L7.5,5.12 L7.5,7.17 C7.16305542,7.37740153 6.98786785,7.77028035 7.05875759,8.15953821 C7.12964734,8.54879608 7.43209214,8.85469082 7.82052095,8.92999089 C8.20894977,9.00529095 8.60379026,8.8345706 8.815,8.5 L12.315,8.5 L12.315,7.55 L12.32,7.55 Z","fill","#757575"],[1,"btn","btn-primary","btn-sm",3,"click"],["class","opal-login-container",4,"ngIf"],[1,"opal-login-container"],[1,"opal-login-form","row"],["class","error incorrect",4,"ngIf"],["class","opal-unregistered-login-container",4,"ngIf"],[1,"error","incorrect"],["focusable","false","aria-hidden","true","xmlns","http://www.w3.org/2000/svg","width","50","height","50","viewBox","0 0 50 50",1,"tp-icon","xs"],["fill","currentColor","fill-rule","evenodd","d","M28.828125,13.359375 L27.65625,28.75 C27.65625,30.15625 26.484375,31.328125 25,31.328125 C23.515625,31.328125 22.34375,30.15625 22.34375,28.671875 L21.171875,13.359375 L21.171875,13.28125 L21.171875,13.046875 C21.171875,10.9375 22.890625,9.21875 25.078125,9.21875 C27.1875,9.21875 28.90625,10.9375 28.90625,13.046875 L28.828125,13.359375 Z M25,41.40625 C23.4375,41.40625 22.109375,40.15625 22.109375,38.515625 C22.109375,36.953125 23.359375,35.625 25,35.625 C26.5625,35.625 27.890625,36.875 27.890625,38.515625 C27.890625,40.15625 26.5625,41.40625 25,41.40625 L25,41.40625 Z M25,0.078125 C11.171875,0.078125 0,11.25 0,25 C0,38.75 11.171875,49.921875 25,49.921875 C38.828125,49.921875 50,38.75 50,25 C50,11.25 38.828125,0.078125 25,0.078125 L25,0.078125 Z"],[3,"innerHtml",4,"ngIf"],[3,"innerHtml"],["href","javascript:;",1,"btn-link",3,"click"],["novalidate","",1,"form","col-xs-12"],["opalUserLoginForm","ngForm"],[1,"input-wrapper"],["id","username",1,"input-container"],["for","usernameCrtl",1,"title"],[1,"mandatory"],["type","text","name","username","autocomplete","off","required","required","id","usernameCrtl",1,"md-input",3,"ngModel","title","ngModelChange","focus","blur","keyup"],["usernameInput",""],[1,"error-message"],[1,"link-options","pull-right","forgot-link"],["href","/opal-view/#/forgot-username",1,"forgot-password"],[1,"sr-only"],["id","password",1,"input-container"],["for","passwordCtrl",1,"title"],["type","password","name","password","title","Enter your password","autocomplete","off","required","required","id","passwordCtrl",1,"md-input",3,"ngModel","ngModelChange","focus","blur","keyup"],["passwordInput",""],["href","https://www.opal.com.au/login/forgotten-index?mobile_redirect=true",1,"forgot-password","reset"],[1,"btn-panel"],["type","submit",1,"btn","btn-primary","opal-username-login",3,"disabled","click"],[1,"link-options","content-inline"],[1,"not-registered"],[1,"register-options"],[1,"links"],["href","/opal-view/#/create-account",1,"create-account",3,"click"],["type","button","href","javascript:;",1,"btn-link","switch-login",3,"click"],[1,"opal-unregistered-login-container"],["opalCardLoginForm","ngForm"],["id","smartcardId",1,"input-container"],["for","cardNumberCtrl",1,"title"],["name","card-number","required","required","inputId","cardNumberCtrl",1,"card-number",3,"ngModel","errorMessage","ariaPrefix","ngModelChange","onBlur","keyDownCardNumber","onFocus"],["id","smartcardSc",1,"input-container"],["for","securityCodeCtrl",1,"title"],["type","text","name","smartcardSc","autocomplete","off","maxlength","4","size","4","title","Enter your 4 digit security code","required","required","id","securityCodeCtrl",1,"md-input",3,"ngModel","ngModelChange","focus","blur","keydown","keyup"],["smartcardScInput",""],["aria-hidden","true",1,"link-options"],["type","button","href","javascript:;",1,"btn-link",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","50","height","44","viewBox","0 0 50 44",1,"tp-icon","xs"],["fill","currentColor","fill-rule","evenodd"],["d","M43.6194645,16.8425082 C43.6194645,19.1451948 41.8431062,20.3294337 39.6062106,20.3294337 L37.9614344,20.3294337 L37.9614344,22.3031651 C37.9614344,22.8952845 37.5008971,23.4216129 36.8429866,23.4216129 C36.2508672,23.4216129 35.7245388,22.9610756 35.7245388,22.3031651 L35.7245388,14.4082394 C35.7245388,13.81612 36.1850761,13.2897916 36.8429866,13.2897916 L39.8035837,13.2897916 C42.1720615,13.3555826 43.6194645,14.7371946 43.6194645,16.8425082 L43.6194645,16.8425082 Z M33.0928969,23.3558219 L27.8954041,23.3558219 C27.3032847,23.3558219 26.7769563,22.8952845 26.7769563,22.2373741 L26.7769563,14.3424484 C26.7769563,13.7503289 27.2374937,13.2240005 27.8954041,13.2240005 C28.4875236,13.2240005 29.013852,13.6845379 29.013852,14.3424484 L29.013852,21.3162994 L33.0928969,21.3162994 C33.6192253,21.3162994 34.0797626,21.7768367 34.0797626,22.3031651 C34.0797626,22.8952845 33.6850163,23.3558219 33.0928969,23.3558219 L33.0928969,23.3558219 Z M23.9479413,23.3558219 L18.3557023,23.3558219 C17.7635828,23.3558219 17.2372544,22.8952845 17.2372544,22.2373741 L17.2372544,14.4082394 C17.2372544,13.81612 17.6977918,13.2897916 18.3557023,13.2897916 L23.8821502,13.2897916 C24.4084786,13.2897916 24.869016,13.7503289 24.869016,14.2766573 C24.869016,14.8029857 24.4084786,15.263523 23.8821502,15.263523 L19.408359,15.263523 L19.408359,17.3030455 L23.2242398,17.3030455 C23.7505682,17.3030455 24.2111055,17.7635828 24.2111055,18.2899112 C24.2111055,18.8162396 23.7505682,19.2767769 23.2242398,19.2767769 L19.408359,19.2767769 L19.408359,21.3820904 L23.9479413,21.3820904 C24.4742697,21.3820904 24.934807,21.8426278 24.934807,22.3689562 C24.934807,22.8952845 24.5400607,23.3558219 23.9479413,23.3558219 L23.9479413,23.3558219 Z M14.8687767,22.3031651 C14.8687767,22.8952845 14.4082394,23.4216129 13.7503289,23.4216129 C13.1582095,23.4216129 12.6318811,22.9610756 12.6318811,22.3031651 L12.6318811,19.2767769 L8.55283618,19.2767769 L8.55283618,22.3031651 C8.55283618,22.8952845 8.09229884,23.4216129 7.43438837,23.4216129 C6.84226894,23.4216129 6.31594056,22.9610756 6.31594056,22.3031651 L6.31594056,14.3424484 C6.31594056,13.7503289 6.77647789,13.2240005 7.43438837,13.2240005 C8.0265078,13.2240005 8.55283618,13.6845379 8.55283618,14.3424484 L8.55283618,17.3030455 L12.6318811,17.3030455 L12.6318811,14.3424484 C12.6318811,13.7503289 13.0924185,13.2240005 13.7503289,13.2240005 C14.3424484,13.2240005 14.8687767,13.6845379 14.8687767,14.3424484 L14.8687767,22.3031651 Z M37.1061508,0 L12.8950453,0 L12.8950453,0 C12.7634632,0 0.0657910475,0.394746285 0.0657910475,13.0266274 L0.0657910475,23.8821502 C0.0657910475,24.0137323 0.197373143,35.1982104 10.7239407,36.6456135 L10.6581497,41.3167778 C10.6581497,42.0404794 11.052896,42.7641809 11.6450154,43.1589272 C11.9739706,43.3563003 12.3687169,43.4878824 12.8292543,43.4878824 C13.1582095,43.4878824 13.4871647,43.4220914 13.7503289,43.2905093 L26.9085384,36.8429866 L37.0403597,36.8429866 C37.1719418,36.8429866 49.869614,36.7114045 49.869614,23.9479413 L49.869614,13.0266274 C49.9354051,12.8950453 49.803823,0 37.1061508,0 L37.1061508,0 Z"],["d","M39.6062106,15.3293141 L37.8956434,15.3293141 L37.8956434,18.3557023 L39.6062106,18.3557023 C40.7246584,18.3557023 41.3825689,17.6977918 41.3825689,16.8425082 L41.3825689,16.8425082 C41.3825689,15.8556424 40.6588674,15.3293141 39.6062106,15.3293141"],[1,"opal-card-image"],["src","/opal-view/assets/images/Back-of-Opal-Card-Code.png","alt","Your card number\n              and security code can be found on the back of your card",4,"ngIf"],["type","submit",1,"btn","btn-primary","opal-card-login",3,"disabled","click"],[1,"link-options"],["src","/opal-view/assets/images/Back-of-Opal-Card-Code.png","alt","Your card number\n              and security code can be found on the back of your card"],[3,"nameOrCard","email"],[1,"spinner-cotainer"],[1,"tfnsw-spinner"],[1,"spinner"],["src","assets/images/spinner.gif","alt","loading icon",1,"spinner-image"]],template:function(e,t){1&e&&(p.\u0275\u0275template(0,E,13,0,"tni-modal",0),p.\u0275\u0275template(1,B,3,2,"div",1),p.\u0275\u0275template(2,U,3,1,"div",1),p.\u0275\u0275template(3,X,6,0,"div",2)),2&e&&(p.\u0275\u0275property("ngIf",t.showLoggedOutModal),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",t.outageInfo&&!t.outageInfo.outage),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",t.outageInfo&&t.outageInfo.outage),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",t.isLoadingData))},directives:[b.NgIf,x.ModalWindowComponent,y.\u0275angular_packages_forms_forms_y,y.NgControlStatusGroup,y.NgForm,y.DefaultValueAccessor,y.RequiredValidator,y.NgControlStatus,y.NgModel,M.CardNumberComponent,y.MaxLengthValidator,P.OpalAccountSummaryComponent],styles:['.ng4-form[_ngcontent-%COMP%],   .opal-login-container{background:#fff}.ng4-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%],   .opal-login-container label{color:#1d69b4;font-weight:500;font-size:14px;height:0;padding:7px 7px 7px 0}@media (max-width:767px){.ng4-form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%],   .opal-login-container label{font-size:13px}}.ng4-form[_ngcontent-%COMP%]   .opal-login-form[_ngcontent-%COMP%],   .opal-login-container .opal-login-form{padding:0}.ng4-form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%],   .opal-login-container h1{display:flex;align-items:center;height:35px;justify-content:center;color:#555}@media (max-width:767px){.ng4-form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%],   .opal-login-container h1{font-size:19.53px}}.ng4-form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%],   .opal-login-container h1 svg{height:35px;width:70px}.ng4-form[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%],   .opal-login-container h1 .separator{font-size:26px;display:inline;color:#999}.ng4-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%],   .opal-login-container .form-group{display:flex;border-bottom:1px solid #ccc;height:40px;margin:25px 0;position:relative}.ng4-form[_ngcontent-%COMP%]   .btn-panel[_ngcontent-%COMP%],   .opal-login-container .btn-panel{display:flex;margin:20px 0}.ng4-form[_ngcontent-%COMP%]   .btn-panel[_ngcontent-%COMP%]   button[_ngcontent-%COMP%],   .opal-login-container .btn-panel button{flex-grow:1}.ng4-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .popover.error-popover.right[_ngcontent-%COMP%],   .opal-login-container .form .popover.error-popover.right{display:none;position:absolute;right:0;top:-9px;font-size:15px;left:auto;border-radius:4px;font-family:transtext,sans-serif}@media (max-width:767px){.ng4-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .popover.error-popover.right[_ngcontent-%COMP%],   .opal-login-container .form .popover.error-popover.right{font-size:13px;width:165px}}.ng4-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group.error[_ngcontent-%COMP%],   .opal-login-container .form .form-group.error{border-bottom-color:#e4022d}.ng4-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group.error[_ngcontent-%COMP%]   label[_ngcontent-%COMP%],   .opal-login-container .form .form-group.error label{color:#e4022d}.ng4-form[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group.error[_ngcontent-%COMP%]   .popover.error-popover.right[_ngcontent-%COMP%],   .opal-login-container .form .form-group.error .popover.error-popover.right{display:block}.ng4-form[_ngcontent-%COMP%]   .error.blocked[_ngcontent-%COMP%], .ng4-form[_ngcontent-%COMP%]   .error.incorrect[_ngcontent-%COMP%], .ng4-form[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%],   .opal-login-container .error.blocked,   .opal-login-container .error.incorrect,   .opal-login-container .success{font-size:13px;margin:0 20px;border:1px solid #e4022d;padding:10px 15px 10px 10px;font-weight:400;display:flex}.ng4-form[_ngcontent-%COMP%]   .error.blocked[_ngcontent-%COMP%]   .tp-icon[_ngcontent-%COMP%], .ng4-form[_ngcontent-%COMP%]   .error.incorrect[_ngcontent-%COMP%]   .tp-icon[_ngcontent-%COMP%], .ng4-form[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]   .tp-icon[_ngcontent-%COMP%],   .opal-login-container .error.blocked .tp-icon,   .opal-login-container .error.incorrect .tp-icon,   .opal-login-container .success .tp-icon{margin:3px 5px}.ng4-form[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%],   .opal-login-container .success{border-color:#009e4d}.ng4-form[_ngcontent-%COMP%]   .go-btn[_ngcontent-%COMP%],   .opal-login-container .go-btn{width:50px;height:42px;padding:0;font-size:113%;box-shadow:0 1px 2px 0 rgba(0,0,0,.3);transition:background .05s ease-in-out}.opal-login-container[_ngcontent-%COMP%]   .spinner-cotainer[_ngcontent-%COMP%]{margin:30px}.opal-login-container[_ngcontent-%COMP%]   .card-number[_ngcontent-%COMP%]{width:100%}.opal-login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{font-size:16px}.opal-login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .control-label[_ngcontent-%COMP%]{position:absolute;top:0;left:0;color:#1d69b4;font-size:14px;padding:7px 7px 7px 0;font-size:90%;z-index:1}.opal-login-container[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .form-control[_ngcontent-%COMP%]{border:0;box-shadow:none;height:0;padding:0 10px 0 80px}.opal-login-container[_ngcontent-%COMP%]   .btn-panel[_ngcontent-%COMP%]{margin-bottom:0}.opal-login-container[_ngcontent-%COMP%]   .btn-panel[_ngcontent-%COMP%] + .link-options[_ngcontent-%COMP%]:not(.content-inline):not(:last-child){padding:0 0 25px}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .forgot-password[_ngcontent-%COMP%], .opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .forgot-username[_ngcontent-%COMP%]{right:5px;position:absolute;bottom:10px;text-decoration:underline;min-width:150px;text-align:right;padding-right:3px}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .register-options[_ngcontent-%COMP%]{display:flex;flex-direction:column}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]{display:flex;flex-direction:column;float:left;width:100%;padding:5px 0}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]   .create-account[_ngcontent-%COMP%]{text-decoration:underline;font-size:16px;margin:5px 0 0}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .forgot-link[_ngcontent-%COMP%]{margin-top:15px}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .link-options[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;justify-content:space-between;font-size:16px;float:left}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .link-options[_ngcontent-%COMP%]   .not-registered[_ngcontent-%COMP%]{padding-top:15px}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .link-options[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{text-align:left}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .link-options.content-inline[_ngcontent-%COMP%]{justify-content:flex-start;flex-direction:column}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .link-options.content-inline[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{padding-right:5px}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .link-options[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{color:#1d69b4;float:right;border:0;padding:0;background:transparent;text-decoration:underline;font-weight:lighter}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .link-options[_ngcontent-%COMP%]   .btn-link.switch-login[_ngcontent-%COMP%]{float:left}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .link-options.bottom-space[_ngcontent-%COMP%]{margin-bottom:40px}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{margin-bottom:10px}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]{display:flex;position:relative;padding:25px 2px;vertical-align:middle}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container.onFocus[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:.3s}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container.hasValue[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:0s}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:200;position:absolute;bottom:100%;right:auto;color:#999e9f;top:28px;left:5px;font-size:16px;transition:.3s}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .mandatory[_ngcontent-%COMP%]{color:#c41f3d}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;margin-top:0;background:none;padding:2px 2px 5px;height:35px;border-radius:0;border:solid #555;border-width:0 0 1px;width:100%;float:left;color:#555;font-weight:400;font-size:16px}@media (max-width:767px){.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px}}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:none}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:none}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container.error[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#c41f3d}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container.error[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border-color:#c41f3d}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   .input-container.error[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:block;position:absolute;top:60px;left:2px;font-size:12px;color:#c41f3d}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group.error[_ngcontent-%COMP%]{border-bottom-color:#e4022d}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group.error[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#e4022d}.opal-login-container[_ngcontent-%COMP%]   .form[_ngcontent-%COMP%]   .form-group.error[_ngcontent-%COMP%]   .popover.error-popover.right[_ngcontent-%COMP%]{display:block}.opal-login-container[_ngcontent-%COMP%]   .error.blocked[_ngcontent-%COMP%], .opal-login-container[_ngcontent-%COMP%]   .error.incorrect[_ngcontent-%COMP%], .opal-login-container[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{font-size:14px;line-height:1.5;margin:2.5em 17px;border:1px solid #e4022d;padding:15px 2em 15px 10px;font-weight:400;display:flex}.opal-login-container[_ngcontent-%COMP%]   .error.blocked[_ngcontent-%COMP%]   .tp-icon[_ngcontent-%COMP%], .opal-login-container[_ngcontent-%COMP%]   .error.incorrect[_ngcontent-%COMP%]   .tp-icon[_ngcontent-%COMP%], .opal-login-container[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]   .tp-icon[_ngcontent-%COMP%]{margin:1px 9px 0 2px}.opal-login-container[_ngcontent-%COMP%]   .success[_ngcontent-%COMP%]{border-color:#009e4d}.opal-login-container[_ngcontent-%COMP%]   .opal-card-image[_ngcontent-%COMP%]{width:100%;padding-top:15px;text-align:center}.opal-login-container[_ngcontent-%COMP%]   .opal-card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:300px}@media (max-width:767px){.opal-login-container[_ngcontent-%COMP%]   .opal-card-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}}.timeout-modal[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background:#fff;color:#1d69b4;border:1px solid #dbdbdb;border-radius:4px;padding:8px 32px;width:auto;min-width:130px;margin-top:48px}.timeout-modal[_ngcontent-%COMP%]   .btn[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.timeout-modal[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .timeout-modal[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-top:10px}.timeout-modal[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover{border:1px solid #1d69b4;background:#fff}.timeout-modal[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]:hover:after{display:none}.timeout-modal[_ngcontent-%COMP%]   .timer[_ngcontent-%COMP%]{height:60px}']}),e}()},Ts6m:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniStateBannerModule=void 0,n("fXoL"),n("M4hh");var o=n("ofXK"),r=n("NKuO"),i=n("fXoL");t.TniStateBannerModule=function(){function e(){}return e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule,r.TniIconModule]]}),e}()},Tueg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalMenuComponent=void 0,n("fXoL"),n("tyNb"),n("84CM"),n("c7H9"),n("QK+Z");var o=n("fXoL"),r=n("tyNb"),i=n("c7H9"),a=n("QK+Z"),c=n("84CM"),s=n("ofXK"),l=n("DRCh"),d=n("gUXI");function p(e,t){if(1&e){var n=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"button",6),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(n),o.\u0275\u0275nextContext(2).logoutService.logout(!1)}),o.\u0275\u0275element(2,"tni-icon",7),o.\u0275\u0275text(3," Log out "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()}2&e&&(o.\u0275\u0275advance(2),o.\u0275\u0275property("iconAriaHidden",!0))}function u(e,t){1&e&&o.\u0275\u0275element(0,"tni-icon",13),2&e&&o.\u0275\u0275property("iconName","arrow_up")("iconClasses","sm col-toggle")("iconAriaHidden",!0)}function m(e,t){1&e&&o.\u0275\u0275element(0,"tni-icon",13),2&e&&o.\u0275\u0275property("iconName","arrow_down")("iconClasses","sm col-toggle")("iconAriaHidden",!0)}function f(e,t){if(1&e){var n=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementContainerStart(0),o.\u0275\u0275elementStart(1,"button",8),o.\u0275\u0275listener("click",function(e){return o.\u0275\u0275restoreView(n),o.\u0275\u0275nextContext(2).openMenu(e)}),o.\u0275\u0275elementStart(2,"div",9),o.\u0275\u0275elementStart(3,"a",10),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(5,u,1,3,"tni-icon",11),o.\u0275\u0275element(6,"tni-icon",12),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(7,m,1,3,"tni-icon",11),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementContainerEnd()}if(2&e){var r=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate(r.userName),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",r.isOpen),o.\u0275\u0275advance(1),o.\u0275\u0275property("iconName","burger")("iconClasses","sm hamburger")("iconAriaHidden",!0),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!r.isOpen)}}function g(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"a",19),o.\u0275\u0275element(1,"tni-icon",16),o.\u0275\u0275text(2," Profile "),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext(3);o.\u0275\u0275classProp("selected",n.isRouteActive("profile")),o.\u0275\u0275advance(1),o.\u0275\u0275property("iconName","person")("iconClasses","sm")("iconAriaHidden",!0)}}function h(e,t){if(1&e){var n=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",14),o.\u0275\u0275elementStart(1,"a",15),o.\u0275\u0275element(2,"tni-icon",16),o.\u0275\u0275text(3," Opal cards "),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(4,g,3,5,"a",17),o.\u0275\u0275elementStart(5,"button",18),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(n),o.\u0275\u0275nextContext(2).logoutService.logout(!1)}),o.\u0275\u0275element(6,"tni-icon",16),o.\u0275\u0275text(7," Log out "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){var r=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275classProp("selected",r.isRouteActive("cards")),o.\u0275\u0275advance(1),o.\u0275\u0275property("iconName","card")("iconClasses","sm")("iconAriaHidden",!0),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",!r.isUnregistered),o.\u0275\u0275advance(2),o.\u0275\u0275property("iconName","logout")("iconClasses","sm")("iconAriaHidden",!0)}}function v(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"nav",1),o.\u0275\u0275elementStart(1,"div",2),o.\u0275\u0275elementStart(2,"div",3),o.\u0275\u0275template(3,p,4,1,"ng-container",4),o.\u0275\u0275template(4,f,8,6,"ng-container",4),o.\u0275\u0275template(5,h,8,9,"div",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275classProp("open",n.isOpen),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",n.isUnregistered),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!n.isUnregistered),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.isOpen)}}t.OpalMenuComponent=function(){function e(e,t,n,o,r){this.activeRoute=e,this.renderer=t,this.profileService=n,this.opalAccountStore=o,this.logoutService=r,this.isOpen=!1,this.isUnregistered=!1}return e.prototype.onClick=function(){this.isOpen=!1},e.prototype.ngOnInit=function(){var e=this.opalAccountStore.get();this.isUnregistered=!!e.unregisteredCardNo,this.getProfile(e)},e.prototype.getProfile=function(e){var t=this;this.isUnregistered||this.profileService.get().subscribe(function(e){return t.storeResponse(e)}),this.opalAccountStore.opalAccountData.subscribe(function(n){t.userName=!t.isUnregistered&&n?n.firstName:e.unregisteredCardNo})},e.prototype.storeResponse=function(e){this.opalAccountStore.opalAccountData.next(e)},e.prototype.openMenu=function(e){e.stopPropagation(),this.removeFocus(),this.isOpen=!this.isOpen},e.prototype.isRouteActive=function(e){return this.activeRoute.children[0].routeConfig.path===e},e.prototype.onBlur=function(){this.isOpen=!1},e.prototype.removeFocus=function(){this.renderer.addClass(document.body,"focus--mouse")},e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(r.ActivatedRoute),o.\u0275\u0275directiveInject(o.Renderer2),o.\u0275\u0275directiveInject(i.ProfileService),o.\u0275\u0275directiveInject(a.OpalAccountStore),o.\u0275\u0275directiveInject(c.LogoutService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-opal-menu"]],hostBindings:function(e,t){1&e&&o.\u0275\u0275listener("click",function(){return t.onClick()},!1,o.\u0275\u0275resolveBody)},decls:1,vars:1,consts:[["mouseFocus","","class","opal-menu",4,"ngIf"],["mouseFocus","",1,"opal-menu"],[1,"opal-menu-container"],[1,"opal-menu-header-item"],[4,"ngIf"],["class","opal-menu-item-list","role","list",4,"ngIf"],["role","listitem",1,"opal-menu__logout-btn",3,"click"],["iconName","logout-current-color","iconClasses","sm",1,"opal-menu-link--icon",3,"iconAriaHidden"],["tabindex","0",1,"opal-menu-header-container",3,"click"],[1,"opal-menu-header-container--info"],[1,"opal-menu-header"],["class","opal-menu__chevron",3,"iconName","iconClasses","iconAriaHidden",4,"ngIf"],[1,"opal-menu__hamburger",3,"iconName","iconClasses","iconAriaHidden"],[1,"opal-menu__chevron",3,"iconName","iconClasses","iconAriaHidden"],["role","list",1,"opal-menu-item-list"],["role","listitem","routerLink","/account/cards",1,"opal-menu-item","cards"],[1,"opal-menu-item--icon",3,"iconName","iconClasses","iconAriaHidden"],["class","opal-menu-item profile","role","listitem","routerLink","/account/profile",3,"selected",4,"ngIf"],["role","listitem",1,"opal-menu-item","logout",3,"click"],["role","listitem","routerLink","/account/profile",1,"opal-menu-item","profile"]],template:function(e,t){1&e&&o.\u0275\u0275template(0,v,6,5,"nav",0),2&e&&o.\u0275\u0275property("ngIf",t.userName)},directives:[s.NgIf,l.MouseFocusDirective,d.IconComponent,r.RouterLinkWithHref],styles:[".opal-menu[_ngcontent-%COMP%]{line-height:1.5;position:relative;width:auto}.opal-menu[_ngcontent-%COMP%]   .opal-menu-header-item[_ngcontent-%COMP%]{list-style:none}.opal-menu[_ngcontent-%COMP%]   .opal-menu-header-container[_ngcontent-%COMP%]{background:none;border:none}@media (min-width:768px){.opal-menu[_ngcontent-%COMP%]   .opal-menu-header-container[_ngcontent-%COMP%]{padding-right:30px}}@media (max-width:767px){.opal-menu[_ngcontent-%COMP%]   .opal-menu-header-container--person-icon[_ngcontent-%COMP%]{visibility:hidden}}.opal-menu[_ngcontent-%COMP%]   .opal-menu-header-container--icon[_ngcontent-%COMP%]{right:25px}.opal-menu[_ngcontent-%COMP%]   .opal-menu-header-container--info[_ngcontent-%COMP%]{text-align:right;white-space:nowrap;cursor:pointer;min-height:60px}.opal-menu[_ngcontent-%COMP%]   .opal-menu-header[_ngcontent-%COMP%]{display:block;text-decoration:none;list-style:none;color:#fff;line-height:60px}@media (max-width:767px){.opal-menu[_ngcontent-%COMP%]   .opal-menu-header[_ngcontent-%COMP%]{display:none}}.opal-menu[_ngcontent-%COMP%]   .opal-menu-item-list[_ngcontent-%COMP%]{position:absolute;list-style:none;margin-top:0;visibility:hidden;z-index:999;padding-left:0;right:-10px}.opal-menu[_ngcontent-%COMP%]   .opal-menu-item-list[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-align:left}.opal-menu[_ngcontent-%COMP%]   .open[_ngcontent-%COMP%]   .opal-menu-item-list[_ngcontent-%COMP%]{visibility:visible;opacity:1}.opal-menu[_ngcontent-%COMP%]   .opal-menu-item[_ngcontent-%COMP%]{position:relative;width:350px;list-style:none;line-height:70px;display:block;text-decoration:none;padding-left:5rem;background:#fff;height:70px;border-bottom:1px solid #d8d8d8;box-shadow:0 2px 2px 1px rgba(0,0,0,.2);cursor:pointer}@media (max-width:767px){.opal-menu[_ngcontent-%COMP%]   .opal-menu-item[_ngcontent-%COMP%]{width:280px}}.opal-menu[_ngcontent-%COMP%]   .opal-menu-item.selected[_ngcontent-%COMP%]{border-bottom:4px solid #1d69b4;background:#f6f6f6;color:#1d69b4}.opal-menu[_ngcontent-%COMP%]   .opal-menu-item.selected[_ngcontent-%COMP%]   tni-icon[_ngcontent-%COMP%]{fill:#1d69b4}.opal-menu[_ngcontent-%COMP%]   .opal-menu-item[_ngcontent-%COMP%]:hover{background:#f6f6f6}.opal-menu[_ngcontent-%COMP%]   .opal-menu-item--icon[_ngcontent-%COMP%]{margin-right:10px}.opal-menu[_ngcontent-%COMP%]   .opal-menu-item--link[_ngcontent-%COMP%]{padding-top:2px}.opal-menu[_ngcontent-%COMP%]   .opal-menu-item[_ngcontent-%COMP%]:last-child{box-shadow:0 2px 3px 1px rgba(0,0,0,.2);border-left:none;border-right:none}.opal-menu[_ngcontent-%COMP%]   .opal-menu-container[_ngcontent-%COMP%]{margin:0;padding:0}.opal-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#4a4a4a}.opal-menu__hamburger[_ngcontent-%COMP%]{width:20px;height:48px;display:block;padding:20px 0}@media (min-width:768px){.opal-menu__hamburger[_ngcontent-%COMP%]{display:none}}  .hamburger{display:none}@media (max-width:767px){  .hamburger{display:block}}  .tp-icon.col-toggle{color:#fff;fill:#fff}@media (max-width:767px){  .tp-icon.col-toggle{display:none}}.opal-menu__chevron[_ngcontent-%COMP%]{position:absolute;top:15px;right:0}.opal-menu__logout-btn[_ngcontent-%COMP%]{background:transparent;border:0;color:#fff;line-height:50px;margin-top:5px}.opal-menu-link--icon[_ngcontent-%COMP%]{color:#fff}"]}),e}()},Tz4i:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OneOffTopupComponent=void 0;var o=n("kU1M"),r=n("fXoL"),i=(n("SC3b"),n("PShm"),n("6i2Y"),n("1Zke")),a=(n("NRRr"),n("0ruu"),n("VzkM"),n("YORH"),n("0ywJ"),n("3Pt+")),c=n("u3Ad"),s=(n("74Ue"),n("ELlc"),n("aeCY")),l=(n("tyNb"),n("5rcV"),n("fXoL")),d=n("0ywJ"),p=n("PShm"),u=n("NRRr"),m=n("YORH"),f=n("74Ue"),g=n("ELlc"),h=n("tyNb"),v=n("0ruu"),C=n("6i2Y"),_=n("5rcV"),b=n("ofXK"),x=n("3Pt+"),y=n("aeCY"),M=n("54GQ"),P=n("cGJq"),O=n("gUXI"),S=n("nydR"),w=n("vwDF"),k=n("Mp0x"),E=["topupMessage"];function T(e,t){1&e&&(l.\u0275\u0275elementStart(0,"div",20),l.\u0275\u0275text(1,"Select top up amount"),l.\u0275\u0275elementEnd())}function I(e,t){1&e&&(l.\u0275\u0275elementStart(0,"div",20),l.\u0275\u0275text(1,"Card balance is too high to top up"),l.\u0275\u0275elementEnd())}function A(e,t){if(1&e){var n=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"div",23),l.\u0275\u0275elementStart(1,"label",24),l.\u0275\u0275elementStart(2,"input",25),l.\u0275\u0275listener("ngModelChange",function(e){return l.\u0275\u0275restoreView(n),l.\u0275\u0275nextContext(4).selectedTopupAmount=e})("ngModelChange",function(){return l.\u0275\u0275restoreView(n),l.\u0275\u0275nextContext(4).onSelectTopupAmount()}),l.\u0275\u0275elementEnd(),l.\u0275\u0275text(3),l.\u0275\u0275pipe(4,"centsToDollar"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd()}if(2&e){var o=t.$implicit,r=l.\u0275\u0275nextContext(4);l.\u0275\u0275advance(1),l.\u0275\u0275classProp("selected",o===r.selectedTopupAmount),l.\u0275\u0275advance(1),l.\u0275\u0275property("value",o)("ngModel",r.selectedTopupAmount),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1(" ",l.\u0275\u0275pipeBind2(4,5,o,"1.0")," ")}}function N(e,t){if(1&e&&(l.\u0275\u0275elementStart(0,"div",21),l.\u0275\u0275template(1,A,5,8,"div",22),l.\u0275\u0275elementEnd()),2&e){var n=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(1),l.\u0275\u0275property("ngForOf",n.availableTopupAmounts)}}function L(e,t){if(1&e&&(l.\u0275\u0275elementStart(0,"div",26),l.\u0275\u0275text(1," Total balance after top up: "),l.\u0275\u0275elementStart(2,"span",27),l.\u0275\u0275text(3),l.\u0275\u0275pipe(4,"centsToDollar"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd()),2&e){var n=l.\u0275\u0275nextContext(3);l.\u0275\u0275property("@fadeInAnimation",void 0),l.\u0275\u0275advance(2),l.\u0275\u0275classProp("negative-amount",n.totalBalance<0),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate(l.\u0275\u0275pipeBind1(4,4,n.totalBalance))}}function R(e,t){1&e&&(l.\u0275\u0275elementStart(0,"div",28),l.\u0275\u0275text(1," It may take up to 60 minutes for this top up to be available to tap on with. "),l.\u0275\u0275elementEnd())}function j(e,t){1&e&&(l.\u0275\u0275elementStart(0,"div",29),l.\u0275\u0275text(1,"Pay with:"),l.\u0275\u0275elementEnd())}function F(e,t){if(1&e){var n=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"tni-display-credit-card",30),l.\u0275\u0275listener("changeCard",function(){return l.\u0275\u0275restoreView(n),l.\u0275\u0275nextContext(3).changeCardDetails()}),l.\u0275\u0275elementEnd()}if(2&e){var o=l.\u0275\u0275nextContext(3);l.\u0275\u0275property("paymentAccount",o.paymentAccount)("cardType",o.cardType)("featureToggle",o.paymentsEnabled)}}var V=function(){return["/account/profile"]},D=function(){return{active:"payment"}};function B(e,t){1&e&&(l.\u0275\u0275elementStart(0,"p",31),l.\u0275\u0275text(1," We'll be adding more Opal features to this site. For now, in order to one off top up using a different payment card, you need to "),l.\u0275\u0275elementStart(2,"a",32),l.\u0275\u0275text(3,"update the payment details in your profile"),l.\u0275\u0275elementEnd(),l.\u0275\u0275text(4,". Otherwise, you can top up using the "),l.\u0275\u0275elementStart(5,"a",33),l.\u0275\u0275text(6,"Opal website"),l.\u0275\u0275elementEnd(),l.\u0275\u0275text(7," or Opal Travel app. "),l.\u0275\u0275elementEnd()),2&e&&(l.\u0275\u0275advance(2),l.\u0275\u0275property("routerLink",l.\u0275\u0275pureFunction0(2,V))("queryParams",l.\u0275\u0275pureFunction0(3,D)))}function U(e,t){if(1&e&&(l.\u0275\u0275elementStart(0,"form",34),l.\u0275\u0275element(1,"payment-details-form",35),l.\u0275\u0275elementEnd()),2&e){var n=l.\u0275\u0275nextContext(3);l.\u0275\u0275property("formGroup",n.paymentForm),l.\u0275\u0275advance(1),l.\u0275\u0275property("group",n.paymentForm)("hideSubmitButton",!0)("showCancelButton",!1)("showAddCard",n.isRegistered)("checkBoxText",n.checkBoxText)}}function X(e,t){if(1&e){var n=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"button",39),l.\u0275\u0275listener("click",function(){return l.\u0275\u0275restoreView(n),l.\u0275\u0275nextContext(4).cancel()}),l.\u0275\u0275text(1,"Cancel"),l.\u0275\u0275elementEnd()}}function z(e,t){if(1&e){var n=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"div",36),l.\u0275\u0275elementStart(1,"button",37),l.\u0275\u0275listener("click",function(){return l.\u0275\u0275restoreView(n),l.\u0275\u0275nextContext(3).onTopupClick()}),l.\u0275\u0275text(2),l.\u0275\u0275pipe(3,"uppercase"),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(4,X,2,0,"button",38),l.\u0275\u0275elementEnd()}if(2&e){var o=l.\u0275\u0275nextContext(3);l.\u0275\u0275advance(1),l.\u0275\u0275property("disabled",!o.selectedTopupAmount),l.\u0275\u0275advance(1),l.\u0275\u0275textInterpolate1(" ",l.\u0275\u0275pipeBind1(3,3,"Top up")," "),l.\u0275\u0275advance(2),l.\u0275\u0275property("ngIf",!o.paymentAccount)}}function q(e,t){1&e&&l.\u0275\u0275element(0,"tni-security-message")}function H(e,t){if(1&e&&(l.\u0275\u0275elementStart(0,"div"),l.\u0275\u0275template(1,T,2,0,"div",10),l.\u0275\u0275template(2,I,2,0,"div",10),l.\u0275\u0275template(3,N,2,1,"div",11),l.\u0275\u0275template(4,L,5,6,"div",12),l.\u0275\u0275elementStart(5,"div",13),l.\u0275\u0275elementStart(6,"b"),l.\u0275\u0275text(7),l.\u0275\u0275elementEnd(),l.\u0275\u0275text(8," Your total card balance includes the current balance, any pending balance and the selected top up amount. Online top ups show as 'pending' until the card is tapped on at an Opal reader. "),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(9,R,2,0,"div",14),l.\u0275\u0275template(10,j,2,0,"div",15),l.\u0275\u0275template(11,F,1,3,"tni-display-credit-card",16),l.\u0275\u0275template(12,B,8,4,"p",17),l.\u0275\u0275template(13,U,2,6,"form",18),l.\u0275\u0275template(14,z,5,5,"div",19),l.\u0275\u0275template(15,q,1,0,"tni-security-message",6),l.\u0275\u0275elementEnd()),2&e){var n=l.\u0275\u0275nextContext(2);l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",null==n.availableTopupAmounts?null:n.availableTopupAmounts.length),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",!(null!=n.availableTopupAmounts&&n.availableTopupAmounts.length)),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",null==n.availableTopupAmounts?null:n.availableTopupAmounts.length),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",n.selectedTopupAmount),l.\u0275\u0275advance(3),l.\u0275\u0275textInterpolate2("",n.smartCard.cardTypeDescriptionTni," card balance limit is $",n.smartCard.svMax,"."),l.\u0275\u0275advance(2),l.\u0275\u0275property("ngIf",null==n.availableTopupAmounts?null:n.availableTopupAmounts.length),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",n.paymentAccount&&(null==n.availableTopupAmounts?null:n.availableTopupAmounts.length)),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",null==n.availableTopupAmounts?null:n.availableTopupAmounts.length),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",n.paymentAccount&&!n.paymentsEnabled&&(null==n.availableTopupAmounts?null:n.availableTopupAmounts.length)),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",!n.paymentAccount),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",null==n.availableTopupAmounts?null:n.availableTopupAmounts.length),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",null==n.availableTopupAmounts?null:n.availableTopupAmounts.length)}}function K(e,t){1&e&&(l.\u0275\u0275elementStart(0,"p"),l.\u0275\u0275text(1," Payment card has been added to your profile. There may be a slight delay before it's visible. "),l.\u0275\u0275elementEnd())}function Y(e,t){1&e&&(l.\u0275\u0275elementStart(0,"p"),l.\u0275\u0275text(1," A pre-authorisation of $1 has been held while your financial institution verifies this account. It will be returned, usually within 5-10 business days, depending upon your financial institution. "),l.\u0275\u0275elementEnd())}function Q(e,t){if(1&e){var n=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"div",40),l.\u0275\u0275elementStart(1,"div",41),l.\u0275\u0275element(2,"tni-icon",42),l.\u0275\u0275elementStart(3,"h2",43),l.\u0275\u0275text(4,"Top up successful"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(5,"span",44),l.\u0275\u0275text(6),l.\u0275\u0275pipe(7,"centsToDollar"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(8,"p",45),l.\u0275\u0275text(9,"(pending tap on)"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(10,"div"),l.\u0275\u0275elementStart(11,"span",46),l.\u0275\u0275text(12),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(13,"p",47),l.\u0275\u0275text(14," It may take up to 60 minutes before your balance is available to tap on with. You must tap on at an Opal reader within 60 days or your balance will be returned to your payment card. "),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(15,K,2,0,"p",6),l.\u0275\u0275template(16,Y,2,0,"p",6),l.\u0275\u0275elementStart(17,"button",48),l.\u0275\u0275listener("click",function(){return l.\u0275\u0275restoreView(n),l.\u0275\u0275nextContext(2).onDoneClick()}),l.\u0275\u0275text(18,"DONE"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd()}if(2&e){var o=l.\u0275\u0275nextContext(2);l.\u0275\u0275advance(6),l.\u0275\u0275textInterpolate(l.\u0275\u0275pipeBind2(7,4,o.successfulTopupAmount,"1.0")),l.\u0275\u0275advance(6),l.\u0275\u0275textInterpolate1("Receipt no: ",o.orderNo,""),l.\u0275\u0275advance(3),l.\u0275\u0275property("ngIf",o.cardAdded),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",o.changeOrAddPaymentCardDetails)}}var G=function(e){return["/account/profile",e]},W=function(){return{exact:!0}};function J(e,t){1&e&&(l.\u0275\u0275elementStart(0,"p",53),l.\u0275\u0275text(1," We are unable to process your top up, please check your "),l.\u0275\u0275elementStart(2,"a",54,55),l.\u0275\u0275text(4,"payment details"),l.\u0275\u0275elementEnd(),l.\u0275\u0275text(5," and try again. "),l.\u0275\u0275elementEnd()),2&e&&(l.\u0275\u0275advance(2),l.\u0275\u0275property("routerLink",l.\u0275\u0275pureFunction1(3,G,l.\u0275\u0275pureFunction0(2,D)))("routerLinkActiveOptions",l.\u0275\u0275pureFunction0(5,W)))}function Z(e,t){1&e&&(l.\u0275\u0275elementStart(0,"p",53),l.\u0275\u0275text(1," We are unable to process your top up, please check your payment details and try again. "),l.\u0275\u0275elementEnd())}function $(e,t){if(1&e){var n=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"div",40),l.\u0275\u0275elementStart(1,"div",41),l.\u0275\u0275element(2,"tni-icon",49),l.\u0275\u0275elementStart(3,"h2",50),l.\u0275\u0275text(4," Top up unsuccessful "),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(5,J,6,6,"p",51),l.\u0275\u0275template(6,Z,2,0,"p",51),l.\u0275\u0275elementStart(7,"button",52),l.\u0275\u0275listener("click",function(){return l.\u0275\u0275restoreView(n),l.\u0275\u0275nextContext(2).onDoneClick()}),l.\u0275\u0275text(8,"OK"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd()}if(2&e){var o=l.\u0275\u0275nextContext(2);l.\u0275\u0275advance(5),l.\u0275\u0275property("ngIf",o.isRegistered),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",!o.isRegistered)}}function ee(e,t){if(1&e&&(l.\u0275\u0275elementStart(0,"div",3),l.\u0275\u0275elementStart(1,"div",4),l.\u0275\u0275elementStart(2,"h3",5),l.\u0275\u0275text(3,"One off top up"),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(4,H,16,13,"div",6),l.\u0275\u0275elementStart(5,"div",7,8),l.\u0275\u0275template(7,Q,19,7,"div",9),l.\u0275\u0275elementEnd(),l.\u0275\u0275template(8,$,9,2,"div",9),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd()),2&e){var n=l.\u0275\u0275nextContext();l.\u0275\u0275advance(4),l.\u0275\u0275property("ngIf",n.hasState("Initial")),l.\u0275\u0275advance(3),l.\u0275\u0275property("ngIf",n.hasState("SyncTopupComplete")||n.hasState("TopupComplete")),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",n.hasState("TopupError")||n.hasState("PaymentTokenError")||n.hasState("BpointCallbackError")||n.hasState("VerifyTokenError")||n.hasState("SyncTopupError"))}}function te(e,t){1&e&&(l.\u0275\u0275elementStart(0,"p"),l.\u0275\u0275text(1," We'll be adding more Opal features to this site. For now, in order to top up on this site, you need to "),l.\u0275\u0275elementStart(2,"a",32),l.\u0275\u0275text(3,"save a payment card to your account"),l.\u0275\u0275elementEnd(),l.\u0275\u0275text(4,". Otherwise, you can top up using the "),l.\u0275\u0275elementStart(5,"a",33),l.\u0275\u0275text(6,"Opal website"),l.\u0275\u0275elementEnd(),l.\u0275\u0275text(7," or Opal Travel app. "),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(8,"div",56),l.\u0275\u0275elementStart(9,"a",57),l.\u0275\u0275element(10,"tni-image",58),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(11,"a",59),l.\u0275\u0275element(12,"tni-image",60),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd()),2&e&&(l.\u0275\u0275advance(2),l.\u0275\u0275property("routerLink",l.\u0275\u0275pureFunction0(2,V))("queryParams",l.\u0275\u0275pureFunction0(3,D)))}function ne(e,t){if(1&e){var n=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"tni-modal",61),l.\u0275\u0275listener("closeEvent",function(){return l.\u0275\u0275restoreView(n),l.\u0275\u0275nextContext().handleCancelVerifyToken()}),l.\u0275\u0275elementStart(1,"p"),l.\u0275\u0275text(2," The processing of your payment has been interrupted and we are unable to top up your Opal card. Please try again later. "),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(3,"button",62),l.\u0275\u0275listener("click",function(){return l.\u0275\u0275restoreView(n),l.\u0275\u0275nextContext().handleVerifyTopupRetry()}),l.\u0275\u0275text(4,"retry"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(5,"button",63),l.\u0275\u0275listener("click",function(){return l.\u0275\u0275restoreView(n),l.\u0275\u0275nextContext().handleCancelVerifyToken()}),l.\u0275\u0275text(6,"cancel"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd()}}function oe(e,t){if(1&e){var n=l.\u0275\u0275getCurrentView();l.\u0275\u0275elementStart(0,"tni-modal",61),l.\u0275\u0275listener("closeEvent",function(){return l.\u0275\u0275restoreView(n),l.\u0275\u0275nextContext().handleCancelSyncTopup()}),l.\u0275\u0275elementStart(1,"p"),l.\u0275\u0275text(2," The processing of your payment has been interrupted and we are unable to top up your Opal card. Please try again later. "),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(3,"button",62),l.\u0275\u0275listener("click",function(){return l.\u0275\u0275restoreView(n),l.\u0275\u0275nextContext().handleSyncTopupRetry()}),l.\u0275\u0275text(4,"retry"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementStart(5,"button",63),l.\u0275\u0275listener("click",function(){return l.\u0275\u0275restoreView(n),l.\u0275\u0275nextContext().handleCancelSyncTopup()}),l.\u0275\u0275text(6,"cancel"),l.\u0275\u0275elementEnd(),l.\u0275\u0275elementEnd()}}t.OneOffTopupComponent=function(){function e(e,t,n,o,i,a,c,s,l,d,p,u){this.panelRefreshService=e,this.smartcardService=t,this.loaderService=n,this.trackOpalEventService=o,this.formValidationService=i,this.paymentService=a,this.activeRoute=c,this.router=s,this.cdRef=l,this.scrollService=d,this.featureToggleService=p,this.oneoffTopupPaymentProcessService=u,this.getPaymentAccount=new r.EventEmitter,this.isSavingData=!1,this.cardAdded=!1,this.model={},this.changeOrAddPaymentCardDetails=!1}return e.prototype.ngAfterViewInit=function(){var e=this;this.smartcardService.smartcard$.subscribe(function(t){e.smartCard.smartcardId===t.smartcardId&&(e.smartCard=t,e.availableTopupAmounts=e.availableTopupAmounts.filter(function(t){return t+e.smartCard.svPending+e.smartCard.svBalance<=100*e.smartCard.svMax}),e.cdRef.detectChanges())}),this.activeRouteSubscription=this.activeRoute.queryParams.subscribe(function(t){t.component&&"one-off-topup"===t.component&&(e.panelRefreshService.setActivePanel("panel2"),e.router.navigateByUrl("/account/cards"),e.handleBpointCallback(t))})},e.prototype.ngOnInit=function(){var e,t,n=this,o=null===(t=null===(e=this.featureToggleService.featureToggles)||void 0===e?void 0:e.toggles)||void 0===t?void 0:t["opal-allow-amex-and-jcb-payments"];this.paymentForm=new a.FormGroup({name:new a.FormControl(this.model.name,[a.Validators.required]),number:new a.FormControl(this.model.number,[a.Validators.required,a.Validators.pattern(c.TniRegularExpressions.creditCardNumber(o))]),cvv:new a.FormControl(this.model.cvv,[a.Validators.required,a.Validators.pattern(c.TniRegularExpressions.cvv(o))]),expiry:new a.FormControl(this.model.expiry,[a.Validators.required,a.Validators.pattern(c.TniRegularExpressions.creditCardExpiry)]),saveCard:new a.FormControl(this.model.saveCard)}),this.setUpCheckBoxText(),this.oneoffTopupPaymentProcessService.oneOffTopupPaymentProcessState.subscribe(function(e){n.handleStateChange(e)})},e.prototype.ngOnDestroy=function(){this.cdRef.detach(),this.oneoffTopupPaymentProcessService.refreshSubject()},e.prototype.ngOnChanges=function(e){var t,n,o=this;e.smartCard&&(this.selectedTopupAmount=null),e.paymentAccount&&this.setUpCheckBoxText(),this.cardType=null===(n=null===(t=e.paymentAccount)||void 0===t?void 0:t.currentValue)||void 0===n?void 0:n.bankCardType,this.availableTopupAmounts=this.availableTopupAmounts.filter(function(e){return e+o.smartCard.svPending+o.smartCard.svBalance<=100*o.smartCard.svMax}),!this.paymentAccount&&this.availableTopupAmounts.length>0&&(this.selectedTopupAmount=this.availableTopupAmounts[0],this.totalBalance=this.smartCard.svPending+this.smartCard.svBalance+this.selectedTopupAmount)},e.prototype.hasState=function(e){return this.processState&&this.processState.stateName===e},e.prototype.handleStateChange=function(e){this.processState=Object.assign({},e),this[this.processState.stateName]&&(this[this.processState.stateName](this.processState),this.cdRef.detectChanges())},e.prototype.TopupRequested=function(){this.loaderService.loadSpinnerWithDisplayText("We are processing your payment")},e.prototype.TopupError=function(){this.performPostErrorRitual()},e.prototype.TopupComplete=function(e){this.orderNo=e.data.orderNo,this.performPostSuccessRitual(this.selectedTopupAmount).pipe(o.take(1)).subscribe()},e.prototype.PaymentTokenRequested=function(){this.loaderService.loadSpinnerWithDisplayText("We are processing your payment")},e.prototype.PaymentTokenComplete=function(e){window.addEventListener("message",this.handleBpointCallback.bind(this),!1),this.paymentService.createBpayRequest(e.data.tokenResponse,this.selectedTopupAmount,this.paymentForm.controls.expiry.value,this.paymentForm.controls.cvv.value,this.paymentForm.controls.number.value,this.paymentForm.controls.saveCard.value,"one-off-topup",this.smartCard.smartcardId,e.data.tokenResponse.MerchantReceipt)},e.prototype.PaymentTokenError=function(){this.performPostErrorRitual()},e.prototype.BpointCallbackError=function(){this.performPostErrorRitual()},e.prototype.VerifyTokenError=function(){this.performPostErrorRitual()},e.prototype.VerifyTokenRequested=function(){this.loaderService.loadSpinnerWithDisplayText("We are processing your payment")},e.prototype.VerifyTokenComplete=function(){this.panelRefreshService.pushPanelRefreshEvent()},e.prototype.VerifyTokenRetry=function(){this.loaderService.setDisplayText("Please be patient we are still processing your payment. Do not click away or close your browser.")},e.prototype.VerifyTokenRequestRetry=function(){this.loaderService.unloadSpinner()},e.prototype.SyncTopupRequested=function(){this.loaderService.loadSpinnerWithDisplayText("We are processing your payment")},e.prototype.SyncTopupRetry=function(){this.loaderService.setDisplayText("Please be patient we are still processing your payment. Do not click away or close your browser.")},e.prototype.SyncTopupRequestRetry=function(){this.loaderService.unloadSpinner()},e.prototype.SyncTopupError=function(){this.performPostErrorRitual()},e.prototype.SyncTopupComplete=function(e){this.changeOrAddPaymentCardDetails=this.cardAdded,this.cardAdded="1"===this.bpointParams.out_store_card,this.orderNo=e.data.orderNo,this.performPostSuccessRitual(e.data.amount).pipe(o.take(1)).subscribe()},e.prototype.performPostSuccessRitual=function(e){return this.trackOpalEventService.topUp(),this.loaderService.unloadSpinner(),this.panelRefreshService.pushPanelRefreshEvent(),this.successfulTopupAmount=e,this.topupMessage.nativeElement.focus(),this.selectedTopupAmount=null,this.getPaymentAccount.emit(),this.smartcardService.getDetailAndPublish(this.smartCard.smartcardId.toString())},e.prototype.setUpCheckBoxText=function(){this.checkBoxText=this.paymentAccount?"Save updated payment card to my profile. Any previously saved payment details will be overwritten.":"Save this payment card to my profile."},e.prototype.onTopupClick=function(){this.cardAdded=!1,this.paymentAccount?this.oneoffTopupPaymentProcessService.topup(this.smartCard.smartcardId,this.selectedTopupAmount):(this.formValidationService.validate(this.paymentForm),this.paymentForm.valid&&this.oneoffTopupPaymentProcessService.getPaymentToken(this.smartCard.smartcardId,this.selectedTopupAmount))},e.prototype.handleBpointCallback=function(e){this.bpointParams=e,this.oneoffTopupPaymentProcessService.bpointCallback("0"===e.out_response_code,e)},e.prototype.handleSyncTopupRetry=function(){this.oneoffTopupPaymentProcessService.initiateSyncTopUp(this.bpointParams)},e.prototype.handleVerifyTopupRetry=function(){this.oneoffTopupPaymentProcessService.verifyToken(this.bpointParams)},e.prototype.handleCancelVerifyToken=function(){this.oneoffTopupPaymentProcessService.cancelVerifyToken()},e.prototype.handleCancelSyncTopup=function(){this.oneoffTopupPaymentProcessService.cancelSyncTopup()},e.prototype.onSelectTopupAmount=function(){this.totalBalance=this.smartCard.svPending+this.smartCard.svBalance+this.selectedTopupAmount,this.panelRefreshService.pushPanelRefreshEvent()},e.prototype.onDoneClick=function(){this.changeOrAddPaymentCardDetails=!1,this.panelRefreshService.pushPanelRefreshEvent(),(this.hasState("SyncTopupComplete")||this.hasState("TopupComplete"))&&this.scrollService.smoothScrollFocusToElementById("carousel-inner",0,0),this.oneoffTopupPaymentProcessService.finishPaymentProcess(),this.paymentAccount||(this.selectedTopupAmount=this.availableTopupAmounts[0])},e.prototype.performPostErrorRitual=function(){this.panelRefreshService.pushPanelRefreshEvent(),this.loaderService.unloadSpinner()},e.prototype.changeCardDetails=function(){this.paymentAccount=null,this.panelRefreshService.pushPanelRefreshEvent()},e.prototype.cancel=function(){this.oneoffTopupPaymentProcessService.finishPaymentProcess(),this.loaderService.display(!0),this.getPaymentAccount.emit(),this.displayCreditCardComponent.displayChangeBtn=!0},e.\u0275fac=function(t){return new(t||e)(l.\u0275\u0275directiveInject(d.TniPanelRefreshService),l.\u0275\u0275directiveInject(p.SmartcardService),l.\u0275\u0275directiveInject(u.LoaderService),l.\u0275\u0275directiveInject(m.TrackOpalEventService),l.\u0275\u0275directiveInject(f.FormValidationService),l.\u0275\u0275directiveInject(g.PaymentService),l.\u0275\u0275directiveInject(h.ActivatedRoute),l.\u0275\u0275directiveInject(h.Router),l.\u0275\u0275directiveInject(l.ChangeDetectorRef),l.\u0275\u0275directiveInject(v.ScrollService),l.\u0275\u0275directiveInject(C.FeatureToggleService),l.\u0275\u0275directiveInject(_.OneoffTopupPaymentProcessService))},e.\u0275cmp=l.\u0275\u0275defineComponent({type:e,selectors:[["tni-one-off-topup"]],viewQuery:function(e,t){if(1&e&&(l.\u0275\u0275viewQuery(E,!0),l.\u0275\u0275viewQuery(s.DisplayCreditCardComponent,!0)),2&e){var n=void 0;l.\u0275\u0275queryRefresh(n=l.\u0275\u0275loadQuery())&&(t.topupMessage=n.first),l.\u0275\u0275queryRefresh(n=l.\u0275\u0275loadQuery())&&(t.displayCreditCardComponent=n.first)}},inputs:{smartCard:"smartCard",availableTopupAmounts:"availableTopupAmounts",paymentAccount:"paymentAccount",queryData:"queryData",paymentsEnabled:"paymentsEnabled",isRegistered:"isRegistered"},outputs:{getPaymentAccount:"getPaymentAccount"},features:[l.\u0275\u0275NgOnChangesFeature],decls:5,vars:4,consts:[["class","one-off-topup-component",4,"ngIf","ngIfElse"],["copyMessage",""],["class","one-off-topup__topup-error-modal","ariaLabel","error topping up",3,"closeEvent",4,"ngIf"],[1,"one-off-topup-component"],[1,"one-off-topup-container"],[1,"one-off-topup__header"],[4,"ngIf"],["tabindex","-1",1,"topup-message"],["topupMessage",""],["class","one-off-topup-component__success",4,"ngIf"],["class","select-topup",4,"ngIf"],["class","top-amount-radio",4,"ngIf"],["class","total-balance",4,"ngIf"],[1,"extra-info"],["class","extra-info-2",4,"ngIf"],["class","pay-with",4,"ngIf"],[3,"paymentAccount","cardType","featureToggle","changeCard",4,"ngIf"],["class","payment-details-referal",4,"ngIf"],["class","row",3,"formGroup",4,"ngIf"],["class","button-block",4,"ngIf"],[1,"select-topup"],[1,"top-amount-radio"],["class","top-amount-radio-item",4,"ngFor","ngForOf"],[1,"top-amount-radio-item"],[1,"top-amount-radio-item-option"],["type","radio","name","topupAmountRadio",1,"sr-only",3,"value","ngModel","ngModelChange"],[1,"total-balance"],[1,"amount"],[1,"extra-info-2"],[1,"pay-with"],[3,"paymentAccount","cardType","featureToggle","changeCard"],[1,"payment-details-referal"],[3,"routerLink","queryParams"],["href","https://www.opal.com.au/en/get-an-opal-card/top-up/?mobile_redirect=true","target","_blank"],[1,"row",3,"formGroup"],[3,"group","hideSubmitButton","showCancelButton","showAddCard","checkBoxText"],[1,"button-block"],["type","button",1,"one-off-topup-component__topup-btn",3,"disabled","click"],["class","cancel-btn",3,"click",4,"ngIf"],[1,"cancel-btn",3,"click"],[1,"one-off-topup-component__success"],[1,"one-off-topup-component__inner"],["iconName","success","iconClasses","xl","iconAriaHidden","true","iconHidden","false",1,"one-off-topup-component__success__icon"],[1,"one-off-topup-component__success__heading"],[1,"one-off-topup-component__success__amount"],[1,"one-off-topup-component__success__pending"],[1,"receipt-number"],[1,"one-off-topup-component__success__message"],[1,"one-off-topup-component__success-btn",3,"click"],["iconName","alert","iconClasses","xl","iconAriaHidden","true","iconHidden","false",1,"one-off-topup-component__success__icon","error-message"],[1,"one-off-topup-component__success__heading","one-off-topup-component__success__heading--unsuccessful"],["class","one-off-topup-component__error__message",4,"ngIf"],[1,"one-off-topup-component__error-btn",3,"click"],[1,"one-off-topup-component__error__message"],["routerLinkActive","active",3,"routerLink","routerLinkActiveOptions"],["profileMenu","routerLinkActive"],[1,"opal-app-store-links"],["href","https://itunes.apple.com/au/app/opal-travel/id941006607?mt=8",1,"one-off-topup__mobile-link"],["imageName","assets/logos/logo_apple-ios-badge.svg","imageTitle","Download on the App Store"],["href","https://play.google.com/store/apps/details?id=au.com.opal.travel&hl=en",1,"one-off-topup__mobile-link"],["imageName","assets/logos/logo_google-badge.svg","imageTitle","Get it on Google Play"],["ariaLabel","error topping up",1,"one-off-topup__topup-error-modal",3,"closeEvent"],[1,"one-off-topup__topup-error-modal-retry",3,"click"],[1,"one-off-topup__topup-error-modal-cancel",3,"click"]],template:function(e,t){if(1&e&&(l.\u0275\u0275template(0,ee,9,3,"div",0),l.\u0275\u0275template(1,te,13,4,"ng-template",null,1,l.\u0275\u0275templateRefExtractor),l.\u0275\u0275template(3,ne,7,0,"tni-modal",2),l.\u0275\u0275template(4,oe,7,0,"tni-modal",2)),2&e){var n=l.\u0275\u0275reference(2);l.\u0275\u0275property("ngIf",t.paymentAccount||t.paymentsEnabled)("ngIfElse",n),l.\u0275\u0275advance(3),l.\u0275\u0275property("ngIf",t.hasState("VerifyTokenRequestRetry")),l.\u0275\u0275advance(1),l.\u0275\u0275property("ngIf",t.hasState("SyncTopupRequestRetry"))}},directives:[b.NgIf,b.NgForOf,x.RadioControlValueAccessor,x.DefaultValueAccessor,x.NgControlStatus,x.NgModel,y.DisplayCreditCardComponent,h.RouterLinkWithHref,x.\u0275angular_packages_forms_forms_y,x.NgControlStatusGroup,x.FormGroupDirective,M.PaymentDetailsFormComponent,P.SecurityMessageComponent,O.IconComponent,h.RouterLinkActive,S.TniImageComponent,w.ModalWindowComponent],pipes:[k.CentsToDollarPipe,b.UpperCasePipe],styles:['.one-off-topup-component__error[_ngcontent-%COMP%], .one-off-topup-component__success[_ngcontent-%COMP%]{text-align:center}.one-off-topup-component__error__heading[_ngcontent-%COMP%], .one-off-topup-component__success__heading[_ngcontent-%COMP%]{font-size:24px;font-weight:300}.one-off-topup-component__error__amount[_ngcontent-%COMP%], .one-off-topup-component__success__amount[_ngcontent-%COMP%]{font-size:22px;color:#00881f;font-weight:700}.one-off-topup-component__error__message[_ngcontent-%COMP%], .one-off-topup-component__success__message[_ngcontent-%COMP%]{font-size:16px;margin:25px 0;text-align:center}.one-off-topup-component__error__pending[_ngcontent-%COMP%], .one-off-topup-component__success__pending[_ngcontent-%COMP%]{margin-top:0}.one-off-topup-component[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{fill:#d62d20;color:#d62d20}.one-off-topup-component[_ngcontent-%COMP%]   .one-off-topup-container[_ngcontent-%COMP%]{text-align:left}.one-off-topup-component[_ngcontent-%COMP%]   .one-off-topup-container[_ngcontent-%COMP%]   .select-topup[_ngcontent-%COMP%]{font-weight:500;margin-bottom:25px;font-size:16px;text-align:center}.one-off-topup-component[_ngcontent-%COMP%]   .one-off-topup-container[_ngcontent-%COMP%]   .top-amount-radio[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;text-align:center;min-height:65px;height:65px;margin-bottom:25px}@media (max-width:767px){.one-off-topup-component[_ngcontent-%COMP%]   .one-off-topup-container[_ngcontent-%COMP%]   .top-amount-radio[_ngcontent-%COMP%]{min-height:50px}}.one-off-topup-component[_ngcontent-%COMP%]   .one-off-topup-container[_ngcontent-%COMP%]   .top-amount-radio-item[_ngcontent-%COMP%]{display:inline-block;flex:0 1 55px;margin:0 10px}@media (max-width:767px){.one-off-topup-component[_ngcontent-%COMP%]   .one-off-topup-container[_ngcontent-%COMP%]   .top-amount-radio-item[_ngcontent-%COMP%]{flex:0 1;margin:0 2px}}.one-off-topup-component[_ngcontent-%COMP%]   .one-off-topup-container[_ngcontent-%COMP%]   .top-amount-radio-item-option[_ngcontent-%COMP%]{transition:transform .1s ease;border-radius:50%;box-sizing:border-box;border:1px solid #dbdbdb;background-color:#f1f1f1;height:55px;width:55px;line-height:54px;font-size:15px;cursor:pointer}@media (max-width:767px){.one-off-topup-component[_ngcontent-%COMP%]   .one-off-topup-container[_ngcontent-%COMP%]   .top-amount-radio-item-option[_ngcontent-%COMP%]{height:45px;line-height:44px;width:45px;font-size:12px}}.one-off-topup-component[_ngcontent-%COMP%]   .one-off-topup-container[_ngcontent-%COMP%]   .top-amount-radio-item[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{transform:scale(1.2);background-color:#00881f;color:#fff;border:0}@media (max-width:767px){.one-off-topup-component[_ngcontent-%COMP%]   .one-off-topup-container[_ngcontent-%COMP%]   .top-amount-radio-item[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{transform:scale(1.15)}}.one-off-topup-component[_ngcontent-%COMP%]   .one-off-topup-container[_ngcontent-%COMP%]   .extra-info[_ngcontent-%COMP%], .one-off-topup-component[_ngcontent-%COMP%]   .one-off-topup-container[_ngcontent-%COMP%]   .extra-info-2[_ngcontent-%COMP%]{font-size:14px;line-height:1.5}.one-off-topup-component[_ngcontent-%COMP%]   .one-off-topup-container[_ngcontent-%COMP%]   .extra-info-2[_ngcontent-%COMP%]{margin-top:15px}.one-off-topup-component[_ngcontent-%COMP%]   .one-off-topup-container[_ngcontent-%COMP%]   .negative-amount[_ngcontent-%COMP%]{color:#e4022d}.one-off-topup-component[_ngcontent-%COMP%]   .one-off-topup-container[_ngcontent-%COMP%]   .error-on-saving[_ngcontent-%COMP%]{color:#e4022d;margin-bottom:15px}@media (min-width:768px){.one-off-topup-component[_ngcontent-%COMP%]   .one-off-topup-container[_ngcontent-%COMP%]   .error-on-saving[_ngcontent-%COMP%]{font-size:.85em}}.one-off-topup-component[_ngcontent-%COMP%]   .one-off-topup-container[_ngcontent-%COMP%]   .receipt-number[_ngcontent-%COMP%]{border:1px solid #dbdbdb;border-radius:4px;font-size:12px;margin-top:15px;width:35%;min-width:165px;display:inline-block;padding:3px}.one-off-topup-component[_ngcontent-%COMP%]   .saving-data-overlay[_ngcontent-%COMP%]{position:fixed;width:100%;height:100%;top:0;left:0;right:0;bottom:0;background-color:#f6f6f6;opacity:.92;z-index:999;font-weight:500;text-align:center;color:#1d69b4}.one-off-topup-component[_ngcontent-%COMP%]   .saving-data-overlay[_ngcontent-%COMP%]     .saving-spinner{position:absolute;top:35%;right:0;left:0;margin:auto;width:200px;padding:20px 0}.one-off-topup-component[_ngcontent-%COMP%]   .pay-with[_ngcontent-%COMP%]{font-size:12px;margin-top:25px}.one-off-topup-component[_ngcontent-%COMP%]   .total-balance[_ngcontent-%COMP%]{font-size:24px;margin-bottom:14px;margin-top:25px;line-height:1.5em}.one-off-topup-component[_ngcontent-%COMP%]   .total-balance[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{color:#00881f}.one-off-topup-component[_ngcontent-%COMP%]     .collapsible-card-details{margin:20px 0;padding:5px 10px 20px}@media (max-width:767px){.one-off-topup-component[_ngcontent-%COMP%]     .collapsible-card-details{margin:20px 10px!important;padding:5px 15px!important}}.bpoint-frame[_ngcontent-%COMP%]{display:none}.payment-details-referal[_ngcontent-%COMP%]{font-size:12px;line-height:1.25em;margin-bottom:50px}.button-block[_ngcontent-%COMP%]{margin-bottom:48px}.topup-message[_ngcontent-%COMP%]{outline:0}.one-off-topup__header[_ngcontent-%COMP%]{margin-top:0;font-weight:300;font-size:24px;line-height:1.3333;margin-bottom:2rem}.cancel-btn[_ngcontent-%COMP%]{border-radius:4px;border:0 solid transparent;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background:transparent}.cancel-btn[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.cancel-btn[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .cancel-btn[_ngcontent-%COMP%]{margin-top:10px}.one-off-topup-component__error-btn[_ngcontent-%COMP%], .one-off-topup-component__success-btn[_ngcontent-%COMP%], .one-off-topup-component__topup-btn[_ngcontent-%COMP%]{border-radius:4px;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background-color:#1d69b4;border:0 solid #195c9e;color:#fff}.one-off-topup-component__error-btn[disabled][_ngcontent-%COMP%], .one-off-topup-component__success-btn[disabled][_ngcontent-%COMP%], .one-off-topup-component__topup-btn[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.one-off-topup-component__error-btn[_ngcontent-%COMP%]:hover:after, .one-off-topup-component__success-btn[_ngcontent-%COMP%]:hover:after, .one-off-topup-component__topup-btn[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .one-off-topup-component__error-btn[_ngcontent-%COMP%], button[_ngcontent-%COMP%] + .one-off-topup-component__success-btn[_ngcontent-%COMP%], button[_ngcontent-%COMP%] + .one-off-topup-component__topup-btn[_ngcontent-%COMP%]{margin-top:10px}.one-off-topup-component__error-btn[_ngcontent-%COMP%], .one-off-topup-component__success-btn[_ngcontent-%COMP%]{margin-top:48px}.one-off-topup-component__success__icon[_ngcontent-%COMP%]{margin-bottom:16px;display:block}@media (min-width:768px){.opal-app-store-links[_ngcontent-%COMP%]{display:none}}.one-off-topup__mobile-link[_ngcontent-%COMP%]{max-width:200px;max-height:90px;margin:0 auto;display:block}.one-off-topup__mobile-link[_ngcontent-%COMP%]:after{display:none}.one-off-topup__mobile-link[_ngcontent-%COMP%]     svg{width:100%}.one-off-topup__topup-error-modal-cancel[_ngcontent-%COMP%]{border-radius:4px;border:0 solid transparent;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background:transparent}.one-off-topup__topup-error-modal-cancel[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.one-off-topup__topup-error-modal-cancel[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .one-off-topup__topup-error-modal-cancel[_ngcontent-%COMP%]{margin-top:10px}.one-off-topup__topup-error-modal-retry[_ngcontent-%COMP%]{border-radius:4px;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background-color:#1d69b4;border:0 solid #195c9e;color:#fff}.one-off-topup__topup-error-modal-retry[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.one-off-topup__topup-error-modal-retry[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .one-off-topup__topup-error-modal-retry[_ngcontent-%COMP%]{margin-top:10px}'],data:{animation:[i.fadeInAnimation]}}),e}()},"U+qi":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalCardNumberPipe=void 0,n("fXoL");var o=n("fXoL");t.OpalCardNumberPipe=function(){function e(){}return e.prototype.transform=function(e){return e?e.toString().replace(/(.{4})/g,"$1 ").trim():""},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.\u0275\u0275definePipe({name:"opalCardNumber",type:e,pure:!0}),e}()},"UI8/":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardRegistrationComponent=void 0,n("fXoL");var o=n("3Pt+"),r=n("u3Ad"),i=(n("WcMK"),n("NRRr"),n("U+qi")),a=n("kU1M"),c=(n("tyNb"),n("PShm"),n("m8Qk")),s=(n("0ruu"),n("Uf+G"),n("fXoL")),l=n("3Pt+"),d=n("WcMK"),p=n("0ruu"),u=n("NRRr"),m=n("tyNb"),f=n("PShm"),g=n("Uf+G"),h=n("ofXK"),v=n("amr8"),C=n("73Ru"),_=n("M4hh"),b=n("gM7n"),x=n("kAtE");function y(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"tni-form-message",10),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),2&e){var n=s.\u0275\u0275nextContext(2);s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",n.responseError," ")}}function M(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div",6),s.\u0275\u0275elementStart(1,"header"),s.\u0275\u0275elementStart(2,"h2",7),s.\u0275\u0275text(3,"Link Opal card"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(4,y,2,1,"tni-form-message",8),s.\u0275\u0275elementStart(5,"card-form",9),s.\u0275\u0275listener("cardValidationError",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().cardValidationErrorHandler()})("cancel",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().cancel()})("submitCardDetails",function(e){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().registerCard(e)}),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}if(2&e){var o=s.\u0275\u0275nextContext();s.\u0275\u0275advance(4),s.\u0275\u0275property("ngIf",o.regoError),s.\u0275\u0275advance(1),s.\u0275\u0275property("group",o.cardDetails)("customSubmitLabel","LINK CARD")("showNickname",!0)("hideSubmitButton",!1)("authenticate",!1)("showCancelButton",!0)}}function P(e,t){1&e&&(s.\u0275\u0275elementStart(0,"div",11),s.\u0275\u0275element(1,"tni-state-banner",12),s.\u0275\u0275elementEnd()),2&e&&(s.\u0275\u0275advance(1),s.\u0275\u0275property("state",!0)("message","Opal card linked successfully")("redirect","/account/cards")("customLabel","OK"))}function O(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div",13),s.\u0275\u0275elementStart(1,"div",14),s.\u0275\u0275elementStart(2,"div",15),s.\u0275\u0275elementStart(3,"div",16),s.\u0275\u0275elementStart(4,"tni-action-list"),s.\u0275\u0275elementStart(5,"h2",17),s.\u0275\u0275text(6,"What would you like to do now?"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(7,"li",18),s.\u0275\u0275listener("click",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().switchToAddMode()}),s.\u0275\u0275text(8,"Link another card"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(9,"li",19),s.\u0275\u0275listener("click",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().OneOffTopupLinkClicked()}),s.\u0275\u0275text(10,"Top up"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(11,"li",20),s.\u0275\u0275listener("click",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().CardsLinkClicked()}),s.\u0275\u0275text(12,"Back to Opal cards"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}}t.CardRegistrationComponent=function(){function e(e,t,n,o,r,a,c){this.formBuilder=e,this.dataSharingService=t,this.scrollService=n,this.loaderService=o,this.router=r,this.smartcardService=a,this.uiStateService=c,this.cardNumberPipe=new i.OpalCardNumberPipe,this.regoError=!1,this.regoSuccess=!1}return e.prototype.ngOnInit=function(){this.createForm(),this.scrollTo("link-card-header")},e.prototype.createForm=function(){this.cardDetails=this.formBuilder.group({cardNumber:this.formBuilder.control(this.inactiveCardNumber,[o.Validators.required,o.Validators.pattern(r.TniRegularExpressions.cardNumber)]),cardCode:this.formBuilder.control(null,[o.Validators.required,o.Validators.pattern(r.TniRegularExpressions.pin)]),cardNick:this.formBuilder.control(null,[o.Validators.maxLength(40)])})},e.prototype.cancel=function(){this.router.navigate(["/account/cards"])},e.prototype.registerCard=function(){var e=this;this.cardDetails.valid&&(this.loaderService.display(!0),this.linkCard$=this.smartcardService.register(this.cardDetails.controls.cardNumber.value.replace(/ /g,""),this.cardDetails.controls.cardCode.value,this.cardDetails.controls.cardNick.value).pipe(a.finalize(function(){return e.loaderService.display(!1)})).subscribe(function(){e.regoError=!1,e.regoSuccess=!0,e.successCardNumber=e.cardDetails.controls.cardNumber.value.replace(/ /g,""),e.cardDetails.reset(),e.getCard$=e.smartcardService.getListAndPublish().subscribe(),e.scrollTo("card-rego-success")},function(t){e.regoError=!0,e.regoSuccess=!1,e.responseError=425===t.status&&t.error?t.error.Message?e.mapErrorMessage(t.error.Message):null:c.LoginResponseMessageEnum.UnauthorizedCard,e.scrollTo("card-rego-error")}))},e.prototype.mapErrorMessage=function(e){switch(e){case"CARD ALREADY REGISTERED":return"This Opal card is already registered.";case"AUTHORISATION FAILURE":case"CARD NOT FOUND":return"This card number or security code is incorrect. Please check the back of the Opal card and try again.";case"Card is an entitlement based and no entitlement data provided":this.dataSharingService.set("cardData",{SmartcardId:Number(this.cardDetails.controls.cardNumber.value.replace(/ /g,"")),SmartcardSc:this.cardDetails.controls.cardCode.value,CardNickname:this.cardDetails.controls.cardNick.value}),this.router.navigate(["/account/add-entitlement"])}return null},e.prototype.scrollTo=function(e){var t=this;setTimeout(function(){t.scrollService.smoothScrollFocusToElementById(e,100,100)},100)},e.prototype.ngOnDestroy=function(){this.linkCard$&&this.linkCard$.unsubscribe(),this.getCard$&&this.getCard$.unsubscribe()},e.prototype.OneOffTopupLinkClicked=function(){this.uiStateService.setOpalCardsPageTab("tni-opal-topup-tab"),this.router.navigate(["/account/cards"],{queryParams:{smartCard:this.successCardNumber},queryParamsHandling:"merge",skipLocationChange:!0})},e.prototype.CardsLinkClicked=function(){this.uiStateService.setOpalCardsPageTab("tni-opal-activity-tab"),this.router.navigate(["/account/cards"],{queryParams:{smartCard:this.successCardNumber},queryParamsHandling:"merge",skipLocationChange:!0})},e.prototype.switchToAddMode=function(){this.regoSuccess=!1},e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275directiveInject(l.FormBuilder),s.\u0275\u0275directiveInject(d.DataSharingService),s.\u0275\u0275directiveInject(p.ScrollService),s.\u0275\u0275directiveInject(u.LoaderService),s.\u0275\u0275directiveInject(m.Router),s.\u0275\u0275directiveInject(f.SmartcardService),s.\u0275\u0275directiveInject(g.UiStateService))},e.\u0275cmp=s.\u0275\u0275defineComponent({type:e,selectors:[["tni-card-registration"]],decls:6,vars:3,consts:[[1,"container"],[1,"row"],[1,"form-component"],["class","container-fluid",4,"ngIf"],["class","success","id","card-rego-success",4,"ngIf"],["class","row options-wrapper",4,"ngIf"],[1,"container-fluid"],["id","link-card-header","tabindex","-1","href",""],["class","card-rego-error row","id","card-rego-error",4,"ngIf"],["title","Card details",3,"group","customSubmitLabel","showNickname","hideSubmitButton","authenticate","showCancelButton","cardValidationError","cancel","submitCardDetails"],["id","card-rego-error",1,"card-rego-error","row"],["id","card-rego-success",1,"success"],[3,"state","message","redirect","customLabel"],[1,"row","options-wrapper"],[1,"form-component","options-container"],[1,"success"],[1,"options-outer"],[1,"options-heading"],["tni-action-item","","icon","plus",3,"click"],["tni-action-item","","icon","opal-top-up",3,"click"],["tni-action-item","","icon","card",3,"click"]],template:function(e,t){1&e&&(s.\u0275\u0275elementStart(0,"div",0),s.\u0275\u0275elementStart(1,"div",1),s.\u0275\u0275elementStart(2,"div",2),s.\u0275\u0275template(3,M,6,7,"div",3),s.\u0275\u0275template(4,P,2,4,"div",4),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(5,O,13,0,"div",5),s.\u0275\u0275elementEnd()),2&e&&(s.\u0275\u0275advance(3),s.\u0275\u0275property("ngIf",!t.regoSuccess),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",t.regoSuccess),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",t.regoSuccess))},directives:[h.NgIf,v.CardFormComponent,C.TniFormMessageComponent,_.StateBannerComponent,b.ActionListComponent,x.ActionItemComponent],styles:[".form-component[_ngcontent-%COMP%]{position:relative;background:#fff;box-shadow:0 2px 3px 0 rgba(0,0,0,.2);border-radius:4px;padding-top:1.5rem;margin:2.4rem auto;max-width:800px;padding-bottom:48px}@media (min-width:992px){.form-component[_ngcontent-%COMP%]{padding-top:4rem}}.form-component__inner[_ngcontent-%COMP%]{margin:0 auto}@media (min-width:992px){.form-component__inner[_ngcontent-%COMP%]{width:500px}}.form-component__header[_ngcontent-%COMP%]{text-align:left}.form-component[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]:focus{outline:none}  .form-component .container-fluid{max-width:500px}.success[_ngcontent-%COMP%]{padding-bottom:4rem}.options-outer[_ngcontent-%COMP%]{text-align:center;padding:0 200px}@media (max-width:767px){.options-outer[_ngcontent-%COMP%]{padding:5px 10px}}.options-heading[_ngcontent-%COMP%]{padding-bottom:30px;font-size:24px}.options-container[_ngcontent-%COMP%]{min-height:300px}.options-wrapper[_ngcontent-%COMP%]{margin-top:-40px}"]}),e}()},USdT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniLinguaDropdownModule=void 0,n("fXoL"),n("MFE2");var o=n("NKuO"),r=n("3Pt+"),i=n("ofXK"),a=n("khGg"),c=n("fXoL");t.TniLinguaDropdownModule=function(){function e(){}return e.\u0275mod=c.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=c.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.TniIconModule,a.TniOptionModule,r.FormsModule,i.CommonModule]]}),e}()},"Uf+G":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UiStateService=void 0,n("fXoL"),n("l7P3");var o=n("gK8m"),r=n("fXoL"),i=n("l7P3");t.UiStateService=function(){function e(e){this.opalStateStore=e}return e.prototype.getUiState=function(){return this.opalStateStore.select(function(e){return e.UiState})},e.prototype.setOpalCardsPageTab=function(e){this.opalStateStore.dispatch(new o.SetCardPageTabAction(e))},e.prototype.setOpalCardsPageTopupoPanelTab=function(e){this.opalStateStore.dispatch(new o.SetCardPageTopupPanelAction(e))},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(i.Store))},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},VD0A:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TitleBarComponent=void 0,n("fXoL");var o=n("fXoL"),r=["*"];t.TitleBarComponent=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-opal-title"]],inputs:{title:"title",hasMenu:"hasMenu",hasLogout:"hasLogout"},ngContentSelectors:r,decls:6,vars:1,consts:[[1,"opal-title","breadcrumb-region-wrapper","opal-main-component__breadcrumb"],[1,"container","title"],[1,"row"],[1,"title__heading"]],template:function(e,t){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275elementStart(2,"div",2),o.\u0275\u0275elementStart(3,"h1",3),o.\u0275\u0275text(4),o.\u0275\u0275elementEnd(),o.\u0275\u0275projection(5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate(t.title))},styles:['.opal-main-component__breadcrumb[_ngcontent-%COMP%]{background:linear-gradient(0deg,#1b91d4,#1d69b4)}.title[_ngcontent-%COMP%]{line-height:60px;height:60px;padding:0 32px}@media (min-width:768px){.title[_ngcontent-%COMP%]{padding:0 15px}}.title__heading[_ngcontent-%COMP%]{color:#fff;font-size:24px;font-weight:200;height:60px;line-height:60px;margin:0;float:left}.title__menu[_ngcontent-%COMP%]{height:40px;margin-left:auto;margin-right:0;float:right}.title__menu[_ngcontent-%COMP%]   .tp-icon[_ngcontent-%COMP%]{margin-top:1px}.title__menu[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{list-style:none;padding:0 0 0 4px;font-size:.8em;margin:0}@media (max-width:767px){.title__menu[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{font-size:1em}}.title__menu[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block}.title__menu[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{text-decoration:none;color:#555;pointer-events:none;cursor:default;outline:none}.title__menu[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:inline-block;font-size:1em;font-weight:200;margin:0;padding:0}.title__menu[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{content:" | "}.title__menu[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child:before{content:" ";white-space:pre}']}),e}()},VmUZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Profile=void 0;var o=n("ua9F"),r=n("jhCk"),i=n("WmLy"),a=n("zjfG");t.Profile=function(){function e(){}return e.fromResponse=function(t){var n=new e;return n.title=t.Title,n.firstName=t.FirstName,n.lastName=t.LastName,n.dateOfBirth=t.DateOfBirth?t.DateOfBirth.split("+")[0]:null,n.telephone=this.phoneNumberPipe.transform(t.Telephone),n.mobile=this.mobileNumberPipe.transform(t.Mobile),n.email=t.Email,n.username=t.Username,n.address=o.Address.fromResponse(t.Address),n.deliveryAddress=o.Address.fromResponse(t.DeliveryAddress||t.Address),n},e.toRequest=function(e){var t=new a.AddressPipe;return{Title:e.title,FirstName:e.firstName,LastName:e.lastName,DateOfBirth:e.dateOfBirth,Telephone:e.telephone.replace(/\D/g,""),Mobile:e.mobile.replace(/\D/g,""),Email:e.email,Username:e.username,Address:{Address1:t.transform(e.address.address1),Address2:t.transform(e.address.address2),Address3:t.transform(e.address.address3),Country:e.address.country,State:e.address.state,Postcode:e.address.postcode,Suburb:e.address.suburb},DeliveryAddress:{Address1:t.transform(e.deliveryAddress.address1),Address2:t.transform(e.deliveryAddress.address2),Address3:t.transform(e.deliveryAddress.address3),Country:e.deliveryAddress.country,State:e.deliveryAddress.state,Postcode:e.deliveryAddress.postcode,Suburb:e.deliveryAddress.suburb}}},e.postReqauest=function(e){var t=new a.AddressPipe;return{FirstName:e.firstName,LastName:e.lastName,DateOfBirth:"",Telephone:e.telephone.replace(/\D/g,""),Mobile:e.mobile.replace(/\D/g,""),Email:e.email,Address:{Address1:t.transform(e.address.address1),Address2:t.transform(e.address.address2),Address3:t.transform(e.address.address3),Country:e.address.country,State:e.address.state,Postcode:e.address.postcode,Suburb:e.address.suburb},DeliveryAddress:{Address1:t.transform(e.deliveryAddress.address1),Address2:t.transform(e.deliveryAddress.address2),Address3:t.transform(e.deliveryAddress.address3),Country:e.deliveryAddress.country,State:e.deliveryAddress.state,Postcode:e.deliveryAddress.postcode,Suburb:e.deliveryAddress.suburb}}},e.mobileNumberPipe=new r.MobileNumberPipe,e.phoneNumberPipe=new i.PhoneNumberPipe,e}()},VnzS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniSpinnerModule=void 0,n("fXoL"),n("Effa");var o=n("ofXK"),r=n("fXoL");t.TniSpinnerModule=function(){function e(){}return e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule]]}),e}()},VzkM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentAccount=void 0,t.PaymentAccount=function(){function e(){}return e.fromResponse=function(t){if(!t)return null;var n=new e;return n.accountStatus=t.AccountStatus,n.maskedAccountNumber=t.MaskedAccountNumber,n.expiryMonth=t.ExpiryMonth,n.expiryYear=t.ExpiryYear,n.accountHolderName=t.AccountHolderName,n.bankCardType=t.BankCardType,n},e}()},WcMK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DataSharingService=void 0,n("fXoL");var o=n("fXoL");t.DataSharingService=function(){function e(){this.sharedData={}}return e.prototype.set=function(e,t){this.sharedData[e]=t},e.prototype.get=function(e){return this.sharedData[e]},e.prototype.remove=function(e){delete this.sharedData[e]},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}()},WmLy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PhoneNumberPipe=void 0,n("fXoL");var o=n("fXoL");t.PhoneNumberPipe=function(){function e(){}return e.prototype.transform=function(e){if(!e)return e;var t=e;return 0===e.indexOf("+61")&&(t="0"+e.slice(3)),10===t.length?t.substr(0,2)+" "+t.substr(2,4)+" "+t.substr(6,4):t},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.\u0275\u0275definePipe({name:"phoneNumber",type:e,pure:!0}),e}()},WnS1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniRemovableCardComponent=void 0,n("fXoL");var o=n("R0Ic"),r=n("fXoL"),i=n("ofXK");function a(e,t){if(1&e){var n=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",1),r.\u0275\u0275listener("@hideAnimation.done",function(e){return r.\u0275\u0275restoreView(n),r.\u0275\u0275nextContext().animationEnd(e)}),r.\u0275\u0275elementStart(1,"header",2),r.\u0275\u0275elementStart(2,"h2"),r.\u0275\u0275text(3),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(4,"button",3),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(n),r.\u0275\u0275nextContext().hideCard()}),r.\u0275\u0275namespaceSVG(),r.\u0275\u0275elementStart(5,"svg",4),r.\u0275\u0275elementStart(6,"title"),r.\u0275\u0275text(7,"Icon meaning close"),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(8,"path",5),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275namespaceHTML(),r.\u0275\u0275elementStart(9,"div",6),r.\u0275\u0275projection(10),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&e){var o=r.\u0275\u0275nextContext();r.\u0275\u0275property("@hideAnimation",o.state),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate1(" ",o.header," "),r.\u0275\u0275advance(1),r.\u0275\u0275attribute("aria-label","Dismiss information about where to "+o.header)}}var c=["*"];t.TniRemovableCardComponent=function(){function e(){this.exists=!0,this.state="visible"}return e.prototype.ngAfterContentInit=function(){this.hiddenNotifications=this.getAccountNotifications(),this.exists=!(this.hiddenNotifications.indexOf(this.id)>=0)},e.prototype.hideCard=function(){this.state="hidden",this.setNotificationStorage(this.id)},e.prototype.animationEnd=function(e){this.exists="hidden"!==this.state},e.prototype.getAccountNotifications=function(){var e=localStorage.getItem("opal-account-notifications");return e?e.split(","):[]},e.prototype.setNotificationStorage=function(e){return this.hiddenNotifications.push(e),localStorage.setItem("opal-account-notifications",this.hiddenNotifications),this.hiddenNotifications},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tni-removable-card"]],inputs:{header:"header",id:"id"},ngContentSelectors:c,decls:1,vars:1,consts:[["class","removable-card-details form",4,"ngIf"],[1,"removable-card-details","form"],[1,"removable-card-details__header"],["role","button","tabindex","0",1,"btn","removable-card-details__button",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 30 30",1,"sm","form-control-select-arrow"],["fill","currentColor","d","M15,1.35a13.15,13.15,0,0,1,9.65,4,13.15,13.15,0,0,1,4,9.65,13.15,13.15,0,0,1-4,9.65,13.15,13.15,0,0,1-9.65,4,13.14,13.14,0,0,1-9.65-4,13.14,13.14,0,0,1-4-9.65,13.15,13.15,0,0,1,4-9.65A13.15,13.15,0,0,1,15,1.35Zm0,26.12a12,12,0,0,0,8.86-3.61A12,12,0,0,0,27.47,15a12.05,12.05,0,0,0-3.61-8.86A12.05,12.05,0,0,0,15,2.53,12,12,0,0,0,6.14,6.14,12,12,0,0,0,2.53,15a12,12,0,0,0,3.61,8.86A12,12,0,0,0,15,27.47ZM20.51,8.7L21.3,9.49,15.79,15l5.51,5.51-0.79.79L15,15.79,9.49,21.3,8.7,20.51,14.21,15,8.7,9.49,9.49,8.7,15,14.21Z"],[1,"removable-card-details__body"]],template:function(e,t){1&e&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275template(0,a,11,3,"div",0)),2&e&&r.\u0275\u0275property("ngIf",t.exists)},directives:[i.NgIf],styles:[".removable-card-details{padding:5px 10px;background:#fff;box-shadow:0 2px 3px 0 rgba(0,0,0,.4);margin-left:-15px;margin-right:-15px}@media (max-width:767px){.removable-card-details{padding:5px 20px}}.removable-card-details__header{padding-right:30px;position:relative}.removable-card-details .opal-website-link{border-top:1px solid #ddd;margin:10px -20px 0;padding:10px 20px;text-align:right}@media (max-width:767px){.removable-card-details .opal-website-link{margin:10px -10px 0}}.removable-card-details .opal-website-link a{text-decoration:underline}.removable-card-details__button.btn{background-color:transparent;padding:0;position:absolute;right:0;top:0}.removable-card-details__button.btn svg{height:20px;margin:0;position:relative;right:0;top:0;width:20px}"],encapsulation:2,data:{animation:[o.trigger("hideAnimation",[o.state("hidden",o.style({opacity:0})),o.state("visible",o.style({opacity:1})),o.transition("visible => hidden",o.animate("750ms ease-out"))])]}}),e}()},XQ1l:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentTransationModel=void 0;var o=n("wd/R");t.PaymentTransationModel=function(){function e(){}return e.toRequest=function(e,t,n,r){return{SmartcardId:e,AmountInCents:t,MerchantReceipt:n.toString(),PaymentProviderResponse:{ProviderReceiptId:r.out_receipt_number,ProviderTransactionId:r.out_txn_number,ProviderResponseCode:r.out_response_code,ProviderBankResponseCode:r.out_bank_response_code,ProviderAuthResultCode:r.out_auth_result,AccountNumber:r.out_account_number,ExpiryDate:decodeURIComponent(r.out_expiry_date),ProviderVerifyToken:r.out_verify_token,PaymentDate:o(decodeURIComponent(r.out_payment_date).replace(/[+]/g," "),"DD/MM/yyyy h:mm:ss A").format("YYYY-MM-DDTHH:mm:ss[Z]"),SettlementDate:o(r.out_settlement_date).format("YYYY-MM-DD"),StoreAccount:"1"===r.out_store_card,AccountName:r.out_account_name}}},e}()},YAaT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivityFilterTypeEnum=void 0,t.ActivityFilterTypeEnum=function(e){return e[e.All=0]="All",e[e.INCOMPLETEJOURNEY=1]="INCOMPLETEJOURNEY",e[e.TOPUPS=2]="TOPUPS",e}(t.ActivityFilterTypeEnum||{})},YORH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TrackOpalEventService=void 0,n("fXoL"),n("RutN"),n("xN0M");var o=n("fXoL"),r=n("RutN"),i=n("xN0M");t.TrackOpalEventService=function(){function e(e,t){this.trackEventService=e,this.getViewportService=t}return e.prototype.logInUnregistered=function(){this.trackEventService.trackEvent("Opal transaction",{action:"Log in",label:"Unregistered"})},e.prototype.logInRegistered=function(){this.trackEventService.trackEvent("Opal transaction",{action:"Log in",label:"Registered"})},e.prototype.logout=function(){this.trackEventService.trackEvent("Opal transaction",{action:"Log out"})},e.prototype.viewOpalCardsSelected=function(){this.trackEventService.trackEvent("Opal transaction",{action:"Opal cards"})},e.prototype.clickViewDetailsUnregistered=function(){this.trackEventService.trackEvent("Opal transaction",{action:"View details",label:"Unregistered"})},e.prototype.clickViewDetailsRegistered=function(){this.trackEventService.trackEvent("Opal transaction",{action:"View details",label:"Registered"})},e.prototype.viewProfileSelected=function(){this.trackEventService.trackEvent("Opal transaction",{action:"Profile"})},e.prototype.sessionExpired=function(){this.trackEventService.trackEvent("Opal transaction",{action:"Session expired"})},e.prototype.addOpalCard=function(){this.trackEventService.trackEvent("Opal transaction",{action:"Link card"})},e.prototype.autoTopUpOn=function(){this.trackEventService.trackEvent("Opal transaction",{action:"Turn on auto top up"})},e.prototype.autoTopUpUpdate=function(){this.trackEventService.trackEvent("Opal transaction",{action:"Update auto top up"})},e.prototype.autoTopUpOff=function(){this.trackEventService.trackEvent("Opal transaction",{action:"Turn off auto top up"})},e.prototype.topUp=function(){this.trackEventService.trackEvent("Opal transaction",{action:"One off top up"})},e.prototype.setNewPassword=function(){this.trackEventService.trackEvent("Opal transaction",{action:"Set new password"})},e.prototype.retrieveUsername=function(){this.trackEventService.trackEvent("Opal transaction",{action:"Retrieve username"})},e.prototype.trackChangeButton=function(){this.trackEventService.trackEvent("Opal transaction",{action:"Change button"})},e.prototype.trackAddCardButton=function(){this.trackEventService.trackEvent("Opal transaction",{action:"Add card button"})},e.prototype.trackSaveButton=function(){this.trackEventService.trackEvent("Opal transaction",{action:"Save button"})},e.prototype.trackTurnOffAutoTopUpLinkOnStepOne=function(){this.trackEventService.trackEvent("Opal transaction",{action:"Turn off auto top up link on step one"})},e.prototype.trackMaximumBalanceLinkOnStepTwo=function(){this.trackEventService.trackEvent("Opal transaction",{action:"maximum balance link on step two"})},e.prototype.trackCancelButtons=function(e){this.trackEventService.trackEvent("Opal transaction",{action:"Cancel buttons on step "+e})},e.prototype.trackBlockCardButton=function(){this.trackEventService.trackEvent("Opal transaction",{action:"Block card button"})},e.prototype.trackBlockTransferButton=function(){this.trackEventService.trackEvent("Opal transaction",{action:"Block and Transfer button"})},e.prototype.trackActionLink=function(e){this.trackEventService.trackEvent("Opal transaction",{action:e.action})},e.prototype.trackUserEvent=function(e){this.trackEventService.trackEvent("Opal transaction",e)},e.prototype.trackViewport=function(e,t){var n=this.getViewportService.getViewport();this.trackEventService.trackEvent("Mobile vs desktop",{action:e+" accessed on "+n,label:t?"Unregistered":"Registered"})},e.prototype.trackNotifications=function(e){for(var t=0,n=e.switchValues;t<n.length;t++)this.trackUserEvent({action:"Enable "+n[t]+" notification",label:"Registered"});e.method&&this.trackUserEvent({action:e.method+" method of notification",label:"Registered"})},e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(r.TrackEventService),o.\u0275\u0275inject(i.GetViewportService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},YpR8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardActivity=t.CardActivities=void 0;var o=n("wd/R"),r=n("IL3P");t.CardActivities=function(){function e(){}return e.fromResponse=function(t){var n=new e;return n.HasMoreResults=t.HasMoreResults,n.SmartcardId=t.SmartcardId,n.activities=[],t.SmartcardActivityDetail&&t.SmartcardActivityDetail.length&&t.SmartcardActivityDetail.forEach(function(e){n.activities.push(i.fromResponse(e))}),n},e}();var i=function(){function e(){this.nonFinancialTransactionTypes=[84,998,994,30,86,4,5,61]}return e.fromResponse=function(t){var n=new e;n.amount=t.Amount;var i=t.ActivityStartDate?o(t.ActivityStartDate+" "+t.ActivityStartTime,"YYYY-MM-DD HH:mm:ss"):null,a=t.ActivityEndDate?o(t.ActivityEndDate+" "+t.ActivityEndTime,"YYYY-MM-DD HH:mm:ss"):null;n.activityDate=i||a,n.isJourney=t.TransactionType&&999===t.TransactionType,n.transactionNo=t.ActivityId;var c=r.TransactionDefinition.getDefinition(t.TransactionType,t.ChannelCode,t.DestinationLocationName,t.OriginLocationName);return c?(n.transactionType=t.TransactionType,n.from=c.transactionName,n.to=c.transactionSource,n.transactionTypeIcon=c.icon):(n.journeyType=t.JourneyType,n.from="Unknown"===t.OriginLocationName?null:t.OriginLocationName,n.to="Unknown"===t.DestinationLocationName?null:t.DestinationLocationName,n.journeyModeIcon=this.getModeIcon(t)),n.isJourney&&(n.fouCount=t.FOUCount,n.fullFare=Math.abs(t.FullFare),n.discount=-1*t.Discount,n.discountReason="",n.isCompletedUnknownJourney="COM"===n.journeyType&&null===n.from&&null===n.to,n.isIncompleteUnknownJourney=("UNF"===n.journeyType||"UNS"===n.journeyType)&&null===n.from&&null===n.to,n.discountReason=t.DailyCapped?"Day cap":t.WeeklyCapped?"Week cap":t.DiscountFou?"Travel reward":t.OffPeakJourney?"Off-peak":"UNS"===n.journeyType||"UNF"===n.journeyType?"Max. fare applied":""),n},e.getModeIcon=function(e){switch(e.ActivityMode){case"BUS":return"bus";case"FERRY":case"PFF":return"ferry";case"LR":return"lightrail";case"RAIL":return e.OriginLocationName&&e.OriginLocationName.endsWith("LR")||e.DestinationLocationName&&e.DestinationLocationName.endsWith("LR")?"lightrail":"train";default:return null}},e.prototype.isIncompleteJourney=function(){return this.isJourney&&this.journeyType&&("UNF"===this.journeyType||"UNS"===this.journeyType)},e.prototype.isTopupTransaction=function(){return this.transactionType&&(80===this.transactionType||10===this.transactionType||11===this.transactionType||85===this.transactionType||112===this.transactionType)},e.prototype.isFinancialTransaction=function(){return this.nonFinancialTransactionTypes.indexOf(this.transactionType)<0},e}();t.CardActivity=i},ZRhi:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalModule=void 0;var o=n("fXoL"),r=n("3Pt+"),i=n("ofXK"),a=n("tk/3"),c=n("tk/3"),s=n("bXO7"),l=n("h88C"),d=n("R1ws"),p=n("tyNb"),u=n("5A3l"),m=n("G3li"),f=n("5Jp9");n("yLV6");var g=n("6i2Y"),h=n("QK+Z"),v=n("Zbo0"),C=n("jGKr"),_=n("+MuE"),b=n("GGEm"),x=n("cGuN"),y=n("l7P3"),M=n("fXoL");n("l7P3"),t.OpalModule=function(){function e(){}return e.forRoot=function(){return{ngModule:e,providers:[m.AuthGuardService,h.OpalAccountStore,C.OpalSessionStore,f.ServerErrorService,{provide:c.HTTP_INTERCEPTORS,useClass:v.OpalApiInterceptor,multi:!0},{provide:c.HTTP_INTERCEPTORS,useClass:_.ServerErrorInterceptor,multi:!0}]}},e.\u0275mod=M.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=M.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},providers:[{provide:o.APP_INITIALIZER,useFactory:function(e){return function(){return e.getToggles().toPromise()}},deps:[g.FeatureToggleService],multi:!0}],imports:[[s.environment.disableAnimations?d.NoopAnimationsModule:d.BrowserAnimationsModule,i.CommonModule,r.FormsModule,a.HttpClientModule,r.ReactiveFormsModule,p.RouterModule,u.BusinessComponentsModule,l.OpalServicesModule,b.CTPModule,y.StoreModule.forRoot({UiState:x.reducer})]]}),e}()},Zbo0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalApiInterceptor=void 0,n("fXoL"),n("QK+Z");var o=n("fXoL"),r=n("QK+Z");t.OpalApiInterceptor=function(){function e(e){this.opalAccountStore=e}return e.prototype.intercept=function(e,t){if(this.isOpalLoginApi(e.url)||!this.isOpalApi(e.url))return t.handle(e);var n=this.opalAccountStore.get(),o=e.body;return"post"===e.method.toLowerCase()&&(o=this.removeEmptyProps(o)),n&&(e=e.clone({setHeaders:{Authorization:"Bearer "+n.accessToken},body:o})),t.handle(e)},e.prototype.isOpalLoginApi=function(e){return e.endsWith("/api/opal/opal-login")||e.endsWith("/api/opal/login")},e.prototype.isOpalApi=function(e){return-1!==e.indexOf("/api/opal")},e.prototype.removeEmptyProps=function(e){for(var t in e)null==e[t]||""===e[t]?delete e[t]:"object"==typeof e&&this.removeEmptyProps(e[t]);return e},e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(r.OpalAccountStore))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},aZVF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SendUsernameService=void 0,n("fXoL"),n("tk/3");var o=n("fXoL"),r=n("tk/3");t.SendUsernameService=function(){function e(e){this.http=e}return e.prototype.post=function(e,t){return this.http.post("/api/opal/api/ac/customer/sendforgottenusername/",{SmartcardId:e,SmartcardSc:t})},e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(r.HttpClient))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},aeCY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DisplayCreditCardComponent=void 0;var o=n("fXoL"),r=n("fXoL"),i=n("ofXK"),a=n("gUXI"),c=n("kxHz"),s=n("iccS");function l(e,t){1&e&&r.\u0275\u0275element(0,"tni-icon",12),2&e&&r.\u0275\u0275property("iconAriaHidden",!0)}function d(e,t){1&e&&r.\u0275\u0275element(0,"tni-icon",13),2&e&&r.\u0275\u0275property("iconAriaHidden",!0)}function p(e,t){1&e&&r.\u0275\u0275element(0,"tni-icon",14),2&e&&r.\u0275\u0275property("iconAriaHidden",!0)}function u(e,t){1&e&&r.\u0275\u0275element(0,"tni-icon",15),2&e&&r.\u0275\u0275property("iconAriaHidden",!0)}function m(e,t){if(1&e){var n=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"button",16),r.\u0275\u0275listener("click",function(){return r.\u0275\u0275restoreView(n),r.\u0275\u0275nextContext(2).changeCardDetails()}),r.\u0275\u0275text(1," CHANGE "),r.\u0275\u0275elementStart(2,"span",17),r.\u0275\u0275text(3,"payment card details"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}}function f(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",1),r.\u0275\u0275elementStart(1,"div",2),r.\u0275\u0275elementContainerStart(2,3),r.\u0275\u0275pipe(3,"uppercase"),r.\u0275\u0275template(4,l,1,1,"tni-icon",4),r.\u0275\u0275template(5,d,1,1,"tni-icon",5),r.\u0275\u0275template(6,p,1,1,"tni-icon",6),r.\u0275\u0275template(7,u,1,1,"tni-icon",7),r.\u0275\u0275elementContainerEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",8),r.\u0275\u0275elementStart(9,"span",9),r.\u0275\u0275text(10),r.\u0275\u0275pipe(11,"creditCardNumberAsterik"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(12,"span",10),r.\u0275\u0275elementStart(13,"span"),r.\u0275\u0275text(14),r.\u0275\u0275pipe(15,"creditCardMonth"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(16,m,4,0,"button",11),r.\u0275\u0275elementEnd()),2&e){var n=r.\u0275\u0275nextContext();r.\u0275\u0275advance(2),r.\u0275\u0275property("ngSwitch",r.\u0275\u0275pipeBind1(3,8,n.cardType)),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngSwitchCase","MASTERCARD"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","AMERICAN EXPRESS CARD"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngSwitchCase","JCB CARD"),r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate1("\u2022\u2022\u2022",r.\u0275\u0275pipeBind1(11,10,null==n.paymentAccount?null:n.paymentAccount.maskedAccountNumber),""),r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate2("Exp ",r.\u0275\u0275pipeBind1(15,12,null==n.paymentAccount?null:n.paymentAccount.expiryMonth),"/",null==n.paymentAccount?null:n.paymentAccount.expiryYear,""),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",n.displayChangeBtn&&n.featureToggle)}}t.DisplayCreditCardComponent=function(){function e(){this.changeCard=new o.EventEmitter}return e.prototype.ngOnInit=function(){this.displayChangeBtn=!0},e.prototype.changeCardDetails=function(){this.displayChangeBtn=!1,this.changeCard.emit()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tni-display-credit-card"]],inputs:{paymentAccount:"paymentAccount",featureToggle:"featureToggle",cardType:"cardType"},outputs:{changeCard:"changeCard"},decls:1,vars:1,consts:[["class","payment-details",4,"ngIf"],[1,"payment-details"],[1,"payment-detail__icon"],[3,"ngSwitch"],["iconName","mastercard","iconClasses","xl","iconTitle","mastercard",3,"iconAriaHidden",4,"ngSwitchCase"],["class","amex","iconName","amex","iconClasses","md","iconTitle","amex",3,"iconAriaHidden",4,"ngSwitchCase"],["iconName","jcb","iconClasses","lg","iconTitle","jcb",3,"iconAriaHidden",4,"ngSwitchCase"],["iconName","visa","iconClasses","xl","iconTitle","visa",3,"iconAriaHidden",4,"ngSwitchDefault"],[1,"card-details"],[1,"card-number"],[1,"payment-details__expires"],["class","btn-secondary btn btn-change",3,"click",4,"ngIf"],["iconName","mastercard","iconClasses","xl","iconTitle","mastercard",3,"iconAriaHidden"],["iconName","amex","iconClasses","md","iconTitle","amex",1,"amex",3,"iconAriaHidden"],["iconName","jcb","iconClasses","lg","iconTitle","jcb",3,"iconAriaHidden"],["iconName","visa","iconClasses","xl","iconTitle","visa",3,"iconAriaHidden"],[1,"btn-secondary","btn","btn-change",3,"click"],[1,"sr-only"]],template:function(e,t){1&e&&r.\u0275\u0275template(0,f,17,14,"div",0),2&e&&r.\u0275\u0275property("ngIf",t.paymentAccount)},directives:[i.NgIf,i.NgSwitch,i.NgSwitchCase,i.NgSwitchDefault,a.IconComponent],pipes:[i.UpperCasePipe,c.CreditCardNumberAsterikPipe,s.CreditCardMonthPipe],styles:[".payment-details[_ngcontent-%COMP%]{max-width:100%;border:1px solid #dbdbdb;border-radius:4px;padding-top:10px;padding-left:30px;padding-bottom:10px;margin-bottom:25px;overflow:hidden}@media (max-width:767px){.payment-details[_ngcontent-%COMP%]{width:100%;margin-bottom:25px;font-size:14px;line-height:1.4em;padding:10px 0 0 15px;text-align:right}}.payment-details[_ngcontent-%COMP%]   .payment-details__expires[_ngcontent-%COMP%]{font-size:14px;margin:0 0 16px;padding-left:10px}@media (max-width:767px){.payment-details[_ngcontent-%COMP%]   .payment-details__expires[_ngcontent-%COMP%]{display:block;margin-bottom:10px;font-size:10px}}.payment-details[_ngcontent-%COMP%]   .payment-detail__icon[_ngcontent-%COMP%]{float:left;width:50px;margin-right:14%}.payment-details[_ngcontent-%COMP%]   .payment-detail__icon[_ngcontent-%COMP%]     tni-icon.amex svg{margin-top:6px}@media (max-width:767px){.payment-details[_ngcontent-%COMP%]   .payment-detail__icon[_ngcontent-%COMP%]{margin-right:5%}}.payment-details[_ngcontent-%COMP%]   .btn-change[_ngcontent-%COMP%]{border:1px solid rgba(0,0,0,.2);font-size:15px;min-width:75px;height:32px;line-height:14px;font-weight:500;color:#1d69b4;float:right;margin:10px 20px 0 0}@media (max-width:767px){.payment-details[_ngcontent-%COMP%]   .btn-change[_ngcontent-%COMP%]{margin-right:10px}}.payment-details[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]{float:left;margin-top:12px;font-weight:500}@media (max-width:767px){.payment-details[_ngcontent-%COMP%]   .card-details[_ngcontent-%COMP%]{width:30%}}"]}),e}()},amr8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardFormComponent=void 0;var o=n("kU1M"),r=n("fXoL"),i=n("tJ3N"),a=n("smRY"),c=n("DWut"),s=(n("9ans"),n("3Pt+"),n("NRRr"),n("QK+Z"),n("jGKr"),n("74Ue"),n("fXoL")),l=n("9ans"),d=n("NRRr"),p=n("74Ue"),u=n("QK+Z"),m=n("jGKr"),f=n("ofXK"),g=n("obkt"),h=n("gUXI"),v=n("73Ru"),C=n("09AV"),_=n("3Pt+"),b=n("jbib");function x(e,t){if(1&e&&(s.\u0275\u0275elementStart(0,"tni-form-message",17),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()),2&e){var n=s.\u0275\u0275nextContext();s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",n.errorMessage," ")}}function y(e,t){if(1&e&&s.\u0275\u0275element(0,"card-number",18),2&e){var n=s.\u0275\u0275nextContext();s.\u0275\u0275property("control",n.group.controls.cardNumber)("errorMap",n.validationMessages.cardNumber)}}function M(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"div",19),s.\u0275\u0275elementStart(1,"input",20),s.\u0275\u0275listener("ngModelChange",function(e){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().knownCard=e}),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()}if(2&e){var o=s.\u0275\u0275nextContext();s.\u0275\u0275advance(1),s.\u0275\u0275property("ngModel",o.knownCard)}}function P(e,t){if(1&e&&s.\u0275\u0275element(0,"tni-form-input",21),2&e){var n=s.\u0275\u0275nextContext();s.\u0275\u0275property("control",n.group.controls.cardNick)("errorMap",n.validationMessages.cardNick)}}function O(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"button",22),s.\u0275\u0275listener("click",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().submit()}),s.\u0275\u0275text(1),s.\u0275\u0275elementEnd()}if(2&e){var o=s.\u0275\u0275nextContext();s.\u0275\u0275advance(1),s.\u0275\u0275textInterpolate1(" ",o.submitLabel," ")}}function S(e,t){if(1&e){var n=s.\u0275\u0275getCurrentView();s.\u0275\u0275elementStart(0,"button",23),s.\u0275\u0275listener("click",function(){return s.\u0275\u0275restoreView(n),s.\u0275\u0275nextContext().cancelClicked()}),s.\u0275\u0275text(1,"Cancel"),s.\u0275\u0275elementEnd()}}t.CardFormComponent=function(){function e(e,t,n,o,a){this.authService=e,this.loaderService=t,this.formValidationService=n,this.opalAccountStore=o,this.opalSessionStore=a,this.submitCardDetails=new r.EventEmitter,this.cardValidationError=new r.EventEmitter,this.cancel=new r.EventEmitter,this.validationMessages=new i.ValidationMessages,this.showOpalImage=!1,this.showCancelButton=!1}return e.prototype.ngOnInit=function(){this.hideSubmitButton=!1,this.submitLabel=this.customSubmitLabel?this.customSubmitLabel:"Submit",this.cardNumber=this.group.controls.cardNumber,this.cardCode=this.group.controls.cardCode},e.prototype.submit=function(){this.formValidationService.validate(this.group),this.authenticate?this.cardNumber.valid&&this.cardCode.valid&&this.authenticateCredentials():this.cardNumber.valid&&this.cardCode.valid&&this.submitCardDetails.emit(!0)},e.prototype.authenticateCredentials=function(){var e=this,t=new a.Credentials;t.smartcardId=this.group.controls.cardNumber.value.replace(/ /g,""),t.smartcardSc=this.group.controls.cardCode.value,this.loaderService.display(!0),this.authService.login(t.getValidatedObject(!1)).pipe(o.finalize(function(){return e.loaderService.display(!1)})).subscribe(function(n){e.opalSessionStore.setSessionDetails(n.expiresIn),e.opalAccountStore.setAccessToken(n.accessToken),e.opalAccountStore.setUnregisteredCardNo(t.smartcardId,t.smartcardSc),e.opalSessionStore.setLoginUrl("/tickets-opal/opal/manage-your-opal-card#/login"),e.submitCardDetails.emit(!0)},function(t){return e.handleError(t)})},e.prototype.handleError=function(e){this.errorMessage=e.status===c.LoginStatusEnum.Unauthorized?"This Opal card number or security code is incorrect, please try again.":e.status===c.LoginStatusEnum.AlreadyRegistered?"This Opal card is already registered.":"An unexpected error occured.",this.cardValidationError.emit()},e.prototype.cancelClicked=function(){this.cancel.emit()},e.prototype.toggleOpalImage=function(){this.showOpalImage=!this.showOpalImage},e.\u0275fac=function(t){return new(t||e)(s.\u0275\u0275directiveInject(l.AuthService),s.\u0275\u0275directiveInject(d.LoaderService),s.\u0275\u0275directiveInject(p.FormValidationService),s.\u0275\u0275directiveInject(u.OpalAccountStore),s.\u0275\u0275directiveInject(m.OpalSessionStore))},e.\u0275cmp=s.\u0275\u0275defineComponent({type:e,selectors:[["card-form"]],inputs:{group:"group",title:"title",showCopyToDelivery:"showCopyToDelivery",hideSubmitButton:"hideSubmitButton",showCancelButton:"showCancelButton",customSubmitLabel:"customSubmitLabel",authenticate:"authenticate",showNickname:"showNickname",knownCard:"knownCard"},outputs:{submitCardDetails:"submitCardDetails",cardValidationError:"cardValidationError",cancel:"cancel"},decls:19,vars:14,consts:[[1,"card-form"],["class","col-md-12",4,"ngIf"],[1,"row","input-conatainer"],["name","card-number","class","col-md-8 enhanced card-number","required","required","inputName","cardNumber","labelText","Card number","errorText","A 16 digit card number is required.",3,"control","errorMap",4,"ngIf"],["class","col-md-8 known-card",4,"ngIf"],["name","card-code","required","required","inputId","cardCode","labelText","Security code","errorText","A 4 digit card code is required.",1,"col-md-4","enhanced","control",3,"control","errorMap"],[1,"opal-card-help","col-md-12","control"],[1,"sr-only"],["tabindex","0",1,"opal-card-help__link",3,"keydown.enter","click"],[1,"opal-card-help__link__text"],["iconName","arrow_down","iconClasses","opal-card-help__link__icon","iconAriaHidden","true"],[1,"opal-card-help__image-container"],["src","assets/images/Back-of-Opal-Card-Code.png","alt","",1,"opal-card-help__image"],["class","col-md-12 control card-nick","labelText","Nickname (optional)","inputName","cardNick","helpText","","inputType","text",3,"control","errorMap",4,"ngIf"],[1,"col-md-12","address-form__actions"],["class","card-form__submit",3,"click",4,"ngIf"],["class","cancel-button",3,"click",4,"ngIf"],[1,"col-md-12"],["name","card-number","required","required","inputName","cardNumber","labelText","Card number","errorText","A 16 digit card number is required.",1,"col-md-8","enhanced","card-number",3,"control","errorMap"],[1,"col-md-8","known-card"],["type","text","name","smartcardId","autocomplete","off","title","Card number","id","smartcardId","disabled","disabled",1,"form-input__input","form-input--text",3,"ngModel","ngModelChange"],["labelText","Nickname (optional)","inputName","cardNick","helpText","","inputType","text",1,"col-md-12","control","card-nick",3,"control","errorMap"],[1,"card-form__submit",3,"click"],[1,"cancel-button",3,"click"]],template:function(e,t){1&e&&(s.\u0275\u0275elementStart(0,"div",0),s.\u0275\u0275template(1,x,2,1,"tni-form-message",1),s.\u0275\u0275elementStart(2,"div",2),s.\u0275\u0275template(3,y,1,2,"card-number",3),s.\u0275\u0275template(4,M,2,1,"div",4),s.\u0275\u0275element(5,"card-code",5),s.\u0275\u0275elementStart(6,"div",6),s.\u0275\u0275elementStart(7,"p",7),s.\u0275\u0275text(8,"Find your card number and card code on the back of your opal card"),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(9,"a",8),s.\u0275\u0275listener("keydown.enter",function(){return t.toggleOpalImage()})("click",function(){return t.toggleOpalImage()}),s.\u0275\u0275elementStart(10,"span",9),s.\u0275\u0275text(11,"Where to find the number/code"),s.\u0275\u0275elementEnd(),s.\u0275\u0275element(12,"tni-icon",10),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementStart(13,"div",11),s.\u0275\u0275element(14,"img",12),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275template(15,P,1,2,"tni-form-input",13),s.\u0275\u0275elementStart(16,"div",14),s.\u0275\u0275template(17,O,2,1,"button",15),s.\u0275\u0275template(18,S,2,0,"button",16),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd(),s.\u0275\u0275elementEnd()),2&e&&(s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",t.errorMessage),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",!t.knownCard),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",t.knownCard),s.\u0275\u0275advance(1),s.\u0275\u0275property("control",t.group.controls.cardCode)("errorMap",t.validationMessages.cardCode),s.\u0275\u0275advance(1),s.\u0275\u0275classProp("opal-card-help--show",t.showOpalImage)("no-nickame",!t.showNickname),s.\u0275\u0275advance(7),s.\u0275\u0275classProp("opal-card-help__image-container--show",t.showOpalImage),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",t.showNickname),s.\u0275\u0275advance(2),s.\u0275\u0275property("ngIf",!t.hideSubmitButton),s.\u0275\u0275advance(1),s.\u0275\u0275property("ngIf",t.showCancelButton))},directives:[f.NgIf,g.CardCodeComponent,h.IconComponent,v.TniFormMessageComponent,C.CardNumberComponent,_.DefaultValueAccessor,_.NgControlStatus,_.NgModel,b.FormInputComponent],styles:['.card-form[_ngcontent-%COMP%]{position:relative}.card-form__heading[_ngcontent-%COMP%]{font-size:24px;margin:0 0 24px;font-weight:300}.card-form__submit[_ngcontent-%COMP%]{border-radius:4px;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background-color:#1d69b4;border:0 solid #195c9e;color:#fff}.card-form__submit[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.card-form__submit[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .card-form__submit[_ngcontent-%COMP%]{margin-top:10px}label[_ngcontent-%COMP%]{font-weight:300}small[_ngcontent-%COMP%]{font-size:12px}.card-form__actions[_ngcontent-%COMP%]{margin-top:20px}.cancel-button[_ngcontent-%COMP%]{border-radius:4px;border:0 solid transparent;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background:transparent}.cancel-button[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.cancel-button[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .cancel-button[_ngcontent-%COMP%]{margin-top:10px}@media (max-width:767px){.input-conatainer[_ngcontent-%COMP%]{padding:0 15px}}.opal-card-help__image[_ngcontent-%COMP%]{width:100%}@media (min-width:768px){.opal-card-help__image[_ngcontent-%COMP%]{width:300px}}.opal-card-help--show[_ngcontent-%COMP%]     .opal-card-help__link__icon{transform:rotate(180deg)}.opal-card-help__image-container[_ngcontent-%COMP%]{transition:all .33s ease-in-out;max-height:0;overflow:hidden}.opal-card-help__image-container--show[_ngcontent-%COMP%]{max-height:500px;margin:0 0 20px}@media (min-width:768px){.opal-card-help__image-container--show[_ngcontent-%COMP%]{max-height:210px}}.opal-card-help__link[_ngcontent-%COMP%]{background:transparent;color:#1d69b4;font-size:12px;border:0;outline:none;cursor:pointer}.opal-card-help__link__text[_ngcontent-%COMP%]{text-decoration:underline}  .opal-card-help__link__icon{width:15px;height:15px;margin-left:5px}.control[_ngcontent-%COMP%]{padding-left:0}.card-nick[_ngcontent-%COMP%]{padding:0}@media (min-width:768px){.card-nick[_ngcontent-%COMP%]{margin-top:35px}}@media (min-width:992px){.card-nick[_ngcontent-%COMP%]{margin:0}}.no-nickame[_ngcontent-%COMP%]{margin-bottom:25px}.form-input[_ngcontent-%COMP%]{margin-bottom:10px;display:flex;position:relative;padding:25px 0;vertical-align:middle;display:block}.form-input__label[_ngcontent-%COMP%]{font-weight:300;position:absolute;bottom:100%;right:auto;color:#999e9f;top:28px;left:5px;font-size:16px;transition:.3s}input[_ngcontent-%COMP%]:focus + .form-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px}select[_ngcontent-%COMP%]:focus + .form-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:.3s}.hasValue[_ngcontent-%COMP%] + .form-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:0s}.error[_ngcontent-%COMP%] + .form-input__label[_ngcontent-%COMP%], .form-input.error[_ngcontent-%COMP%]   .form-input__label[_ngcontent-%COMP%], .form-input__label__mandatory[_ngcontent-%COMP%]{color:#c41f3d}.form-input.hasValue__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:0s}.form-input__input[_ngcontent-%COMP%]{display:block;margin-top:0;background:none;padding:2px 2px 5px;height:35px;border-radius:0;border:solid #555;border-width:0 0 1px;float:left;color:#555;font-weight:400;font-size:16px}@media (max-width:767px){.form-input__input[_ngcontent-%COMP%]{font-size:16px}}.form-input__input[_ngcontent-%COMP%]:focus{box-shadow:none}.form-input__input[type=number][_ngcontent-%COMP%]:out-of-range{color:red}.form-input__input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, .form-input__input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.form-input__error-message[_ngcontent-%COMP%]{display:none}.error[_ngcontent-%COMP%] + label[_ngcontent-%COMP%] + .form-input__error-message[_ngcontent-%COMP%]{display:block;position:absolute;top:78px;left:2px;font-size:12px;color:#c41f3d}.form-input__help[_ngcontent-%COMP%]{display:block;position:absolute;top:78px;left:2px;font-size:12px;color:#c41f3d;display:none;color:#999}.form-input__label[_ngcontent-%COMP%] + .form-input__help[_ngcontent-%COMP%]{display:block}.form-input__input[_ngcontent-%COMP%]{width:100%;float:none;padding-bottom:0}.form-input__label[_ngcontent-%COMP%]{top:41px;left:15px}.error[_ngcontent-%COMP%] + label[_ngcontent-%COMP%] + .form-input__error-message[_ngcontent-%COMP%], .form-input__help[_ngcontent-%COMP%]{position:static}.form-input__input[_ngcontent-%COMP%]{border:solid #1c1c1b;border-width:0 0 2px;background-color:#f9f9f9;border-radius:4px;padding:13px 16px;height:56px;box-sizing:border-box}.form-input__input[_ngcontent-%COMP%]:focus{border-width:1px 1px 2px}.known-card[_ngcontent-%COMP%]{margin-bottom:10px;padding:25px 0}@media (min-width:768px){.known-card[_ngcontent-%COMP%]{padding-right:40px}}.known-card[_ngcontent-%COMP%]   .form-input__input[_ngcontent-%COMP%]{-webkit-text-fill-color:#555;-webkit-opacity:1;opacity:1}']}),e}()},"b+vG":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionUrlComponent=void 0,n("fXoL"),n("YORH");var o=n("fXoL"),r=n("YORH"),i=n("tyNb"),a=n("gUXI"),c=["tni-action-url",""],s=function(e){return[e]},l=["*"];t.ActionUrlComponent=function(){function e(e){this.trackOpalEventService=e}return e.prototype.trackClick=function(){this.trackAction&&this.trackOpalEventService.trackActionLink({action:this.trackAction})},e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(r.TrackOpalEventService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["li","tni-action-url",""]],inputs:{actionUrl:"actionUrl",icon:"icon",actionUrlParams:"actionUrlParams",trackAction:"trackAction"},attrs:c,ngContentSelectors:l,decls:3,vars:6,consts:[[1,"action-item",3,"routerLink","queryParams","click"],["iconClasses","md",1,"action-item__icon",3,"iconName"]],template:function(e,t){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275elementStart(0,"a",0),o.\u0275\u0275listener("click",function(){return t.trackClick()}),o.\u0275\u0275element(1,"tni-icon",1),o.\u0275\u0275projection(2),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("routerLink",t.actionUrl?o.\u0275\u0275pureFunction1(4,s,t.actionUrl):null)("queryParams",t.actionUrlParams),o.\u0275\u0275attribute("tabindex",t.actionUrl?0:null),o.\u0275\u0275advance(1),o.\u0275\u0275property("iconName",t.icon))},directives:[i.RouterLinkWithHref,a.IconComponent],styles:[':[_nghost-%COMP%]{padding:0}.action-item[_ngcontent-%COMP%]{position:relative;border:1px solid #e4e4e4;border-radius:5px;margin:5px 0;padding:15px 40px 15px 70px;display:block;text-decoration:none;font-size:16px;font-weight:400;cursor:pointer;color:#1d69b4;text-align:left}.action-item[_ngcontent-%COMP%]:after{content:"";display:inline-block;height:9px;right:24px;position:absolute;top:50%;transform:rotate(45deg) translateY(-50%);vertical-align:top;width:9px;border-color:#373636;border-style:solid;border-width:2px 2px 0 0}.action-item__icon[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);left:20px;color:#373636}']}),e}()},bXO7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.environment=void 0,t.environment={recaptchaKey:"6LcxRm0UAAAAAGumQr2D9HH9tfDT1F8k5kYUuHbC",recaptchaKeyTest:"6LeIxAcTAAAAAJcZVRqyHh71UMIEGNQ_MXjiZKhI",recaptchaUrl:"https://www.google.com/recaptcha/api.js",disableAnimations:!1,production:!0,localDev:!1}},c3qe:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniAccordionComponent=void 0,n("fXoL");var o=n("fXoL"),r=n("ofXK");function i(e,t){1&e&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"svg",4),o.\u0275\u0275element(1,"use",5),o.\u0275\u0275elementEnd())}function a(e,t){1&e&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"svg",4),o.\u0275\u0275element(1,"use",6),o.\u0275\u0275elementEnd())}function c(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",7),o.\u0275\u0275projection(1),o.\u0275\u0275elementEnd())}var s=["*"];t.TniAccordionComponent=function(){function e(){}return e.prototype.open=function(){this.isOpen=!0},e.prototype.close=function(){this.isOpen=!1},e.prototype.toggle=function(){this.isOpen=!this.isOpen},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-accordion"]],inputs:{header:"header",isOpen:"isOpen",ariaLabel:"ariaLabel"},ngContentSelectors:s,decls:6,vars:7,consts:[[1,"accordion-header",3,"click"],["href","javascript:;","role","button",1,"btn"],["role","img",4,"ngIf"],["class","accordion-panel",4,"ngIf"],["role","img"],[0,"xmlns","xlink","http://www.w3.org/1999/xlink",0,"xlink","href","assets/icons/icons.svg#tp_arrow-up-small"],[0,"xmlns","xlink","http://www.w3.org/1999/xlink",0,"xlink","href","assets/icons/icons.svg#tp_arrow-down-small"],[1,"accordion-panel"]],template:function(e,t){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275listener("click",function(){return t.toggle()}),o.\u0275\u0275elementStart(1,"a",1),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,i,2,0,"svg",2),o.\u0275\u0275template(4,a,2,0,"svg",2),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(5,c,2,0,"div",3)),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275attribute("aria-label",t.ariaLabel)("aria-expanded",t.isOpen)("aria-selected",t.isOpen),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(t.header),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.isOpen),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!t.isOpen),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.isOpen))},directives:[r.NgIf],styles:[".accordion-header[_ngcontent-%COMP%]{position:relative;background:#fff;margin:0;font-size:14px}.accordion-header[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{text-decoration:none}.accordion-header[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{width:100%;padding:7px 12px;color:#555;font-size:14px;height:39px;text-align:left;border:1px solid #bbb;border-radius:0;margin:0}.accordion-header[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:absolute;top:9px;right:5px;width:25px;height:25px;z-index:1;cursor:pointer}.accordion-panel[_ngcontent-%COMP%]{border:1px solid #bbb;border-top:none}"]}),e}()},c7H9:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ProfileService=void 0;var o=n("kU1M"),r=(n("fXoL"),n("tk/3"),n("VmUZ")),i=n("fXoL"),a=n("tk/3");t.ProfileService=function(){function e(e){this.http=e}return e.prototype.get=function(){return this.http.get("/api/opal/api/customer/details/").pipe(o.map(function(e){return r.Profile.fromResponse(e)}))},e.prototype.postCustomerDetails=function(e){var t=e;return t.DateOfBirth?t.DateOfBirth=this.australianDateStringToISO(t.DateOfBirth):delete t.DateOfBirth,this.http.post("/api/opal/api/customer/details/",t)},e.prototype.australianDateStringToISO=function(e){var t=e.split("/");return t[2]+"-"+t[1]+"-"+t[0]},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(a.HttpClient))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},cGJq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SecurityMessageComponent=void 0,n("fXoL");var o=n("fXoL"),r=n("gUXI");t.SecurityMessageComponent=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-security-message"]],decls:6,vars:1,consts:[[1,"security-message"],["iconName","padlock","iconClasses","middle xs","iconTitle","",1,"security-message__icon",3,"iconAriaHidden"],[1,"sr-only"],[1,"security-message__text"]],template:function(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275element(1,"tni-icon",1),o.\u0275\u0275elementStart(2,"span",2),o.\u0275\u0275text(3,"Security information."),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(4,"p",3),o.\u0275\u0275text(5," Our website uses secure encryption technology to protect your personal information. "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("iconAriaHidden",!0))},directives:[r.IconComponent],styles:[".security-message[_ngcontent-%COMP%]{line-height:12px;font-size:12px}@media (min-width:768px){.security-message[_ngcontent-%COMP%]{margin-right:-10px}}.security-message__icon[_ngcontent-%COMP%]{padding-right:5px;float:left}.security-message__text[_ngcontent-%COMP%]{padding:0 0 0 24px;margin:0;line-height:1.5}.padlock[_ngcontent-%COMP%]{padding-right:5px}"]}),e}()},cGuN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deepCopyState=t.reducer=t.initialState=void 0;var o=n("jz4F");function r(e){return JSON.parse(JSON.stringify(e))}t.initialState={cardPageState:{currentTabId:"tni-opal-activity-tab",currentTopupPanel:""}},t.reducer=function(e,n){void 0===e&&(e=t.initialState);var i=r(e);switch(n.type){case o.OpalActionTypes.SET_CARDS_PAGE_TAB:return i.cardPageState.currentTabId=n.payload,i;case o.OpalActionTypes.SET_CARDS_PAGE_TOPUP_PANEL:return i.cardPageState.currentTopupPanel=n.payload,i;default:return e}},t.deepCopyState=r},"cMt+":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniTabModule=void 0,n("fXoL"),n("suy7"),n("uSyR");var o=n("ofXK"),r=n("fXoL");t.TniTabModule=function(){function e(){}return e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule]]}),e}()},dwx7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniPanelCardComponent=void 0;var o=n("fXoL"),r=n("fXoL"),i=["*"];t.TniPanelCardComponent=function(){function e(){this.linkClicked=new o.EventEmitter}return e.prototype.handleClick=function(){this.linkClicked.emit()},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tni-panel-card"]],outputs:{linkClicked:"linkClicked"},ngContentSelectors:i,decls:3,vars:0,consts:[["role","button","tabindex","0",1,"panel-group__link",3,"keyup.enter","keyup.space","click"],[1,"panel-group__link__container"]],template:function(e,t){1&e&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275elementStart(0,"a",0),r.\u0275\u0275listener("keyup.enter",function(){return t.handleClick()})("keyup.space",function(){return t.handleClick()})("click",function(){return t.handleClick()}),r.\u0275\u0275elementStart(1,"div",1),r.\u0275\u0275projection(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd())},styles:[".panel-group__link[_ngcontent-%COMP%]{background:#fff;box-shadow:0 2px 3px 0 rgba(0,0,0,.2);border-radius:4px;display:block;text-align:center;margin-bottom:.8rem;border-bottom:4px solid #fff;cursor:pointer;text-decoration:none;padding:0;position:relative}.panel-group__link--active[_ngcontent-%COMP%]{border-bottom:4px solid #1d69b4}.panel-group__link--disabled[_ngcontent-%COMP%]{border-bottom:0;cursor:auto}.panel-group__link__container[_ngcontent-%COMP%]{width:100%;height:100%}"]}),e}()},eE13:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreditCardNumberPipe=void 0,n("fXoL");var o=n("fXoL");t.CreditCardNumberPipe=function(){function e(){}return e.prototype.transform=function(e){return e?e.toString().replace(/(.*?\.\.\.)/g,"....").trim():""},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.\u0275\u0275definePipe({name:"creditCardNumber",type:e,pure:!0}),e}()},fX4m:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CTPTripsService=void 0,n("fXoL"),n("tk/3");var o=n("gONJ"),r=n("fXoL"),i=n("tk/3");t.CTPTripsService=function(){function e(e){this.http=e}return e.prototype.getTrips=function(){return this.http.get(o.default.apiUrl)},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275inject(i.HttpClient))},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},fiHy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CTPAuthService=void 0,n("fXoL"),n("QK+Z"),n("jGKr");var o=n("qCKp"),r=(n("tk/3"),n("gONJ")),i=n("fXoL"),a=n("tk/3"),c=n("QK+Z"),s=n("jGKr");t.CTPAuthService=function(){function e(e,t,n){this.http=e,this.opalAccountStore=t,this.opalSessionStore=n,this.whenAuthenticated=new o.ReplaySubject(1),this.opalAccount=this.opalAccountStore.get(),this.opalSession=this.opalSessionStore.load()}return e.prototype.isCTPAuthenticated=function(){return!!this.opalAccount&&!!this.opalAccount.ctpAccessToken},e.prototype.authenticateCTP=function(e){var t=this;return this.opalAccount.ctpAccessToken?this.whenAuthenticated.next(!0):this.http.get(r.default.tokenUrl+"?nonce="+e).subscribe(function(e){t.opalAccountStore.setCTPAccessToken(e.token),t.opalSessionStore.setSessionDetails(e.expires),t.whenAuthenticated.next(!0)}),this.whenAuthenticated},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(a.HttpClient),i.\u0275\u0275inject(c.OpalAccountStore),i.\u0275\u0275inject(s.OpalSessionStore))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},flw8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContactlessPaymentsComponent=void 0,n("fXoL"),n("HRm0");var o=n("wd/R"),r=(n("fiHy"),n("84CM"),n("kU1M")),i=n("fXoL"),a=n("HRm0"),c=n("fiHy"),s=n("84CM"),l=n("VD0A"),d=n("RUUZ"),p=n("ofXK"),u=n("pxjO"),m=n("DMPg");function f(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275element(1,"tni-contactless-activity",12),i.\u0275\u0275elementContainerEnd()),2&e){var n=t.$implicit;i.\u0275\u0275advance(1),i.\u0275\u0275property("activity",n)}}function g(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"tni-page-frame",8),i.\u0275\u0275elementStart(1,"h3",9),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"ul",10),i.\u0275\u0275template(4,f,2,1,"ng-container",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,o=i.\u0275\u0275nextContext(2);i.\u0275\u0275property("fullBleed",!0),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate1(" ",o.dayFormated(n)," "),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",o.filteredActivitiesByDay(n,o.ctpJourneys))}}function h(e,t){if(1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275template(1,g,5,3,"tni-page-frame",7),i.\u0275\u0275elementContainerEnd()),2&e){var n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",n.ctpActivityDays)}}function v(e,t){1&e&&(i.\u0275\u0275elementStart(0,"li",16),i.\u0275\u0275element(1,"div",17),i.\u0275\u0275elementStart(2,"div",18),i.\u0275\u0275element(3,"div",19),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",20),i.\u0275\u0275element(5,"div",21),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",22),i.\u0275\u0275element(7,"div",23),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd())}function C(e,t){1&e&&(i.\u0275\u0275elementStart(0,"li",16),i.\u0275\u0275element(1,"div",17),i.\u0275\u0275elementStart(2,"div",18),i.\u0275\u0275element(3,"div",19),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",20),i.\u0275\u0275element(5,"div",21),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"div",22),i.\u0275\u0275element(7,"div",23),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd())}var _=function(){return[1,2]},b=function(){return[1]};function x(e,t){1&e&&(i.\u0275\u0275elementContainerStart(0),i.\u0275\u0275elementStart(1,"tni-page-frame",8),i.\u0275\u0275elementStart(2,"div",13),i.\u0275\u0275element(3,"div",14),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"ul",10),i.\u0275\u0275template(5,v,8,0,"li",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"tni-page-frame",8),i.\u0275\u0275elementStart(7,"div",13),i.\u0275\u0275element(8,"div",14),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(9,"ul",10),i.\u0275\u0275template(10,C,8,0,"li",15),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementContainerEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275property("fullBleed",!0),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pureFunction0(4,_)),i.\u0275\u0275advance(1),i.\u0275\u0275property("fullBleed",!0),i.\u0275\u0275advance(4),i.\u0275\u0275property("ngForOf",i.\u0275\u0275pureFunction0(5,b)))}t.ContactlessPaymentsComponent=function(){function e(e,t,n){this.ctpAccountStoreService=e,this.ctpAuthService=t,this.logoutService=n,this.ctpJourneys=[]}return e.prototype.ngOnInit=function(){var e=this;this.ctpAuthService.whenAuthenticated.subscribe(function(){e.ctpAccountStoreService.getJourneys().pipe(r.take(1)).subscribe(function(t){e.ctpJourneys=t,e.ctpActivityDays=t.reduce(function(e,t){return e.add(t.day),e},new Set)}),e.ctpAccountStoreService.getPaymentCard().pipe(r.take(1)).subscribe(function(t){e.ctpPaymentCard=t})})},e.prototype.logout=function(){this.logoutService.logout(!1)},e.prototype.filteredActivitiesByDay=function(e,t){return t.filter(function(t){return t.day===e})},e.prototype.dayFormated=function(e){return o(e).format("dddd DD MMM YYYY")},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(a.CTPAccountStoreService),i.\u0275\u0275directiveInject(c.CTPAuthService),i.\u0275\u0275directiveInject(s.LogoutService))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tni-contactless-payments"]],decls:9,vars:3,consts:[[1,"contactless-payments"],["title","Contactless"],["tabindex","0","title","logout",1,"opal-title__logout",3,"click"],[3,"paymentCard"],[1,"container"],[1,"row"],[4,"ngIf"],[3,"fullBleed",4,"ngFor","ngForOf"],[3,"fullBleed"],[1,"contactless-payments__day-heading"],[1,"contactless-payments__activities"],[4,"ngFor","ngForOf"],[3,"activity"],[1,"contactless-payments__day-heading","contactless-payments__day-heading--skeleton"],[1,"skeleton-bar-round-big","center","x-lg"],["class","contactless-activity--skeleton",4,"ngFor","ngForOf"],[1,"contactless-activity--skeleton"],[1,"contactless-activity__icon--skeleton","skeleton-bar-square-thin"],[1,"contactless-activity__time--skeleton"],[1,"skeleton-bar-square-thick"],[1,"contactless-activity__price--skeleton"],[1,"skeleton-bar-square-thin","right"],[1,"contactless-activity__journey--skeleton"],[1,"skeleton-bar-square-thin","center"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"tni-opal-title",1),i.\u0275\u0275elementStart(2,"a",2),i.\u0275\u0275listener("click",function(){return t.logout()}),i.\u0275\u0275text(3,"Logout"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(4,"tni-contactless-card",3),i.\u0275\u0275elementStart(5,"div",4),i.\u0275\u0275elementStart(6,"div",5),i.\u0275\u0275template(7,h,2,1,"ng-container",6),i.\u0275\u0275template(8,x,11,6,"ng-container",6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(4),i.\u0275\u0275property("paymentCard",t.ctpPaymentCard),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",t.ctpJourneys.length>0),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",0===t.ctpJourneys.length))},directives:[l.TitleBarComponent,d.ContactlessCardComponent,p.NgIf,p.NgForOf,u.PageFrameComponent,m.ContactlessActivityComponent],styles:[".contactless-payments__day-heading[_ngcontent-%COMP%]{font-weight:500;font-size:16px;margin:0;padding:24px 32px}.contactless-payments__activities[_ngcontent-%COMP%]{padding:0;margin:0}  tni-contactless-activity:last-child .contactless-activity{border-radius:0 0 4px 4px}.opal-title__logout[_ngcontent-%COMP%]{cursor:pointer;color:#fff;text-decoration:underline;float:right;font-weight:400}.contactless-payments__day-heading--skeleton[_ngcontent-%COMP%]{width:60%}.contactless-activity--skeleton[_ngcontent-%COMP%]{list-style:none;padding:16px 16px 16px 65px;position:relative;border-top:1px solid #d8d8d8}@media (min-width:768px){.contactless-activity--skeleton[_ngcontent-%COMP%]{padding:16px 16px 16px 100px}}.contactless-activity__icon--skeleton[_ngcontent-%COMP%]{position:absolute;top:16px;left:16px;width:30px;height:30px;border-radius:100%}.contactless-activity__time--skeleton[_ngcontent-%COMP%]{margin:10px 0;width:40px}.contactless-activity__price--skeleton[_ngcontent-%COMP%]{float:right;width:10%}.contactless-activity__journey--skeleton[_ngcontent-%COMP%]{width:50%}"]}),e}()},g96h:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RefreshComponent=void 0;var o=n("fXoL"),r=n("x+y0"),i=(n("wd/R"),n("fXoL")),a=n("x+y0"),c=n("gUXI"),s=["refreshButton"];t.RefreshComponent=function(){function e(e,t){this.lastUpdatedDescriptionPipe=e,this.zone=t,this.refreshClick=new o.EventEmitter}return e.prototype.ngAfterViewInit=function(){var e=this;this.zone.runOutsideAngular(function(){e.timer=setInterval(function(){e.updateLabel()},1e3)})},e.prototype.ngOnChanges=function(){this.lastUpdatedLabel=this.getLastUpdatedLabel()},e.prototype.ngOnDestroy=function(){this.timer&&clearInterval(this.timer)},e.prototype.updateLabel=function(){var e=this;this.zone.run(function(){e.lastUpdatedLabel=e.getLastUpdatedLabel()})},e.prototype.getLastUpdatedLabel=function(){var e=this.lastUpdatedDescriptionPipe.transform(this.lastUpdated);return e&&"Updated "+e.relativeTime+" "+e.suffix},e.prototype.onRefreshClick=function(){this.refreshClick.emit(!0)},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(a.LastUpdatedDescriptionPipe),i.\u0275\u0275directiveInject(i.NgZone))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tni-refresh"]],viewQuery:function(e,t){var n;1&e&&i.\u0275\u0275staticViewQuery(s,!0),2&e&&i.\u0275\u0275queryRefresh(n=i.\u0275\u0275loadQuery())&&(t.refreshButton=n.first)},inputs:{lastUpdated:"lastUpdated",ariaSuffix:"ariaSuffix"},outputs:{refreshClick:"refreshClick"},features:[i.\u0275\u0275ProvidersFeature([r.LastUpdatedDescriptionPipe]),i.\u0275\u0275NgOnChangesFeature],decls:9,vars:3,consts:[[1,"refresh-component"],["href","javascript:;","oncontextmenu","return false;","role","button",3,"title","click"],["refreshButton",""],["iconName","refresh","iconAriaHidden","true","iconClasses","sm refresh-icon"],[1,"refresh-label"],[1,"sr-only"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"a",1,2),i.\u0275\u0275listener("click",function(){return t.onRefreshClick()}),i.\u0275\u0275element(3,"tni-icon",3),i.\u0275\u0275elementStart(4,"span",4),i.\u0275\u0275text(5,"Refresh"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275text(6),i.\u0275\u0275elementStart(7,"div",5),i.\u0275\u0275text(8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275propertyInterpolate("title","Refresh "+t.ariaSuffix),i.\u0275\u0275advance(5),i.\u0275\u0275textInterpolate1(" ",t.lastUpdatedLabel," "),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(t.ariaSuffix))},directives:[c.IconComponent],styles:[".refresh-component{font-size:16px}@media (max-width:767px){.refresh-component{font-size:14px}}.refresh-component a{text-decoration:none;margin-right:4px}@media (max-width:767px){.refresh-component a{margin-right:2px}}.refresh-component a .refresh-label{text-decoration:underline}@media (max-width:767px){.refresh-component a .refresh-icon{width:16px;height:16px;max-width:16px;max-height:16px}}"],encapsulation:2}),e}()},gK8m:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetCardPageTopupPanelAction=t.SetCardPageTabAction=void 0;var o=n("jz4F");t.SetCardPageTabAction=function(){return function(e){this.payload=e,this.type=o.OpalActionTypes.SET_CARDS_PAGE_TAB}}(),t.SetCardPageTopupPanelAction=function(){return function(e){this.payload=e,this.type=o.OpalActionTypes.SET_CARDS_PAGE_TOPUP_PANEL}}()},gM7n:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionListComponent=void 0,n("fXoL");var o=n("fXoL"),r=["*"];t.ActionListComponent=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-action-list"]],ngContentSelectors:r,decls:2,vars:0,consts:[[1,"action-list"]],template:function(e,t){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275elementStart(0,"ul",0),o.\u0275\u0275projection(1),o.\u0275\u0275elementEnd())},styles:[".action-list[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}"]}),e}()},gONJ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={apiUrl:"/ctptrips",tokenUrl:"/api/opal/ctp/login"}},gOn0:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormCheckboxComponent=void 0,n("fXoL"),n("3Pt+");var o=n("fXoL"),r=n("ofXK"),i=n("3Pt+");function a(e,t){if(1&e&&o.\u0275\u0275element(0,"input",7),2&e){var n=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("id",n.name)("formControl",n.control)("name",n.name)}}function c(e,t){if(1&e&&o.\u0275\u0275element(0,"input",8),2&e){var n=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("id",n.name)("formControl",n.control)("name",n.name)}}function s(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"div",9),o.\u0275\u0275elementStart(1,"p"),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(n.errorMap.required)}}function l(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"div",1),o.\u0275\u0275elementStart(1,"div",2),o.\u0275\u0275template(2,a,1,3,"input",3),o.\u0275\u0275template(3,c,1,3,"input",4),o.\u0275\u0275elementStart(4,"label",5),o.\u0275\u0275elementStart(5,"span"),o.\u0275\u0275projection(6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(7,s,3,1,"div",6),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext();o.\u0275\u0275classProp("nohelp",!n.helpText),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",n.isRequired),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!n.isRequired),o.\u0275\u0275advance(1),o.\u0275\u0275property("for",n.name),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",n.control.errors&&n.control.dirty)}}var d=["*"];t.FormCheckboxComponent=function(){function e(){this.hadFocus=!1,this.errors=[]}return e.prototype.ngOnInit=function(){this.isRequired=this.control.errors&&this.control.errors.required?"required":null},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-form-checkbox"]],inputs:{control:"control",inputName:"inputName",errorMap:"errorMap",name:"name"},ngContentSelectors:d,decls:1,vars:1,consts:[["class","form-input",3,"nohelp",4,"ngIf"],[1,"form-input"],[1,"checkbox-container"],["type","checkbox","class","styled-checkbox","required","",3,"id","formControl","name",4,"ngIf"],["type","checkbox","class","styled-checkbox",3,"id","formControl","name",4,"ngIf"],[1,"checkbox-label",3,"for"],["class","form-input__error-message",4,"ngIf"],["type","checkbox","required","",1,"styled-checkbox",3,"id","formControl","name"],["type","checkbox",1,"styled-checkbox",3,"id","formControl","name"],[1,"form-input__error-message"]],template:function(e,t){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275template(0,l,8,6,"div",0)),2&e&&o.\u0275\u0275property("ngIf",t.control)},directives:[r.NgIf,i.CheckboxRequiredValidator,i.CheckboxControlValueAccessor,i.NgControlStatus,i.FormControlDirective],styles:['.form-input[_ngcontent-%COMP%]{margin-bottom:10px;display:flex;position:relative;padding:25px 0;vertical-align:middle;display:block}.form-input__label[_ngcontent-%COMP%]{font-weight:300;position:absolute;bottom:100%;right:auto;color:#999e9f;top:28px;left:5px;font-size:16px;transition:.3s}input[_ngcontent-%COMP%]:focus + .form-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px}select[_ngcontent-%COMP%]:focus + .form-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:.3s}.hasValue[_ngcontent-%COMP%] + .form-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:0s}.error[_ngcontent-%COMP%] + .form-input__label[_ngcontent-%COMP%], .form-input.error[_ngcontent-%COMP%]   .form-input__label[_ngcontent-%COMP%], .form-input__label__mandatory[_ngcontent-%COMP%]{color:#c41f3d}.form-input.hasValue__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:0s}.form-input__input[_ngcontent-%COMP%]{display:block;margin-top:0;background:none;padding:2px 2px 5px;height:35px;border-radius:0;border:solid #555;border-width:0 0 1px;float:left;color:#555;font-weight:400;font-size:16px}@media (max-width:767px){.form-input__input[_ngcontent-%COMP%]{font-size:16px}}.form-input__input[_ngcontent-%COMP%]:focus{box-shadow:none}.form-input__input[type=number][_ngcontent-%COMP%]:out-of-range{color:red}.form-input__input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, .form-input__input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.form-input__error-message[_ngcontent-%COMP%]{display:none}.error[_ngcontent-%COMP%] + label[_ngcontent-%COMP%] + .form-input__error-message[_ngcontent-%COMP%]{display:block;position:absolute;top:78px;left:2px;font-size:12px;color:#c41f3d}.form-input__help[_ngcontent-%COMP%]{display:block;position:absolute;top:78px;left:2px;font-size:12px;color:#c41f3d;display:none;color:#999}.form-input__label[_ngcontent-%COMP%] + .form-input__help[_ngcontent-%COMP%]{display:block}.form-input__input[_ngcontent-%COMP%]{width:100%;float:none;padding-bottom:0}.form-input__label[_ngcontent-%COMP%]{top:41px;left:15px}.error[_ngcontent-%COMP%] + label[_ngcontent-%COMP%] + .form-input__error-message[_ngcontent-%COMP%], .form-input__help[_ngcontent-%COMP%]{position:static}.form-input__input[_ngcontent-%COMP%]{border:solid #1c1c1b;border-width:0 0 2px;background-color:#f9f9f9;border-radius:4px;padding:13px 16px;height:56px;box-sizing:border-box}.form-input__input[_ngcontent-%COMP%]:focus{border-width:1px 1px 2px}.form-input.nohelp[_ngcontent-%COMP%]{padding-bottom:5px}.form-input__error-message[_ngcontent-%COMP%]{display:block;top:78px;left:2px;font-size:12px;color:#c41f3d;position:static}.form-input__error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:static;line-height:1.5;margin:1em 0}.form[_ngcontent-%COMP%], .text[_ngcontent-%COMP%]{float:left}.text[_ngcontent-%COMP%]{width:90%;margin-left:2%;font-size:14px;text-align:justify}.checkbox-container[_ngcontent-%COMP%]   .styled-checkbox[_ngcontent-%COMP%]{position:absolute;opacity:0}.checkbox-container[_ngcontent-%COMP%]   .styled-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]{position:relative;cursor:pointer;font-size:13px;line-height:16px;padding:0 0 0 30px}.checkbox-container[_ngcontent-%COMP%]   .styled-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{float:left;width:-webkit-fit-content;width:-moz-fit-content;width:fit-content}.checkbox-container[_ngcontent-%COMP%]   .styled-checkbox[_ngcontent-%COMP%] + label[_ngcontent-%COMP%]:before{content:"";margin-right:10px;float:left;vertical-align:text-top;width:20px;height:20px;background:#f9f9f9;border-radius:3px;border:1px solid;margin-top:-2px;margin-left:-30px}.checkbox-container[_ngcontent-%COMP%]   .styled-checkbox[_ngcontent-%COMP%]:hover + label[_ngcontent-%COMP%]:before{background:#1d69b4}.checkbox-container[_ngcontent-%COMP%]   .styled-checkbox[_ngcontent-%COMP%]:focus + label[_ngcontent-%COMP%]{box-shadow:0 0 0 3px rgba(0,0,0,.12)}.checkbox-container[_ngcontent-%COMP%]   .styled-checkbox[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:before{background:#1d69b4}.checkbox-container[_ngcontent-%COMP%]   .styled-checkbox[_ngcontent-%COMP%]:disabled + label[_ngcontent-%COMP%]{color:#b8b8b8;cursor:auto}.checkbox-container[_ngcontent-%COMP%]   .styled-checkbox[_ngcontent-%COMP%]:disabled + label[_ngcontent-%COMP%]:before{box-shadow:none;background:#ddd}.checkbox-container[_ngcontent-%COMP%]   .styled-checkbox[_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]:after{content:"";position:absolute;left:5px;top:7px;background:#fff;width:2px;height:2px;box-shadow:2px 0 0 #fff,4px 0 0 #fff,4px -2px 0 #fff,4px -4px 0 #fff,4px -6px 0 #fff,4px -8px 0 #fff;transform:rotate(45deg)}']}),e}()},gUXI:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconComponent=void 0,n("fXoL");var o=n("fXoL"),r=n("ofXK");function i(e,t){if(1&e&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"title",3),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext();o.\u0275\u0275propertyInterpolate("id",n.iconId),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(n.iconTitle)}}t.IconComponent=function(){function e(){this.iconId="icon-"+ ++e.iconCounter}return e.iconCounter=0,e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-icon"]],inputs:{iconName:"iconName",iconTitle:"iconTitle",iconClasses:"iconClasses",iconAriaHidden:"iconAriaHidden",iconHidden:"iconHidden"},decls:3,vars:6,consts:[["role","img",1,"tp-icon",3,"ngClass"],[3,"id",4,"ngIf"],[0,"xmlns","xlink","http://www.w3.org/1999/xlink"],[3,"id"]],template:function(e,t){1&e&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"svg",0),o.\u0275\u0275template(1,i,2,2,"title",1),o.\u0275\u0275element(2,"use",2),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275propertyInterpolate("ngClass",t.iconClasses),o.\u0275\u0275attribute("aria-labelledby",t.iconId)("aria-hidden",!!t.iconAriaHidden)("hidden",t.iconHidden),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!!t.iconTitle),o.\u0275\u0275advance(1),o.\u0275\u0275attributeInterpolate1("href","assets/icons/icons.svg#tp_",t.iconName,"",null,"xlink"))},directives:[r.NgClass,r.NgIf],encapsulation:2}),e}()},glp8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RecaptchaService=void 0,n("fXoL"),n("puoa");var o=n("qCKp"),r=n("bXO7"),i=n("ofXK"),a=n("fXoL"),c=n("puoa");t.RecaptchaService=function(){function e(e,t){this.windowRef=e,this.document=t,this.captchaScriptAdded=!1,this.captchaCheck=new o.Subject,this.environment=e.url().indexOf("uat.transportnsw.info")>=0?"local":e.url().indexOf("transportnsw.info")>=0?"production":r.environment.localDev?"local":"other"}return e.prototype.addCaptchaScript=function(e){var t=this;if(this.captchaScriptAdded)return!1;var n=[];e&&(e.onload&&n.push("onload=recaptchaOnLoad"),e.render&&n.push("render="+e.render));var o=n.join("&"),i=n.length>0?r.environment.recaptchaUrl+"?"+o:r.environment.recaptchaUrl;e&&e.onload&&(this.registerWindowFunction("recaptchaCB",function(){t.captchaKey=t.captcha.getResponse(t.recaptchaWidgetId),t.captchaKey?t.captchaCheck.next(t.captchaKey):t.captchaCheck.error(new Error("error: invalid captcha response"))}),this.registerWindowFunction("recaptchaOnLoad",function(){t.captcha=t.windowRef.window().grecaptcha,t.recaptchaWidgetId=t.captcha.render("recaptcha",{sitekey:"production"===t.environment?r.environment.recaptchaKey:r.environment.recaptchaKeyTest,callback:"recaptchaCB",size:"invisible",badge:"bottomleft"})}));var a=this.document.createElement("script");a.src=i,a.async=!0,a.defer=!0,this.document.body.appendChild(a)},e.prototype.execute=function(){return this.recaptchaCloseListener||this.addrecaptchalistener(),"other"!==this.environment?(this.captchaCheck=new o.Subject,this.captchaKey&&this.captcha.reset(this.recaptchaWidgetId),this.captcha.execute(),this.captchaCheck):o.of("val")},e.prototype.registerWindowFunction=function(e,t){this.windowRef.window()[e]=t},e.prototype.addrecaptchalistener=function(){var e=this;this.recaptchaCloseListener=!0;var t=Array.from(this.document.getElementsByTagName("iframe")).find(function(e){return e.src.includes("google.com/recaptcha/api2/bframe")}).parentNode.parentNode;new MutationObserver(function(n){return 0===t.style.opacity&&e.handleRecaptchaClose()}).observe(t,{attributes:!0,attributeFilter:["style"]})},e.prototype.handleRecaptchaClose=function(){this.captchaCheck.error(new Error("error: invalid captcha response")),this.recaptchaCloseListener=!1},e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275inject(c.WindowRef),a.\u0275\u0275inject(i.DOCUMENT))},e.\u0275prov=a.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},h88C:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalServicesModule=void 0,n("fXoL");var o=n("T/fq"),r=n("9ans"),i=n("5VQw"),a=n("vDmu"),c=n("74Ue"),s=n("84CM"),l=n("3OCy"),d=n("kSud"),p=n("c7H9"),u=n("2QCD"),m=n("aZVF"),f=n("PShm"),g=n("RutN"),h=n("YORH"),v=n("6i2Y"),C=n("tf7G"),_=n("NRRr"),b=n("puoa"),x=n("IRyT"),y=n("0ruu"),M=n("xN0M"),P=n("WcMK"),O=n("ELlc"),S=n("PZPe"),w=n("ltAX"),k=n("Uf+G"),E=n("w4vn"),T=n("vRXg"),I=n("5rcV"),A=n("glp8"),N=n("fXoL");t.OpalServicesModule=function(){function e(){}return e.\u0275mod=N.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=N.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},providers:[o.AccessibleAlertsService,r.AuthService,i.AutoTopupService,a.EntitlementService,c.FormValidationService,s.LogoutService,l.OpalNotificationPreferenceService,d.PaymentAccountService,p.ProfileService,u.SecretQaService,m.SendUsernameService,f.SmartcardService,h.TrackOpalEventService,g.TrackEventService,v.FeatureToggleService,C.TopupService,_.LoaderService,b.WindowRef,x.AccountService,y.ScrollService,M.GetViewportService,P.DataSharingService,S.ActivateCardService,O.PaymentService,w.OutageService,k.UiStateService,E.HotlistService,T.BalanceTransferService,I.OneoffTopupPaymentProcessService,A.RecaptchaService]}),e}()},hBxx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SecurityDetailsComponent=void 0;var o=n("fXoL"),r=(n("3Pt+"),n("tJ3N")),i=(n("2QCD"),n("fXoL")),a=n("2QCD"),c=n("jbib"),s=n("Mfk8"),l=n("ofXK"),d=n("T42N");function p(e,t){if(1&e&&i.\u0275\u0275element(0,"tni-option",13),2&e){var n=t.$implicit;i.\u0275\u0275property("value",n.code)("label",n.question)}}function u(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",14),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().submit()}),i.\u0275\u0275text(1," Submit "),i.\u0275\u0275elementEnd()}}t.SecurityDetailsComponent=function(){function e(e){this.secretQaService=e,this.submitSecurityDetails=new o.EventEmitter,this.submitLabel="Submit",this.questions=[],this.hideSubmitButton=!1,this.validationMessages=new r.ValidationMessages}return e.prototype.ngOnInit=function(){var e=this;this.customSubmitLabel&&(this.submitLabel=this.customSubmitLabel),this.secretQaService.list().subscribe(function(t){return e.questions=t})},e.prototype.submit=function(){this.submitSecurityDetails.emit()},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(a.SecretQaService))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["security-details"]],inputs:{group:"group",hideSubmitButton:"hideSubmitButton",customSubmitLabel:"customSubmitLabel"},outputs:{submitSecurityDetails:"submitSecurityDetails"},decls:22,vars:14,consts:[[1,"personal-details"],[1,"container-fluid"],[1,"row"],["labelText","Username","inputName","userName","helpText","","inputType","text",1,"col-md-12",3,"control","errorMap"],[1,"col-md-12","password-policy"],["labelText","Password","inputName","password","helpText","","inputType","password",1,"col-md-6",3,"control","errorMap"],["labelText","Confirm password","inputName","confirmPassword","helpText","","inputType","password",1,"col-md-6",3,"control","errorMap"],["labelText","Enter a PIN (4 digits)","inputName","pin","helpText","","inputType","text",1,"col-md-6","pin",3,"control","errorMap"],["labelText","Choose a security question","inputName","question","helpText","","inputType","text",1,"col-md-12",3,"control","errorMap"],[3,"value","label",4,"ngFor","ngForOf"],["labelText","Security question answer","inputName","answer","helpText","","inputType","text",1,"col-md-12",3,"control","errorMap"],[1,"col-md-8","col-md-offset-2","personal-details__actions"],["class","personal-details__submit col-md-8 col-sm-offset-2",3,"click",4,"ngIf"],[3,"value","label"],[1,"personal-details__submit","col-md-8","col-sm-offset-2",3,"click"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275element(3,"tni-form-input",3),i.\u0275\u0275elementStart(4,"div",4),i.\u0275\u0275text(5," Password must contain minimum of: "),i.\u0275\u0275element(6,"br"),i.\u0275\u0275elementStart(7,"ul"),i.\u0275\u0275elementStart(8,"li"),i.\u0275\u0275text(9,"6 characters"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"li"),i.\u0275\u0275text(11,"1 upper case letter"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"li"),i.\u0275\u0275text(13,"1 number"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(14,"tni-form-input",5),i.\u0275\u0275element(15,"tni-form-input",6),i.\u0275\u0275element(16,"tni-form-input",7),i.\u0275\u0275elementStart(17,"tni-form-select-input",8),i.\u0275\u0275template(18,p,1,2,"tni-option",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(19,"tni-form-input",10),i.\u0275\u0275elementStart(20,"div",11),i.\u0275\u0275template(21,u,2,0,"button",12),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(3),i.\u0275\u0275property("control",t.group.controls.userName)("errorMap",t.validationMessages.userName),i.\u0275\u0275advance(11),i.\u0275\u0275property("control",t.group.controls.password)("errorMap",t.validationMessages.password),i.\u0275\u0275advance(1),i.\u0275\u0275property("control",t.group.controls.confirmPassword)("errorMap",t.validationMessages.confirmPassword),i.\u0275\u0275advance(1),i.\u0275\u0275property("control",t.group.controls.pin)("errorMap",t.validationMessages.pin),i.\u0275\u0275advance(1),i.\u0275\u0275property("control",t.group.controls.question)("errorMap",t.validationMessages.securityQuestion),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.questions),i.\u0275\u0275advance(1),i.\u0275\u0275property("control",t.group.controls.answer)("errorMap",t.validationMessages.securityAnswer),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",!t.hideSubmitButton))},directives:[c.FormInputComponent,s.FormSelectInputComponent,l.NgForOf,l.NgIf,d.TniOptionComponent],styles:['.personal-details__heading[_ngcontent-%COMP%]{font-size:24px;margin:0 0 24px;font-weight:300}.personal-details__submit[_ngcontent-%COMP%]{border-radius:4px;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background-color:#1d69b4;border:0 solid #195c9e;color:#fff}.personal-details__submit[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.personal-details__submit[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .personal-details__submit[_ngcontent-%COMP%]{margin-top:10px}.personal-details__actions[_ngcontent-%COMP%]{margin-top:20px}.pin[_ngcontent-%COMP%]{clear:left}.password-policy[_ngcontent-%COMP%]{font-size:13px;line-height:16px;color:#999e9f;margin-bottom:10px;margin-top:36px}.password-policy[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0;padding-left:1.75em}']}),e}()},hnxR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AppModule=void 0,n("fXoL");var o=n("ZRhi"),r=n("GPsQ"),i=n("vDbs"),a=n("fXoL");n("ZRhi"),t.AppModule=function(){function e(){}return e.\u0275mod=a.\u0275\u0275defineNgModule({type:e,bootstrap:[r.AppComponent]}),e.\u0275inj=a.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.OpalModule.forRoot(),i.OpalRoutingModule]]}),e}()},iAux:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActivateCardComponent=void 0,n("fXoL");var o=n("3Pt+"),r=n("u3Ad"),i=(n("WcMK"),n("PZPe"),n("YORH"),n("NRRr"),n("U+qi")),a=n("kU1M"),c=(n("tyNb"),n("QK+Z"),n("PShm"),n("fXoL")),s=n("3Pt+"),l=n("WcMK"),d=n("PZPe"),p=n("NRRr"),u=n("tyNb"),m=n("QK+Z"),f=n("YORH"),g=n("PShm"),h=n("ofXK"),v=n("73Ru"),C=n("amr8"),_=n("M4hh"),b=n("Mp0x");function x(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"tni-form-message",8),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate1(" ",n.errorMessage," ")}}function y(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"card-form",9),c.\u0275\u0275listener("cardValidationError",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext(2).cardValidationErrorHandler()})("cancel",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext(2).cancel()})("submitCardDetails",function(e){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext(2).activateCard(e)}),c.\u0275\u0275elementEnd()}if(2&e){var o=c.\u0275\u0275nextContext(2);c.\u0275\u0275property("group",o.cardDetails)("customSubmitLabel","ACTIVATE CARD")("showNickname",!1)("hideSubmitButton",!1)("authenticate",!1)("showCancelButton",!0)("knownCard",o.inactiveCardNumber)}}function M(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"div",5),c.\u0275\u0275elementStart(1,"header"),c.\u0275\u0275elementStart(2,"h2"),c.\u0275\u0275text(3,"Activate Opal card"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(4,x,2,1,"tni-form-message",6),c.\u0275\u0275template(5,y,1,7,"card-form",7),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(4),c.\u0275\u0275property("ngIf",n.activationError),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",n.inactiveCardNumber)}}function P(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"div"),c.\u0275\u0275elementStart(1,"p",13),c.\u0275\u0275text(2),c.\u0275\u0275pipe(3,"centsToDollar"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"p",14),c.\u0275\u0275text(5,"(pending tap on)"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(6,"p"),c.\u0275\u0275text(7," It may take up to 60 minutes before your balance is available to tap on with. You must tap on at an Opal reader within 60 days or your balance will be returned to your payment card. "),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(2),c.\u0275\u0275textInterpolate(c.\u0275\u0275pipeBind1(3,1,n.pendingBalance))}}function O(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"div",10),c.\u0275\u0275elementStart(1,"tni-state-banner",11),c.\u0275\u0275template(2,P,8,3,"div",12),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(1),c.\u0275\u0275property("state",!0)("message","Activation successful")("redirect","/account/cards")("customLabel","RETURN TO MY ACCOUNT"),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",n.pendingBalance>0)}}t.ActivateCardComponent=function(){function e(e,t,n,o,r,a,c,s){this.formBuilder=e,this.dataSharingService=t,this.activateCardService=n,this.loaderService=o,this.router=r,this.opalAccountStore=a,this.trackOpalEventService=c,this.smartcardService=s,this.cardNumberPipe=new i.OpalCardNumberPipe,this.activationError=!1,this.activationSuccess=!1}return e.prototype.ngOnInit=function(){this.getCardNumber()},e.prototype.getCardNumber=function(){this.inactiveCardNumber=this.cardNumberPipe.transform(this.dataSharingService.get("smartcardId")),this.inactiveCardNumber?this.createForm():this.cancel()},e.prototype.createForm=function(){this.cardDetails=new o.FormGroup({cardNumber:new o.FormControl(this.inactiveCardNumber,{validators:[o.Validators.required,o.Validators.pattern(r.TniRegularExpressions.cardNumber)]}),cardCode:new o.FormControl(null,{validators:[o.Validators.required,o.Validators.pattern(r.TniRegularExpressions.pin)],updateOn:"blur"})}),this.getCardDetails()},e.prototype.getCardDetails=function(){var e=this;this.opalAccountData=this.opalAccountStore.get().smartcards.filter(function(t){return t.smartcardId===Number(e.inactiveCardNumber.replace(/\s/g,""))})},e.prototype.cancel=function(){this.router.navigate(["/account/cards"])},e.prototype.activateCard=function(e){var t=this;this.loaderService.display(!0),this.activationError=!1;var n={SmartcardId:Number(this.dataSharingService.get("smartcardId")),SmartcardSc:this.cardDetails.controls.cardCode.value};this.cardActivation$=this.activateCardService.activate(n).subscribe(function(){t.trackOpalEventService.trackUserEvent({action:"Activate card button",label:"Registered"}),t.refetchCardData()},function(e){t.activationError=!0,t.activationSuccess=!1,t.loaderService.display(!1),t.errorMessage=t.mapError(e)})},e.prototype.refetchCardData=function(){var e=this;this.smartcardService.getDetailAndPublish(this.inactiveCardNumber.replace(/\s/g,"")).pipe(a.finalize(function(){e.loaderService.display(!1),e.activationError=!1,e.activationSuccess=!0})).subscribe(function(t){e.pendingBalance=t.svPending})},e.prototype.mapError=function(e){return"Business"===e.error.ErrorType?"Unable to activate card. Check security code and try again.":"Something went wrong. Please try again."},e.prototype.ngOnDestroy=function(){this.cardActivation$&&this.cardActivation$.unsubscribe()},e.\u0275fac=function(t){return new(t||e)(c.\u0275\u0275directiveInject(s.FormBuilder),c.\u0275\u0275directiveInject(l.DataSharingService),c.\u0275\u0275directiveInject(d.ActivateCardService),c.\u0275\u0275directiveInject(p.LoaderService),c.\u0275\u0275directiveInject(u.Router),c.\u0275\u0275directiveInject(m.OpalAccountStore),c.\u0275\u0275directiveInject(f.TrackOpalEventService),c.\u0275\u0275directiveInject(g.SmartcardService))},e.\u0275cmp=c.\u0275\u0275defineComponent({type:e,selectors:[["activate-card"]],decls:5,vars:2,consts:[[1,"container"],[1,"row"],[1,"form-component"],["class","container-fluid",4,"ngIf"],["class","success",4,"ngIf"],[1,"container-fluid"],["class","card-activation-error row","id","card-activation-error",4,"ngIf"],["title","Card details",3,"group","customSubmitLabel","showNickname","hideSubmitButton","authenticate","showCancelButton","knownCard","cardValidationError","cancel","submitCardDetails",4,"ngIf"],["id","card-activation-error",1,"card-activation-error","row"],["title","Card details",3,"group","customSubmitLabel","showNickname","hideSubmitButton","authenticate","showCancelButton","knownCard","cardValidationError","cancel","submitCardDetails"],[1,"success"],[3,"state","message","redirect","customLabel"],[4,"ngIf"],[1,"pending-balance"],[1,"status"]],template:function(e,t){1&e&&(c.\u0275\u0275elementStart(0,"div",0),c.\u0275\u0275elementStart(1,"div",1),c.\u0275\u0275elementStart(2,"div",2),c.\u0275\u0275template(3,M,6,2,"div",3),c.\u0275\u0275template(4,O,3,5,"div",4),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()),2&e&&(c.\u0275\u0275advance(3),c.\u0275\u0275property("ngIf",!t.activationSuccess),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",t.activationSuccess))},directives:[h.NgIf,v.TniFormMessageComponent,C.CardFormComponent,_.StateBannerComponent],pipes:[b.CentsToDollarPipe],styles:[".form-component[_ngcontent-%COMP%]{position:relative;background:#fff;box-shadow:0 2px 3px 0 rgba(0,0,0,.2);border-radius:4px;padding-top:1.5rem;margin:2.4rem auto;max-width:800px}@media (min-width:992px){.form-component[_ngcontent-%COMP%]{padding-top:4rem}}.form-component__inner[_ngcontent-%COMP%]{margin:0 auto}@media (min-width:992px){.form-component__inner[_ngcontent-%COMP%]{width:500px}}.form-component__header[_ngcontent-%COMP%]{text-align:left}  .form-component .container-fluid{max-width:500px}.success[_ngcontent-%COMP%]{padding-bottom:4rem}.success[_ngcontent-%COMP%]   .pending-balance[_ngcontent-%COMP%]{font-weight:700;color:#00881f;font-size:22px}.success[_ngcontent-%COMP%]   .status[_ngcontent-%COMP%]{margin-top:-25px}"]}),e}()},iMrD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UpdateCardNicknameResponse=void 0,t.UpdateCardNicknameResponse=function(){function e(){}return e.fromResponse=function(t){var n=new e;return n.result=t.Result,n},e}()},iS8h:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CTPInterceptorService=void 0,n("fXoL"),n("QK+Z");var o=n("fXoL"),r=n("QK+Z");t.CTPInterceptorService=function(){function e(e){this.opalAccountStore=e}return e.prototype.intercept=function(e,t){if(!e.url.match(/\/ctp/))return t.handle(e);var n=this.opalAccountStore.get();return n&&(e=e.clone({setHeaders:{Authorization:"Bearer "+n.ctpAccessToken},body:e.body})),t.handle(e)},e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(r.OpalAccountStore))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},iccS:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreditCardMonthPipe=void 0,n("fXoL");var o=n("fXoL");t.CreditCardMonthPipe=function(){function e(){}return e.prototype.transform=function(e){var t=parseInt(e,0);return t<10?"0"+t:""+t},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.\u0275\u0275definePipe({name:"creditCardMonth",type:e,pure:!0}),e}()},"j+Iq":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventKeyCodeEnum=void 0,t.EventKeyCodeEnum=function(e){return e[e.ctrlKey=17]="ctrlKey",e[e.cmdKey=91]="cmdKey",e[e.aKey=65]="aKey",e[e.vKey=86]="vKey",e[e.xKey=88]="xKey",e[e.cKey=67]="cKey",e[e.leftKey=37]="leftKey",e[e.rightKey=39]="rightKey",e[e.backSpaceKey=8]="backSpaceKey",e[e.spaceKey=32]="spaceKey",e[e.enterKey=13]="enterKey",e}(t.EventKeyCodeEnum||{})},jGKr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalSessionStore=void 0;var o=n("PFYy"),r=(n("fXoL"),n("fXoL"));t.OpalSessionStore=function(){function e(){}return e.prototype.isRegisteredLoginWindowType=function(){return"unregistered"!==this.loginWindowType},e.prototype.load=function(){var e=sessionStorage.getItem("opal-session");if(e)return o.OpalSession.fromJson(JSON.parse(e));var t=new o.OpalSession,n=localStorage.getItem("opal-session");return n&&(t.isUnregistered=JSON.parse(n).isUnregistered),t},e.prototype.hasValidSession=function(){var e=this.load();return!!e&&!e.isExpired()},e.prototype.setOpalSessionRedirect=function(e){var t=this.load();t&&(t.redirected=!0,t.isUnregistered=e,this.saveOpalSession(t))},e.prototype.setSessionDetails=function(e){var t=new o.OpalSession;t.setExpiresIn(e),this.saveOpalSession(t)},e.prototype.setLoginUrl=function(e){var t=this.load();if(t){var n=Object.assign(t,{loginUrl:e});this.saveOpalSession(n)}},e.prototype.saveOpalSession=function(e){sessionStorage.setItem("opal-session",JSON.stringify(e)),localStorage.setItem("opal-session",JSON.stringify({isUnregistered:e.isUnregistered}))},e.prototype.clear=function(){sessionStorage.removeItem("opal-session")},e.\u0275prov=r.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}()},jaAq:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SecretQuestionModel=void 0,t.SecretQuestionModel=function(){function e(){}return e.fromResponse=function(t){var n=new e;return n.code=t.SecretQuestionCode,n.question=t.SecretQuestionDescription,n},e}()},jbib:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormInputComponent=void 0;var o=n("kU1M"),r=(n("fXoL"),n("3Pt+"),n("fXoL")),i=n("ofXK"),a=n("3Pt+");function c(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"p"),r.\u0275\u0275text(1),r.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,o=r.\u0275\u0275nextContext(3);r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(o.getErrorMessage(n))}}function s(e,t){if(1&e&&(r.\u0275\u0275elementStart(0,"div",6),r.\u0275\u0275template(1,c,2,1,"p",7),r.\u0275\u0275elementEnd()),2&e){var n=r.\u0275\u0275nextContext(2);r.\u0275\u0275propertyInterpolate1("id","",n.inputName,"-error"),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngForOf",n.getErrors())}}function l(e,t){if(1&e){var n=r.\u0275\u0275getCurrentView();r.\u0275\u0275elementStart(0,"div",1),r.\u0275\u0275elementStart(1,"input",2),r.\u0275\u0275listener("blur",function(){return r.\u0275\u0275restoreView(n),r.\u0275\u0275nextContext().blurControl()}),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(2,"label",3),r.\u0275\u0275text(3),r.\u0275\u0275elementEnd(),r.\u0275\u0275template(4,s,2,2,"div",4),r.\u0275\u0275elementStart(5,"p",5),r.\u0275\u0275text(6),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()}if(2&e){var o=r.\u0275\u0275nextContext();r.\u0275\u0275classProp("nohelp",!o.helpText),r.\u0275\u0275advance(1),r.\u0275\u0275classProp("hasValue",o.control.value)("hadFocus",o.hadFocus)("error",o.control.dirty&&o.control.errors),r.\u0275\u0275attributeInterpolate1("aria-describedby","",o.inputName,"-error"),r.\u0275\u0275property("type",o.inputType)("id",o.inputName)("ngClass",o.typeClass)("formControl",o.control)("name",o.inputName)("max",o.max)("maxlength",o.maxLength),r.\u0275\u0275attribute("required",o.isRequired),r.\u0275\u0275advance(1),r.\u0275\u0275classProp("hadFocus",o.hadFocus),r.\u0275\u0275property("for",o.inputName),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate(o.labelText),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",o.control.errors&&o.control.dirty),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate(o.helpText)}}t.FormInputComponent=function(){function e(){this.hadFocus=!1,this.errors=[]}return e.prototype.ngOnInit=function(){var e=this;this.isRequired=this.control.errors&&this.control.errors.required?"required":null,this.typeClass="form-input--"+this.inputType,this.control.valueChanges.pipe(o.filter(function(){return e.control.invalid})).subscribe()},e.prototype.getErrors=function(){return this.control.errors?Object.keys(this.control.errors).map(function(e){return e}):[]},e.prototype.getErrorMessage=function(e){return this.errorMap?this.errorMap[e]:""},e.prototype.blurControl=function(){this.hadFocus=!0},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tni-form-input"]],inputs:{formatted:"formatted",control:"control",labelText:"labelText",inputName:"inputName",helpText:"helpText",inputType:"inputType",maxLength:"maxLength",max:"max",errorMap:"errorMap"},decls:1,vars:1,consts:[["class","form-input",3,"nohelp",4,"ngIf"],[1,"form-input"],[1,"form-input__input",3,"type","id","ngClass","formControl","name","max","maxlength","blur"],[1,"form-input__label",3,"for"],["class","form-input__error-message","aria-live","assertive","role","alert",3,"id",4,"ngIf"],[1,"form-input__help"],["aria-live","assertive","role","alert",1,"form-input__error-message",3,"id"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&r.\u0275\u0275template(0,l,7,23,"div",0),2&e&&r.\u0275\u0275property("ngIf",t.control)},directives:[i.NgIf,a.DefaultValueAccessor,i.NgClass,a.NgControlStatus,a.FormControlDirective,a.MaxLengthValidator,a.RequiredValidator,i.NgForOf],styles:["[_nghost-%COMP%]{display:block}.form-input[_ngcontent-%COMP%]{margin-bottom:10px;display:flex;position:relative;padding:25px 0;vertical-align:middle;display:block}.form-input__label[_ngcontent-%COMP%]{font-weight:300;position:absolute;bottom:100%;right:auto;color:#999e9f;top:28px;left:5px;font-size:16px;transition:.3s}input[_ngcontent-%COMP%]:focus + .form-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px}select[_ngcontent-%COMP%]:focus + .form-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:.3s}.hasValue[_ngcontent-%COMP%] + .form-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:0s}.error[_ngcontent-%COMP%] + .form-input__label[_ngcontent-%COMP%], .form-input.error[_ngcontent-%COMP%]   .form-input__label[_ngcontent-%COMP%], .form-input__label__mandatory[_ngcontent-%COMP%]{color:#c41f3d}.form-input.hasValue__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:0s}.form-input__input[_ngcontent-%COMP%]{display:block;margin-top:0;background:none;padding:2px 2px 5px;height:35px;border-radius:0;border:solid #555;border-width:0 0 1px;float:left;color:#555;font-weight:400;font-size:16px}@media (max-width:767px){.form-input__input[_ngcontent-%COMP%]{font-size:16px}}.form-input__input[_ngcontent-%COMP%]:focus{box-shadow:none}.form-input__input[type=number][_ngcontent-%COMP%]:out-of-range{color:red}.form-input__input[type=number][_ngcontent-%COMP%]::-webkit-inner-spin-button, .form-input__input[type=number][_ngcontent-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.form-input__error-message[_ngcontent-%COMP%]{display:none}.error[_ngcontent-%COMP%] + label[_ngcontent-%COMP%] + .form-input__error-message[_ngcontent-%COMP%]{display:block;position:absolute;top:78px;left:2px;font-size:12px;color:#c41f3d}.form-input__help[_ngcontent-%COMP%]{display:block;position:absolute;top:78px;left:2px;font-size:12px;color:#c41f3d;display:none;color:#999}.form-input__label[_ngcontent-%COMP%] + .form-input__help[_ngcontent-%COMP%]{display:block}.form-input__input[_ngcontent-%COMP%]{width:100%;float:none;padding-bottom:0}.form-input__label[_ngcontent-%COMP%]{top:41px;left:15px}.error[_ngcontent-%COMP%] + label[_ngcontent-%COMP%] + .form-input__error-message[_ngcontent-%COMP%], .form-input__help[_ngcontent-%COMP%]{position:static}.form-input__input[_ngcontent-%COMP%]{border:solid #1c1c1b;border-width:0 0 2px;background-color:#f9f9f9;border-radius:4px;padding:13px 16px;height:56px;box-sizing:border-box}.form-input__input[_ngcontent-%COMP%]:focus{border-width:1px 1px 2px}.form-input.nohelp[_ngcontent-%COMP%]{padding-bottom:5px}.form-input[_ngcontent-%COMP%]   .form-input__help[_ngcontent-%COMP%]{margin:.6em 0 1.25em}.form-input[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:0}.form-input[_ngcontent-%COMP%]   input.ng-invalid.ng-dirty[_ngcontent-%COMP%]{border-color:#c41f3d}.ng-invalid.ng-dirty[_ngcontent-%COMP%] + label[_ngcontent-%COMP%] + .form-input__error-message[_ngcontent-%COMP%]{display:block;position:absolute;top:78px;left:2px;font-size:12px;color:#c41f3d;position:static}.form-input__error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:static;line-height:1.5;margin:1em 0}"]}),e}()},jhCk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MobileNumberPipe=void 0,n("fXoL");var o=n("fXoL");t.MobileNumberPipe=function(){function e(){}return e.prototype.transform=function(e){var t=e;return 0===e.indexOf("+61")&&(t="0"+e.slice(3)),10===t.length?t.substr(0,4)+" "+t.substr(4,3)+" "+t.substr(7,3):t},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.\u0275\u0275definePipe({name:"mobileNumber",type:e,pure:!0}),e}()},jy4o:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CTPToJourneyPipe=void 0,n("fXoL");var o=n("wd/R"),r=n("fXoL");function i(e){switch(e){case"RAIL":return"train";case"FERRY":return"ferry";default:return"bus"}}t.CTPToJourneyPipe=function(){function e(){}return e.prototype.transform=function(e,t){return{from:e.EntryLocation,to:e.ExitLocation,day:o(e.EntryDTM).format("YYYY-MM-DD"),date:o(e.EntryDTM),fare:e.PaidAmount,mode:i(e.EntryTransportMode)}},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.\u0275\u0275definePipe({name:"ctpToJourney",type:e,pure:!0}),e}()},jz4F:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalActionTypes=void 0,t.OpalActionTypes=function(e){return e.SET_CARDS_PAGE_TAB="SET_CARDS_PAGE_TAB",e.SET_CARDS_PAGE_TOPUP_PANEL="SET_CARDS_PAGE_TOPUP_PANEL",e}(t.OpalActionTypes||{})},kAtE:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionItemComponent=void 0,n("fXoL");var o=n("fXoL"),r=n("gUXI"),i=["tni-action-item",""],a=["*"];t.ActionItemComponent=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["li","tni-action-item",""]],inputs:{icon:"icon"},attrs:i,ngContentSelectors:a,decls:3,vars:1,consts:[["tabindex","0",1,"action-item"],["iconClasses","md",1,"action-item__icon",3,"iconName"]],template:function(e,t){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275element(1,"tni-icon",1),o.\u0275\u0275projection(2),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(1),o.\u0275\u0275property("iconName",t.icon))},directives:[r.IconComponent],styles:[':[_nghost-%COMP%]{padding:0}.action-item[_ngcontent-%COMP%]{position:relative;border:1px solid #e4e4e4;border-radius:5px;margin:5px 0;padding:15px 40px 15px 70px;display:block;text-decoration:none;font-size:16px;font-weight:400;cursor:pointer;color:#1d69b4;text-align:left}.action-item[_ngcontent-%COMP%]:after{content:"";display:inline-block;height:9px;right:24px;position:absolute;top:50%;transform:rotate(45deg) translateY(-50%);vertical-align:top;width:9px;border-color:#373636;border-style:solid;border-width:2px 2px 0 0}.action-item__icon[_ngcontent-%COMP%]{position:absolute;top:50%;transform:translateY(-50%);left:20px;color:#373636}']}),e}()},kSud:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PaymentAccountService=void 0;var o=n("qCKp"),r=n("kU1M"),i=(n("fXoL"),n("tk/3"),n("VzkM")),a=n("fXoL"),c=n("tk/3");t.PaymentAccountService=function(){function e(e){this.http=e}return e.prototype.get=function(){return this.paymentAccountCache$?this.paymentAccountCache$:this.getPaymentAccounts()},e.prototype.getPaymentAccounts=function(){var e=this;return this.http.get("/api/opal/api/customer/paymentaccount/").pipe(r.map(function(t){var n=i.PaymentAccount.fromResponse(t);return e.paymentAccountCache$=o.of(n),n}))},e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275inject(c.HttpClient))},e.\u0275prov=a.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},kUUT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateAccountModel=void 0;var o=n("pI01"),r=n("zjfG");t.CreateAccountModel=function(){function e(){this.profile={},this.cardDetails={},this.personalDetails={},this.securityDetails={}}return e.toRequest=function(e){var t={},n=new r.AddressPipe;return t.FirstName=e.personalDetails.firstName,t.LastName=e.personalDetails.lastName,t.DateOfBirth=o.Converters.toRequestDateFormat(e.personalDetails.dateOfBirth),t.Email=e.personalDetails.email,t.Username=e.securityDetails.userName,t.Password=e.securityDetails.password,t.SecretQuestionCode=e.securityDetails.question,t.SecretAnswer=e.securityDetails.answer,t.PIN=e.securityDetails.pin,t.Telephone=e.personalDetails.telephone?e.personalDetails.telephone.replace(/\s/g,""):e.personalDetails.telephone,t.Mobile=e.personalDetails.mobile.replace(/\s/g,""),t.MarketingFlag=e.marketingFlag,t.Address={Address1:n.transform(e.profile.address1),Address2:n.transform(e.profile.address2),Address3:n.transform(e.profile.address3),Postcode:e.profile.postcode,Suburb:e.profile.suburb,State:e.profile.state,Country:e.profile.country},t},e}()},khGg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniOptionModule=void 0,n("fXoL"),n("T42N");var o=n("3Pt+"),r=n("ofXK"),i=n("fXoL");t.TniOptionModule=function(){function e(){}return e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.FormsModule,r.CommonModule]]}),e}()},knLn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreateAccountComponent=void 0;var o=n("kU1M"),r=(n("fXoL"),n("3Pt+")),i=n("kUUT"),a=(n("74Ue"),n("IRyT"),n("NRRr"),n("9ans"),n("smRY")),c=(n("QK+Z"),n("jGKr"),n("WcMK"),n("YORH"),n("puoa"),n("0ruu"),n("PShm"),n("tyNb"),n("tJ3N")),s=(n("84CM"),n("bXO7")),l=n("u3Ad"),d=n("U+qi"),p=n("fXoL"),u=n("3Pt+"),m=n("74Ue"),f=n("IRyT"),g=n("NRRr"),h=n("QK+Z"),v=n("jGKr"),C=n("YORH"),_=n("puoa"),b=n("PShm"),x=n("tyNb"),y=n("9ans"),M=n("84CM"),P=n("0ruu"),O=n("WcMK"),S=n("E2dh"),w=n("VD0A"),k=n("ofXK"),E=n("N+3c"),T=n("pxjO"),I=n("+1k7"),A=n("amr8"),N=n("RJWm"),L=n("4ti1"),R=n("hBxx"),j=n("gOn0"),F=n("73Ru"),V=["errorMessage"];function D(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"create-account-options",8),p.\u0275\u0275listener("createAccountInvoked",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().createAccountInvoked()}),p.\u0275\u0275elementEnd()}}function B(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"div",9),p.\u0275\u0275elementStart(1,"tni-page-frame",10),p.\u0275\u0275elementStart(2,"tni-slide-down",11),p.\u0275\u0275elementStart(3,"header"),p.\u0275\u0275elementStart(4,"div",12),p.\u0275\u0275elementStart(5,"h2",13),p.\u0275\u0275text(6,"Card details"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(7,"content"),p.\u0275\u0275elementStart(8,"div",14),p.\u0275\u0275elementStart(9,"div",15),p.\u0275\u0275elementStart(10,"card-form",16),p.\u0275\u0275listener("submitCardDetails",function(e){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().submitCardDetails(e)})("cardValidationError",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().cardValidationErrorHandler()})("cancel",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().cancel()}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var o=p.\u0275\u0275nextContext();p.\u0275\u0275advance(1),p.\u0275\u0275property("fullBleed",!0),p.\u0275\u0275advance(1),p.\u0275\u0275property("isOpen",!0),p.\u0275\u0275advance(8),p.\u0275\u0275property("group",o.cardDetails)("hideSubmitButton",!1)("authenticate",!0)("showCancelButton",!0)("showNickname",!0)}}function U(e,t){if(1&e&&(p.\u0275\u0275elementStart(0,"div",37),p.\u0275\u0275elementStart(1,"tni-form-message",38),p.\u0275\u0275elementStart(2,"span",39,40),p.\u0275\u0275text(4),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e){var n=p.\u0275\u0275nextContext(2);p.\u0275\u0275advance(4),p.\u0275\u0275textInterpolate(n.serverError)}}function X(e,t){1&e&&(p.\u0275\u0275elementStart(0,"tni-form-message",37),p.\u0275\u0275text(1," Password and confirm password do not match. "),p.\u0275\u0275elementEnd())}function z(e,t){if(1&e){var n=p.\u0275\u0275getCurrentView();p.\u0275\u0275elementStart(0,"form",17),p.\u0275\u0275elementStart(1,"tni-page-frame",10),p.\u0275\u0275elementStart(2,"tni-slide-down",18),p.\u0275\u0275elementStart(3,"header"),p.\u0275\u0275elementStart(4,"div",12),p.\u0275\u0275elementStart(5,"span",19),p.\u0275\u0275text(6,"1"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(7,"h2",20),p.\u0275\u0275text(8," Personal details "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275template(9,U,5,1,"div",21),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(10,"content"),p.\u0275\u0275elementStart(11,"div",14),p.\u0275\u0275elementStart(12,"personal-details",22),p.\u0275\u0275listener("submitPersonalDetails",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().submitPersonalDetails()})("cancel",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().cancel()}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(13,"tni-page-frame",10),p.\u0275\u0275elementStart(14,"tni-slide-down",23),p.\u0275\u0275elementStart(15,"header"),p.\u0275\u0275elementStart(16,"div",12),p.\u0275\u0275elementStart(17,"span",19),p.\u0275\u0275text(18,"2"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(19,"h2",24),p.\u0275\u0275text(20," Address "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(21,"content"),p.\u0275\u0275elementStart(22,"div",14),p.\u0275\u0275elementStart(23,"address-form",25),p.\u0275\u0275listener("submitAddress",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().submitAddress()})("cancel",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().cancel()}),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(24,"tni-page-frame",10),p.\u0275\u0275elementStart(25,"tni-slide-down",26),p.\u0275\u0275elementStart(26,"header"),p.\u0275\u0275elementStart(27,"div",12),p.\u0275\u0275elementStart(28,"span",19),p.\u0275\u0275text(29,"3"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(30,"h2",27),p.\u0275\u0275text(31," Security details "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(32,"content"),p.\u0275\u0275elementStart(33,"div",14),p.\u0275\u0275template(34,X,2,0,"tni-form-message",21),p.\u0275\u0275element(35,"security-details",28),p.\u0275\u0275elementStart(36,"div",29),p.\u0275\u0275elementStart(37,"tni-form-checkbox",30),p.\u0275\u0275text(38," I accept the "),p.\u0275\u0275elementStart(39,"a",31),p.\u0275\u0275text(40,"Opal terms of use"),p.\u0275\u0275elementEnd(),p.\u0275\u0275text(41,", I understand that the "),p.\u0275\u0275elementStart(42,"a",32),p.\u0275\u0275text(43,"Opal privacy policy"),p.\u0275\u0275elementEnd(),p.\u0275\u0275text(44," contains important information about how the TfNSW handles my personal information, and I confirm that I am ordering/registering this Opal card: "),p.\u0275\u0275element(45,"br"),p.\u0275\u0275text(46," a. for myself; "),p.\u0275\u0275element(47,"br"),p.\u0275\u0275text(48," b. for a child who is under the age of 16, and I am their parent or guardian; or "),p.\u0275\u0275element(49,"br"),p.\u0275\u0275text(50," c. on behalf of someone else over the age of 16, in which case I have their consent to do so (including their consent to disclose any personal information I provide about them). "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(51,"div",29),p.\u0275\u0275elementStart(52,"tni-form-checkbox",33),p.\u0275\u0275text(53," I would like to hear about promotions. "),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(54,"div",34),p.\u0275\u0275elementStart(55,"button",35),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().submit()}),p.\u0275\u0275text(56,"Submit"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementStart(57,"div",34),p.\u0275\u0275elementStart(58,"button",36),p.\u0275\u0275listener("click",function(){return p.\u0275\u0275restoreView(n),p.\u0275\u0275nextContext().cancel()}),p.\u0275\u0275text(59,"Cancel"),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()}if(2&e){var o=p.\u0275\u0275nextContext();p.\u0275\u0275property("formGroup",o.form),p.\u0275\u0275advance(1),p.\u0275\u0275property("fullBleed",!0),p.\u0275\u0275advance(1),p.\u0275\u0275property("isOpen",!0),p.\u0275\u0275advance(7),p.\u0275\u0275property("ngIf",o.serverError),p.\u0275\u0275advance(3),p.\u0275\u0275property("group",o.personalDetails)("hideSubmitButton",o.state.personalDetailsFilled)("showCancelButton",!o.state.personalDetailsFilled),p.\u0275\u0275advance(1),p.\u0275\u0275property("fullBleed",!0),p.\u0275\u0275advance(1),p.\u0275\u0275property("isOpen",o.state.personalDetailsFilled),p.\u0275\u0275advance(9),p.\u0275\u0275property("group",o.addressForm)("showCopyToDelivery",!1)("hideSubmitButton",o.state.addressFilled)("showCancelButton",!o.state.addressFilled),p.\u0275\u0275advance(1),p.\u0275\u0275property("fullBleed",!0),p.\u0275\u0275advance(1),p.\u0275\u0275property("isOpen",o.state.addressFilled),p.\u0275\u0275advance(9),p.\u0275\u0275property("ngIf",o.passwordMismatch),p.\u0275\u0275advance(1),p.\u0275\u0275property("group",o.securityDetails)("hideSubmitButton",!0),p.\u0275\u0275advance(2),p.\u0275\u0275property("control",o.form.controls.tandc)("errorMap",o.validationMessages.termConditions),p.\u0275\u0275advance(15),p.\u0275\u0275property("control",o.form.controls.marketingFlag)}}t.CreateAccountComponent=function(){function e(e,t,n,o,r,a,s,l,p,u,m,f,g,h,v){this.fb=e,this.formValidationService=t,this.accountService=n,this.loaderService=o,this.opalAccountStore=r,this.opalSessionStore=a,this.trackOpalEventService=s,this.windowRef=l,this.smartcardService=p,this.router=u,this.authService=m,this.logoutService=f,this.scrollService=g,this.zone=h,this.dataSharingService=v,this.model=new i.CreateAccountModel,this.state={cardSelected:!1,cardDetailsProvided:!1,addressFilled:!1,personalDetailsFilled:!1},this.passwordMismatch=!1,this.validationMessages=new c.ValidationMessages,this.cardNumberPipe=new d.OpalCardNumberPipe}return e.prototype.ngOnInit=function(){this.recaptchaKey=this.useTestKey()?s.environment.recaptchaKeyTest:s.environment.recaptchaKey,window.getResponceCapcha=this.callSubmitToServer.bind(this),window.recaptchaExpired=this.resetRecaptcha.bind(this),this.addScript(),this.getUnregisteredCard(),this.createForm()},e.prototype.getUnregisteredCard=function(){if(this.opalAccount=this.opalAccountStore.get(),0!=!!this.opalAccount.unregisteredCardNo){var e=this.dataSharingService.get("cardDetails");this.model.cardDetails.cardNumber=this.cardNumberPipe.transform(e.cardNo),this.model.cardDetails.cardCode=e.cardSc,this.state.cardSelected=!0,this.state.cardDetailsProvided=!0,this.dataSharingService.remove("cardDetails"),this.scrollTo("pesonal-details-header")}},e.prototype.createForm=function(){this.addressForm=new r.FormGroup({address1:new r.FormControl(this.model.profile.address1,{validators:[r.Validators.required,r.Validators.pattern(l.TniRegularExpressions.address)],updateOn:"blur"}),address2:new r.FormControl(this.model.profile.address2,{validators:[r.Validators.pattern(l.TniRegularExpressions.address)],updateOn:"blur"}),address3:new r.FormControl(this.model.profile.address3),country:new r.FormControl(this.model.profile.country,{validators:[r.Validators.required],updateOn:"blur"}),postcode:new r.FormControl(this.model.profile.postcode,{validators:[r.Validators.required],updateOn:"blur"}),state:new r.FormControl(this.model.profile.state,{validators:[r.Validators.required],updateOn:"blur"}),suburb:new r.FormControl(this.model.profile.suburb,{validators:[r.Validators.required],updateOn:"blur"})}),this.cardDetails=new r.FormGroup({cardNumber:new r.FormControl(this.model.cardDetails.cardNumber,{validators:[r.Validators.required,r.Validators.pattern(l.TniRegularExpressions.cardNumber)]}),cardCode:new r.FormControl(this.model.cardDetails.cardCode,{validators:[r.Validators.required,r.Validators.pattern(l.TniRegularExpressions.pin)],updateOn:"blur"}),cardNick:new r.FormControl(this.model.cardDetails.cardNick,{validators:[r.Validators.maxLength(51)],updateOn:"blur"})}),this.personalDetails=new r.FormGroup({firstName:new r.FormControl(this.model.personalDetails.firstName,{validators:[r.Validators.required,r.Validators.maxLength(50)],updateOn:"blur"}),lastName:new r.FormControl(this.model.personalDetails.lastName,{validators:[r.Validators.required,r.Validators.maxLength(50)],updateOn:"blur"}),dateOfBirth:new r.FormControl(this.model.personalDetails.dateOfBirth,{validators:[r.Validators.pattern(l.TniRegularExpressions.date)],updateOn:"blur"}),telephone:new r.FormControl(this.model.personalDetails.telephone,{validators:[r.Validators.pattern(l.TniRegularExpressions.phone),r.Validators.maxLength(25)],updateOn:"blur"}),mobile:new r.FormControl(this.model.personalDetails.mobile,{validators:[r.Validators.required,r.Validators.pattern(l.TniRegularExpressions.phone),r.Validators.maxLength(25)],updateOn:"blur"}),email:new r.FormControl(this.model.personalDetails.email,{validators:[r.Validators.required,r.Validators.pattern(l.TniRegularExpressions.email),r.Validators.maxLength(250)],updateOn:"blur"})}),this.securityDetails=new r.FormGroup({userName:new r.FormControl(this.model.securityDetails.userName,{validators:[r.Validators.required,r.Validators.maxLength(250),r.Validators.minLength(5)],updateOn:"blur"}),password:new r.FormControl(this.model.securityDetails.password,{validators:[r.Validators.required,r.Validators.maxLength(150),r.Validators.pattern(l.TniRegularExpressions.password)],updateOn:"blur"}),confirmPassword:new r.FormControl(this.model.securityDetails.confirmPassword,{validators:[r.Validators.required,r.Validators.maxLength(150),r.Validators.pattern(l.TniRegularExpressions.password)],updateOn:"blur"}),cardNick:new r.FormControl(this.model.securityDetails.cardNick,{validators:[r.Validators.maxLength(128)],updateOn:"blur"}),pin:new r.FormControl(this.model.securityDetails.pin,{validators:[r.Validators.required,r.Validators.pattern(l.TniRegularExpressions.pin)],updateOn:"blur"}),question:new r.FormControl(this.model.securityDetails.question,{validators:[r.Validators.required],updateOn:"blur"}),answer:new r.FormControl(this.model.securityDetails.answer,{validators:[r.Validators.required,r.Validators.maxLength(50)],updateOn:"blur"})}),this.form=this.fb.group({profile:this.addressForm,personalDetails:this.personalDetails,securityDetails:this.securityDetails,cardDetails:this.cardDetails,tandc:new r.FormControl(this.model.marketingFlag,[r.Validators.required]),marketingFlag:new r.FormControl})},e.prototype.useTestKey=function(){return-1===this.windowRef.url().indexOf("transportnsw.info")},e.prototype.submitAddress=function(){this.formValidationService.validate(this.addressForm),this.formValidationService.validate(this.personalDetails),this.personalDetails.valid&&this.addressForm.valid&&(this.state.addressFilled=!0,this.scrollTo("security-details-header"),this.clearQuestionDropDown())},e.prototype.submitCardDetails=function(e){e?(this.state.cardDetailsProvided=!0,this.scrollTo("pesonal-details-header")):this.formValidationService.validate(this.cardDetails)},e.prototype.cardValidationErrorHandler=function(){this.scrollTo("card-details-header")},e.prototype.submitPersonalDetails=function(){this.formValidationService.validate(this.personalDetails),this.personalDetails.valid&&(this.securityDetails.controls.userName.setValue(this.personalDetails.controls.email.value),this.state.personalDetailsFilled=!0,this.scrollTo("address-details-header"))},e.prototype.clearQuestionDropDown=function(){setTimeout(function(){document.getElementById("question").selectedIndex=-1})},e.prototype.submit=function(){this.formValidationService.validate(this.personalDetails),this.formValidationService.validate(this.addressForm),this.formValidationService.validate(this.securityDetails),this.formValidationService.validate(this.form),this.passwordMismatch=this.securityDetails.controls.password.value!==this.securityDetails.controls.confirmPassword.value,!this.passwordMismatch&&this.personalDetails.valid&&this.addressForm.valid&&this.securityDetails.valid&&this.form.valid&&grecaptcha.execute()},e.prototype.callSubmitToServer=function(){var e=this;this.zone.run(function(){return e.submitToServer()})},e.prototype.submitToServer=function(){var e=this,t=this.form.getRawValue();this.loaderService.display(!0),this.accountService.create(i.CreateAccountModel.toRequest(t)).pipe(o.take(1)).subscribe(function(){var n=new a.Credentials;n.username=t.securityDetails.userName,n.password=t.securityDetails.password,e.authService.login(n.getValidatedObject(!0)).pipe(o.take(1)).subscribe(function(n){e.saveSession(n),e.trackOpalEventService.logInRegistered(),e.opalSessionStore.setLoginUrl("/tickets-opal/opal/manage-your-opal-card#/login"),e.smartcardService.register(t.cardDetails.cardNumber.replace(/ /g,""),t.cardDetails.cardCode,t.cardDetails.cardNick).pipe(o.take(1),o.finalize(function(){return e.loaderService.display(!1)})).subscribe(function(){e.windowRef.redirectToUrl("/opal-view/#/account/cards"),e.trackOpalEventService.trackUserEvent({action:"Create an account button",label:"Unregistered"})},function(n){return e.handleCardRegisterErrors(n,t)})},function(){e.loaderService.display(!1)})},function(t){return e.handleAccountCreationErrors(t)})},e.prototype.addScript=function(){var e=document.createElement("script");e.src="https://www.google.com/recaptcha/api.js",e.async=!0,e.defer=!0,document.body.appendChild(e)},e.prototype.handleAccountCreationErrors=function(e){var t=this;this.serverError=425===e.status&&e.error&&e.error.ErrorType&&"Business"===e.error.ErrorType?"Username is taken":"Something went wrong. Please try again",this.loaderService.display(!1),grecaptcha.reset(),setTimeout(function(){return t.scrollTo("responseError",0,0)},500)},e.prototype.handleCardRegisterErrors=function(e,t){this.loaderService.display(!1),425===e.status&&e.error&&e.error.ErrorType&&"Business"===e.error.ErrorType&&e.error.Message.indexOf("Card is an entitlement based")>=0&&(this.dataSharingService.set("cardData",{SmartcardId:t.cardDetails.cardNumber.replace(/ /g,""),SmartcardSc:t.cardDetails.cardCode,CardNickname:t.cardDetails.cardNick}),this.router.navigate(["/account/add-entitlement"]))},e.prototype.scrollTo=function(e,t,n){var o=this;void 0===t&&(t=100),void 0===n&&(n=500),setTimeout(function(){o.scrollService.smoothScrollFocusToElementById(e,100,500)},100)},e.prototype.createAccountInvoked=function(){this.state.cardSelected=!0},e.prototype.cancel=function(){this.logoutService.logout(!1)},e.prototype.resetRecaptcha=function(){grecaptcha.reset()},e.prototype.saveSession=function(e){this.opalAccountStore.setAccessToken(e.accessToken),this.opalAccountStore.setUnregisteredCardNo(null,null),this.opalSessionStore.setSessionDetails(e.expiresIn)},e.\u0275fac=function(t){return new(t||e)(p.\u0275\u0275directiveInject(u.FormBuilder),p.\u0275\u0275directiveInject(m.FormValidationService),p.\u0275\u0275directiveInject(f.AccountService),p.\u0275\u0275directiveInject(g.LoaderService),p.\u0275\u0275directiveInject(h.OpalAccountStore),p.\u0275\u0275directiveInject(v.OpalSessionStore),p.\u0275\u0275directiveInject(C.TrackOpalEventService),p.\u0275\u0275directiveInject(_.WindowRef),p.\u0275\u0275directiveInject(b.SmartcardService),p.\u0275\u0275directiveInject(x.Router),p.\u0275\u0275directiveInject(y.AuthService),p.\u0275\u0275directiveInject(M.LogoutService),p.\u0275\u0275directiveInject(P.ScrollService),p.\u0275\u0275directiveInject(p.NgZone),p.\u0275\u0275directiveInject(O.DataSharingService))},e.\u0275cmp=p.\u0275\u0275defineComponent({type:e,selectors:[["create-account"]],viewQuery:function(e,t){var n;1&e&&p.\u0275\u0275viewQuery(V,!0),2&e&&p.\u0275\u0275queryRefresh(n=p.\u0275\u0275loadQuery())&&(t.errorMessage=n.first)},decls:8,vars:4,consts:[[1,"create-account","create-account-form"],["title","Create account"],[3,"createAccountInvoked",4,"ngIf"],["class","container",4,"ngIf"],[3,"formGroup",4,"ngIf"],[1,"form-group"],["id","capchaElement","data-size","invisible","data-callback","getResponceCapcha","data-expired-callback","recaptchaExpired",1,"g-recaptcha"],["capchaElement",""],[3,"createAccountInvoked"],[1,"container"],[3,"fullBleed"],["id","cardDetailsAccordion",3,"isOpen"],[1,"create-account-panel__header"],["id","card-details-header",1,"create-account-panel__header__heading"],[1,"create-account-panel__content"],[1,"container-fluid"],["title","Card details",3,"group","hideSubmitButton","authenticate","showCancelButton","showNickname","submitCardDetails","cardValidationError","cancel"],[3,"formGroup"],["id","personalDetailsAccordion",3,"isOpen"],["aria-hidden","true",1,"create-account-panel__header__number"],["href","#","tabindex","-1","id","pesonal-details-header",1,"create-account-panel__header__heading"],["class","col-md-12",4,"ngIf"],["title","Address","customSubmitLabel","Next",3,"group","hideSubmitButton","showCancelButton","submitPersonalDetails","cancel"],["id","addressDetailsAccordion",3,"isOpen"],["id","address-details-header","href","#","tabindex","-1",1,"create-account-panel__header__heading"],["title","Address","customSubmitLabel","Next",3,"group","showCopyToDelivery","hideSubmitButton","showCancelButton","submitAddress","cancel"],["id","accountDetailsAccordion",3,"isOpen"],["href","#","tabindex","-1","id","security-details-header",1,"create-account-panel__header__heading"],["title","Address",3,"group","hideSubmitButton"],[1,"tnc-container","container-fluid"],["name","tandc",1,"col-md-12","copy-text",3,"control","errorMap"],["aria-label","Opal terms of use link opens in a new tab","title","Opal terms of use","href","https://transportnsw.info/terms-conditions","target","_blank"],["aria-label","Opal privacy policy link opens in a new tab","title","Opal privacy policy","href","https://transportnsw.info/about-us/privacy","target","_blank"],["name","marketingFlag",1,"col-md-12","copy-text",3,"control"],[1,"col-md-12","address-form__actions"],[1,"create-account-form__submit","col-md-8",3,"click"],[1,"cancel-button","col-md-8",3,"click"],[1,"col-md-12"],["id","responseError",1,"col-md-12"],["tabindex","0",1,"server-error"],["errorMessage",""]],template:function(e,t){1&e&&(p.\u0275\u0275elementStart(0,"tni-layout",0),p.\u0275\u0275element(1,"tni-opal-title",1),p.\u0275\u0275template(2,D,1,0,"create-account-options",2),p.\u0275\u0275template(3,B,11,7,"div",3),p.\u0275\u0275template(4,z,60,21,"form",4),p.\u0275\u0275elementStart(5,"div",5),p.\u0275\u0275element(6,"div",6,7),p.\u0275\u0275elementEnd(),p.\u0275\u0275elementEnd()),2&e&&(p.\u0275\u0275advance(2),p.\u0275\u0275property("ngIf",!t.state.cardSelected),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",t.state.cardSelected&&!t.state.cardDetailsProvided),p.\u0275\u0275advance(1),p.\u0275\u0275property("ngIf",t.state.cardDetailsProvided),p.\u0275\u0275advance(2),p.\u0275\u0275attribute("data-sitekey",t.recaptchaKey))},directives:[S.LayoutComponent,w.TitleBarComponent,k.NgIf,E.CreateAccountOptionsComponent,T.PageFrameComponent,I.TniSlidedownComponent,A.CardFormComponent,u.\u0275angular_packages_forms_forms_y,u.NgControlStatusGroup,u.FormGroupDirective,N.PersonalDetailsComponent,L.AddressFormComponent,R.SecurityDetailsComponent,j.FormCheckboxComponent,F.TniFormMessageComponent],styles:['.form-component[_ngcontent-%COMP%]{position:relative;background:#fff;box-shadow:0 2px 3px 0 rgba(0,0,0,.2);border-radius:4px;padding-top:1.5rem;margin:2.4rem auto;max-width:800px}@media (min-width:992px){.form-component[_ngcontent-%COMP%]{padding-top:4rem}}.form-component__inner[_ngcontent-%COMP%]{margin:0 auto}@media (min-width:992px){.form-component__inner[_ngcontent-%COMP%]{width:500px}}.form-component__header[_ngcontent-%COMP%]{text-align:left}.title-bg[_ngcontent-%COMP%]{padding:0 15px;width:100vw;background:linear-gradient(0deg,#1b91d4,#1d69b4)}.title-container[_ngcontent-%COMP%], .title-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{line-height:60px;height:60px}.title-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff;font-size:1.4em;font-weight:200;min-width:200px;margin:0}.create-account-panel__header[_ngcontent-%COMP%]{width:100%;margin:0 auto;padding:40px 16px 40px 66px;position:relative}@media (min-width:768px){.create-account-panel__header[_ngcontent-%COMP%]{padding:40px 100px;width:700px}}.create-account-panel__header--block-only[_ngcontent-%COMP%]{padding-left:16px}.create-account-panel__header__heading[_ngcontent-%COMP%]{margin:0;line-height:1.2}.create-account-panel__header__number[_ngcontent-%COMP%]{position:absolute;color:#1d69b4;top:37px;left:16px;border:1px solid #1d69b4;width:33px;height:33px;border-radius:33px;font-size:16px;font-weight:500;line-height:33px;text-align:center}@media (min-width:768px){.create-account-panel__header__number[_ngcontent-%COMP%]{left:35px}}.create-account-panel__content[_ngcontent-%COMP%]{margin:0 auto}@media (min-width:768px){.create-account-panel__content[_ngcontent-%COMP%]{width:500px}}.create-account[_ngcontent-%COMP%]   .create-account-form__submit[_ngcontent-%COMP%]{border-radius:4px;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background-color:#1d69b4;border:0 solid #195c9e;color:#fff;float:none}.create-account[_ngcontent-%COMP%]   .create-account-form__submit[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.create-account[_ngcontent-%COMP%]   .create-account-form__submit[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .create-account[_ngcontent-%COMP%]   .create-account-form__submit[_ngcontent-%COMP%]{margin-top:10px}.create-account[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{border-radius:4px;border:0 solid transparent;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background:transparent;float:none;margin-top:5px}.create-account[_ngcontent-%COMP%]   .cancel-button[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.create-account[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .create-account[_ngcontent-%COMP%]   .cancel-button[_ngcontent-%COMP%]{margin-top:10px}.create-account[_ngcontent-%COMP%]     .form-message{max-width:500px;margin:30px auto}.create-account[_ngcontent-%COMP%]     .accordion-panel{border:none;padding-bottom:48px}.create-account[_ngcontent-%COMP%]   .tnc-container[_ngcontent-%COMP%]{padding:0 7px}.create-account[_ngcontent-%COMP%]   .tnc-container[_ngcontent-%COMP%]     .copy-text{margin:-25px 0 25px}.create-account[_ngcontent-%COMP%]   .tnc-container[_ngcontent-%COMP%]     .form-input.nohelp{padding:0}.create-account[_ngcontent-%COMP%]   .tnc-container[_ngcontent-%COMP%]     .text{text-align:left;font-size:12px;letter-spacing:.51px;line-height:16px;padding-top:4px}.create-account[_ngcontent-%COMP%]   .tnc-container[_ngcontent-%COMP%]     .text a{text-decoration:underline}  .grecaptcha-badge{z-index:999}']}),e}()},kxHz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CreditCardNumberAsterikPipe=void 0,n("fXoL");var o=n("fXoL");t.CreditCardNumberAsterikPipe=function(){function e(){}return e.prototype.transform=function(e){return e?e.toString().replace(/(.*?\.\.\.)/g,"").trim():""},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.\u0275\u0275definePipe({name:"creditCardNumberAsterik",type:e,pure:!0}),e}()},lTWT:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniCardCodeModule=void 0,n("fXoL"),n("obkt");var o=n("ofXK"),r=n("3Pt+"),i=n("fXoL");t.TniCardCodeModule=function(){function e(){}return e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule,r.ReactiveFormsModule,r.FormsModule]]}),e}()},ltAX:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OutageService=void 0;var o=n("kU1M"),r=(n("fXoL"),n("tk/3"),n("bXO7")),i=n("fXoL"),a=n("tk/3");t.OutageService=function(){function e(e){this.http=e,this.env=r.environment}return e.prototype.getOutageInfo=function(){return this.http.get(this.env.localDev?"http://localhost:3000/toggles":"/api/opal/toggles/").pipe(o.map(function(e){return e.outage}))},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(a.HttpClient))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},m8Qk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginResponseMessageEnum=void 0,t.LoginResponseMessageEnum=function(e){return e[e.Ok="Login successful."]="Ok",e[e.UnauthorizedUsername="This username or password is incorrect, please try again."]="UnauthorizedUsername",e[e.UnauthorizedCard="This Opal card number or security code is incorrect, please try again."]="UnauthorizedCard",e[e.Locked="Your Opal account is blocked. You can still use your Opal card but can no longer access your account. To unblock your account, contact Opal Customer Care on 13 67 25 (13 OPAL)."]="Locked",e[e.AlreadyRegistered='This Opal card is already registered. <a href="javascript:;" class="btn-link" (click)="state.usernameLogin = true">Log in</a> with your username and password.']="AlreadyRegistered",e[e.Unexpected="Unexpected error occurred. Please try again later."]="Unexpected",e}(t.LoginResponseMessageEnum||{})},m8sF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EditableTextFieldComponent=void 0;var o=n("kU1M"),r=(n("fXoL"),n("j+Iq")),i=n("fXoL"),a=n("ofXK"),c=n("3Pt+"),s=n("gUXI"),l=n("Effa"),d=["textInput"],p=["editBtn"];function u(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"input",9,10),i.\u0275\u0275listener("ngModelChange",function(e){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().value=e})("keydown",function(e){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().keydownInput(e)})("focus",function(e){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().focus(e)})("blur",function(e){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().blur(e)}),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext();i.\u0275\u0275property("ngModel",o.value)("readOnly",!o.editable||o.saving)("disabled",!o.editable)}}function m(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",11),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n.value&&n.trimDisplayLength?n.value.slice(0,n.trimDisplayLength):n.value," ")}}function f(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",12,13),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().edit()})("keydown",function(e){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().keydownEdit(e)}),i.\u0275\u0275element(2,"tni-icon",14),i.\u0275\u0275elementStart(3,"span",15),i.\u0275\u0275text(4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext();i.\u0275\u0275advance(4),i.\u0275\u0275textInterpolate1("edit ",o.label,"")}}function g(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",16),i.\u0275\u0275text(1),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",n.errorMessage," ")}}function h(e,t){1&e&&i.\u0275\u0275element(0,"tni-spinner",21)}function v(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",17),i.\u0275\u0275elementStart(1,"a",18),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().cancel()})("keydown",function(e){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().keydownCancel(e)}),i.\u0275\u0275text(2,"Cancel"),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,h,1,0,"tni-spinner",19),i.\u0275\u0275elementStart(4,"a",20),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().save()})("keydown",function(e){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().keydownSave(e)}),i.\u0275\u0275text(5," Save "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275classProp("disabled",o.saving),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",o.saving),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("disabled",!o.canSave()),i.\u0275\u0275propertyInterpolate("tabindex",o.canSave()?0:-1)}}t.EditableTextFieldComponent=function(){function e(){this.editable=!1,this.focused=!1,this.saving=!1}return e.prototype.ngAfterViewInit=function(){this.initialValue=this.value},e.prototype.ngOnChanges=function(e){e.value&&this.editable&&(this.editable=!1,this.clearErrorMessage())},e.prototype.edit=function(){var e=this;this.editable=!0,this.clearErrorMessage(),setTimeout(function(){e.textInput.nativeElement.focus()},0)},e.prototype.canSave=function(){return!(this.saving||this.required&&!this.value||this.initialValue===this.value)},e.prototype.save=function(){var e=this;this.clearErrorMessage(),this.canSave()&&(this.saving=!0,this.valueChanged(this.value).pipe(o.finalize(function(){e.saving=!1})).subscribe(function(t){return e.handleSuccessfulSave()},function(t){return e.handleFailedSave()}))},e.prototype.handleSuccessfulSave=function(){var e=this;this.editable=!1,this.initialValue=this.value,setTimeout(function(){e.editBtn.nativeElement.focus()},0)},e.prototype.handleFailedSave=function(){var e=this;setTimeout(function(){e.textInput.nativeElement.focus()},0)},e.prototype.cancel=function(){var e=this;this.editable=!1,this.value=this.initialValue,this.clearErrorMessage(),setTimeout(function(){e.editBtn.nativeElement.focus()},0)},e.prototype.keydownEdit=function(e){e.keyCode===r.EventKeyCodeEnum.enterKey&&(this.edit(),e.stopPropagation(),e.preventDefault())},e.prototype.keydownCancel=function(e){e.keyCode===r.EventKeyCodeEnum.enterKey&&(this.cancel(),e.stopPropagation(),e.preventDefault())},e.prototype.keydownSave=function(e){e.keyCode===r.EventKeyCodeEnum.enterKey&&(this.save(),e.stopPropagation(),e.preventDefault())},e.prototype.keydownInput=function(e){this.keydownSave(e)},e.prototype.focus=function(){this.focused=!0},e.prototype.blur=function(){this.focused=!1},e.prototype.clearErrorMessage=function(){this.errorMessage=null},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tni-editable-text-field"]],viewQuery:function(e,t){if(1&e&&(i.\u0275\u0275viewQuery(d,!0),i.\u0275\u0275viewQuery(p,!0)),2&e){var n=void 0;i.\u0275\u0275queryRefresh(n=i.\u0275\u0275loadQuery())&&(t.textInput=n.first),i.\u0275\u0275queryRefresh(n=i.\u0275\u0275loadQuery())&&(t.editBtn=n.first)}},inputs:{label:"label",value:"value",required:"required",errorMessage:"errorMessage",valueChanged:"valueChanged",trimDisplayLength:"trimDisplayLength"},features:[i.\u0275\u0275NgOnChangesFeature],decls:11,vars:16,consts:[[1,"editable-text-field-component"],[1,"editable-text-field-component-label"],[1,"editable-text-field-component-value"],[3,"ngModel","readOnly","disabled","ngModelChange","keydown","focus","blur",4,"ngIf"],["class","value",4,"ngIf"],["class","btn-edit",3,"click","keydown",4,"ngIf"],[1,"editable-text-field-component-footer"],["class","editable-text-field-component-validation-message","aria-live","assertive","aria-atomic","true","role","alert",4,"ngIf"],["class","links-panel",4,"ngIf"],[3,"ngModel","readOnly","disabled","ngModelChange","keydown","focus","blur"],["textInput",""],[1,"value"],[1,"btn-edit",3,"click","keydown"],["editBtn",""],["iconName","edit","iconClasses","xs icon-edit","iconAriaHidden","false","iconTitle","edit"],[1,"sr-only"],["aria-live","assertive","aria-atomic","true","role","alert",1,"editable-text-field-component-validation-message"],[1,"links-panel"],["href","javascript:;",1,"link-cancel",3,"click","keydown"],["name","label",4,"ngIf"],["href","javascript:;",1,"link-save",3,"tabindex","click","keydown"],["name","label"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"div"),i.\u0275\u0275elementStart(2,"label",1),i.\u0275\u0275text(3),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"div",2),i.\u0275\u0275template(5,u,2,3,"input",3),i.\u0275\u0275template(6,m,2,1,"div",4),i.\u0275\u0275template(7,f,5,1,"button",5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"div",6),i.\u0275\u0275template(9,g,2,1,"div",7),i.\u0275\u0275template(10,v,6,6,"div",8),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(1),i.\u0275\u0275classProp("editable",t.editable)("readonly",!t.editable)("error",!!t.errorMessage),i.\u0275\u0275advance(1),i.\u0275\u0275classProp("has-value",!!t.value)("has-focus",t.focused),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(t.label),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",t.editable),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.editable),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.editable),i.\u0275\u0275advance(2),i.\u0275\u0275property("ngIf",!!t.errorMessage),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.editable))},directives:[a.NgIf,c.DefaultValueAccessor,c.NgControlStatus,c.NgModel,s.IconComponent,l.SpinnerComponent],styles:["[_nghost-%COMP%]{width:100%;display:block}.editable[_ngcontent-%COMP%]   .editable-text-field-component-label[_ngcontent-%COMP%]{position:relative;color:#999e9f;top:90px;font-size:16px;transition:.3s;font-weight:400}.editable[_ngcontent-%COMP%]   .editable-text-field-component-label.has-focus[_ngcontent-%COMP%], .editable[_ngcontent-%COMP%]   .editable-text-field-component-label.has-value[_ngcontent-%COMP%]{top:-5px;font-size:14px}.editable-text-field-component[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{border:none;background:none;margin-left:auto}.editable-text-field-component[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]     .icon-edit{fill:#666}@media (max-width:767px){.editable-text-field-component[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]     .icon-edit{width:15px;height:15px}}.editable-text-field-component[_ngcontent-%COMP%]   .editable[_ngcontent-%COMP%], .editable-text-field-component[_ngcontent-%COMP%]   .readonly[_ngcontent-%COMP%]{display:flex}.editable-text-field-component[_ngcontent-%COMP%]   .editable[_ngcontent-%COMP%]{flex-direction:column}.editable-text-field-component[_ngcontent-%COMP%]   .editable[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]   .icon-edit[_ngcontent-%COMP%]{display:none}.editable-text-field-component[_ngcontent-%COMP%]   .editable[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:none;border-bottom:1px solid #555;width:100%;font-weight:500;font-size:1.2em}.editable-text-field-component[_ngcontent-%COMP%]   .editable[_ngcontent-%COMP%]   .links-panel[_ngcontent-%COMP%]{float:right}.editable-text-field-component[_ngcontent-%COMP%]   .editable[_ngcontent-%COMP%]   .links-panel[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin:3px;text-decoration:underline}.editable-text-field-component[_ngcontent-%COMP%]   .editable[_ngcontent-%COMP%]   .links-panel[_ngcontent-%COMP%]   a.disabled[_ngcontent-%COMP%]{color:#ccc;text-decoration:none;cursor:not-allowed}.editable-text-field-component[_ngcontent-%COMP%]   .editable[_ngcontent-%COMP%]   .links-panel[_ngcontent-%COMP%]     .tfnsw-spinner{display:inline-block;margin-bottom:-4px}.editable-text-field-component[_ngcontent-%COMP%]   .editable[_ngcontent-%COMP%]   .links-panel[_ngcontent-%COMP%]     .tfnsw-spinner .spinner{width:20px;height:20px;border-width:4px}.editable-text-field-component[_ngcontent-%COMP%]   .editable.error[_ngcontent-%COMP%]   .editable-text-field-component-validation-message[_ngcontent-%COMP%], .editable-text-field-component[_ngcontent-%COMP%]   .editable.error[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#c41f3d}.editable-text-field-component[_ngcontent-%COMP%]   .readonly[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background:none;border:none}.editable-text-field-component[_ngcontent-%COMP%]   .readonly[_ngcontent-%COMP%]   .link-cancel[_ngcontent-%COMP%], .editable-text-field-component[_ngcontent-%COMP%]   .readonly[_ngcontent-%COMP%]   .link-save[_ngcontent-%COMP%]{display:none}.editable-text-field-component-value[_ngcontent-%COMP%]{display:flex;flex-grow:1;word-break:break-word;align-items:flex-end}.editable-text-field-component-value[_ngcontent-%COMP%]   .btn-edit[_ngcontent-%COMP%]{margin-left:auto}.editable-text-field-component-footer[_ngcontent-%COMP%]{font-size:.9em;margin-top:3px}"]}),e}()},mAtO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniPanelCardModule=void 0,n("fXoL");var o=n("ofXK"),r=(n("dwx7"),n("fXoL"));t.TniPanelCardModule=function(){function e(){}return e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule]]}),e}()},mb9H:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardWeeklyStatusComponent=void 0,n("fXoL"),n("SC3b");var o=n("fXoL"),r=n("gUXI"),i=n("ofXK"),a=n("vwDF"),c=["focusableButton"],s=function(e,t){return{active:e,round:t}};function l(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"span",9),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,r=o.\u0275\u0275nextContext();o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction2(2,s,r.smartCard.fouCount>=n,r.smartCard.fouCount===n)),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(n)}}function d(e,t){1&e&&(o.\u0275\u0275elementStart(0,"span",15),o.\u0275\u0275text(1,"Weekly travel reward reached"),o.\u0275\u0275elementEnd())}function p(e,t){1&e&&o.\u0275\u0275element(0,"br")}function u(e,t){if(1&e){var n=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"tni-modal",16),o.\u0275\u0275listener("closeEvent",function(){return o.\u0275\u0275restoreView(n),o.\u0275\u0275nextContext().closeInfoModal()}),o.\u0275\u0275elementStart(1,"div",17),o.\u0275\u0275elementStart(2,"div",18),o.\u0275\u0275elementStart(3,"h3",19),o.\u0275\u0275text(4,"Weekly travel reward"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"p"),o.\u0275\u0275text(6," If you take 8 paid journeys with an Opal card, you get half-price travel for the rest of the week (from Monday to Sunday). Half-price travel does not apply to the Sydney Airport Station Access Fee. "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(7,"p"),o.\u0275\u0275text(8," There are other Opal card benefits including daily and weekly caps, off-peak train fares, transfer discounts and the Opal trip advantage. The more you travel, the more you save. "),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"p"),o.\u0275\u0275text(10,"Find out more about "),o.\u0275\u0275elementStart(11,"a",20),o.\u0275\u0275text(12,"Opal benefits"),o.\u0275\u0275elementEnd(),o.\u0275\u0275text(13,"."),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(14,"button",21),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(n),o.\u0275\u0275nextContext().closeInfoModal()})("keyUp",function(){return o.\u0275\u0275restoreView(n),o.\u0275\u0275nextContext().closeInfoModal()}),o.\u0275\u0275text(15,"Ok"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()}if(2&e){o.\u0275\u0275nextContext();var r=o.\u0275\u0275reference(4);o.\u0275\u0275property("ariaLabel","Weekly Travel Reward Information")("openingElement",r)}}var m=function(e){return{"tick active round":e}};t.CardWeeklyStatusComponent=function(){function e(){this.iterations=[1,2,3,4,5,6,7,8],this.showHelpModel=!1}return e.prototype.ngOnChanges=function(e){this.journeyLabel=e.smartCard&&e.smartCard.currentValue&&1===e.smartCard.currentValue.fouCount?"journey":"journeys"},e.prototype.openInfoModal=function(){this.showHelpModel=!0},e.prototype.closeInfoModal=function(){this.showHelpModel=!1},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-card-weekly-status"]],viewQuery:function(e,t){var n;1&e&&o.\u0275\u0275viewQuery(c,!0),2&e&&o.\u0275\u0275queryRefresh(n=o.\u0275\u0275loadQuery())&&(t.focusableButton=n.first)},inputs:{smartCard:"smartCard"},features:[o.\u0275\u0275NgOnChangesFeature],decls:22,vars:19,consts:[["tabindex","-1",1,"card-weekly-status-component"],[1,"heading-label",3,"click"],["tabindex","0",1,"card-weekly-status__heading__button",3,"keyUp"],["focusableButton",""],[1,"sr-only"],[1,"info-link",3,"iconName","iconClasses","iconAriaHidden","iconTitle","iconHidden"],[1,"card-weekly-status-component-trips-container"],["aria-hidden","true",1,"card-weekly-status-component-trips"],[3,"ngClass",4,"ngFor","ngForOf"],[3,"ngClass"],[3,"iconName","iconClasses","iconAriaHidden","iconTitle","iconHidden"],["class","message success",4,"ngIf"],[4,"ngIf"],[1,"message","info"],[3,"ariaLabel","openingElement","closeEvent",4,"ngIf"],[1,"message","success"],[3,"ariaLabel","openingElement","closeEvent"],[1,"weekly-info-modal"],[1,"modal-header"],["tabindex","-1","id","mapOptionsLabel",1,"modal-title","text-center"],["href","/opal-benefits"],[1,"card-weekly-status__ok-btn",3,"click","keyUp"]],template:function(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"h3",1),o.\u0275\u0275listener("click",function(){return t.openInfoModal()}),o.\u0275\u0275text(2," Weekly travel reward "),o.\u0275\u0275elementStart(3,"button",2,3),o.\u0275\u0275listener("keyUp",function(){return t.openInfoModal()}),o.\u0275\u0275elementStart(5,"span",4),o.\u0275\u0275text(6,"More information about weekly travel reward"),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(7,"tni-icon",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(8,"div",6),o.\u0275\u0275elementStart(9,"div",7),o.\u0275\u0275template(10,l,2,5,"span",8),o.\u0275\u0275elementStart(11,"span",9),o.\u0275\u0275element(12,"tni-icon",10),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(13,"div"),o.\u0275\u0275template(14,d,2,0,"span",11),o.\u0275\u0275template(15,p,1,0,"br",12),o.\u0275\u0275elementStart(16,"span",13),o.\u0275\u0275text(17,"You have completed "),o.\u0275\u0275elementStart(18,"strong"),o.\u0275\u0275text(19),o.\u0275\u0275elementEnd(),o.\u0275\u0275text(20),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(21,u,16,2,"tni-modal",14),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(7),o.\u0275\u0275property("iconName","info")("iconClasses","xs")("iconAriaHidden",!0)("iconTitle","Travel Rewards Information")("iconHidden",!0),o.\u0275\u0275advance(3),o.\u0275\u0275property("ngForOf",t.iterations),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngClass",o.\u0275\u0275pureFunction1(17,m,t.smartCard.weeklyRewardUsed)),o.\u0275\u0275advance(1),o.\u0275\u0275property("iconName","tick")("iconClasses","sm")("iconAriaHidden",!0)("iconTitle","Travel Rewards Achievement")("iconHidden",!0),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",t.smartCard.weeklyRewardAchieved),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.smartCard.weeklyRewardAchieved),o.\u0275\u0275advance(4),o.\u0275\u0275textInterpolate(t.smartCard.fouCount),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",t.journeyLabel," this week "),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.showHelpModel))},directives:[r.IconComponent,i.NgForOf,i.NgClass,i.NgIf,a.ModalWindowComponent],styles:['.card-weekly-status-component{text-align:center}.card-weekly-status-component .heading-label{font-size:18px;font-weight:400;margin:0;display:inline-block;cursor:pointer}.card-weekly-status-component .heading-label .card-weekly-status__heading__button{border:0;padding:0;background:transparent}.card-weekly-status-component .heading-label .info-link{display:inline-block}.card-weekly-status-component-trips{display:flex;flex-direction:row;align-items:center;justify-content:center;min-width:400px;background-color:#fff;border-top:1px solid #eaeaea;border-bottom:1px solid #eaeaea;border-top-right-radius:19px;border-bottom-right-radius:19px;border-top-left-radius:19px;border-bottom-left-radius:19px;height:38px}@media (min-width:768px){.card-weekly-status-component-trips{min-width:350px}}@media (max-width:767px){.card-weekly-status-component-trips{min-width:auto}}.card-weekly-status-component-trips h2{font-size:18px}.card-weekly-status-component-trips span{flex:1 1 auto;border-left:none;border-right:none;padding:6px;height:38px}@media (max-width:767px){.card-weekly-status-component-trips span{padding:10px}}.card-weekly-status-component-trips span.active{background-color:#3a8430;color:#fff}.card-weekly-status-component-trips span.active.round{border-top-right-radius:19px;border-bottom-right-radius:19px}.card-weekly-status-component-trips span.tick{height:38px}.card-weekly-status-component-trips span.tick svg{fill:#fff;padding-bottom:2px}.card-weekly-status-component-trips span:first-child{border-left:1px solid #eaeaea;border-top-left-radius:19px;border-bottom-left-radius:19px}.card-weekly-status-component-trips span:last-child{border-right:1px solid #eaeaea;border-top-right-radius:19px;border-bottom-right-radius:19px}.card-weekly-status-component-trips-container{display:flex;flex-direction:row;align-items:center;justify-content:center;padding:15px}.card-weekly-status-component tni-modal{text-align:left}.card-weekly-status-component tni-modal .weekly-info-modal .modal-header h2{font-weight:400;font-size:18px;margin:0}.card-weekly-status-component .message{font-size:16px}.card-weekly-status-component .message.success{font-size:16px;font-weight:400}.card-weekly-status__ok-btn{font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;max-width:270px;background:#fff;color:#1d69b4;border:1px solid #dbdbdb;border-radius:4px;padding:8px 32px;width:auto;min-width:130px;margin-top:48px;width:100%}.card-weekly-status__ok-btn[disabled]{background:#e8e8e8;color:#373636;border-color:transparent}.card-weekly-status__ok-btn:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button+.card-weekly-status__ok-btn{margin-top:10px}.card-weekly-status__ok-btn:hover{border:1px solid #1d69b4;background:#fff}.card-weekly-status__ok-btn:hover:after{display:none}@media (min-width:768px){.card-weekly-status__ok-btn{width:auto}}'],encapsulation:2}),e}()},nOpk:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardItemComponent=void 0,n("fXoL"),n("SC3b");var o=n("yM0j"),r=(n("3Pt+"),n("fXoL")),i=n("ofXK"),a=n("3Pt+"),c=n("U+qi"),s=n("Mp0x"),l=["tni-card-item",""];function d(e,t){if(1&e&&r.\u0275\u0275element(0,"input",10),2&e){var n=r.\u0275\u0275nextContext();r.\u0275\u0275property("value",n.card.smartcardId)("id",n.card.smartcardId+"__input")("formControl",n.control)}}function p(e,t){if(1&e&&r.\u0275\u0275element(0,"div",11),2&e){var n=r.\u0275\u0275nextContext();r.\u0275\u0275classProp("block-card__card-input--checked",n.control.value===n.card.smartcardId)}}function u(e,t){1&e&&(r.\u0275\u0275elementStart(0,"small",13),r.\u0275\u0275text(1,"Card nickname"),r.\u0275\u0275elementEnd())}function m(e,t){1&e&&(r.\u0275\u0275elementStart(0,"small",13),r.\u0275\u0275text(1,"Card number"),r.\u0275\u0275elementEnd())}function f(e,t){if(1&e&&(r.\u0275\u0275elementContainerStart(0),r.\u0275\u0275template(1,u,2,0,"small",12),r.\u0275\u0275template(2,m,2,0,"small",12),r.\u0275\u0275elementContainerEnd()),2&e){var n=r.\u0275\u0275nextContext();r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!!n.card.cardNickName),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!n.card.cardNickName)}}t.CardItemComponent=function(){function e(){}return e.prototype.ngOnInit=function(){this.totalBalance=this.card.svBalance+this.card.svPending},e.prototype.getCardSVG=function(e){return o.CardTypeSVG[e]},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["","tni-card-item",""]],inputs:{card:"card",control:"control",classNames:"classNames"},attrs:l,decls:16,vars:19,consts:[["type","radio","class","sr-only block-card__form-control",3,"value","id","formControl",4,"ngIf"],[1,"block-card__card-label"],["class","block-card__card-input",3,"block-card__card-input--checked",4,"ngIf"],[1,"block-card__card__name"],[4,"ngIf"],[1,"block-card__card__details"],[1,"block-card__card__img-container"],[1,"sr-only"],["aria-hidden","true","alt","",1,"block-card__card__img",3,"src"],[1,"block-card__card__balance"],["type","radio",1,"sr-only","block-card__form-control",3,"value","id","formControl"],[1,"block-card__card-input"],["class","block-card__card__name-label",4,"ngIf"],[1,"block-card__card__name-label"]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"div"),r.\u0275\u0275template(1,d,1,3,"input",0),r.\u0275\u0275elementStart(2,"label",1),r.\u0275\u0275template(3,p,1,2,"div",2),r.\u0275\u0275elementStart(4,"span",3),r.\u0275\u0275template(5,f,3,2,"ng-container",4),r.\u0275\u0275text(6),r.\u0275\u0275pipe(7,"opalCardNumber"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(8,"div",5),r.\u0275\u0275elementStart(9,"div",6),r.\u0275\u0275elementStart(10,"span",7),r.\u0275\u0275text(11),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(12,"img",8),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(13,"span",9),r.\u0275\u0275text(14),r.\u0275\u0275pipe(15,"centsToDollar"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275classMapInterpolate1("block-card__card-item ",t.classNames,""),r.\u0275\u0275classProp("block-card__card-option--selected",t.control&&t.control.value===t.card.smartcardId)("block-card__card-option",!!t.control),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!!t.control),r.\u0275\u0275advance(1),r.\u0275\u0275attribute("for",t.control?t.card.smartcardId+"__input":null),r.\u0275\u0275advance(1),r.\u0275\u0275property("ngIf",!!t.control),r.\u0275\u0275advance(2),r.\u0275\u0275property("ngIf",!t.control),r.\u0275\u0275advance(1),r.\u0275\u0275textInterpolate1(" ",t.card.cardNickName||r.\u0275\u0275pipeBind1(7,15,t.card.smartcardId)," "),r.\u0275\u0275advance(5),r.\u0275\u0275textInterpolate(t.card.cardTypeDescriptionTni),r.\u0275\u0275advance(1),r.\u0275\u0275propertyInterpolate1("src","assets/logos/opal-types/",t.getCardSVG(t.card.cardTypeDescriptionTni),".svg",r.\u0275\u0275sanitizeUrl),r.\u0275\u0275advance(2),r.\u0275\u0275textInterpolate1(" ",r.\u0275\u0275pipeBind1(15,17,t.totalBalance)," "))},directives:[i.NgIf,a.RadioControlValueAccessor,a.DefaultValueAccessor,a.NgControlStatus,a.FormControlDirective],pipes:[c.OpalCardNumberPipe,s.CentsToDollarPipe],styles:['.block-card__card-list[_ngcontent-%COMP%]{padding:0;margin:0;list-style:none}.block-card__card-item[_ngcontent-%COMP%]{border-radius:4px;border:1px solid transparent;box-shadow:0 1px 2px 0 rgba(0,0,0,.2);box-sizing:border-box;cursor:pointer;display:block;margin-bottom:8px;box-shadow:none;cursor:auto;box-sizing:content-box;position:relative;background-color:#ededed}.block-card__card-item[_ngcontent-%COMP%]:hover{box-shadow:0 2px 3px 0 rgba(0,0,0,.2);border:1px solid #1d69b4;border:1px solid transparent}.block-card__card-item[_ngcontent-%COMP%]:not(.block-card__card-option):hover{box-shadow:none}.block-card__card-option[_ngcontent-%COMP%]{border:1px solid #eee;cursor:pointer;background:#fff}.block-card__card-option[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{cursor:pointer}.block-card__card-input[_ngcontent-%COMP%]{position:relative;margin-right:8px;width:12px;height:12px}@media (min-width:768px){.block-card__card-input[_ngcontent-%COMP%]{margin-right:16px}}.block-card__card-input[_ngcontent-%COMP%]:before{content:"";display:block;width:12px;height:12px;border:1px solid #1d69b4;border-radius:50%;position:absolute}.block-card__card-input--checked[_ngcontent-%COMP%]:after{content:"";display:block;width:6px;height:6px;background:#1d69b4;border-radius:50%;position:absolute;top:3px;left:3px}.block-card__card-label[_ngcontent-%COMP%]{min-height:50px;display:flex;flex-wrap:wrap;align-items:center;justify-content:space-between;padding:5px 16px;margin:0}.block-card__card__details[_ngcontent-%COMP%]{width:100%;flex:1 1 100%;margin:0 0 10px;text-align:right}.block-card__card-option[_ngcontent-%COMP%]   .block-card__card__details[_ngcontent-%COMP%]{margin:0 0 10px}@media (min-width:768px){.block-card__card-option[_ngcontent-%COMP%]   .block-card__card__details[_ngcontent-%COMP%]{margin:0}}@media (min-width:768px){.block-card__card__details[_ngcontent-%COMP%]{flex:0 1 120px;text-align:right;padding:0;width:120px;margin:0}}.block-card__card__img[_ngcontent-%COMP%]{width:38px;max-height:24px;display:block}.block[_ngcontent-%COMP%]   .block-card__card__img[_ngcontent-%COMP%]{opacity:.4}.block-card__card__img-container[_ngcontent-%COMP%]{width:38px;max-height:24px;float:left;position:relative}.block[_ngcontent-%COMP%]   .block-card__card__img-container[_ngcontent-%COMP%]:after{top:10%;left:0;content:"";position:absolute;width:100%;height:80%;background:url(tp_minimal-block.svg) no-repeat 50%;background-size:contain}.block-card__card__balance[_ngcontent-%COMP%]{height:24px;border:1px solid #dbdbdb;border-radius:12px;padding:0 10px;line-height:24px;background-color:#f1f1f1;color:#1c1c1b;font-size:12px;display:inline-block;font-weight:400;background:#fff}.block-card__card__name[_ngcontent-%COMP%]{font-weight:400;flex:1 0 80%;font-size:16px;line-height:1.4em;margin:10px 0}@media (max-width:767px){.block-card__card-item[_ngcontent-%COMP%]:not(.block-card__card-option)   .block-card__card__name[_ngcontent-%COMP%]{line-height:1.1em}}@media (min-width:768px){.block-card__card__name[_ngcontent-%COMP%]{line-height:1.1em;flex:1 0}}.block-card__card__name-label[_ngcontent-%COMP%]{display:block;font-size:12px}.block-card__form-control[_ngcontent-%COMP%]:focus + .block-card__card-label[_ngcontent-%COMP%]{box-shadow:0 1px 2px 0 rgba(0,0,0,.2)}']}),e}()},nUzv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntitlementCards=t.Terms=void 0,t.Terms="",t.EntitlementCards=[{cardLabel:"Senior/pensioner",cardId:"Senior",cardImg:"assets/logos/opal-types/senior.svg"},{cardLabel:"Concession",cardId:"Concession",cardImg:"assets/logos/opal-types/concession.svg"}]},nVUv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalProfileComponent=void 0;var o=n("kU1M"),r=(n("fXoL"),n("jhN1"),n("c7H9"),n("QK+Z"),n("S3W/")),i=(n("kSud"),n("NRRr"),n("YORH"),n("tyNb"),n("fXoL")),a=n("c7H9"),c=n("kSud"),s=n("QK+Z"),l=n("jhN1"),d=n("NRRr"),p=n("YORH"),u=n("tyNb"),m=n("ofXK"),f=n("uSyR"),g=n("suy7"),h=n("S3W/"),v=n("FPfk"),C=n("C1fI");function _(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",3),i.\u0275\u0275elementStart(1,"div",4),i.\u0275\u0275elementStart(2,"span",5),i.\u0275\u0275text(3,"loading icon"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(4,"div",6),i.\u0275\u0275element(5,"img",7),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd())}function b(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",8),i.\u0275\u0275elementStart(1,"tni-tab-group",9),i.\u0275\u0275elementStart(2,"tni-tab",10),i.\u0275\u0275elementStart(3,"tni-profile-details",11),i.\u0275\u0275listener("updateProfile",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().updateProfile()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"tni-tab",12),i.\u0275\u0275elementStart(5,"div",13),i.\u0275\u0275elementStart(6,"div",14),i.\u0275\u0275elementStart(7,"tni-payment",15),i.\u0275\u0275listener("getPaymentAccount",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().reFetchPaymentInfo()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"tni-tab",16),i.\u0275\u0275elementStart(9,"div",13),i.\u0275\u0275elementStart(10,"div",14),i.\u0275\u0275elementStart(11,"opal-notification-preference",17),i.\u0275\u0275listener("updateProfile",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().updateProfile()})("navigateToProfileTab",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().navigateToProfile()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("activeTabId",o.activeTabId),i.\u0275\u0275advance(2),i.\u0275\u0275property("opalAccount",o.opalAccount),i.\u0275\u0275advance(4),i.\u0275\u0275property("paymentAccount",o.paymentAccount),i.\u0275\u0275advance(4),i.\u0275\u0275property("profile",o.opalAccount.profile)}}t.OpalProfileComponent=function(){function e(e,t,n,o,r,i,a,c){this.profileService=e,this.paymentAccountService=t,this.opalAccountStore=n,this.changeDetectorRef=o,this.titleService=r,this.loaderService=i,this.trackOpalEventService=a,this.activatedRoute=c,this.isLoadingData=!0}return e.prototype.ngOnInit=function(){var e=this;this.titleService.setTitle("Profile | transportnsw.info"),this.opalAccount=this.opalAccountStore.get(),this.isUnRegistered=!!this.opalAccount.unregisteredCardNo,this.getProfile(),this.trackOpalEventService.viewProfileSelected(),this.trackOpalEventService.trackViewport("Opal profile",this.isUnRegistered),this.activateRouteSubscription=this.activatedRoute.params.subscribe(function(t){t.active&&(e.activeTabId="tni-tab-opal-"+t.active)}),this.activatedRoute.queryParamMap.pipe(o.take(1)).subscribe(function(t){t.params&&t.params.active&&(e.activeTabId="tni-tab-opal-"+t.params.active)}),this.getQueryParams()},e.prototype.ngOnDestroy=function(){this.activateRouteSubscription&&this.activateRouteSubscription.unsubscribe()},e.prototype.getQueryParams=function(){var e=this;this.activatedRoute.queryParams.subscribe(function(t){"payment"===t.component&&(e.activeTabId="tni-tab-opal-payment")})},e.prototype.getProfile=function(){var e=this;this.profileService.get().pipe(o.mergeMap(function(t){return e.opalAccount=e.opalAccountStore.setProfile(t),e.paymentAccountService.get()}),o.finalize(function(){e.isLoadingData=!1,e.changeDetectorRef.detectChanges()})).subscribe(function(t){e.paymentAccount=t})},e.prototype.reFetchPaymentInfo=function(){var e=this;this.paymentAccountService.getPaymentAccounts().pipe(o.finalize(function(){e.loaderService.display(!1)})).subscribe(function(t){e.paymentAccount=t})},e.prototype.updateProfile=function(){var e=this;this.loaderService.display(!0),this.profileService.get().pipe(o.finalize(function(){e.loaderService.display(!1),e.changeDetectorRef.detectChanges()})).subscribe(function(t){e.opalAccount=Object.assign({},e.opalAccountStore.setProfile(t))})},e.prototype.navigateToProfile=function(){this.activeTabId="",this.changeDetectorRef.detectChanges(),this.enableProfileEdit("panel1")},e.prototype.enableProfileEdit=function(e){this.activeTabId="tni-tab-opal-activity",this.profileDetailsComponent.panelGroup.changeActivePanel(e)},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(a.ProfileService),i.\u0275\u0275directiveInject(c.PaymentAccountService),i.\u0275\u0275directiveInject(s.OpalAccountStore),i.\u0275\u0275directiveInject(i.ChangeDetectorRef),i.\u0275\u0275directiveInject(l.Title),i.\u0275\u0275directiveInject(d.LoaderService),i.\u0275\u0275directiveInject(p.TrackOpalEventService),i.\u0275\u0275directiveInject(u.ActivatedRoute))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tni-opal-profile"]],viewQuery:function(e,t){var n;1&e&&i.\u0275\u0275viewQuery(r.ProfileDetailsComponent,!0),2&e&&i.\u0275\u0275queryRefresh(n=i.\u0275\u0275loadQuery())&&(t.profileDetailsComponent=n.first)},decls:4,vars:2,consts:[[1,"opal-profile-container"],["class","spinner-container",4,"ngIf","ngIfElse"],["profileTemplate",""],[1,"spinner-container"],[1,"tfnsw-spinner"],[1,"sr-only"],[1,"spinner"],["src","assets/images/spinner.gif","alt","loading icon",1,"spinner-image"],[1,"opal-profile-details","tabs"],[3,"activeTabId"],["tabId","tni-tab-opal-activity","title","Details"],[3,"opalAccount","updateProfile"],["tabId","tni-tab-opal-payment","title","Payment"],[1,"container"],[1,"row"],[3,"paymentAccount","getPaymentAccount"],["tabId","tni-tab-opal-card-details","title","Notifications"],[3,"profile","updateProfile","navigateToProfileTab"]],template:function(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275template(1,_,6,0,"div",1),i.\u0275\u0275template(2,b,12,4,"ng-template",null,2,i.\u0275\u0275templateRefExtractor),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275reference(3);i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",t.isLoadingData)("ngIfElse",n)}},directives:[m.NgIf,f.TniTabGroupComponent,g.TniTabComponent,h.ProfileDetailsComponent,v.PaymentComponent,C.OpalNotificationPreferenceComponent],styles:[".opal-profile-container .spinner-container{margin:30px}.opal-profile-container .opal-profile-details{margin:0}.opal-profile-container .opal-profile-details.pull-up{padding-top:0}.opal-profile-container .opal-profile-details.pull-up:last-child{padding-bottom:25px}.opal-profile-container .opal-profile-details .personal-details-card{padding-bottom:15px}.opal-profile-container .opal-profile-details .personal-details-card .data-field-block{margin-bottom:15px;width:100%}.opal-profile-container .opal-profile-details .personal-details-card .data-field-block.half-size{width:49%}@media (max-width:767px){.opal-profile-container .opal-profile-details .personal-details-card .data-field-block.half-size{width:100%}}.opal-profile-container .opal-profile-details .personal-details-card .data-field-block .data-label{font-size:14px;color:#999e9f;min-height:24px;margin-bottom:-8px}.opal-profile-container .opal-profile-details .personal-details-card .data-field-block .data-value{padding:2px 2px 5px;border:solid #555;border-width:0 0 1px;min-height:31px;word-break:break-all}@media (max-width:767px){.opal-profile-container .opal-profile-details .personal-details-card .data-field-block .data-value{min-height:28px}}.opal-profile-container .opal-profile-details .personal-details-card .two-column{display:flex}.opal-profile-container .opal-profile-details .personal-details-card .two-column .data-field-block{flex-grow:1;flex-basis:0}.opal-profile-container .opal-profile-details .personal-details-card .two-column :first-child{margin-right:10px}@media (max-width:767px){.opal-profile-container .opal-profile-details .personal-details-card .two-column{display:block}}.opal-profile-container .opal-profile-details .personal-details-card .two-column-fixed{display:flex}.opal-profile-container .opal-profile-details .personal-details-card .two-column-fixed :first-child{margin-right:10px}.opal-profile-container .opal-profile-details .personal-details-card .two-column-fixed .data-field-block{flex-grow:1;flex-basis:0}.opal-profile-container .removable-card-details{margin-top:20px}.opal-profile-container .removable-card-details .opal-website-link{margin:10px -10px 0}@media (max-width:767px){.opal-profile-container .removable-card-details .opal-website-link{margin:10px -20px 0}}.opal-profile-container .app-badge-group{padding:0}.opal-profile-container .app-badge-group a{clear:both;margin:0 0 10px;max-width:135px;max-height:40px}.opal-profile-container .app-badge-group a svg{max-width:135px;max-height:40px}.opal-cards__tabs--thin{width:100%}@media (min-width:992px){.opal-cards__tabs--thin{width:800px}}.tni-tab-container{width:100%;background:#fff;box-shadow:0 2px 1px 0 rgba(0,0,0,.1)}.tni-tab-container .tni-tab-header-container{margin:0 auto;width:100%}@media (min-width:992px){.tni-tab-container .tni-tab-header-container{width:770px}}.tni-tab-container .tni-tab-content-container{max-width:770px;margin:0 auto}.details-container{padding:0}.details-container,.notification-container,.topup-container{margin-top:20px}@media (max-width:767px){.details-container,.notification-container,.topup-container{margin:20px auto}}.notification-container{position:relative;background:#fff;box-shadow:0 2px 3px 0 rgba(0,0,0,.2);border-radius:4px;padding:16px}::ng-deep .container{width:800px}"],encapsulation:2}),e}()},nydR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniImageComponent=void 0,n("fXoL");var o=n("fXoL");t.TniImageComponent=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-image"]],inputs:{imageTitle:"imageTitle",imageName:"imageName"},decls:4,vars:2,consts:[["role","img"],[0,"xmlns","xlink","http://www.w3.org/1999/xlink","height","100%","width","100%"]],template:function(e,t){1&e&&(o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(0,"svg",0),o.\u0275\u0275elementStart(1,"title"),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275element(3,"image",1),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(t.imageTitle),o.\u0275\u0275advance(1),o.\u0275\u0275attribute("href",t.imageName,null,"xlink"))},encapsulation:2}),e}()},obkt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardCodeComponent=void 0;var o=n("fXoL"),r=n("3Pt+"),i=n("j+Iq"),a=n("fXoL"),c=n("ofXK"),s=n("3Pt+"),l=["smartcardIdPrefix"],d=["smartcardScInput"];function p(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"label",8),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("for",n.inputId),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(n.labelText)}}function u(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"p"),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,o=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(o.getErrorMessage(n))}}function m(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div",9),a.\u0275\u0275template(1,u,2,1,"p",10),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngForOf",n.getErrors())}}function f(e,t){if(1&e){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"div",3),a.\u0275\u0275elementStart(1,"input",4,5),a.\u0275\u0275listener("focus",function(){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().CardCodeOnFocus()})("ngModelChange",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().localModel=e})("blur",function(){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().blur()})("keydown",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().onKeyDown(e)})("keyup",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().onKeyUp(e)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,p,2,2,"label",6),a.\u0275\u0275template(4,m,2,1,"div",7),a.\u0275\u0275elementEnd()}if(2&e){var o=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275classProp("hasValue",!!o.localModel)("error",o.errorMessage),a.\u0275\u0275propertyInterpolate1("title","",o.ariaPrefix," Enter your 4 digit security code"),a.\u0275\u0275property("formControl",o.control)("ngModel",o.localModel)("id",o.inputId),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",o.labelText),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",o.control.errors&&o.control.dirty)}}function g(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"label",8),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275nextContext(2);a.\u0275\u0275property("for",n.inputId),a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(n.labelText)}}function h(e,t){if(1&e){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"input",11,5),a.\u0275\u0275listener("ngModelChange",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().localModel=e})("focus",function(){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().CardCodeOnFocus()})("blur",function(){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().blur()})("keydown",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().onKeyDown(e)})("keyup",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext().onKeyUp(e)}),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(2,g,2,2,"label",6)}if(2&e){var o=a.\u0275\u0275nextContext();a.\u0275\u0275classProp("hasValue",!!o.localModel)("error",o.errorMessage),a.\u0275\u0275propertyInterpolate1("title","",o.ariaPrefix," Enter your 4 digit security code"),a.\u0275\u0275property("ngModel",o.localModel)("id",o.inputId),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",o.labelText)}}function v(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div",12),a.\u0275\u0275text(1),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275nextContext();a.\u0275\u0275advance(1),a.\u0275\u0275textInterpolate(n.errorText)}}t.CardCodeComponent=function(){function e(){var e=this;this.keyDownCardCode=new o.EventEmitter,this.onFocus=new o.EventEmitter,this.onBlur=new o.EventEmitter,this.ctrlDown=!1,this.EventKeyCodeEnum=i.EventKeyCodeEnum,this.propagateChange=function(e){},this.writeValue=function(t){e.localModel=t},this.registerOnChange=function(t){e.propagateChange=t},this.registerOnTouched=function(){}}return e.prototype.onKeyDown=function(e){var t=String.fromCharCode(e.charCode?e.charCode:e.which),n=this.localModel?this.localModel+t:t;e.keyCode!==i.EventKeyCodeEnum.ctrlKey&&e.keyCode!==i.EventKeyCodeEnum.cmdKey||(this.ctrlDown=!0),!(e.keyCode!==i.EventKeyCodeEnum.leftKey&&e.keyCode!==i.EventKeyCodeEnum.rightKey&&e.keyCode!==i.EventKeyCodeEnum.backSpaceKey&&isNaN(Number(n))||e.keyCode===i.EventKeyCodeEnum.spaceKey)||this.ctrlDown&&(e.keyCode===i.EventKeyCodeEnum.aKey||e.keyCode===i.EventKeyCodeEnum.vKey||e.keyCode===i.EventKeyCodeEnum.cKey||e.keyCode===i.EventKeyCodeEnum.xKey)||e.keyCode>=96&&e.keyCode<=105||e.preventDefault(),this.keyDownCardCode.emit(this.localModel)},e.prototype.onKeyUp=function(e){e.keyCode!==i.EventKeyCodeEnum.ctrlKey&&e.keyCode!==i.EventKeyCodeEnum.cmdKey||(this.ctrlDown=!1)},e.prototype.CardCodeOnFocus=function(){this.onFocus.emit()},e.prototype.focus=function(){this.smartcardScInput.nativeElement.focus()},e.prototype.blur=function(){this.propagateChange(this.localModel),this.onBlur.emit()},e.prototype.validate=function(e){return this.localModel&&4!==this.localModel.length?{valid:!1}:null},e.prototype.getErrorMessage=function(e){return this.errorMap?this.errorMap[e]:""},e.prototype.getErrors=function(){return this.control.errors?Object.keys(this.control.errors).map(function(e){return e}):[]},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["card-code"]],viewQuery:function(e,t){if(1&e&&(a.\u0275\u0275viewQuery(l,!0),a.\u0275\u0275staticViewQuery(d,!0)),2&e){var n=void 0;a.\u0275\u0275queryRefresh(n=a.\u0275\u0275loadQuery())&&(t.smartcardIdPrefix=n.first),a.\u0275\u0275queryRefresh(n=a.\u0275\u0275loadQuery())&&(t.smartcardScInput=n.first)}},inputs:{errorMessage:"errorMessage",ariaPrefix:"ariaPrefix",inputId:"inputId",labelText:"labelText",errorText:"errorText",control:"control",errorMap:"errorMap"},outputs:{keyDownCardCode:"keyDownCardCode",onFocus:"onFocus",onBlur:"onBlur"},features:[a.\u0275\u0275ProvidersFeature([{provide:r.NG_VALUE_ACCESSOR,useExisting:o.forwardRef(function(){return e}),multi:!0},{provide:r.NG_VALIDATORS,useExisting:o.forwardRef(function(){return e}),multi:!0}])],decls:4,vars:3,consts:[["class","card-code-control",4,"ngIf","ngIfElse"],["templateDriven",""],["class","md-input__error-message",4,"ngIf"],[1,"card-code-control"],["type","text","name","smartcardSc","autocomplete","off","maxlength","4","size","4",1,"form-input__input","form-input--text",3,"formControl","ngModel","title","id","focus","ngModelChange","blur","keydown","keyup"],["smartcardScInput",""],["class","md-input__label",3,"for",4,"ngIf"],["class","form-input__error-message",4,"ngIf"],[1,"md-input__label",3,"for"],[1,"form-input__error-message"],[4,"ngFor","ngForOf"],["type","text","name","smartcardSc","autocomplete","off","maxlength","4","size","4",1,"md-input",3,"ngModel","title","id","ngModelChange","focus","blur","keydown","keyup"],[1,"md-input__error-message"]],template:function(e,t){if(1&e&&(a.\u0275\u0275template(0,f,5,10,"div",0),a.\u0275\u0275template(1,h,3,8,"ng-template",null,1,a.\u0275\u0275templateRefExtractor),a.\u0275\u0275template(3,v,2,1,"div",2)),2&e){var n=a.\u0275\u0275reference(2);a.\u0275\u0275property("ngIf",t.control)("ngIfElse",n),a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf",t.errorText)}},directives:[c.NgIf,s.DefaultValueAccessor,s.MaxLengthValidator,s.NgControlStatus,s.FormControlDirective,c.NgForOf,s.NgModel],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   input[_ngcontent-%COMP%]{display:block;margin-top:0;background:none;padding:2px 2px 5px;height:35px;border-radius:0;border:solid #555;border-width:0 0 1px;width:100%;float:left;color:#555;font-weight:400;font-size:16px}@media (max-width:767px){[_nghost-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px}}[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:none}[_nghost-%COMP%]   input.error[_ngcontent-%COMP%]{border-color:#c41f3d}[_nghost-%COMP%]   .error-message[_ngcontent-%COMP%]{display:none}.enhanced[_nghost-%COMP%]{margin-bottom:10px;display:flex;position:relative;padding:25px 0;vertical-align:middle}.enhanced__label[_nghost-%COMP%]{font-weight:300;position:absolute;bottom:100%;right:auto;color:#999e9f;top:28px;left:5px;font-size:16px;transition:.3s}input:focus + .enhanced__label[_nghost-%COMP%]{top:0;left:0;font-size:14px}select:focus + .enhanced__label[_nghost-%COMP%]{top:0;left:0;font-size:14px;transition:.3s}.hasValue + .enhanced__label[_nghost-%COMP%]{top:0;left:0;font-size:14px;transition:0s}.error + .enhanced__label[_nghost-%COMP%], .enhanced.error[_nghost-%COMP%]   -shadowcsscontext.enhanced__label[_ngcontent-%COMP%], .enhanced__label__mandatory[_nghost-%COMP%]{color:#c41f3d}.enhanced.hasValue__label[_nghost-%COMP%]{top:0;left:0;font-size:14px;transition:0s}.enhanced__input[_nghost-%COMP%]{display:block;margin-top:0;background:none;padding:2px 2px 5px;height:35px;border-radius:0;border:solid #555;border-width:0 0 1px;width:100%;float:left;color:#555;font-weight:400;font-size:16px}@media (max-width:767px){.enhanced__input[_nghost-%COMP%]{font-size:16px}}.enhanced__input[_nghost-%COMP%]:focus{box-shadow:none}.enhanced__input[type=number][_nghost-%COMP%]:out-of-range{color:red}.enhanced__input[type=number][_nghost-%COMP%]::-webkit-inner-spin-button, .enhanced__input[type=number][_nghost-%COMP%]::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.enhanced__error-message[_nghost-%COMP%]{display:none}.error + label + .enhanced__error-message[_nghost-%COMP%]{display:block;position:absolute;top:78px;left:2px;font-size:12px;color:#c41f3d}.enhanced__help[_nghost-%COMP%]{display:block;position:absolute;top:78px;left:2px;font-size:12px;color:#c41f3d;display:none;color:#999}.form-input__label + .enhanced__help[_nghost-%COMP%]{display:block}.enhanced__input[_nghost-%COMP%]{float:none;padding-bottom:0}.enhanced__label[_nghost-%COMP%]{top:41px;left:15px}.error + label + .enhanced__error-message[_nghost-%COMP%], .enhanced__help[_nghost-%COMP%]{position:static}.enhanced__input[_nghost-%COMP%]{border:solid #1c1c1b;border-width:0 0 2px;background-color:#f9f9f9;border-radius:4px;padding:13px 16px;height:56px;box-sizing:border-box}.enhanced__input[_nghost-%COMP%]:focus{border-width:1px 1px 2px}.enhanced[_nghost-%COMP%]   input[_ngcontent-%COMP%]{display:block;margin-top:0;background:none;height:35px;border-radius:0;width:100%;float:left;color:#555;font-weight:400;font-size:16px;border:solid #1c1c1b;border-width:0 0 2px;background-color:#f9f9f9;border-radius:4px;padding:13px 16px;height:56px;box-sizing:border-box}@media (max-width:767px){.enhanced[_nghost-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px}}.enhanced[_nghost-%COMP%]   input[_ngcontent-%COMP%]:focus{box-shadow:none;border-width:1px 1px 2px}.enhanced[_nghost-%COMP%]   .md-input__label[_ngcontent-%COMP%]{font-weight:300;position:absolute;bottom:100%;right:auto;color:#999e9f;top:28px;left:5px;font-size:16px;transition:.3s;top:41px;left:15px}input:focus + .enhanced[_nghost-%COMP%]   .md-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px}select:focus + .enhanced[_nghost-%COMP%]   .md-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:.3s}.hasValue + .enhanced[_nghost-%COMP%]   .md-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:0s}.error + .enhanced[_nghost-%COMP%]   .md-input__label[_ngcontent-%COMP%], .enhanced[_nghost-%COMP%]   .md-input__label__mandatory[_ngcontent-%COMP%]{color:#c41f3d}.enhanced[_nghost-%COMP%]   .md-input__error-message[_ngcontent-%COMP%]{display:none}.error + label + .enhanced[_nghost-%COMP%]   .md-input__error-message[_ngcontent-%COMP%]{display:block;position:absolute;top:78px;left:2px;font-size:12px;color:#c41f3d;position:static}.md-input__label[_ngcontent-%COMP%]{font-weight:300;position:absolute;bottom:100%;right:auto;color:#999e9f;top:28px;left:5px;font-size:16px;transition:.3s}input[_ngcontent-%COMP%]:focus + .md-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px}select[_ngcontent-%COMP%]:focus + .md-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:.3s}.hasValue[_ngcontent-%COMP%] + .md-input__label[_ngcontent-%COMP%]{top:0;left:0;font-size:14px;transition:0s}.error[_ngcontent-%COMP%] + .md-input__label[_ngcontent-%COMP%], .md-input__label__mandatory[_ngcontent-%COMP%]{color:#c41f3d}.md-input__error-message[_ngcontent-%COMP%]{display:none}.error[_ngcontent-%COMP%] + label[_ngcontent-%COMP%] + .md-input__error-message[_ngcontent-%COMP%]{display:block;position:absolute;top:78px;left:2px;font-size:12px;color:#c41f3d}.card-code-control[_ngcontent-%COMP%]{width:100%}.form-input__error-message[_ngcontent-%COMP%]{position:absolute;left:5px;top:75px}.form-input__error-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:static;line-height:1.5;margin:1em 0;color:#c41f3d;font-size:12px}input.ng-invalid.ng-dirty[_ngcontent-%COMP%]{border-color:#c41f3d}"]}),e}()},p7iu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniFormInputSwitchModule=void 0,n("fXoL");var o=n("ofXK"),r=(n("HqcF"),n("3Pt+")),i=n("fXoL");t.TniFormInputSwitchModule=function(){function e(){}return e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule,r.ReactiveFormsModule]]}),e}()},pI01:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Converters=void 0,t.Converters=function(){function e(){}return e.toRequestDateFormat=function(e){return e?e.substr(6)+"-"+e.substr(3,2)+"-"+e.substr(0,2):e},e}()},pc1u:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniModalModule=void 0,n("fXoL");var o=n("ofXK"),r=n("NKuO"),i=(n("vwDF"),n("fXoL"));t.TniModalModule=function(){function e(){}return e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule,r.TniIconModule]]}),e}()},pshO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoaderModule=void 0,n("fXoL");var o=n("ofXK"),r=(n("NCCL"),n("VnzS")),i=n("fXoL");t.LoaderModule=function(){function e(){}return e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule,r.TniSpinnerModule]]}),e}()},puoa:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WindowRef=void 0,n("fXoL");var o=n("fXoL");function r(){return window}t.WindowRef=function(){function e(){this.drupalSettings=r().drupalSettings}return e.prototype.redirectToUrl=function(e){encodeURI(e)===location.href?location.reload():location.href=encodeURI(e)},e.prototype.ALLUtils=function(){return r().ALLUtils},e.prototype.Utils=function(){return r().Utils},e.prototype.isSafari=function(){return/^((?!chrome|android).)*safari/i.test(this.navigator().userAgent)},e.prototype.navigator=function(){return navigator},e.prototype.queryParams=function(){return r().location.search},e.prototype.isMobileView=function(){return window.innerWidth<768},e.prototype.url=function(){return r().location.href},e.prototype.dataLayer=function(){return r().dataLayer},e.prototype.window=function(){return r()},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}()},pxjO:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageFrameComponent=void 0,n("fXoL");var o=n("fXoL"),r=["*"];t.PageFrameComponent=function(){function e(){}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-page-frame"]],inputs:{hasFooter:"hasFooter",fullBleed:"fullBleed"},ngContentSelectors:r,decls:3,vars:6,consts:[[1,"page-frame"],[1,"page-frame__inner"]],template:function(e,t){1&e&&(o.\u0275\u0275projectionDef(),o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275elementStart(1,"div",1),o.\u0275\u0275projection(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275classProp("page-frame--footer",t.hasFooter)("page-frame--full-bleed",t.fullBleed),o.\u0275\u0275advance(1),o.\u0275\u0275classProp("page-frame__inner--full-bleed",t.fullBleed))},styles:[".page-frame[_ngcontent-%COMP%]{width:100%;position:relative;background:#fff;box-shadow:0 2px 3px 0 rgba(0,0,0,.2);border-radius:4px;padding:32px 16px 48px;margin:0 8px 8px;width:auto}@media (min-width:992px){.page-frame[_ngcontent-%COMP%]{width:770px;padding-top:4rem}}.page-frame__header[_ngcontent-%COMP%]{text-align:left}@media (min-width:768px){.page-frame[_ngcontent-%COMP%]{padding:40px 0 48px}}@media (min-width:992px){.page-frame[_ngcontent-%COMP%]{margin:0 auto 8px}}.page-frame--full-bleed[_ngcontent-%COMP%]{padding:0}.page-frame--footer[_ngcontent-%COMP%]{padding:40px 0 22px}.page-frame__inner[_ngcontent-%COMP%]{margin:0 auto}@media (min-width:992px){.page-frame__inner[_ngcontent-%COMP%]{width:500px}}@media (min-width:768px){.page-frame__inner[_ngcontent-%COMP%]{max-width:450px}}@media (min-width:992px){.page-frame__inner[_ngcontent-%COMP%]{max-width:none}}.page-frame__inner--full-bleed[_ngcontent-%COMP%]{width:auto}@media (min-width:768px){.page-frame__inner--full-bleed[_ngcontent-%COMP%]{max-width:none}}  tni-page-frame:first-child .page-frame{margin-top:24px}  tni-page-frame:last-child .page-frame{margin-bottom:24px}"]}),e}()},q8mF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardActivityComponent=void 0,n("fXoL"),n("YpR8"),n("QK+Z"),n("6i2Y");var o=n("fXoL"),r=n("QK+Z"),i=n("6i2Y"),a=n("ofXK"),c=n("gUXI"),s=n("Mp0x");function l(e,t){if(1&e){var n=o.\u0275\u0275getCurrentView();o.\u0275\u0275elementStart(0,"div",16),o.\u0275\u0275listener("click",function(){return o.\u0275\u0275restoreView(n),o.\u0275\u0275nextContext().onKeydown()}),o.\u0275\u0275element(1,"span",17),o.\u0275\u0275elementEnd()}if(2&e){var r=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275classProp("expanded",r.expanded)}}function d(e,t){if(1&e&&o.\u0275\u0275element(0,"tni-icon",20),2&e){var n=o.\u0275\u0275nextContext(2);o.\u0275\u0275property("iconName",n.cardActivity.transactionTypeIcon)("iconAriaHidden",!0)}}function p(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div"),o.\u0275\u0275namespaceSVG(),o.\u0275\u0275elementStart(1,"svg",21),o.\u0275\u0275element(2,"image",22),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd())}function u(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"div",18),o.\u0275\u0275template(1,d,1,2,"tni-icon",19),o.\u0275\u0275template(2,p,3,0,"div",9),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.cardActivity.transactionTypeIcon&&"opal_pay"!==n.cardActivity.transactionTypeIcon),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf","opal_pay"===n.cardActivity.transactionTypeIcon)}}function m(e,t){1&e&&o.\u0275\u0275element(0,"tni-icon",26),2&e&&o.\u0275\u0275property("iconAriaHidden",!1)}function f(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"div",23),o.\u0275\u0275template(1,m,1,1,"tni-icon",24),o.\u0275\u0275element(2,"tni-icon",25),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.showMetro&&"train"===n.cardActivity.journeyModeIcon),o.\u0275\u0275advance(1),o.\u0275\u0275property("iconName",n.cardActivity.journeyModeIcon)("iconAriaHidden",!1)("iconTitle",n.cardActivity.journeyModeIcon)}}function g(e,t){1&e&&(o.\u0275\u0275elementStart(0,"span"),o.\u0275\u0275elementStart(1,"span",27),o.\u0275\u0275text(2,"Unknown"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"span",28),o.\u0275\u0275element(4,"tni-icon",29),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"span",30),o.\u0275\u0275text(6,"Unknown"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275advance(4),o.\u0275\u0275property("iconAriaHidden",!1))}function h(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"span"),o.\u0275\u0275elementStart(1,"span",27),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(3,"span",28),o.\u0275\u0275element(4,"tni-icon",29),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"span",30),o.\u0275\u0275text(6),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext(3);o.\u0275\u0275advance(1),o.\u0275\u0275classProp("with-arrow",n.cardActivity.from&&n.cardActivity.to)("unknown",!n.cardActivity.from),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" ",n.cardActivity.from||"Unknown"," "),o.\u0275\u0275advance(2),o.\u0275\u0275property("iconAriaHidden",!1),o.\u0275\u0275advance(1),o.\u0275\u0275classProp("unknown",!n.cardActivity.to),o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(n.cardActivity.to||"Unknown")}}function v(e,t){1&e&&(o.\u0275\u0275elementStart(0,"span",28),o.\u0275\u0275text(1," - "),o.\u0275\u0275elementEnd())}function C(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"span"),o.\u0275\u0275elementStart(1,"span",31),o.\u0275\u0275text(2,"Tap on reversal"),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,v,2,0,"span",32),o.\u0275\u0275elementStart(4,"span",30),o.\u0275\u0275text(5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext(3);o.\u0275\u0275advance(3),o.\u0275\u0275property("ngIf",!!n.cardActivity.to),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(n.cardActivity.to)}}function _(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"span"),o.\u0275\u0275template(1,h,7,9,"span",9),o.\u0275\u0275template(2,C,6,2,"span",9),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf","REV"!==n.cardActivity.journeyType),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf","REV"===n.cardActivity.journeyType)}}function b(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"span"),o.\u0275\u0275template(1,g,7,1,"span",9),o.\u0275\u0275template(2,_,3,2,"span",9),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.cardActivity.isCompletedUnknownJourney||n.cardActivity.isIncompleteUnknownJourney),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!n.cardActivity.isCompletedUnknownJourney&&!n.cardActivity.isIncompleteUnknownJourney)}}function x(e,t){1&e&&(o.\u0275\u0275elementStart(0,"span",28),o.\u0275\u0275text(1," - "),o.\u0275\u0275elementEnd())}function y(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"span"),o.\u0275\u0275elementStart(1,"span",31),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(3,x,2,0,"span",32),o.\u0275\u0275elementStart(4,"span",30),o.\u0275\u0275text(5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1(" ",n.cardActivity.from||"Unknown"," "),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!!n.cardActivity.to),o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate(n.cardActivity.to)}}function M(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"div",33),o.\u0275\u0275elementStart(1,"span"),o.\u0275\u0275text(2),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(2),o.\u0275\u0275textInterpolate1("Journey ",n.cardActivity.fouCount," of the week")}}function P(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"div",34),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1("Transaction no. ",n.cardActivity.transactionNo,"")}}function O(e,t){1&e&&(o.\u0275\u0275elementStart(0,"span"),o.\u0275\u0275text(1,"Tap on not detected"),o.\u0275\u0275elementEnd())}function S(e,t){1&e&&(o.\u0275\u0275elementStart(0,"span"),o.\u0275\u0275text(1,"Tap off not detected"),o.\u0275\u0275elementEnd())}function w(e,t){1&e&&(o.\u0275\u0275elementStart(0,"span"),o.\u0275\u0275text(1,"Tap on and tap off not detected"),o.\u0275\u0275elementEnd())}function k(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"div",35),o.\u0275\u0275element(1,"tni-icon",36),o.\u0275\u0275template(2,O,2,0,"span",9),o.\u0275\u0275template(3,S,2,0,"span",9),o.\u0275\u0275template(4,w,2,0,"span",9),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275property("iconAriaHidden",!1),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!n.cardActivity.from&&n.cardActivity.to),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",n.cardActivity.from&&!n.cardActivity.to),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!n.cardActivity.from&&!n.cardActivity.to)}}function E(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"span"),o.\u0275\u0275text(1),o.\u0275\u0275pipe(2,"centsToDollar"),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate(o.\u0275\u0275pipeBind1(2,1,n.cardActivity.amount))}}function T(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"span"),o.\u0275\u0275text(1),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext(2);o.\u0275\u0275advance(1),o.\u0275\u0275textInterpolate1(" (",n.cardActivity.discountReason,") ")}}function I(e,t){if(1&e&&(o.\u0275\u0275elementStart(0,"div",37),o.\u0275\u0275elementStart(1,"div",38),o.\u0275\u0275elementStart(2,"div",39),o.\u0275\u0275elementStart(3,"span",40),o.\u0275\u0275text(4,"Fare"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(5,"span",41),o.\u0275\u0275text(6),o.\u0275\u0275pipe(7,"centsToDollar"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(8,"div",42),o.\u0275\u0275elementStart(9,"span",40),o.\u0275\u0275text(10,"Discount"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(11,"span",41),o.\u0275\u0275text(12),o.\u0275\u0275pipe(13,"centsToDollar"),o.\u0275\u0275template(14,T,2,1,"span",9),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(15,"div",34),o.\u0275\u0275elementStart(16,"span",43),o.\u0275\u0275text(17,"Transaction no."),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(18,"span",41),o.\u0275\u0275text(19),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd()),2&e){var n=o.\u0275\u0275nextContext();o.\u0275\u0275advance(6),o.\u0275\u0275textInterpolate(o.\u0275\u0275pipeBind1(7,4,n.cardActivity.fullFare)),o.\u0275\u0275advance(6),o.\u0275\u0275textInterpolate1("",o.\u0275\u0275pipeBind1(13,6,n.cardActivity.discount)," "),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",""!==n.cardActivity.discountReason),o.\u0275\u0275advance(5),o.\u0275\u0275textInterpolate(n.cardActivity.transactionNo)}}function A(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",37),o.\u0275\u0275elementStart(1,"div",44),o.\u0275\u0275elementStart(2,"a",45),o.\u0275\u0275text(3,"Fare adjustment"),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd())}t.CardActivityComponent=function(){function e(e,t){var n=this;this.featureToggleService=t,this.showMetro=!1;var o=e.get();this.expanded=!1,this.isRegistered=!o.unregisteredCardNo,this.featureToggleService.getToggles().subscribe(function(e){n.showMetro=!!e.toggles["opal-activity-metro-icons"]})}return e.prototype.onKeydown=function(){this.expanded=!this.expanded},e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275directiveInject(r.OpalAccountStore),o.\u0275\u0275directiveInject(i.FeatureToggleService))},e.\u0275cmp=o.\u0275\u0275defineComponent({type:e,selectors:[["tni-card-activity"]],inputs:{cardActivity:"cardActivity"},decls:20,vars:19,consts:[["tabindex","0",1,"card-activity",3,"ngClass","keydown.enter"],["class","card-activity-collapsible",3,"click",4,"ngIf"],[1,"card-activity-item",3,"click"],[1,"card-activity-item-left"],["class","icons transaction-icon",4,"ngIf"],["class","icons mode-icons",4,"ngIf"],[1,"card-activity-item-middle"],[1,"date"],[1,"description"],[4,"ngIf"],["class","journeyNo",4,"ngIf"],["class","transaction",4,"ngIf"],["class","journey-alert",4,"ngIf"],[1,"card-activity-item-right"],[1,"amount"],["class","card-activity-expanded",4,"ngIf"],[1,"card-activity-collapsible",3,"click"],[1,"triangle"],[1,"icons","transaction-icon"],["iconClasses","md",3,"iconName","iconAriaHidden",4,"ngIf"],["iconClasses","md",3,"iconName","iconAriaHidden"],["aria-hidden","true","aria-labelledby","linkOpalPay","focusable","false",1,"tp-icon","md","left","middle"],[0,"xmlns","xlink","http://www.w3.org/1999/xlink","height","100%","width","100%",0,"xlink","href","assets/images/opal/tp_opal_pay.svg"],[1,"icons","mode-icons"],["iconName","metro","iconTitle","metro and or ","iconClasses","md",3,"iconAriaHidden",4,"ngIf"],["iconClasses","md",3,"iconName","iconAriaHidden","iconTitle"],["iconName","metro","iconTitle","metro and or ","iconClasses","md",3,"iconAriaHidden"],[1,"from"],[1,"separator"],["iconName","arrow-right-small","iconClasses","sm",3,"iconAriaHidden"],[1,"to"],[1,"from","name"],["class","separator",4,"ngIf"],[1,"journeyNo"],[1,"transaction"],[1,"journey-alert"],["iconName","alert","iconClasses","middle xs",1,"alert-icon",3,"iconAriaHidden"],[1,"card-activity-expanded"],[1,"card-activity-expanded-middle"],[1,"full-fare"],[1,"title"],[1,"result"],[1,"discount"],["aria-label","Transaction number",1,"title"],[1,"fare-adjustment"],["href","https://transportnsw.info/fare-adjustments"]],template:function(e,t){1&e&&(o.\u0275\u0275elementStart(0,"div",0),o.\u0275\u0275listener("keydown.enter",function(){return t.onKeydown()}),o.\u0275\u0275template(1,l,2,2,"div",1),o.\u0275\u0275elementStart(2,"div",2),o.\u0275\u0275listener("click",function(){return t.onKeydown()}),o.\u0275\u0275elementStart(3,"div",3),o.\u0275\u0275template(4,u,3,2,"div",4),o.\u0275\u0275template(5,f,3,4,"div",5),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(6,"div",6),o.\u0275\u0275elementStart(7,"div",7),o.\u0275\u0275text(8),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(9,"div",8),o.\u0275\u0275template(10,b,3,2,"span",9),o.\u0275\u0275template(11,y,6,3,"span",9),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(12,M,3,1,"div",10),o.\u0275\u0275template(13,P,2,1,"div",11),o.\u0275\u0275template(14,k,5,4,"div",12),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementStart(15,"div",13),o.\u0275\u0275elementStart(16,"div",14),o.\u0275\u0275template(17,E,3,3,"span",9),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275elementEnd(),o.\u0275\u0275template(18,I,20,8,"div",15),o.\u0275\u0275template(19,A,4,0,"div",15),o.\u0275\u0275elementEnd()),2&e&&(o.\u0275\u0275property("ngClass",t.cardActivity.journeyModeIcon),o.\u0275\u0275attribute("role",t.cardActivity.isJourney?"button":"")("aria-expanded",t.cardActivity.isJourney?t.expanded:""),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.cardActivity.isJourney),o.\u0275\u0275advance(1),o.\u0275\u0275classProp("clickable",t.cardActivity.isJourney),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",!t.cardActivity.isJourney),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.cardActivity.isJourney&&t.cardActivity.journeyModeIcon),o.\u0275\u0275advance(3),o.\u0275\u0275textInterpolate(t.cardActivity.activityDate.format("HH:mm")),o.\u0275\u0275advance(2),o.\u0275\u0275property("ngIf",t.cardActivity.isJourney),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!t.cardActivity.isJourney),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.cardActivity.isJourney&&t.cardActivity.fouCount&&t.cardActivity.fouCount>0),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",!t.cardActivity.isJourney),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.cardActivity.isJourney&&!t.cardActivity.isCompletedUnknownJourney&&(!t.cardActivity.from||!t.cardActivity.to)),o.\u0275\u0275advance(2),o.\u0275\u0275classProp("positive",t.cardActivity.amount>0),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.cardActivity.isFinancialTransaction()),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.cardActivity.isJourney&&t.expanded),o.\u0275\u0275advance(1),o.\u0275\u0275property("ngIf",t.cardActivity.isJourney&&!t.cardActivity.isCompletedUnknownJourney&&t.expanded&&(!t.cardActivity.from||!t.cardActivity.to)))},directives:[a.NgClass,a.NgIf,c.IconComponent],pipes:[s.CentsToDollarPipe],styles:[".card-activity{position:relative;border-left:5px solid #373636}.card-activity.train{border-left:5px solid #f18500}.card-activity.bus{border-left:5px solid #009eec}.card-activity.ferry{border-left:5px solid #5ab031}.card-activity.lightrail{border-left:5px solid #e62a32}.card-activity-collapsible{position:absolute;top:5px;right:5px;cursor:pointer}.card-activity-item{display:flex;flex-direction:row;align-items:flex-start;padding:10px 10px 15px}.card-activity-item.clickable{cursor:pointer}.card-activity-item-left{width:80px}@media (max-width:767px){.card-activity-item-left{width:45px;padding-right:10px}}.card-activity-item-middle .journeyNo,.card-activity-item-middle .transaction{margin-top:10px;font-size:.8em}.card-activity-item-middle .unknown{color:#e4022d}.card-activity-item-middle .journey-alert{display:inline-block;background:#ececec;margin-top:10px;padding:0 7px;border-radius:20px;border:1px solid #cacaca;color:#222;font-size:13px;font-weight:400}.card-activity-item-middle .journey-alert .alert-icon{color:#d62d20}.card-activity-item-right{margin-left:auto;margin-top:auto}.card-activity-item-right .positive{color:#009e4d}.card-activity .triangle{border:6px solid transparent;border-top-color:#555;border-bottom:0;float:right;margin:14px 5px 14px 14px}.card-activity .triangle.expanded{transform:rotate(-180deg)}.card-activity-expanded{display:flex;padding:10px 10px 15px;border-top:1px solid #ececec}.card-activity-expanded-left{width:50px}@media (max-width:767px){.card-activity-expanded-left{width:45px;padding-right:10px}}.card-activity-expanded-middle{display:flex;padding:5px 0 0 80px;font-size:.8em;flex-wrap:wrap;width:100%}@media (max-width:767px){.card-activity-expanded-middle{padding-left:45px}}.card-activity-expanded-middle .full-fare{display:flex;flex:1 0 100%}.card-activity-expanded-middle .discount{display:flex;flex:1 0 50%}@media (max-width:767px){.card-activity-expanded-middle .discount{flex:1 0 100%}}.card-activity-expanded-middle .transaction{display:flex;flex:1 0 50%}@media (max-width:767px){.card-activity-expanded-middle .transaction{flex:1 0 100%}}.card-activity-expanded-middle .title{width:100px}.card-activity-expanded-middle .result{font-weight:400}.card-activity-expanded .fare-adjustment{font-size:.8em;font-weight:400;margin-left:auto;order:2}.card-activity .amount,.card-activity .date,.card-activity .name{font-weight:bolder;color:#222}.card-activity .positive{color:#009e4d}.card-activity .mode-icons .tp-icon{margin-right:4px;margin-bottom:4px}.toggle-activity-card{position:relative;top:8px;right:-52px}.card-activity-component{padding:15px 55px 15px 40px}.card-activity-component-summary-entry{display:flex;align-items:flex-end}.card-activity-component-summary-entry .amount,.card-activity-component-summary-entry .date{font-weight:500}.card-activity-component-summary-entry .amount{margin-left:5px}.card-activity-component-summary-entry .amount,.card-activity-component-summary-entry .mode-icons,.card-activity-component-summary-entry .transaction-icon{margin-left:auto}.card-activity-component-summary-entry .description{display:inline}.card-activity-component-summary-entry .amount{display:flex;align-items:center}.card-activity-component-summary-entry .description .name{font-weight:500}.card-activity-component-summary-entry .description .from{line-height:15px}.card-activity-component-summary-entry .description .from .with-arrow{margin-right:0}@media (max-width:767px){.card-activity-component-summary-entry .description .separator .tp-icon{margin:-4px -4px 0}}.card-activity-component-summary-entry .transaction-icon .tp-icon{fill:#555;color:#555}@media (max-width:767px){.card-activity-component-summary-entry .description{margin-right:3px}}.card-activity-component-summary-entry .transaction-number-value{margin-left:3px}"],encapsulation:2}),e}()},qYMD:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniCollapsibleCardModule=void 0,n("fXoL"),n("HJIk");var o=n("ofXK"),r=n("NKuO"),i=n("fXoL");t.TniCollapsibleCardModule=function(){function e(){}return e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule,r.TniIconModule]]}),e}()},rNRs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniRadioButtonComponent=void 0;var o=n("fXoL"),r=n("3Pt+"),i=n("fXoL"),a=n("ofXK"),c=["radioButton"];function s(e,t){1&e&&(i.\u0275\u0275namespaceSVG(),i.\u0275\u0275elementStart(0,"svg",5),i.\u0275\u0275element(1,"use",6),i.\u0275\u0275elementEnd())}t.TniRadioButtonComponent=function(){function e(){this.onModelChange=function(){}}return e.prototype.select=function(){this.radioButtonElement.nativeElement.checked=!0,this.onModelChange(this.value)},e.prototype.writeValue=function(e){null!=e&&(this.radioButtonElement.nativeElement.checked=this.value===e)},e.prototype.registerOnChange=function(e){this.onModelChange=e},e.prototype.registerOnTouched=function(e){},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tni-radio-button"]],viewQuery:function(e,t){var n;1&e&&i.\u0275\u0275viewQuery(c,!0),2&e&&i.\u0275\u0275queryRefresh(n=i.\u0275\u0275loadQuery())&&(t.radioButtonElement=n.first)},inputs:{name:"name",value:"value",label:"label"},features:[i.\u0275\u0275ProvidersFeature([{provide:r.NG_VALUE_ACCESSOR,useExisting:o.forwardRef(function(){return e}),multi:!0}])],decls:6,vars:5,consts:[[1,"radio-button-box"],["type","radio",3,"change"],["radioButton",""],["type","button","role","radio",3,"click"],["role","img",4,"ngIf"],["role","img"],[0,"xmlns","xlink","http://www.w3.org/1999/xlink",0,"xlink","href","assets/icons/icons.svg#tp_tick"]],template:function(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"label",0),i.\u0275\u0275elementStart(1,"input",1,2),i.\u0275\u0275listener("change",function(){return t.select()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(3,"button",3),i.\u0275\u0275listener("click",function(){return t.select()}),i.\u0275\u0275template(4,s,2,0,"svg",4),i.\u0275\u0275text(5),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275reference(2);i.\u0275\u0275advance(1),i.\u0275\u0275attribute("name",t.name)("value",t.value),i.\u0275\u0275advance(2),i.\u0275\u0275attribute("aria-checked",n.checked),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.checked),i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate1(" ",t.label," ")}},directives:[a.NgIf],styles:[".radio-button-box[_ngcontent-%COMP%]{display:block}.radio-button-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{cursor:pointer;text-decoration:underline;color:#0069b7}.radio-button-box[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover   svg[_ngcontent-%COMP%]{fill:#0069b7}.radio-button-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;display:block;border:1px solid #bbb;border-radius:0;color:#555;font-size:14px;text-align:left;background:#fff;height:39px;padding:.5em .8em;line-height:23px}.radio-button-box[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{position:absolute;top:11px;left:15px;width:16px;height:16px}.radio-button-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:checked + button[_ngcontent-%COMP%]{background:#ececec;border-color:#adadad;transition:opacity .3s ease-in-out;box-shadow:inset 0 3px 5px rgba(0,0,0,.125);padding:.5em .5em .5em 40px}.radio-button-box[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:none}"]}),e}()},ryGM:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntitlementVerificationComponent=void 0,n("fXoL"),n("0ruu");var o=n("3Pt+"),r=n("tJ3N"),i=(n("74Ue"),n("nUzv")),a=(n("PShm"),n("NRRr"),n("pI01")),c=(n("YORH"),n("QK+Z"),n("WcMK"),n("Uf+G"),n("tyNb"),n("fXoL")),s=n("3Pt+"),l=n("0ruu"),d=n("74Ue"),p=n("PShm"),u=n("NRRr"),m=n("YORH"),f=n("QK+Z"),g=n("WcMK"),h=n("Uf+G"),v=n("tyNb"),C=n("ofXK"),_=n("pxjO"),b=n("MSaF"),x=n("Mfk8"),y=n("jbib"),M=n("gOn0"),P=n("73Ru"),O=n("T42N"),S=n("M4hh"),w=n("gM7n"),k=n("b+vG"),E=n("kAtE");function T(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"tni-page-frame"),c.\u0275\u0275elementStart(1,"div",5),c.\u0275\u0275elementStart(2,"h2",6),c.\u0275\u0275text(3,"Entitlement card type"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"p",7),c.\u0275\u0275text(5,"Please select your Opal card type below:"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(6,"div",8),c.\u0275\u0275elementStart(7,"tni-opal-card-type",9),c.\u0275\u0275listener("changeSelectedCard",function(e){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext().changeCardType(e)}),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()}if(2&e){var o=c.\u0275\u0275nextContext();c.\u0275\u0275advance(7),c.\u0275\u0275property("cards",o.entitlementCards)}}function I(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"tni-form-message",30),c.\u0275\u0275text(1),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext(3);c.\u0275\u0275advance(1),c.\u0275\u0275textInterpolate1(" ",n.userMessage," ")}}function A(e,t){if(1&e&&c.\u0275\u0275element(0,"tni-option",31),2&e){var n=t.$implicit;c.\u0275\u0275property("value",n)("label",n)}}function N(e,t){if(1&e&&c.\u0275\u0275element(0,"tni-option",31),2&e){var n=t.$implicit;c.\u0275\u0275property("value",n)("label",n)}}function L(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"tni-form-select-input",32),c.\u0275\u0275template(1,N,1,2,"tni-option",16),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext(3);c.\u0275\u0275property("control",n.entitlementForm.controls.instituteName)("inputName","institute-name")("errorMap",n.validationMessages.requiredValidationField),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngForOf",n.instituteName)}}function R(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"div",13),c.\u0275\u0275template(1,I,2,1,"tni-form-message",14),c.\u0275\u0275elementStart(2,"p"),c.\u0275\u0275text(3," Please make sure that the details entered in the form below match up with the details on your card. The name format must be the exact format that is printed on the card (or as registered with your concession entitlement issuer). "),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"p"),c.\u0275\u0275text(5,"The Entitlement Card Number must be entered without dashes."),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(6,"tni-form-select-input",15),c.\u0275\u0275listener("change",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext(2).onEntitlementTypeChange()}),c.\u0275\u0275template(7,A,1,2,"tni-option",16),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(8,L,2,4,"tni-form-select-input",17),c.\u0275\u0275element(9,"tni-form-input",18),c.\u0275\u0275element(10,"tni-form-input",19),c.\u0275\u0275element(11,"tni-form-input",20),c.\u0275\u0275element(12,"tni-form-input",21),c.\u0275\u0275elementStart(13,"tni-form-checkbox",22),c.\u0275\u0275elementStart(14,"span",23),c.\u0275\u0275text(15,"Privacy policy text"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(16,"span",24),c.\u0275\u0275elementStart(17,"span",25),c.\u0275\u0275text(18,"I understand that Transport for NSW will use the information I provide in this application to verify my eligibility for a Concession Gold Opal card."),c.\u0275\u0275elementEnd(),c.\u0275\u0275text(19," I understand that Transport for NSW will, from time to time share my personal information with third parties (such as the issuer of my concession entitlement) in line with the "),c.\u0275\u0275elementStart(20,"a",26),c.\u0275\u0275text(21,"Opal privacy policy"),c.\u0275\u0275elementEnd(),c.\u0275\u0275text(22," for the purpose of verifying my initial and on-going eligibility for a Concession Gold Opal card. I also understand that Transport for NSW will collect, hold, use and disclose my personal information as described in the Opal privacy policy."),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(23,"div",27),c.\u0275\u0275elementStart(24,"button",28),c.\u0275\u0275text(25," Verify"),c.\u0275\u0275elementStart(26,"span",23),c.\u0275\u0275text(27,"entitlement details"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(28,"button",29),c.\u0275\u0275text(29,"Cancel"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()}if(2&e){var o=c.\u0275\u0275nextContext(2);c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",o.entitlementError),c.\u0275\u0275advance(5),c.\u0275\u0275property("control",o.entitlementForm.controls.entitlementType)("inputName","entitlement-select")("errorMap",o.validationMessages.requiredValidationField),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngForOf",o.uniqueIssuers),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",o.instituteName),c.\u0275\u0275advance(1),c.\u0275\u0275property("control",o.entitlementForm.controls.cardNumber)("errorMap",o.validationMessages.cardNumber)("helpText","Contact your entitlement issuer if you don\u2019t know your card number"),c.\u0275\u0275advance(1),c.\u0275\u0275property("control",o.entitlementForm.controls.FirstName)("errorMap",o.validationMessages.firstName),c.\u0275\u0275advance(1),c.\u0275\u0275property("control",o.entitlementForm.controls.LastName)("errorMap",o.validationMessages.lastName),c.\u0275\u0275advance(1),c.\u0275\u0275property("control",o.entitlementForm.controls.DateOfBirth)("errorMap",o.validationMessages.dob),c.\u0275\u0275advance(1),c.\u0275\u0275property("control",o.entitlementForm.controls.ConsentFlag)("name","tandc")("errorMap",o.validationMessages.termConditions)}}function j(e,t){if(1&e&&(c.\u0275\u0275elementStart(0,"tni-page-frame"),c.\u0275\u0275elementStart(1,"div",10),c.\u0275\u0275elementStart(2,"h2",11),c.\u0275\u0275text(3,"Entitlement details"),c.\u0275\u0275elementEnd(),c.\u0275\u0275template(4,R,30,18,"div",12),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()),2&e){var n=c.\u0275\u0275nextContext();c.\u0275\u0275advance(4),c.\u0275\u0275property("ngIf",n.selectedCard)}}function F(e,t){1&e&&(c.\u0275\u0275elementStart(0,"tni-page-frame"),c.\u0275\u0275elementStart(1,"div",5),c.\u0275\u0275element(2,"tni-state-banner",33),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()),2&e&&(c.\u0275\u0275advance(2),c.\u0275\u0275property("state",!0)("message","Opal card linked successfully")("redirect","/account/cards"))}function V(e,t){if(1&e){var n=c.\u0275\u0275getCurrentView();c.\u0275\u0275elementStart(0,"tni-page-frame"),c.\u0275\u0275elementStart(1,"tni-action-list"),c.\u0275\u0275elementStart(2,"h2",34),c.\u0275\u0275text(3,"What would you like to do now?"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(4,"li",35),c.\u0275\u0275text(5,"Link another card"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(6,"li",36),c.\u0275\u0275listener("click",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext().OneOffTopupLinkClicked()}),c.\u0275\u0275text(7,"Top up"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementStart(8,"li",37),c.\u0275\u0275listener("click",function(){return c.\u0275\u0275restoreView(n),c.\u0275\u0275nextContext().CardsLinkClicked()}),c.\u0275\u0275text(9,"Back to Opal cards"),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()}}t.EntitlementVerificationComponent=function(){function e(e,t,n,o,a,c,s,l,d,p){this.formBuilder=e,this.scrollService=t,this.formValidationService=n,this.smartcardService=o,this.loaderService=a,this.trackOpalEventService=c,this.opalAccountStore=s,this.dataSharingService=l,this.uiStateService=d,this.router=p,this.validationMessages=new r.ValidationMessages,this.dateRegex=/(^(((0[1-9]|1[0-9]|2[0-8])[\/](0[1-9]|1[012]))|((29|30|31)[\/](0[13578]|1[02]))|((29|30)[\/](0[4,6,9]|11)))[\/](19|[2-9][0-9])\d\d$)|(^29[\/]02[\/](19|[2-9][0-9])(00|04|08|12|16|20|24|28|32|36|40|44|48|52|56|60|64|68|72|76|80|84|88|92|96)$)/,this.entitlementCards=i.EntitlementCards,this.showSuccessPanel=!1,this.entitlementError=!1,this.isUnregistered=!1,this.buidEntitlementform()}return e.prototype.ngOnInit=function(){var e=this.opalAccountStore.get();this.isUnregistered=!!e.unregisteredCardNo,this.setInitialFocus(),this.getCardData()},e.prototype.ngOnDestroy=function(){this.getIssuers$&&this.getIssuers$.unsubscribe(),this.registerCard$&&this.registerCard$.unsubscribe(),this.dataSharingService.remove("cardData")},e.prototype.setInitialFocus=function(){var e=this;setTimeout(function(){e.scrollService.smoothScrollFocusToElementById("entitlement-page-start",100,10)},100)},e.prototype.getCardData=function(){this.cardDetails=this.dataSharingService.get("cardData")},e.prototype.buidEntitlementform=function(){this.entitlementForm=this.formBuilder.group({entitlementType:this.formBuilder.control(null,[o.Validators.required]),instituteName:this.formBuilder.control(null),cardNumber:this.formBuilder.control(null,[o.Validators.required,o.Validators.pattern("^[A-Za-z0-9-]*$")]),FirstName:this.formBuilder.control(null,[o.Validators.required]),LastName:this.formBuilder.control(null,[o.Validators.required]),DateOfBirth:this.formBuilder.control(null,[o.Validators.required,o.Validators.pattern(this.dateRegex)]),ConsentFlag:this.formBuilder.control(null,[o.Validators.required])})},e.prototype.changeCardType=function(e){var t=this;this.selectedCard=null,this.instituteName=null,this.buidEntitlementform(),this.loaderService.display(!0),this.getIssuers$=this.smartcardService.getEntitlementIssuers(e).subscribe(function(n){t.selectedEntitlements=n.EntitlementIssuer.map(function(e){return{issuer:e.EntitlementIssuerName,issuerCode:e.EntitlementIssuerCode,issuerCategory:e.IssuerCategory}}),t.selectedCard=e,t.getEntitlementTypes(e),t.loaderService.display(!1),setTimeout(function(){t.scrollService.smoothScrollFocusToElementById("entitlement-select",200,1e3)},100)})},e.prototype.getEntitlementTypes=function(e){if(1===e){var t=this.selectedEntitlements.map(function(e){return e.issuerCategory});this.uniqueIssuers=Array.from(new Set(t))}else this.uniqueIssuers=this.selectedEntitlements.map(function(e){return e.issuer})},e.prototype.onEntitlementTypeChange=function(){var e=this;if(1===this.selectedCard&&"Tertiary Student"===this.entitlementForm.controls.entitlementType.value){var t=this.selectedEntitlements.filter(function(t){if(t.issuerCategory===e.entitlementForm.controls.entitlementType.value)return!0});this.instituteName=t.map(function(e){return e.issuer}),this.entitlementForm.get("instituteName").setValidators([o.Validators.required])}else this.instituteName=null,this.entitlementForm.get("instituteName").setValidators([])},e.prototype.getIssuerCode=function(){var e=this;return(1===this.selectedCard&&"Tertiary Student"===this.entitlementForm.controls.entitlementType.value?this.selectedEntitlements.filter(function(t){if(t.issuerCategory===e.entitlementForm.controls.entitlementType.value&&t.issuer===e.entitlementForm.controls.instituteName.value)return t.issuerCode}).shift():1===this.selectedCard&&"Tertiary Student"!==this.entitlementForm.controls.entitlementType.value?this.selectedEntitlements.filter(function(t){if(t.issuerCategory===e.entitlementForm.controls.entitlementType.value)return t.issuerCode}).shift():this.selectedEntitlements.filter(function(t){return t.issuer===e.entitlementForm.controls.entitlementType.value}).shift()).issuerCode},e.prototype.getPayload=function(){return{SmartcardId:Number(this.cardDetails.SmartcardId),SmartcardSc:this.cardDetails.SmartcardSc,CardNickname:this.cardDetails.CardNickname,Entitlement:{EntitlementIssuerCode:this.getIssuerCode(),EntitlementIssuerEntitlementId:this.entitlementForm.controls.cardNumber.value,FirstName:this.entitlementForm.controls.FirstName.value,LastName:this.entitlementForm.controls.LastName.value,DateOfBirth:a.Converters.toRequestDateFormat(this.entitlementForm.controls.DateOfBirth.value),ConsentFlag:this.entitlementForm.controls.ConsentFlag.value}}},e.prototype.onSubmit=function(e){var t=this;if(this.entitlementError=!1,this.formValidationService.validate(e),this.entitlementForm.valid){this.loaderService.display(!0);var n=this.getPayload();this.registerCard$=this.smartcardService.registerEntitlementCards(n).subscribe(function(e){t.showSuccessPanel=!0,t.loaderService.display(!1),t.trackOpalEventService.trackUserEvent({action:"Link card button",label:t.isUnregistered?"Unregistered":"Registered"})},function(e){t.showSuccessPanel=!1,t.loaderService.display(!1),t.mapErrors(e),setTimeout(function(){t.scrollService.smoothScrollFocusToElementById("entitlement-error",200,1e3)})})}},e.prototype.mapErrors=function(e){switch(this.entitlementError=!0,e.error.Message){case"Entitlement data provided is not valid":this.userMessage="Please check the information exactly matches the details shown on your card or as registered with your concession entitlement issuer.";break;case"CARD ALREADY REGISTERED":this.userMessage="Card already registered";break;default:return this.userMessage="Something went wrong. Please try again.",null}},e.prototype.OneOffTopupLinkClicked=function(){this.uiStateService.setOpalCardsPageTab("tni-opal-topup-tab"),this.router.navigate(["/account/cards"],{queryParams:{smartCard:this.cardDetails.SmartcardId},queryParamsHandling:"merge",skipLocationChange:!0})},e.prototype.CardsLinkClicked=function(){this.uiStateService.setOpalCardsPageTab("tni-opal-activity-tab"),this.router.navigate(["/account/cards"],{queryParams:{smartCard:this.cardDetails.SmartcardId},queryParamsHandling:"merge",skipLocationChange:!0})},e.\u0275fac=function(t){return new(t||e)(c.\u0275\u0275directiveInject(s.FormBuilder),c.\u0275\u0275directiveInject(l.ScrollService),c.\u0275\u0275directiveInject(d.FormValidationService),c.\u0275\u0275directiveInject(p.SmartcardService),c.\u0275\u0275directiveInject(u.LoaderService),c.\u0275\u0275directiveInject(m.TrackOpalEventService),c.\u0275\u0275directiveInject(f.OpalAccountStore),c.\u0275\u0275directiveInject(g.DataSharingService),c.\u0275\u0275directiveInject(h.UiStateService),c.\u0275\u0275directiveInject(v.Router))},e.\u0275cmp=c.\u0275\u0275defineComponent({type:e,selectors:[["tni-entitlement-verification"]],decls:8,vars:5,consts:[[3,"formGroup","ngSubmit"],["id","entitlement-page-start","href","","tabindex","-1"],[1,"container"],[1,"row"],[4,"ngIf"],[1,"entitlement-verification__card"],[1,"entitlement-verification__heading"],[1,"help-text"],[1,"card-wrap"],[3,"cards","changeSelectedCard"],[1,"entitlement-verification__card","panel-1"],[1,"entitlement-verification_heading"],["class","input-wrap",4,"ngIf"],[1,"input-wrap"],["class","entitlement-error","id","entitlement-error",4,"ngIf"],["labelText","Entitlement type",3,"control","inputName","errorMap","change"],[3,"value","label",4,"ngFor","ngForOf"],["labelText","Institute name",3,"control","inputName","errorMap",4,"ngIf"],["inputType","text","inputName","cardNumber","labelText","Entitlement card number",1,"card-number",3,"control","errorMap","helpText"],["inputType","text","inputName","givenName","labelText","Given name",3,"control","errorMap"],["inputType","text","inputName","familyName","labelText","Family name",3,"control","errorMap"],["inputType","text","inputName","dob","labelText","Date of birth DD/MM/YYYY",3,"control","errorMap"],["inputType","checkbox",1,"copy-text",3,"control","name","errorMap"],[1,"sr-only"],[1,"provacy-policy"],[1,"privacy-policy-text"],["aria-label","Opal privacy policy link opens in a new tab","title","Opal privacy policy","href","https://transportnsw.info/about-us/privacy","target","_blank"],[1,"entitlement-verification__actions"],["type","submit",1,"entitlement-verification__verify-btn"],["routerLink","/account/cards",1,"entitlement-verification__cancel-btn"],["id","entitlement-error",1,"entitlement-error"],[3,"value","label"],["labelText","Institute name",3,"control","inputName","errorMap"],[3,"state","message","redirect"],[1,"options-heading"],["tni-action-url","","actionUrl","/account/add-card","icon","plus"],["tni-action-item","","icon","opal-top-up",3,"click"],["tni-action-item","","icon","card",3,"click"]],template:function(e,t){1&e&&(c.\u0275\u0275elementStart(0,"form",0),c.\u0275\u0275listener("ngSubmit",function(){return t.onSubmit(t.entitlementForm)}),c.\u0275\u0275element(1,"div",1),c.\u0275\u0275elementStart(2,"div",2),c.\u0275\u0275elementStart(3,"div",3),c.\u0275\u0275template(4,T,8,1,"tni-page-frame",4),c.\u0275\u0275template(5,j,5,1,"tni-page-frame",4),c.\u0275\u0275template(6,F,3,3,"tni-page-frame",4),c.\u0275\u0275template(7,V,10,0,"tni-page-frame",4),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd(),c.\u0275\u0275elementEnd()),2&e&&(c.\u0275\u0275property("formGroup",t.entitlementForm),c.\u0275\u0275advance(4),c.\u0275\u0275property("ngIf",!t.showSuccessPanel),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",!t.showSuccessPanel),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",t.showSuccessPanel),c.\u0275\u0275advance(1),c.\u0275\u0275property("ngIf",t.showSuccessPanel))},directives:[s.\u0275angular_packages_forms_forms_y,s.NgControlStatusGroup,s.FormGroupDirective,C.NgIf,_.PageFrameComponent,b.OpalCardTypeComponent,x.FormSelectInputComponent,C.NgForOf,y.FormInputComponent,M.FormCheckboxComponent,v.RouterLink,P.TniFormMessageComponent,O.TniOptionComponent,S.StateBannerComponent,w.ActionListComponent,k.ActionUrlComponent,E.ActionItemComponent],styles:['.card-number[_ngcontent-%COMP%]{margin-bottom:-45px}.entitlement-verification__heading[_ngcontent-%COMP%]{margin-top:0;font-weight:300;font-size:24px;line-height:1.3333}.entitlement-verification__actions[_ngcontent-%COMP%]{margin-top:20px;overflow:hidden;clear:both}.entitlement-verification__verify-btn[_ngcontent-%COMP%]{border-radius:4px;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;margin-left:auto;margin-right:auto;display:block;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;max-width:270px;background-color:#1d69b4;border:0 solid #195c9e;color:#fff;margin-top:26px;width:100%}.entitlement-verification__verify-btn[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.entitlement-verification__verify-btn[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .entitlement-verification__verify-btn[_ngcontent-%COMP%]{margin-top:10px}@media (min-width:992px){.entitlement-verification__verify-btn[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;max-width:270px}}.entitlement-verification__cancel-btn[_ngcontent-%COMP%]{border-radius:4px;border:0 solid transparent;color:#1d69b4;font-size:14px;font-weight:500;line-height:15px;padding:12px;text-transform:uppercase;touch-action:manipulation;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;white-space:nowrap;position:relative;width:100%;max-width:270px;background:transparent;width:75%;margin:0 auto;display:block}.entitlement-verification__cancel-btn[disabled][_ngcontent-%COMP%]{background:#e8e8e8;color:#373636;border-color:transparent}.entitlement-verification__cancel-btn[_ngcontent-%COMP%]:hover:after{position:absolute;top:0;content:"";left:0;width:100%;height:100%;background:rgba(29,105,180,.1);border-radius:4px}button[_ngcontent-%COMP%] + .entitlement-verification__cancel-btn[_ngcontent-%COMP%]{margin-top:10px}@media (min-width:992px){.entitlement-verification__cancel-btn[_ngcontent-%COMP%]{width:67%}}.copy-text[_ngcontent-%COMP%]{margin-bottom:20px}tni-form-checkbox[_ngcontent-%COMP%]{margin-top:-25px}tni-form-checkbox[_ngcontent-%COMP%]   .provacy-policy[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:underline}.options-heading[_ngcontent-%COMP%]{padding-bottom:30px;font-size:24px;text-align:center}']}),e}()},"s+A7":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniImageModule=void 0,n("fXoL");var o=n("ofXK"),r=(n("nydR"),n("fXoL"));t.TniImageModule=function(){function e(){}return e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule]]}),e}()},"s/Qc":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalNotificationPreference=void 0;var o=new Map([["AUTOLOAD_PAYMENT_TRIGGERED",{mappedName:"Auto top up",mappedDescription:"Be notified when your balance is automatically topped up."}],["SMARTCARD_BALANCE_LOW",{mappedName:"Low balance",mappedDescription:"Be notified when your balance gets low."}],["REMOTE_TOPUP_COLLECTED",{mappedName:"Top up collected",mappedDescription:"Be notified when a pending online top up has been collected onto your Opal card."}],["SYSTEM",{mappedName:"Account updates",mappedDescription:"Be notified when changes are made to your account."}]]);t.OpalNotificationPreference=function(){function e(){}return e.fromResponse=function(e){var t=this;if(e.NotificationPreference&&e.NotificationPreference.length)return e.NotificationPreference.filter(function(e){return o.has(e.NotificationCategory)}).map(function(e){var n=o.get(e.NotificationCategory);return{deliveryChannel:t.getLabelForContactMethod(e.DeliveryChannel),notificationDescription:n.mappedDescription,notificationId:e.NotificationCategory,notificationCategory:n.mappedName}})},e.toResponse=function(e,t){var n="Email"===t?"EMAIL":"Mobile"===t?"SMS":"OFF";return Object.keys(e).map(function(t){return{DeliveryChannel:e[t]?n:"OFF",NotificationCategory:t}})},e.getLabelForContactMethod=function(e){return{OFF:{id:0,method:"None"},EMAIL:{id:1,method:"Email"},SMS:{id:2,method:"Mobile"}}[e]},e}()},sDue:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormCheckboxModule=void 0,n("fXoL");var o=n("ofXK"),r=(n("gOn0"),n("3Pt+")),i=n("fXoL");t.FormCheckboxModule=function(){function e(){}return e.\u0275mod=i.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=i.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule,r.ReactiveFormsModule]]}),e}()},smBZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniRadioButtonModule=void 0,n("fXoL"),n("rNRs");var o=n("ofXK"),r=n("fXoL");t.TniRadioButtonModule=function(){function e(){}return e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule]]}),e}()},smRY:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Credentials=void 0,t.Credentials=function(){function e(){}return e.prototype.getValidatedObject=function(t){var n=new e;return t?(n.username=this.username,n.password=this.password):(n.smartcardId=this.smartcardId,n.smartcardSc=this.smartcardSc,n.recaptchaResponse=this.recaptchaResponse),n.grant_type="password",n},e.prototype.isValid=function(e){return e?this.username&&this.password:this.smartcardId&&16===this.smartcardId.length&&this.smartcardSc&&4===this.smartcardSc.length},e}()},suy7:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniTabComponent=void 0;var o=n("fXoL"),r=n("fXoL");function i(e,t){1&e&&r.\u0275\u0275projection(0)}var a=["*"];t.TniTabComponent=function(){function e(){this.tabId="tni-tab-"+e.nextId+++"-header"}return e.nextId=0,e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tni-tab"]],viewQuery:function(e,t){var n;1&e&&r.\u0275\u0275staticViewQuery(o.TemplateRef,!0),2&e&&r.\u0275\u0275queryRefresh(n=r.\u0275\u0275loadQuery())&&(t.contentTemplate=n.first)},inputs:{tabId:"tabId",title:"title",disabled:"disabled"},ngContentSelectors:a,decls:1,vars:0,template:function(e,t){1&e&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275template(0,i,1,0,"ng-template"))},encapsulation:2}),e}()},swtb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FooterModule=void 0,n("fXoL");var o=n("ofXK"),r=(n("K3X+"),n("fXoL"));t.FooterModule=function(){function e(){}return e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule]]}),e}()},tJ3N:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValidationMessages=void 0;var o=n("mrSG");t.ValidationMessages=function(){return function(){var e=this,t="Invalid format";this.requiredValidationField={required:"Required"},this.addressLine1=o.__assign(o.__assign({},this.requiredValidationField),{pattern:t}),this.suburb=this.requiredValidationField,this.state=this.requiredValidationField,this.postcode=this.requiredValidationField,this.country=this.requiredValidationField,this.firstName=o.__assign(o.__assign({},this.requiredValidationField),{maxLength:"First name should be maximum 50 characters"}),this.lastName=o.__assign(o.__assign({},this.requiredValidationField),{maxLength:"Surname should be maximum 50 characters"}),this.email=o.__assign(o.__assign({},this.requiredValidationField),{maxLength:"Email should be maximum 250 characters",pattern:"Please provide a valid email address"}),this.mobile=o.__assign(o.__assign({},this.requiredValidationField),{pattern:t,maxLength:"Mobile number should be maximum 25 characters"}),this.telephone=o.__assign(o.__assign({},this.requiredValidationField),{pattern:"Please provide a valid telephone number",maxLength:"Telephone number should be maximum 25 characters"}),this.userName=o.__assign(o.__assign({},this.requiredValidationField),{maxLength:"Username should be maximum 250 characters",minlength:"Minimum 5 characters required"}),this.dob=o.__assign(o.__assign({},this.requiredValidationField),{pattern:t}),this.pin=o.__assign(o.__assign({},this.requiredValidationField),{pattern:t}),this.cardNick={maxLength:"Card nick should be maximum 51 characters"},this.cardNumber=o.__assign(o.__assign({},this.requiredValidationField),{pattern:t}),this.cardCode=o.__assign(o.__assign({},this.requiredValidationField),{pattern:t}),this.securityAnswer=o.__assign(o.__assign({},this.requiredValidationField),{maxLength:"Security answer should be maximum 50 characters"}),this.securityQuestion=this.requiredValidationField,this.nameOnCreditCard=this.requiredValidationField,this.cvv=function(t){return o.__assign(o.__assign({},e.requiredValidationField),{pattern:t?"Enter a valid CVV":"Must be 3 digits"})},this.creditCardExpiry=o.__assign(o.__assign({},this.requiredValidationField),{pattern:t}),this.creditCardNumber=function(t){return o.__assign(o.__assign({},e.requiredValidationField),{pattern:t?"Enter a valid debit or credit card number":"Must be 16 digits"})},this.password=o.__assign(o.__assign({},this.requiredValidationField),{maxLength:"Password should be maximum 150 characters",pattern:t}),this.confirmPassword=o.__assign(o.__assign({},this.requiredValidationField),{maxLength:"Password should be maximum 150 characters",pattern:t}),this.termConditions=this.requiredValidationField,this.cardName=o.__assign(o.__assign({},this.requiredValidationField),{pattern:t})}}()},tf7G:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TopupService=void 0;var o=n("qCKp"),r=n("kU1M"),i=(n("fXoL"),n("tk/3"),n("fXoL")),a=n("tk/3");t.TopupService=function(){function e(e){this.http=e,this.cardIdToAmountsInCentsCache=new Map}return e.prototype.getAvailableTopupAmounts=function(e){var t=this;return this.cardIdToAmountsInCentsCache.get(e)?o.of(this.cardIdToAmountsInCentsCache.get(e)):this.http.get("/api/opal/api/smartcard/topup/"+e).pipe(r.map(function(n){var o=n.TopupAmount.map(function(e){return e.Value});return t.cardIdToAmountsInCentsCache.set(e,o),o}))},e.prototype.topup=function(e,t,n){void 0===n&&(n=null);var o={SmartcardId:e,TopupValue:t};return n&&(o.MerchantReceipt=n.toString()),this.http.post("/api/opal/api/smartcard/topup/",o).pipe(r.map(function(e){return{smartcardId:e.SmartcardId,orderId:e.OrderId}}))},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(a.HttpClient))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},u1nx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniPanelNavComponent=void 0;var o=n("fXoL"),r=n("fXoL"),i=["*"];t.TniPanelNavComponent=function(){function e(){this.linkClicked=new o.EventEmitter}return e.prototype.handleClick=function(e){this.isDisabled||this.linkClicked.emit(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tni-panel-nav"]],inputs:{navId:"navId",targetsPanel:"targetsPanel",active:"active",isDisabled:"isDisabled"},outputs:{linkClicked:"linkClicked"},ngContentSelectors:i,decls:3,vars:8,consts:[["role","button","tabindex","0",1,"panel-group__link",3,"id","keyup.enter","keyup.space","click"],[1,"panel-group__link__container"]],template:function(e,t){1&e&&(r.\u0275\u0275projectionDef(),r.\u0275\u0275elementStart(0,"a",0),r.\u0275\u0275listener("keyup.enter",function(){return t.handleClick(t.targetsPanel)})("keyup.space",function(){return t.handleClick(t.targetsPanel)})("click",function(){return t.handleClick(t.targetsPanel)}),r.\u0275\u0275elementStart(1,"div",1),r.\u0275\u0275projection(2),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275classProp("panel-group__link--active",t.active)("panel-group__link--disabled",t.isDisabled),r.\u0275\u0275property("id",t.navId),r.\u0275\u0275attribute("aria-expanded",t.active)("disabled",t.active||t.isDisabled)("aria-controls",t.targetsPanel))},styles:[".panel-group__link[_ngcontent-%COMP%]{background:#fff;box-shadow:0 2px 3px 0 rgba(0,0,0,.2);border-radius:4px;display:block;text-align:center;margin-bottom:.8rem;border-bottom:4px solid #fff;cursor:pointer;text-decoration:none;padding:0;position:relative}.panel-group__link--active[_ngcontent-%COMP%]{border-bottom:4px solid #1d69b4}.panel-group__link--disabled[_ngcontent-%COMP%]{border-bottom:0;cursor:auto}.panel-group__link__container[_ngcontent-%COMP%]{width:100%;height:100%}@media (max-width:767px){.panel-group__link[_ngcontent-%COMP%]{z-index:-1}  .panel-group__column--closed .panel-group__link{z-index:auto}}"]}),e}()},u3Ad:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniRegularExpressions=void 0,t.TniRegularExpressions=function(){function e(){}return e.phone=/^[0-9 ()-+]+$/,e.date=/(^(((0[1-9]|1[0-9]|2[0-8])[\/](0[1-9]|1[012]))|((29|30|31)[\/](0[13578]|1[02]))|((29|30)[\/](0[4,6,9]|11)))[\/](19|[2-9][0-9])\d\d$)|(^29[\/]02[\/](19|[2-9][0-9])(00|04|08|12|16|20|24|28|32|36|40|44|48|52|56|60|64|68|72|76|80|84|88|92|96)$)/,e.email=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,e.password=/^((?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,})$/,e.pin=/^\d{4}$/,e.creditCardExpiry=/^(0[1-9]|1[0-2])\/[0-9]{2}$/,e.cardNumber=/^\d{4}[ ]\d{4}[ ]\d{4}[ ]\d{4}$/,e.address=/^[a-zA-Z\-\,\.\s\d\/]*$/,e.cardName=/^[a-zA-Z\d\~\!\@\#\$\%\-\_\=\s\}\{\[\]\:\?\/\.]*$/,e.cvv=function(e){return e?/^\d{3,4}$/:/^\d{3}$/},e.creditCardNumber=function(e){return e?/^\d{15,16}$/:/^\d{16}$/},e}()},uA0r:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniRemovableCardModule=void 0,n("fXoL");var o=n("bXO7"),r=(n("WnS1"),n("ofXK")),i=n("NKuO"),a=n("R1ws"),c=n("fXoL");t.TniRemovableCardModule=function(){function e(){}return e.\u0275mod=c.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=c.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[r.CommonModule,i.TniIconModule,o.environment.disableAnimations?a.NoopAnimationsModule:a.BrowserAnimationsModule]]}),e}()},uSyR:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniTabGroupComponent=void 0;var o=n("fXoL"),r=n("suy7"),i=(n("YORH"),n("fXoL")),a=n("YORH"),c=n("ofXK");function s(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"a",4),i.\u0275\u0275listener("click",function(e){i.\u0275\u0275restoreView(n);var o=t.$implicit;return i.\u0275\u0275nextContext().onTabClick(e,o)}),i.\u0275\u0275elementStart(1,"div"),i.\u0275\u0275text(2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var o=t.$implicit,r=i.\u0275\u0275nextContext();i.\u0275\u0275classProp("tab--disabled",o.disabled)("active-tab",r.activeTabId===o.tabId),i.\u0275\u0275property("id",o.tabId),i.\u0275\u0275attribute("aria-controls",o.tabId+"-panel")("aria-selected",r.activeTabId===o.tabId)("aria-controls",r.activeTabId===o.tabId?o.tabId+"-content-container":null),i.\u0275\u0275advance(2),i.\u0275\u0275textInterpolate(o.title)}}function l(e,t){1&e&&i.\u0275\u0275elementContainer(0)}function d(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",7),i.\u0275\u0275template(1,l,1,0,"ng-container",8),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275nextContext().$implicit,o=i.\u0275\u0275nextContext();i.\u0275\u0275propertyInterpolate1("id","",n.tabId,"-content-container"),i.\u0275\u0275property("hidden",o.activeTabId!==n.tabId),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngTemplateOutlet",n.contentTemplate)}}function p(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",5),i.\u0275\u0275template(1,d,2,3,"div",6),i.\u0275\u0275elementEnd()),2&e){var n=t.$implicit,o=i.\u0275\u0275nextContext();i.\u0275\u0275property("id",n.tabId+"-panel"),i.\u0275\u0275attribute("aria-labelledby",n.tabId),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",o.isTabLoaded(n.tabId))}}t.TniTabGroupComponent=function(){function e(e){this.trackOpalEventService=e,this.tabChange=new o.EventEmitter,this.loadedTabs=new Set}return e.prototype.ngAfterContentInit=function(){this.activeTabId||(this.activeTabId=this.tabs.first.tabId),this.loadedTabs.add(this.activeTabId)},e.prototype.onTabClick=function(e,t){e.preventDefault(),this.trackOpalEventService.trackUserEvent({action:t.title+" tab link",label:"Registered"});var n=t.tabId;t.disabled||this.activeTabId===n||(this.activeTabId=n,this.loadedTabs.add(n),this.tabChange.emit(n))},e.prototype.isTabLoaded=function(e){return this.loadedTabs.has(e)},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(a.TrackOpalEventService))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tni-tab-group"]],contentQueries:function(e,t,n){var o;1&e&&i.\u0275\u0275contentQuery(n,r.TniTabComponent,!1),2&e&&i.\u0275\u0275queryRefresh(o=i.\u0275\u0275loadQuery())&&(t.tabs=o)},inputs:{activeTabId:"activeTabId"},outputs:{tabChange:"tabChange"},decls:4,vars:2,consts:[["role","tablist",1,"tni-tab-container"],[1,"tni-tab-header-container"],["href","","class","tni-tab-header","role","tab",3,"id","tab--disabled","active-tab","click",4,"ngFor","ngForOf"],["class","tni-tab-content-container","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["href","","role","tab",1,"tni-tab-header",3,"id","click"],["role","tabpanel",1,"tni-tab-content-container",3,"id"],[3,"id","hidden",4,"ngIf"],[3,"id","hidden"],[4,"ngTemplateOutlet"]],template:function(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275elementStart(1,"div",1),i.\u0275\u0275template(2,s,3,9,"a",2),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(3,p,2,3,"div",3)),2&e&&(i.\u0275\u0275advance(2),i.\u0275\u0275property("ngForOf",t.tabs),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngForOf",t.tabs))},directives:[c.NgForOf,c.NgIf,c.NgTemplateOutlet],styles:[".tni-tab-container[_ngcontent-%COMP%]   .tni-tab-header-container[_ngcontent-%COMP%]{display:flex;font-size:15px;font-weight:400;background:#fff}.tni-tab-container[_ngcontent-%COMP%]   .tni-tab-header-container[_ngcontent-%COMP%]   .tni-tab-header[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0;text-align:center;text-decoration:none;color:#1d69b4;padding:15px;white-space:nowrap}.tni-tab-container[_ngcontent-%COMP%]   .tni-tab-header-container[_ngcontent-%COMP%]   .tni-tab-header.active-tab[_ngcontent-%COMP%]{border-bottom:5px solid #0069b7;padding-bottom:0}.tni-tab-container[_ngcontent-%COMP%]   .tni-tab-header-container[_ngcontent-%COMP%]   .tni-tab-header.tab--disabled[_ngcontent-%COMP%]{color:#ddd;border-bottom:0}.tni-tab-container[_ngcontent-%COMP%]   .tni-tab-header-container[_ngcontent-%COMP%]   .tni-tab-header[_ngcontent-%COMP%]:hover:not(.active-tab){background-color:#ececec}"]}),e}()},ua9F:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Address=void 0,t.Address=function(){function e(){}return e.fromResponse=function(t){var n=new e;return n.address1=t.Address1,n.address2=t.Address2,n.address3=t.Address3,n.postcode=t.Postcode,n.suburb=t.Suburb,n.state=t.State,n.country=t.Country,n},e}()},ui0D:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardManageComponent=void 0,n("fXoL"),n("SC3b"),n("PShm");var o=n("u3Ad"),r=n("tJ3N"),i=(n("NRRr"),n("kU1M")),a=n("fXoL"),c=n("PShm"),s=n("NRRr"),l=n("ofXK"),d=n("73Ru"),p=n("gUXI"),u=n("9v/V"),m=n("U+qi");function f(e,t){1&e&&(a.\u0275\u0275elementStart(0,"tni-form-message",12),a.\u0275\u0275text(1," Please enter a valid card name. Card name cannot be blank or contain special characters. "),a.\u0275\u0275elementEnd())}function g(e,t){1&e&&(a.\u0275\u0275elementStart(0,"label",5),a.\u0275\u0275text(1,"Nickname"),a.\u0275\u0275elementEnd())}function h(e,t){if(1&e){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"button",19),a.\u0275\u0275listener("click",function(){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext(4).editname=!0}),a.\u0275\u0275element(1,"tni-icon",20),a.\u0275\u0275elementStart(2,"span",21),a.\u0275\u0275text(3,"edit card nickname"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()}}function v(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div",6),a.\u0275\u0275elementStart(1,"span",17),a.\u0275\u0275text(2),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,h,4,0,"button",18),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275nextContext(3);a.\u0275\u0275advance(2),a.\u0275\u0275textInterpolate(n.getCardNickName(null==n.smartCard?null:n.smartCard.cardNickName)),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!n.editname)}}function C(e,t){if(1&e){var n=a.\u0275\u0275getCurrentView();a.\u0275\u0275elementStart(0,"tni-editable-input-field",22),a.\u0275\u0275listener("saveValue",function(e){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext(3).updateCardDetails(e)})("cancelEdit",function(){return a.\u0275\u0275restoreView(n),a.\u0275\u0275nextContext(3).editname=!1}),a.\u0275\u0275elementEnd()}if(2&e){var o=a.\u0275\u0275nextContext(3);a.\u0275\u0275property("value",o.smartCard.cardNickName)("required",!0)("errorMessage",o.validationMessages.cardName)("pattern",o.cardNameValidator)("label","card-name")}}function _(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div",13),a.\u0275\u0275template(1,g,2,0,"label",14),a.\u0275\u0275template(2,v,4,2,"div",15),a.\u0275\u0275template(3,C,1,5,"tni-editable-input-field",16),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!n.editname),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!n.editname),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",n.editname)}}function b(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div",23),a.\u0275\u0275elementStart(1,"label",5),a.\u0275\u0275text(2,"Entitlement issuer"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"div",6),a.\u0275\u0275text(4),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate(n.smartCard.entitlementIssuerName)}}function x(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div",24),a.\u0275\u0275elementStart(1,"label",5),a.\u0275\u0275text(2,"Entitlement number"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"div",6),a.\u0275\u0275text(4),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate1(" ",n.smartCard.entitlementIssuerEntitlementId," ")}}function y(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div",25),a.\u0275\u0275elementStart(1,"label",5),a.\u0275\u0275text(2,"Entitlement expiry date"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(3,"div",6),a.\u0275\u0275text(4),a.\u0275\u0275pipe(5,"date"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275nextContext(2);a.\u0275\u0275advance(4),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind2(5,1,n.smartCard.entitlementExpiryDate,"dd MMM yyyy")," ")}}function M(e,t){if(1&e&&(a.\u0275\u0275elementStart(0,"div",1),a.\u0275\u0275elementStart(1,"h2"),a.\u0275\u0275text(2,"Card details"),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(3,f,2,0,"tni-form-message",2),a.\u0275\u0275template(4,_,4,3,"div",3),a.\u0275\u0275elementStart(5,"div",4),a.\u0275\u0275elementStart(6,"label",5),a.\u0275\u0275text(7,"Card no."),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(8,"div",6),a.\u0275\u0275text(9),a.\u0275\u0275pipe(10,"opalCardNumber"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(11,"div",7),a.\u0275\u0275elementStart(12,"label",5),a.\u0275\u0275text(13,"Card type"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(14,"div",6),a.\u0275\u0275text(15),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(16,"div",8),a.\u0275\u0275elementStart(17,"label",5),a.\u0275\u0275text(18,"Status"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementStart(19,"div",6),a.\u0275\u0275text(20),a.\u0275\u0275pipe(21,"titlecase"),a.\u0275\u0275elementEnd(),a.\u0275\u0275elementEnd(),a.\u0275\u0275template(22,b,5,1,"div",9),a.\u0275\u0275template(23,x,5,1,"div",10),a.\u0275\u0275template(24,y,6,4,"div",11),a.\u0275\u0275elementEnd()),2&e){var n=a.\u0275\u0275nextContext();a.\u0275\u0275advance(3),a.\u0275\u0275property("ngIf",n.updateError),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",n.smartCard.registered),a.\u0275\u0275advance(5),a.\u0275\u0275textInterpolate1(" ",a.\u0275\u0275pipeBind1(10,8,null==n.smartCard?null:n.smartCard.smartcardId)," "),a.\u0275\u0275advance(6),a.\u0275\u0275textInterpolate1(" ",null==n.smartCard?null:n.smartCard.cardTypeDescriptionTni," "),a.\u0275\u0275advance(5),a.\u0275\u0275textInterpolate(a.\u0275\u0275pipeBind1(21,10,n.smartCard.cardState)),a.\u0275\u0275advance(2),a.\u0275\u0275property("ngIf",!!n.smartCard.entitlementIssuerName),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!!n.smartCard.entitlementIssuerEntitlementId),a.\u0275\u0275advance(1),a.\u0275\u0275property("ngIf",!!n.smartCard.entitlementExpiryDate)}}t.CardManageComponent=function(){function e(e,t){this.smartcardService=e,this.loaderService=t,this.editname=!1,this.updateError=!1,this.cardNameValidator=o.TniRegularExpressions.cardName,this.validationMessages=new r.ValidationMessages}return e.prototype.updateCardDetails=function(e){var t=this;this.loaderService.display(!0),this.smartcardService.updateCardNickname(this.smartCard.smartcardId,e).pipe(i.finalize(function(){return t.loaderService.display(!1)})).subscribe(function(){t.updateError=!1,t.errorMessage=null,t.editname=!1,t.smartCard.cardNickName=e,t.smartcardService.publishUpdate(t.smartCard)},function(){return t.updateError=!0})},e.prototype.getCardNickName=function(e){if(e)return e.substring(0,40)},e.\u0275fac=function(t){return new(t||e)(a.\u0275\u0275directiveInject(c.SmartcardService),a.\u0275\u0275directiveInject(s.LoaderService))},e.\u0275cmp=a.\u0275\u0275defineComponent({type:e,selectors:[["tni-card-manage"]],inputs:{smartCard:"smartCard"},decls:1,vars:1,consts:[["class","manage-card",4,"ngIf"],[1,"manage-card"],["class","card-update-error col-md-12","id","card-update-error",4,"ngIf"],["class","manage-card__detail manage-card__detail--nickname",4,"ngIf"],[1,"manage-card__detail","smartcardId"],[1,"manage-card__detail-label"],[1,"manage-card__value"],[1,"manage-card__detail","card-type"],[1,"manage-card__detail","status"],["class","manage-card__detail entitlement-type",4,"ngIf"],["class","manage-card__detail entitlement-number",4,"ngIf"],["class","manage-card__detail entitlement-expires",4,"ngIf"],["id","card-update-error",1,"card-update-error","col-md-12"],[1,"manage-card__detail","manage-card__detail--nickname"],["class","manage-card__detail-label",4,"ngIf"],["class","manage-card__value",4,"ngIf"],["class","edit-nickname","helpText","Edit card nickname","maxLength","40",3,"value","required","errorMessage","pattern","label","saveValue","cancelEdit",4,"ngIf"],[1,"value"],["class","name-edit-btn",3,"click",4,"ngIf"],[1,"name-edit-btn",3,"click"],["iconName","edit","iconClasses","xs edit","iconAriaHidden","false","iconTitle","edit",1,"icon-element"],[1,"sr-only"],["helpText","Edit card nickname","maxLength","40",1,"edit-nickname",3,"value","required","errorMessage","pattern","label","saveValue","cancelEdit"],[1,"manage-card__detail","entitlement-type"],[1,"manage-card__detail","entitlement-number"],[1,"manage-card__detail","entitlement-expires"]],template:function(e,t){1&e&&a.\u0275\u0275template(0,M,25,12,"div",0),2&e&&a.\u0275\u0275property("ngIf",t.smartCard)},directives:[l.NgIf,d.TniFormMessageComponent,p.IconComponent,u.EditableInputFieldComponent],pipes:[m.OpalCardNumberPipe,l.TitleCasePipe,l.DatePipe],styles:['.manage-card{font-size:16px;line-height:1.5em}.card-update-error{margin-bottom:20px;padding:0 20px}.manage-card__detail{position:relative}.manage-card__detail:after{display:table;clear:both;content:""}.manage-card__detail .value{display:inline-block;margin-right:5px}.manage-card__value{padding-left:100px}@media (min-width:768px){.manage-card__value{padding-left:200px}}.manage-card__detail-label{float:left;width:100px;padding-right:16px;box-sizing:border-box}@media (min-width:768px){.manage-card__detail-label{width:200px}}.form .manage-card__detail-label{font-size:16px;line-height:1.4em}@media (min-width:768px){.form .manage-card__detail-label{line-height:1.5em}}.name-edit-btn{background:none;display:inline-block;width:20px;height:20px;border:0;padding:0;position:relative;top:-2px}h2{margin-top:0;font-weight:300;font-size:24px;line-height:1.3333}'],encapsulation:2}),e}()},vDbs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalRoutingModule=void 0,n("fXoL");var o=n("tyNb"),r=n("4U9u"),i=n("nVUv"),a=n("G3li"),c=n("Ti8x"),s=n("w0to"),l=n("UI8/"),d=n("SuK/"),p=n("MyN3"),u=n("knLn"),m=n("ryGM"),f=n("iAux"),g=n("1+U/"),h=n("fXoL"),v=(n("tyNb"),[{path:"account",component:s.OpalMainComponent,canActivate:[a.AuthGuardService],children:[{path:"cards",component:r.OpalCardsComponent,data:{title:"Opal cards"}},{path:"profile",component:i.OpalProfileComponent,data:{title:"Profile"}},{path:"add-card",component:l.CardRegistrationComponent,data:{title:"Opal cards"}},{path:"add-entitlement",component:m.EntitlementVerificationComponent,data:{title:"Opal cards"}},{path:"activate-card",component:f.ActivateCardComponent,data:{title:"Opal cards"}},{path:"block-card/:cardNumber",component:g.BlockCardComponent,data:{title:"Opal cards"}},{path:"",redirectTo:"cards",pathMatch:"full"}]},{path:"login",component:c.OpalLoginComponent},{path:"forgot-password",component:d.ForgotPasswordComponent},{path:"forgot-username",component:p.ForgotUsernameComponent},{path:"create-account",component:u.CreateAccountComponent},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"**",redirectTo:"/login",pathMatch:"full"}]);t.OpalRoutingModule=function(){function e(){}return e.\u0275mod=h.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=h.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.RouterModule.forRoot(v,{useHash:!0,relativeLinkResolution:"legacy"})],o.RouterModule]}),e}()},vDmu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EntitlementService=void 0;var o=n("kU1M"),r=(n("fXoL"),n("tk/3"),n("QeVs")),i=n("fXoL"),a=n("tk/3");t.EntitlementService=function(){function e(e){this.http=e}return e.prototype.details=function(e){return this.http.get("/api/opal/api/entitlement/details/"+e).pipe(o.map(function(e){return r.Entitlement.fromResponse(e)}))},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275inject(a.HttpClient))},e.\u0275prov=i.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac}),e}()},vRXg:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BalanceTransferService=void 0,n("fXoL"),n("tk/3");var o=n("fXoL"),r=n("tk/3");t.BalanceTransferService=function(){function e(e){this.http=e}return e.prototype.postBalanceTransfer=function(e){return this.http.post("/api/opal/api/smartcard/balancetransfer/",{HotlistReason:"CARD_LOST",FromSmartcardId:e.from,ToSmartcardId:e.to})},e.prototype.transferableCards=function(e,t){return e.filter(function(e){return t.smartcardId!==e.smartcardId}).filter(function(e){return"hotlisted"!==e.cardState.toLowerCase()}).filter(function(e){return"blocked"!==e.cardState.toLowerCase()})},e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(r.HttpClient))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},vwDF:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModalWindowComponent=void 0;var o=n("fXoL"),r=n("1Zke"),i=n("fXoL"),a=n("ofXK"),c=["modalBox"];function s(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"div",10),i.\u0275\u0275elementStart(1,"button",11),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().close()}),i.\u0275\u0275elementStart(2,"span",12),i.\u0275\u0275text(3,"close"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(4,"span",13),i.\u0275\u0275text(5,"\xd7"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}}function l(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"button",14),i.\u0275\u0275listener("click",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext().close()}),i.\u0275\u0275elementStart(1,"span"),i.\u0275\u0275text(2,"Done"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext();i.\u0275\u0275attribute("aria-label","Close "+o.ariaLabel+" dialog")}}var d=["*"];t.ModalWindowComponent=function(){function e(){this.closeEvent=new o.EventEmitter,this.focusedElementIndex=0}return e.prototype.ngAfterViewInit=function(){var e=this;document.body.style.overflow="hidden",setTimeout(function(){e.focusable[e.focusedElementIndex].focus()}),this.focusable=this.modalBoxEl.nativeElement.querySelectorAll('.modal-title, button, [href], input, select, textarea, *[tabindex][tabindex]:not([tabindex="-1"])')},e.prototype.ngOnDestroy=function(){document.body.style.overflow="auto"},e.prototype.close=function(){this.closeEvent.emit(!0),this.openingElement&&this.openingElement.focus()},e.prototype.onTab=function(e){0!==this.focusable.length&&(this.focusedElementIndex++,this.focusedElementIndex>=this.focusable.length&&(this.focusedElementIndex=0),this.focusable[this.focusedElementIndex].focus(),e.preventDefault())},e.prototype.onShiftTab=function(e){0!==this.focusable.length&&(this.focusedElementIndex--,this.focusedElementIndex<0&&(this.focusedElementIndex=this.focusable.length-1),this.focusable[this.focusedElementIndex].focus(),e.preventDefault())},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tni-modal"]],viewQuery:function(e,t){var n;1&e&&i.\u0275\u0275staticViewQuery(c,!0),2&e&&i.\u0275\u0275queryRefresh(n=i.\u0275\u0275loadQuery())&&(t.modalBoxEl=n.first)},inputs:{ariaLabel:"ariaLabel",closeAtBottomRightLayout:"closeAtBottomRightLayout",openingElement:"openingElement",noCloseButton:"noCloseButton"},outputs:{closeEvent:"closeEvent"},ngContentSelectors:d,decls:13,vars:4,consts:[[1,"modal-container",3,"click","keyup.esc"],["tabindex","0","aria-describedby","modal-start modal-info",1,"hidden-container"],["modalContainer",""],["id","modal-start",1,"sr-only"],["id","modal-info",1,"sr-only"],[1,"modal-box",3,"click","keyup.esc","keydown.tab","keydown.shift.tab"],["modalBox",""],["class","modal-box-header",4,"ngIf"],[1,"modal-box-body"],["type","button","class","close btn btn-default",3,"click",4,"ngIf"],[1,"modal-box-header"],["type","button",1,"close-btn",3,"click"],[1,"sr-only"],["aria-hidden","true"],["type","button",1,"close","btn","btn-default",3,"click"]],template:function(e,t){1&e&&(i.\u0275\u0275projectionDef(),i.\u0275\u0275elementStart(0,"div",0),i.\u0275\u0275listener("click",function(){return t.close()})("keyup.esc",function(){return t.close()}),i.\u0275\u0275elementStart(1,"div",1,2),i.\u0275\u0275elementStart(3,"span",3),i.\u0275\u0275text(4,"Dialog starts"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"span",4),i.\u0275\u0275text(6),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(7,"div",5,6),i.\u0275\u0275listener("click",function(e){return e.stopPropagation()})("keyup.esc",function(){return t.close()})("keydown.tab",function(e){return t.onTab(e)})("keydown.shift.tab",function(e){return t.onShiftTab(e)}),i.\u0275\u0275template(9,s,6,0,"div",7),i.\u0275\u0275elementStart(10,"div",8),i.\u0275\u0275projection(11),i.\u0275\u0275template(12,l,3,1,"button",9),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275property("@slideFromTopAnimation",void 0),i.\u0275\u0275advance(6),i.\u0275\u0275textInterpolate(t.ariaLabel),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",!t.noCloseButton&&!t.closeAtBottomRightLayout),i.\u0275\u0275advance(3),i.\u0275\u0275property("ngIf",!t.noCloseButton&&t.closeAtBottomRightLayout))},directives:[a.NgIf],styles:[".modal-container[_ngcontent-%COMP%]{position:fixed;top:0;bottom:0;left:0;right:0;outline:0;overflow-y:auto;overflow-x:hidden;z-index:999;transition:opacity .15s linear;background-color:rgba(0,0,0,.5);color:#363637}.modal-container[_ngcontent-%COMP%]   .modal-box[_ngcontent-%COMP%]{border-radius:4px;border:none;background:#fff;box-shadow:0 3px 9px rgba(0,0,0,.5);transition:transform .3s ease-out;font-weight:400;font-size:115%;line-height:23px;padding:48px 16px;position:relative;width:auto;margin:56px 8px 8px;z-index:1000;text-align:center;box-sizing:border-box}@media (min-width:768px){.modal-container[_ngcontent-%COMP%]   .modal-box[_ngcontent-%COMP%]{padding:48px;box-shadow:0 5px 15px rgba(0,0,0,.5);width:570px;margin:0 auto;font-size:16px;top:50%;transform:translateY(-50%)}}.modal-container[_ngcontent-%COMP%]   .modal-box-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;top:16px;right:16px;padding:0;cursor:pointer;border:0;background:0 0;height:25px;width:25px;font-size:25px;font-weight:200}.modal-container[_ngcontent-%COMP%]   .hidden-container[_ngcontent-%COMP%]{outline:none;width:0;height:0}.modal-container[_ngcontent-%COMP%]   .bottom-close-container[_ngcontent-%COMP%]{text-align:right;color:#0069b7}.modal-container[_ngcontent-%COMP%]   .bottom-close-container[_ngcontent-%COMP%]   .btn-link[_ngcontent-%COMP%]{text-transform:uppercase}.modal-container[_ngcontent-%COMP%]   .btn.close[_ngcontent-%COMP%]{opacity:.5;top:5px;right:10px;font-weight:500;position:absolute;margin-bottom:0;text-align:center;vertical-align:middle;cursor:pointer;background-image:none;border:1px solid #8c8c8c;white-space:nowrap;padding:6px 12px;font-size:14px;line-height:1.428571429;border-radius:.25em}.modal-container[_ngcontent-%COMP%]   .btn.close[_ngcontent-%COMP%]:active, .modal-container[_ngcontent-%COMP%]   .btn.close[_ngcontent-%COMP%]:focus, .modal-container[_ngcontent-%COMP%]   .btn.close[_ngcontent-%COMP%]:hover{color:#000}"],data:{animation:[r.slideFromTopAnimation]}}),e}()},w0to:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalMainComponent=void 0,n("fXoL"),n("QK+Z"),n("puoa"),n("YORH");var o=n("tyNb"),r=(n("84CM"),n("T/fq"),n("fXoL")),i=n("QK+Z"),a=n("puoa"),c=n("YORH"),s=n("tyNb"),l=n("84CM"),d=n("T/fq"),p=n("E2dh"),u=n("VD0A"),m=n("Tueg");t.OpalMainComponent=function(){function e(e,t,n,o,r,i,a){this.opalAccountStore=e,this.windowRef=t,this.trackOpalEventService=n,this.activeRoute=o,this.router=r,this.logoutService=i,this.accesibleAlertsService=a,this.opalCardMenuLabel="Opal cards",this.isRegistered=!this.opalAccountStore.get().unregisteredCardNo,this.setPageTitle(),this.isRegistered||(this.opalCardMenuLabel="Opal card")}return e.prototype.ngOnInit=function(){var e=this;this.router.events.subscribe(function(t){t instanceof o.NavigationEnd&&e.setPageTitle()}),this.accessibleAlertSubscription=this.accesibleAlertsService.Alerts().subscribe(function(t){e.accessibleAlert=t,setTimeout(function(){e.accessibleAlert=null},1e3)})},e.prototype.ngAfterViewInit=function(){this.logoutService.startLogoutTimer()},e.prototype.logout=function(e){this.logoutService.logout(e)},e.prototype.onOpalCardsClick=function(){this.trackOpalEventService.viewOpalCardsSelected()},e.prototype.onProfileClick=function(){this.trackOpalEventService.viewProfileSelected()},e.prototype.ngOnDestroy=function(){this.accessibleAlertSubscription&&this.accessibleAlertSubscription.unsubscribe()},e.prototype.setPageTitle=function(){var e=this;this.activeRoute.children[0].data.subscribe(function(t){e.activePageTitle=t.title})},e.\u0275fac=function(t){return new(t||e)(r.\u0275\u0275directiveInject(i.OpalAccountStore),r.\u0275\u0275directiveInject(a.WindowRef),r.\u0275\u0275directiveInject(c.TrackOpalEventService),r.\u0275\u0275directiveInject(s.ActivatedRoute),r.\u0275\u0275directiveInject(s.Router),r.\u0275\u0275directiveInject(l.LogoutService),r.\u0275\u0275directiveInject(d.AccessibleAlertsService))},e.\u0275cmp=r.\u0275\u0275defineComponent({type:e,selectors:[["tni-opal-main"]],decls:9,vars:3,consts:[[3,"title"],[1,"title__menu"],[1,"sr-only"],["aria-live","assertive",1,"sr-only"]],template:function(e,t){1&e&&(r.\u0275\u0275elementStart(0,"tni-layout"),r.\u0275\u0275elementStart(1,"tni-opal-title",0),r.\u0275\u0275element(2,"tni-opal-menu",1),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(3,"div"),r.\u0275\u0275elementStart(4,"span",2),r.\u0275\u0275text(5),r.\u0275\u0275elementEnd(),r.\u0275\u0275element(6,"router-outlet"),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementStart(7,"div",3),r.\u0275\u0275text(8),r.\u0275\u0275elementEnd(),r.\u0275\u0275elementEnd()),2&e&&(r.\u0275\u0275advance(1),r.\u0275\u0275property("title",t.activePageTitle),r.\u0275\u0275advance(4),r.\u0275\u0275textInterpolate(t.activePageTitle),r.\u0275\u0275advance(3),r.\u0275\u0275textInterpolate1(" ",t.accessibleAlert," "))},directives:[p.LayoutComponent,u.TitleBarComponent,m.OpalMenuComponent,s.RouterOutlet],styles:['.opal-main-component__breadcrumb[_ngcontent-%COMP%]{padding:0 15px;background:linear-gradient(0deg,#1b91d4,#1d69b4)}@media (min-width:992px){.opal-main-component__breadcrumb[_ngcontent-%COMP%]{padding:0 25px}}.title[_ngcontent-%COMP%], .title__heading[_ngcontent-%COMP%]{line-height:60px;height:60px}.title__heading[_ngcontent-%COMP%]{color:#fff;font-size:24px;font-weight:200;margin:0;float:left}.title__menu[_ngcontent-%COMP%]{height:40px;margin-left:auto;margin-right:0;float:right}.title__menu[_ngcontent-%COMP%]   .tp-icon[_ngcontent-%COMP%]{margin-top:1px}.title__menu[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{list-style:none;padding:0 0 0 4px;font-size:.8em;margin:0}@media (max-width:767px){.title__menu[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]{font-size:1em}}.title__menu[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block}.title__menu[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .active[_ngcontent-%COMP%]{text-decoration:none;color:#555;pointer-events:none;cursor:default;outline:none}.title__menu[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{display:inline-block;font-size:1em;font-weight:200;margin:0;padding:0}.title__menu[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:not(:last-child):after{content:" | "}.title__menu[_ngcontent-%COMP%]   ol[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-child:before{content:" ";white-space:pre}']}),e}()},w4vn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HotlistService=void 0,n("fXoL"),n("tk/3");var o=n("fXoL"),r=n("tk/3");t.HotlistService=function(){function e(e){this.http=e}return e.prototype.postBlock=function(e){return this.http.post("/api/opal/api/smartcard/hotlist/",{SmartcardId:e,HotlistReason:"CARD_LOST"})},e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(r.HttpClient))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},w8Yy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CTPGuardService=void 0,n("fXoL"),n("fiHy");var o=n("fXoL"),r=n("fiHy");t.CTPGuardService=function(){function e(e){this.ctpAuthService=e}return e.prototype.canActivate=function(e){return this.ctpAuthService.isCTPAuthenticated()||!!e.queryParams.nonce},e.\u0275fac=function(t){return new(t||e)(o.\u0275\u0275inject(r.CTPAuthService))},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac,providedIn:"root"}),e}()},wxrw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TniSlideDownModule=void 0,n("fXoL"),n("+1k7");var o=n("ofXK"),r=n("fXoL");t.TniSlideDownModule=function(){function e(){}return e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule]]}),e}()},"x+y0":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LastUpdatedDescriptionPipe=void 0,n("fXoL");var o=n("wd/R"),r=n("fXoL");t.LastUpdatedDescriptionPipe=function(){function e(){o.updateLocale("en",{relativeTime:{future:"in %",past:"% ago",s:"now",m:"%d min",mm:"%d min",h:"%d hour",hh:"%d hours",d:"%d day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},calendar:{lastDay:"[Yesterday (]ddd[)]",sameDay:"[Today (]ddd[)]",nextDay:"[Tomorrow (]ddd[)]",lastWeek:"D MMM[ (]ddd[)]",nextWeek:"D MMM[ (]ddd[)]",sameElse:"D MMM[ (]ddd[)]"}}),[{threshold:"s",limit:60},{threshold:"m",limit:60},{threshold:"h",limit:24}].forEach(function(e){o.relativeTimeThreshold(e.threshold,e.limit)}),o.relativeTimeRounding(Math.floor)}return e.prototype.transform=function(e){var t=o();return!e||t.isBefore(e)?null:e.isSame(t,"day")?o.duration(t.diff(e)).asMinutes()<1?null:{relativeTime:o(e).toNow(!0),suffix:"ago"}:{relativeTime:"",suffix:e.format("D MMM")}},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=r.\u0275\u0275definePipe({name:"LastUpdatedDescriptionPipe",type:e,pure:!0}),e}()},xN0M:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GetViewportService=void 0,n("fXoL");var o=n("fXoL");t.GetViewportService=function(){function e(){}return e.prototype.getViewport=function(){return this.isMobile?"Mobile":"Desktop"},e.prototype.isMobile=function(){return navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Windows Phone/i)},e.\u0275prov=o.\u0275\u0275defineInjectable({token:e,factory:e.\u0275fac=function(t){return new(t||e)}}),e}()},xpgH:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpalTopupComponent=void 0;var o=n("kU1M"),r=(n("fXoL"),n("SC3b"),n("6i2Y"),n("kSud"),n("5VQw"),n("qCKp")),i=(n("QK+Z"),n("tf7G"),n("tyNb"),n("0ywJ"),n("NRRr"),n("Uf+G"),n("fXoL")),a=n("6i2Y"),c=n("kSud"),s=n("tf7G"),l=n("5VQw"),d=n("QK+Z"),p=n("0ywJ"),u=n("tyNb"),m=n("NRRr"),f=n("Uf+G"),g=n("ofXK"),h=n("pxjO"),v=n("+xla"),C=n("u1nx"),_=n("gUXI"),b=n("SPMH"),x=n("HYg0"),y=n("Tz4i"),M=n("nydR"),P=n("Mp0x");function O(e,t){1&e&&(i.\u0275\u0275elementStart(0,"div"),i.\u0275\u0275elementStart(1,"tni-page-frame"),i.\u0275\u0275elementStart(2,"div",2),i.\u0275\u0275element(3,"div",3),i.\u0275\u0275element(4,"div",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(5,"tni-page-frame"),i.\u0275\u0275elementStart(6,"div",2),i.\u0275\u0275element(7,"div",3),i.\u0275\u0275element(8,"div",4),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd())}function S(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"span",18),i.\u0275\u0275text(1),i.\u0275\u0275pipe(2,"centsToDollar"),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275nextContext(3);i.\u0275\u0275advance(1),i.\u0275\u0275textInterpolate(i.\u0275\u0275pipeBind1(2,1,n.smartCard.autoLoadAmount))}}function w(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tni-panel-group",null,6),i.\u0275\u0275elementStart(2,"tni-panel-nav",7),i.\u0275\u0275elementStart(3,"div",8),i.\u0275\u0275element(4,"tni-icon",9),i.\u0275\u0275elementStart(5,"span",10),i.\u0275\u0275text(6,"Auto top up "),i.\u0275\u0275elementEnd(),i.\u0275\u0275template(7,S,3,3,"span",11),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(8,"tni-panel",12),i.\u0275\u0275elementStart(9,"tni-auto-topup",13),i.\u0275\u0275listener("getPaymentAccount",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(2).reFetchAccountsData()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"tni-panel-nav",14),i.\u0275\u0275elementStart(11,"div",8),i.\u0275\u0275element(12,"tni-icon",15),i.\u0275\u0275elementStart(13,"span",10),i.\u0275\u0275text(14,"One off top up"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"tni-panel",16),i.\u0275\u0275elementStart(16,"tni-one-off-topup",17),i.\u0275\u0275listener("getPaymentAccount",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(2).reFetchAccountsData()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(2),i.\u0275\u0275property("active",o.isAutoTopupActive),i.\u0275\u0275advance(5),i.\u0275\u0275property("ngIf",o.smartCard.autoLoadAmount>0),i.\u0275\u0275advance(1),i.\u0275\u0275property("active",o.isAutoTopupActive),i.\u0275\u0275advance(1),i.\u0275\u0275property("smartCard",o.smartCard)("availableTopupAmounts",o.availableAutoTopupAmounts)("paymentAccount",o.paymentAccount),i.\u0275\u0275advance(1),i.\u0275\u0275property("active",o.isOnOffTopupActive),i.\u0275\u0275advance(5),i.\u0275\u0275property("active",o.isOnOffTopupActive),i.\u0275\u0275advance(1),i.\u0275\u0275property("queryData",o.queryData)("smartCard",o.smartCard)("availableTopupAmounts",o.availableTopupAmounts)("paymentAccount",o.paymentAccount)("isRegistered",!0)("paymentsEnabled",o.adhocPaymentEnabled)}}function k(e,t){1&e&&(i.\u0275\u0275elementStart(0,"tni-page-frame"),i.\u0275\u0275elementStart(1,"div",19),i.\u0275\u0275elementStart(2,"div",20),i.\u0275\u0275elementStart(3,"div",21),i.\u0275\u0275text(4,"You can't top up a blocked card"),i.\u0275\u0275elementEnd(),i.\u0275\u0275element(5,"tni-image",22),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd())}function E(e,t){if(1&e){var n=i.\u0275\u0275getCurrentView();i.\u0275\u0275elementStart(0,"tni-panel-group"),i.\u0275\u0275elementStart(1,"tni-panel-nav",14),i.\u0275\u0275elementStart(2,"div",8),i.\u0275\u0275element(3,"tni-icon",15),i.\u0275\u0275elementStart(4,"span",10),i.\u0275\u0275text(5,"One off top up"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(6,"tni-panel",16),i.\u0275\u0275elementStart(7,"tni-one-off-topup",23),i.\u0275\u0275listener("getPaymentAccount",function(){return i.\u0275\u0275restoreView(n),i.\u0275\u0275nextContext(2).reFetchAccountsData()}),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()}if(2&e){var o=i.\u0275\u0275nextContext(2);i.\u0275\u0275advance(1),i.\u0275\u0275property("active",o.isOnOffTopupActive),i.\u0275\u0275advance(5),i.\u0275\u0275property("active",o.isOnOffTopupActive),i.\u0275\u0275advance(1),i.\u0275\u0275property("queryData",o.queryData)("smartCard",o.smartCard)("availableTopupAmounts",o.availableTopupAmounts)("paymentAccount",o.paymentAccount)("paymentsEnabled",o.adhocPaymentEnabled)("isRegistered",!1)}}var T=function(){return["/create-account"]};function I(e,t){1&e&&(i.\u0275\u0275elementStart(0,"tni-page-frame"),i.\u0275\u0275elementStart(1,"div",24),i.\u0275\u0275elementStart(2,"div",25),i.\u0275\u0275elementStart(3,"div",26),i.\u0275\u0275elementStart(4,"div",27),i.\u0275\u0275elementStart(5,"p"),i.\u0275\u0275text(6," We'll be adding more Opal features to this site. For now, in order to top up on this site, you need to "),i.\u0275\u0275elementStart(7,"a",28),i.\u0275\u0275text(8,"create an account"),i.\u0275\u0275elementEnd(),i.\u0275\u0275text(9," and save your payment details. "),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(10,"p"),i.\u0275\u0275text(11,"Otherwise, you can top up using the Opal website or Opal Travel app."),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(12,"div",29),i.\u0275\u0275elementStart(13,"a",30),i.\u0275\u0275element(14,"tni-image",31),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(15,"a",32),i.\u0275\u0275element(16,"tni-image",33),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementStart(17,"div",34),i.\u0275\u0275elementStart(18,"a",35),i.\u0275\u0275text(19,"Opal website"),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd(),i.\u0275\u0275elementEnd()),2&e&&(i.\u0275\u0275advance(7),i.\u0275\u0275property("routerLink",i.\u0275\u0275pureFunction0(1,T)))}function A(e,t){if(1&e&&(i.\u0275\u0275elementStart(0,"div",5),i.\u0275\u0275template(1,w,17,14,"tni-panel-group",0),i.\u0275\u0275template(2,k,6,0,"tni-page-frame",0),i.\u0275\u0275template(3,E,8,8,"tni-panel-group",0),i.\u0275\u0275template(4,I,20,2,"tni-page-frame",0),i.\u0275\u0275elementEnd()),2&e){var n=i.\u0275\u0275nextContext();i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.isRegistered&&!n.isCardBlocked),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",n.isCardBlocked),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!n.isRegistered&&n.adhocPaymentEnabled),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!n.isRegistered&&!n.adhocPaymentEnabled)}}t.OpalTopupComponent=function(){function e(e,t,n,o,r,i,a,c,s){this.featureToggleService=e,this.paymentAccountService=t,this.topupService=n,this.autoTopupService=o,this.opalAccountStore=r,this.panelRefreshService=i,this.activeRoute=a,this.loaderService=c,this.uistateService=s,this.isAutoTopupFeatureEnabled=!0,this.isLoadingData=!1,this.isRegistered=r.isRegistered()}return e.prototype.ngOnChanges=function(e){e.smartCard&&this.init()},e.prototype.ngOnInit=function(){var e=this;this.activeRoute.queryParams.subscribe(function(t){t.component&&e.uistateService.setOpalCardsPageTopupoPanelTab(t.component)}),this.uistateService.getUiState().subscribe(function(t){e.isOnOffTopupActive="one-off-topup"===t.cardPageState.currentTopupPanel,e.isAutoTopupActive="auto-topup"===t.cardPageState.currentTopupPanel,e.isOnOffTopupActive&&(e.currentPanel="panel2"),e.isAutoTopupActive&&(e.currentPanel="panel1")})},e.prototype.ngAfterViewInit=function(){this.panelRefreshService.pushPanelRefreshEvent(),this.currentPanel&&this.panelRefreshService.setActivePanel(this.currentPanel)},e.prototype.init=function(){var e=this;this.smartCard&&(this.isCardBlocked=this.smartCard.isBlocked,this.featureToggleService.getToggles().subscribe(function(t){e.adhocPaymentEnabled=t.toggles["opal-adhoc-payment"]}),this.panelRefreshService.setActivePanel(""),this.fetchTopupData())},e.prototype.fetchTopupData=function(){var e=this;this.isCardBlocked||(this.isLoadingData=!0,this.getPaymentAccountAndTopupAmounts().pipe(o.finalize(function(){return e.isLoadingData=!1})).subscribe())},e.prototype.getPaymentAccountAndTopupAmounts=function(){var e=this;return this.opalAccountStore.isRegistered()?r.forkJoin(this.paymentAccountService.get(),this.autoTopupService.getAvailableTopupAmounts(this.smartCard.smartcardId),this.topupService.getAvailableTopupAmounts(this.smartCard.smartcardId)).pipe(o.tap(function(t){e.paymentAccount=t[0],e.availableAutoTopupAmounts=t[1],e.availableTopupAmounts=t[2]})):r.forkJoin(this.topupService.getAvailableTopupAmounts(this.smartCard.smartcardId)).pipe(o.tap(function(t){e.availableTopupAmounts=t[0]}))},e.prototype.reFetchAccountsData=function(){var e=this;this.isRegistered&&this.paymentAccountService.getPaymentAccounts().pipe(o.finalize(function(){return e.loaderService.display(!1)})).subscribe(function(t){return e.paymentAccount=t})},e.\u0275fac=function(t){return new(t||e)(i.\u0275\u0275directiveInject(a.FeatureToggleService),i.\u0275\u0275directiveInject(c.PaymentAccountService),i.\u0275\u0275directiveInject(s.TopupService),i.\u0275\u0275directiveInject(l.AutoTopupService),i.\u0275\u0275directiveInject(d.OpalAccountStore),i.\u0275\u0275directiveInject(p.TniPanelRefreshService),i.\u0275\u0275directiveInject(u.ActivatedRoute),i.\u0275\u0275directiveInject(m.LoaderService),i.\u0275\u0275directiveInject(f.UiStateService))},e.\u0275cmp=i.\u0275\u0275defineComponent({type:e,selectors:[["tni-opal-topup"]],inputs:{smartCard:"smartCard",queryData:"queryData"},features:[i.\u0275\u0275NgOnChangesFeature],decls:2,vars:2,consts:[[4,"ngIf"],["class","top-up-container",4,"ngIf"],[1,"top-up__skeleton-loader"],[1,"skeleton-rounded-rectangle"],[1,"skeleton-bar-square-thick","center","lg"],[1,"top-up-container"],["panelGroup",""],["targetsPanel","panel1","navId","panelNav1",3,"active"],[1,"top-up__nav__container"],["iconName","opal-auto-topup","iconClasses","tab-icon lg","iconAriaHidden","true"],[1,"tab-link"],["class","top-up__panel-nav__auto-amount",4,"ngIf"],["panelId","panel1","targetedBy","panelNav1",3,"active"],[3,"smartCard","availableTopupAmounts","paymentAccount","getPaymentAccount"],["targetsPanel","panel2","navId","panelNav2",3,"active"],["iconName","opal-top-up","iconClasses","tab-icon lg","iconAriaHidden","true"],["panelId","panel2","targetedBy","panelNav2",3,"active"],[3,"queryData","smartCard","availableTopupAmounts","paymentAccount","isRegistered","paymentsEnabled","getPaymentAccount"],[1,"top-up__panel-nav__auto-amount"],[1,"card-blocked"],[1,"card-blocked__content"],[1,"card-blocked__copy"],["imageName","assets/images/opal/blocked.svg","imageTitle","blocked card icon",1,"card-blocked__icon"],[3,"queryData","smartCard","availableTopupAmounts","paymentAccount","paymentsEnabled","isRegistered","getPaymentAccount"],[1,"opal-top-up-container","top-up-redirection-info"],[1,"top-up-card-block"],[1,"top-up-card-block-content"],[1,"top-up-card-block-content-detail"],[3,"routerLink"],[1,"opal-app-store-links"],["href","https://itunes.apple.com/au/app/opal-travel/id941006607?mt=8"],["imageName","assets/logos/logo_apple-ios-badge.svg","imageTitle","Download on the App Store"],["href","https://play.google.com/store/apps/details?id=au.com.opal.travel&hl=en"],["imageName","assets/logos/logo_google-badge.svg","imageTitle","Get it on Google Play"],[1,"opal-website-link"],["href","https://www.opal.com.au/en/about-opal/login"]],template:function(e,t){1&e&&(i.\u0275\u0275template(0,O,9,0,"div",0),i.\u0275\u0275template(1,A,5,4,"div",1)),2&e&&(i.\u0275\u0275property("ngIf",t.isLoadingData),i.\u0275\u0275advance(1),i.\u0275\u0275property("ngIf",!t.isLoadingData))},directives:[g.NgIf,h.PageFrameComponent,v.TniPanelGroupComponent,C.TniPanelNavComponent,_.IconComponent,b.TniPanelComponent,x.AutoTopupComponent,y.OneOffTopupComponent,M.TniImageComponent,u.RouterLinkWithHref],pipes:[P.CentsToDollarPipe],styles:[".card-blocked-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start}.card-blocked-content-icon-wrapper[_ngcontent-%COMP%]{position:relative}.card-blocked-content-icon-wrapper[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:absolute;top:-15px;right:30px}.card-blocked-content.top-up-enabled[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-weight:400}.card-blocked-content-detail[_ngcontent-%COMP%]{flex:1}.card-blocked__icon[_ngcontent-%COMP%]{margin-bottom:15px}.card-blocked__content[_ngcontent-%COMP%]{padding-top:20px;text-align:center}.card-blocked__cannot-top-up-info[_ngcontent-%COMP%]{margin-top:10px;font-size:.85em;font-weight:500}.card-blocked__copy[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:20px;font-weight:500}.opal-top-up-container[_ngcontent-%COMP%]   .top-up-card-block[_ngcontent-%COMP%]{padding-bottom:20px}.opal-top-up-container[_ngcontent-%COMP%]   .top-up-card-block-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start}.opal-top-up-container[_ngcontent-%COMP%]   .top-up-card-block-content-icon-wrapper[_ngcontent-%COMP%]{position:relative}.opal-top-up-container[_ngcontent-%COMP%]   .top-up-card-block-content-icon-wrapper[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{position:absolute;top:-15px;right:30px}.opal-top-up-container[_ngcontent-%COMP%]   .top-up-card-block-content.top-up-enabled[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;font-weight:400}.opal-top-up-container[_ngcontent-%COMP%]   .top-up-card-block-content-detail[_ngcontent-%COMP%]{flex:1}.opal-top-up-container[_ngcontent-%COMP%]   .top-up-card-block[_ngcontent-%COMP%]   .opal-app-store-links[_ngcontent-%COMP%]{display:none;padding:20px}@media (max-width:767px){.opal-top-up-container[_ngcontent-%COMP%]   .top-up-card-block[_ngcontent-%COMP%]   .opal-app-store-links[_ngcontent-%COMP%]{display:block;padding:10px 20px}}.opal-top-up-container[_ngcontent-%COMP%]   .top-up-card-block[_ngcontent-%COMP%]   .opal-app-store-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{flex-grow:1;flex-basis:0;display:block;max-width:135px;max-height:40px}@media (max-width:767px){.opal-top-up-container[_ngcontent-%COMP%]   .top-up-card-block[_ngcontent-%COMP%]   .opal-app-store-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-top:10px}}.opal-top-up-container[_ngcontent-%COMP%]   .top-up-card-block[_ngcontent-%COMP%]   .opal-app-store-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:not(:last-child){margin-right:15px}@media (max-width:767px){.opal-top-up-container[_ngcontent-%COMP%]   .top-up-card-block[_ngcontent-%COMP%]   .opal-app-store-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:not(:last-child){margin-right:5px}}.opal-top-up-container[_ngcontent-%COMP%]   .top-up-card-block[_ngcontent-%COMP%]   .opal-app-store-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{display:none}.opal-top-up-container[_ngcontent-%COMP%]   .top-up-card-block[_ngcontent-%COMP%]   .opal-app-store-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]     svg{max-width:135px;max-height:40px}.opal-top-up-container[_ngcontent-%COMP%]   .top-up-card-block[_ngcontent-%COMP%]   .secure-msg[_ngcontent-%COMP%]{display:flex;border-top:1px solid #ddd;font-size:.85em;margin-top:20px;padding-top:15px;justify-content:center}@media (min-width:768px){.opal-top-up-container[_ngcontent-%COMP%]   .top-up-card-block[_ngcontent-%COMP%]   .secure-msg[_ngcontent-%COMP%]{font-size:.75em}}.opal-top-up-container[_ngcontent-%COMP%]   .top-up-card-block[_ngcontent-%COMP%]   .secure-msg[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{flex:1 1 content}.opal-top-up-container[_ngcontent-%COMP%]   .top-up-card-block[_ngcontent-%COMP%]   .secure-msg[_ngcontent-%COMP%]   tni-icon[_ngcontent-%COMP%]{flex:0 0 content;margin-right:8px;padding-left:20px}.opal-top-up-container[_ngcontent-%COMP%]   .opal-website-link[_ngcontent-%COMP%]{padding:10px;text-align:right;border-top:1px solid #ddd}.opal-top-up-container[_ngcontent-%COMP%]   .opal-website-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:underline}  .topup-spinner{padding:20px 0}.tab-link[_ngcontent-%COMP%]{font-weight:500;display:inline-block;font-size:1.4rem;vertical-align:middle;padding-left:10px}.tab-link[_ngcontent-%COMP%]:hover{text-decoration:none}  .tab-icon{vertical-align:middle}.top-up__panel-nav__auto-amount[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#00881f;vertical-align:middle;padding-left:5px}.top-up__nav__container[_ngcontent-%COMP%]{padding:29px 10px 24px}@media (min-width:768px){.top-up__nav__container[_ngcontent-%COMP%]{padding:60px 10px 56px}}.top-up__skeleton-loader[_ngcontent-%COMP%]{padding:16px 0 0;width:200px;margin:0 auto;display:flex;justify-content:space-around;align-items:center}@media (min-width:768px){.top-up__skeleton-loader[_ngcontent-%COMP%]{padding:24px 0 10px}}.skeleton-rounded-rectangle[_ngcontent-%COMP%]{flex:0 0 30px}.skeleton-bar-square-thick[_ngcontent-%COMP%]{margin:0;width:74%}"]}),e}()},yM0j:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CardTypeSVG=void 0,t.CardTypeSVG=function(e){return e.Adult="adult",e.Concession="concession",e["Senior/Pensioner"]="senior",e["Child/Youth"]="youth",e}(t.CardTypeSVG||{})},zKOy:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HeaderModule=void 0,n("fXoL");var o=n("ofXK"),r=(n("NYfO"),n("fXoL"));t.HeaderModule=function(){function e(){}return e.\u0275mod=r.\u0275\u0275defineNgModule({type:e}),e.\u0275inj=r.\u0275\u0275defineInjector({factory:function(t){return new(t||e)},imports:[[o.CommonModule]]}),e}()},zUnb:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("jhN1"),r=n("fXoL"),i=n("hnxR");n("bXO7").environment.production&&r.enableProdMode(),o.platformBrowser().bootstrapModule(i.AppModule)},zjfG:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AddressPipe=void 0,n("fXoL");var o=n("fXoL");t.AddressPipe=function(){function e(){}return e.prototype.transform=function(e){if(e){e=e.toString().trim();var t=/\d+\-?[a-zA-Z]?\s*\/\s*\d+\-?\d*[a-zA-Z]?/g.exec(e);return t&&t.forEach(function(t){var n=t.split("/"),o="Unit "+n[0].trim()+" "+n[1].trim();e=e.replace(t,o)}),e.toString().replace(/,/g," ")}},e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=o.\u0275\u0275definePipe({name:"address",type:e,pure:!0}),e}()},zn8P:function(e,t){function n(e){return Promise.resolve().then(function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0,5]]]);